import{a as Ke,m as Ue,h as Xe,f as fe,d as ze,u as kn,t as Cn,b as be,c as J,e as ke,i as Fe,g as x,S as Je,r as o,o as d,j as T,k as a,w as n,l as O,n as u,T as wn,p as Oa,q as Oe,s as ee,v as Se,x as Sn,y as w,z as Dn,A as $n,B as c,C as $e,D as An,E as I,F as Tn,G as L,H as $,I as qe,J as Ne,K as vt,L as ga,M as oe,N as kt,O as Ct,P as wt,Q as St,R as Me,U as Re,V as he,W as ie,X as Pa,Y as Dt,Z as Ia,_ as ha,$ as ma,a0 as X,a1 as En,a2 as $t,a3 as ja,a4 as Un,a5 as On,a6 as Ae,a7 as ae,a8 as _e,a9 as Fa,aa as ba,ab as pe,ac as Pn,ad as ye,ae as At,af as Ta,ag as Qe,ah as Tt,ai as In,aj as Fn,ak as Mn,al as Rn,am as Ln,an as qn,ao as Bn,ap as ya,aq as zn,ar as Et,as as Ut,at as ca,au as Kn,av as ta,aw as Ma,ax as va,ay as ka,az as Vn,aA as Hn,aB as Ot,aC as Pt,aD as Nn,aE as jn,aF as pa,aG as Wn,aH as It,aI as Yn,aJ as Ft,aK as Mt,aL as Gn,aM as Xn,aN as Ra,aO as Jn,aP as Rt,aQ as Lt,aR as Qn,aS as Zn,aT as xn,aU as el,aV as al,aW as tl,aX as nl,aY as ll,aZ as ol,a_ as sl,a$ as dl,b0 as Ca,b1 as qt,b2 as il,b3 as Bt,b4 as La,b5 as zt,b6 as Kt,b7 as Vt,b8 as rl,b9 as ul,ba as ml,bb as cl,bc as pl,bd as _l,be as fl,bf as gl,bg as hl}from"./vendor-7d287734.js";const Ea=(e,s)=>{const m=e[s];return m?typeof m=="function"?m():Promise.resolve(m):new Promise((l,h)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(h.bind(null,new Error("Unknown variable dynamic import: "+s)))})};var _a=Ke.create({baseURL:window.config.path+"/api/v1"});_a.defaults.headers.Accept="application/json";_a.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";_a.defaults.headers.common["X-CSRF-TOKEN"]=document.head.querySelector('meta[name="csrf-token"]').content;_a.interceptors.response.use(function(e){return e.data},function(e){if(e.response.status===401)window.location.href=window.config.path;else return Promise.reject(e.response)});window.axiosBase=_a;var na=Ke.create({baseURL:window.config.path+"/api/v1"});na.defaults.headers.Accept="application/json";na.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";na.defaults.headers.common["X-CSRF-TOKEN"]=document.head.querySelector('meta[name="csrf-token"]').content;localStorage.getItem("auth_token")&&(na.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("auth_token"));na.interceptors.response.use(function(e){return e.data},function(e){const s=e.response.status;if(s===401)window.location.href=window.config.path+"/admin/login",delete window.axiosAdmin.defaults.headers.common.Authorization,localStorage.removeItem("auth_token"),localStorage.setItem("auth_user",null);else if(s===400){var m=e.response.data.error.message;Ue.error(m)}else if(s===403){var m=e.response.data.error.message;Ue.error(m)}else if(s===404){var m=e.response.data.error.message;Ue.error(m)}return Promise.reject(e.response)});window.axiosAdmin=na;var la=Ke.create({baseURL:window.config.path+"/api/v1"});la.defaults.headers.Accept="application/json";la.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";la.defaults.headers.common["X-CSRF-TOKEN"]=document.head.querySelector('meta[name="csrf-token"]').content;localStorage.getItem("front_auth_token")&&(la.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("front_auth_token"));la.interceptors.response.use(function(e){return e.data},function(e){const s=e.response.status;if(s===401)window.location.href=window.config.path,delete window.axiosFront.defaults.headers.common.Authorization,localStorage.removeItem("front_auth_token"),localStorage.setItem("front_auth_user",null);else if(s===400){var m=e.response.data.error.message;Ue.error(m)}else if(s===403){var m=e.response.data.error.message;Ue.error(m)}else if(s===404){var m=e.response.data.error.message;Ue.error(m)}return Promise.reject(e.response)});window.axiosFront=la;const bl=window.config.modules;bl.forEach(e=>{require(`../../../../Modules/${e}/Resources/assets/js/plugins`)});Xe.suppressDeprecationWarnings=!0;window.moment=Xe;const sa="#5F63F2",yl="#4347D9",vl="#FF69A5",kl="#E34A87",Cl="#1890ff",wl="#0D79DF",Sl="rgba(0, 0, 0, 0.85)",$a="#20C997",Dl="#0CAB7C",Aa="#FA8B0C",$l="#D47407",Wa="#f5222d",Al="#E30D0F",Ya="#2C99FF",Tl="#0D79DF",xe="#272B41",El="#131623",Ga="#5A5F7D",Xa="#363A51",Ul="#9299B8",Ol="#e2e6ea",Ja="#ffffff",Pl="#5A5F7D",Il="#5A5F7D",Fl="#ADB4D2",Ml="#FF4D4F",Rl="#E30D0F",Qa="#F1F2F6",Za="#E3E6EF",Ll="#C6D0DC",ql="#EFF0F3",Bl="#F8F9FB",zl="#F4F5F7",Kl="#868EAE",xa="rgba(95,99,242,0.2)",Vl="#9299b8",Hl="#F63178",Nl="48px",jl="36px",Wl="29px",Ht={"primary-color":sa,"primary-hover":yl,"secondary-color":vl,"secondary-hover":kl,"link-color":Cl,"link-hover":wl,"success-color":$a,"success-hover":Dl,"warning-color":Aa,"warning-hover":$l,"error-color":Wa,"error-hover":Al,"info-color":Ya,"info-hover":Tl,"dark-color":xe,"dark-hover":El,"gray-color":Ga,"gray-hover":Xa,"light-color":Ul,"light-hover":Ol,"white-color":Ja,"white-hover":Il,white:Ja,black:"#000",pink:Hl,"dash-color":Pl,"dash-hover":Xa,"extra-light-color":Fl,"danger-color":Ml,"danger-hover":Rl,"font-family":"'Inter', sans-serif","font-size-base":"14px","heading-color":Sl,"text-color":xe,"text-color-secondary":Ga,"disabled-color":"rgba(0, 0, 0, 0.25)","border-radius-base":"4px","border-color-base":"#d9d9d9","box-shadow-base":"0 2px 8px rgba(0, 0, 0, 0.15)","border-color-light":Qa,"border-color-normal":Za,"border-color-deep":Ll,"bg-color-light":Bl,"bg-color-normal":zl,"bg-color-deep":ql,"light-gray-color":Kl,"gray-solid":Vl,"btn-height-large":Nl,"btn-height-small":jl,"btn-height-extra-small":Wl,"btn-default-color":xe,"card-head-background":"#ffffff","card-head-color":xe,"card-background":"#ffffff","card-head-padding":"16px","card-padding-base":"12px","card-radius":"10px","card-shadow":"0 5px 20px rgba(146,153,184,0.03)","layout-body-background":"#F4F5F7","layout-header-background":"#ffffff","layout-footer-background":"#fafafa","layout-header-height":"64px","layout-header-padding":"0 15px","layout-footer-padding":"24px 15px","layout-sider-background":"#ffffff","layout-trigger-height":"48px","layout-trigger-background":"#002140","layout-trigger-color":"#fff","layout-zero-trigger-width":"36px","layout-zero-trigger-height":"42px","layout-sider-background-light":"#fff","layout-trigger-background-light":"#fff","layout-trigger-color-light":"rgba(0, 0, 0, 0.65)","page-header-padding":"24px","page-header-padding-vertical":"16px","page-header-padding-breadcrumb":"12px","page-header-back-color":"#000","page-header-ghost-bg":"inherit","popover-color":xe,"alert-success-border-color":$a,"alert-success-bg-color":$a+15,"alert-error-bg-color":Wa+15,"alert-warning-bg-color":Aa+15,"alert-info-bg-color":Ya+15,"radio-button-checked-bg":sa,"grid-gutter-width":25,"skeleton-color":Qa,"slider-rail-background-color":xa,"slider-rail-background-color-hover":xa,"slider-track-background-color":sa,"slider-track-background-color-hover":sa,"slider-handle-color":sa,"slider-handle-size":"16px","input-height-base":"48px","input-border-color":Za,"input-height-sm":"30px","input-height-lg":"50px","rate-star-color":Aa,"rate-star-size":"13px","switch-min-width":"30px","switch-sm-min-width":"30px","switch-height":"18px","switch-sm-height":"15px","result-title-font-size":"20px","result-subtitle-font-size":"12px","result-icon-font-size":"50px","tabs-horizontal-padding":"12px 15px","tabs-horizontal-margin":"0","list-item-padding":"10px 24px","tag-default-bg":"#EFF0F3","tag-default-color":xe,"tag-font-size":"11px"};({...Ht});const Nt=(e,s)=>{var m=s.role.name=="admin";return fe(s.role.perms,l=>{l.name==e&&(m=!0)}),m},ge=e=>window.config.app_type=="non-saas"?e:`superadmin/${e}`;Xe.suppressDeprecationWarnings=!0;ze.extend(kn);ze.extend(Cn);const Q=()=>{const e=be(),{t:s}=J(),m=window.config.app_type,l=window.config.download_lang_csv_url,h=ke(()=>e.state.auth.menuCollapsed),y=ke(()=>e.state.auth.cssSettings),r=ke(()=>e.state.auth.activeModules),i=ke(()=>e.state.auth.visibleSubscriptionModules),p=ke(()=>e.state.auth.globalSetting),_=ke(()=>e.state.auth.appSetting),g=ke(()=>e.state.auth.addMenus),f=ke(()=>e.state.auth.lang),b=ke(()=>e.state.auth.user),v={enabled:"success",disabled:"error"},k=[{key:"enabled",value:s("common.enabled")},{key:"disabled",value:s("common.disabled")}],C=H=>H&&H>Xe().endOf("day"),S=H=>H==null?ze().tz(_.value.timezone):ze(H).tz(_.value.timezone),E=H=>H==null?ze().tz(_.value.timezone).format(`${_.value.date_format}`):ze(H).tz(_.value.timezone).format(`${_.value.date_format}`),A=H=>H==null?ze().tz(_.value.timezone).format(`${_.value.date_format} ${_.value.time_format}`):ze(H).tz(_.value.timezone).format(`${_.value.date_format} ${_.value.time_format}`),P=H=>{if(H==0)return 0;var j=parseInt(H),Y=Math.floor(j/3600);j%=3600;var se=Math.floor(j/60),Ce=j%60,G="";return Y>0&&(G+=`${Y} H,`),se>0&&(G+=` ${se} M,`),Ce>0&&(G=G.trim()+` ${Ce} S`),G.trim()},U=H=>parseFloat(parseFloat(H).toFixed(2)),D=H=>{const j=parseFloat(Math.abs(H)).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(_.value.currency.position=="front")var Y=`${_.value.currency.symbol}${j}`;else var Y=`${j}${_.value.currency.symbol}`;return H<0?`- ${Y}`:Y},M=(H,j)=>{const Y=parseFloat(Math.abs(H)).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(j.position=="front")var se=`${j.symbol}${Y}`;else var se=`${Y}${j.symbol}`;return H<0?`- ${se}`:se},q=H=>{var j="";return fe(H,(Y,se)=>{Y!=null&&(j+=`${se} eq "${Y}" and `)}),j.length>0&&(j=j.substring(0,j.length-4)),j},B=H=>Nt(H,b.value),N=H=>{e.commit("auth/updatePageTitle",s(`menu.${H}`))},R=ke(()=>{const H=b&&b.value&&b.value.role?[b.value.role.name]:[];return b&&b.value&&b.value.role&&fe(b.value.role.perms,j=>{H.push(j.name)}),H});return{menuCollapsed:h,appSetting:_,appType:m,addMenus:g,selectedLang:f,user:b,checkPermission:B,permsArray:R,statusColors:v,userStatus:k,disabledDate:C,formatAmount:U,formatAmountCurrency:D,formatAmountUsingCurrencyObject:M,convertToPositive:H=>H<0?H*-1:H,calculateFilterString:q,updatePageTitle:N,downloadLangCsvUrl:l,appModules:r,dayjs:ze,formatDate:E,formatDateTime:A,dayjsObject:S,slugify:H=>H.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,""),convertStringToKey:H=>H.toString().toLowerCase().replace(/\s+/g,"_").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"_").replace(/^-+/,"").replace(/-+$/,""),cssSettings:y,globalSetting:p,willSubscriptionModuleVisible:H=>m=="non-saas"?!0:_.value.subscription_plan&&_.value.subscription_plan.modules?Fe(_.value.subscription_plan.modules,H):!1,visibleSubscriptionModules:i,formatTimeDuration:P,getCampaignUrl:(H="active",j="self")=>{var Y=`call-managers?fields=id,xid,name,status,form_id,x_form_id,form{id,xid,name,form_fields}&campaign_status=${H}&view_type=${j}&limit=10000`;return Y},getCampaignStatsUrl:(H="active",j=void 0)=>{var Y=`leads/campaign-stats?campaign_status=${H}`;return j!=null&&(Y+=`&campaign_id=${j}`),Y}}};const K=(e,s)=>{const m=e.__vccOpts||e;for(const[l,h]of s)m[l]=h;return m},Yl=x({components:{SyncOutlined:Je},setup(){const{appSetting:e}=Q();return{appSetting:e}}}),Gl={class:"loading-app-container"},Xl={style:{color:"#7676e3"}},Jl=["src"];function Ql(e,s,m,l,h,y){const r=o("SyncOutlined"),i=o("a-result");return d(),T("div",Gl,[a(i,null,{title:n(()=>[O("span",Xl,u(e.$t("messages.loading_app_message")),1)]),icon:n(()=>[O("img",{style:{width:"150px"},src:e.appSetting.light_logo_url},null,8,Jl)]),extra:n(()=>[a(r,{style:{fontSize:"38px",color:"#5254cf"},spin:""})]),_:1})])}const Zl=K(Yl,[["render",Ql],["__scopeId","data-v-f4c8b84b"]]);const xl={name:"App",components:{ThemeProvider:wn,LoadingApp:Zl},setup(){const e=Oa(),s=Oe(),m=be(),l="dark",{updatePageTitle:h,appSetting:y,appType:r}=Q(),i=ke(()=>m.state.auth.appChecking);return ee(()=>{}),Se(e,(p,_)=>{const g=typeof p.meta.menuKey=="function"?p.meta.menuKey(p):p.meta.menuKey;h(g.replace("-","_")),r=="saas"&&y.value.is_global==0&&y.value.status=="license_expired"&&p&&p.meta&&!(p.meta.menuParent=="subscription"||p.name=="admin.login"||p.name=="verify.main")&&s.push({name:"admin.subscription.current_plan"})}),{theme:Sn,themeVars:Ht,darkTheme:l,appChecking:i,appSetting:y}}},eo={class:"theme-container"};function ao(e,s,m,l,h,y){const r=o("LoadingApp"),i=o("ThemeProvider"),p=o("a-config-provider"),_=o("router-view");return d(),w(_,null,{default:n(({Component:g,route:f})=>[(d(),w(Dn,null,{default:n(()=>[a(p,{theme:{token:{colorPrimary:l.appSetting.primary_color,fontFamily:"Nunito,sans-serif",borderRadius:4}},direction:l.appSetting.rtl?"rtl":"ltr"},{default:n(()=>[O("div",eo,[a(i,{theme:{...l.themeVars}},{default:n(()=>[l.appChecking?(d(),w(r,{key:0})):(d(),w($n(g),{key:1}))]),_:2},1032,["theme"])])]),_:2},1032,["theme","direction"])]),fallback:n(()=>[c(" Loading... ")]),_:2},1024))]),_:1})}const to=K(xl,[["render",ao]]),et="auth_user",at="auth_token",tt="expire_key",nt="app_settings",lt="global_settings",ot="per_page_item",st="all_langs",dt="selected_lang",it="page_title",rt="dark_theme",ut="active_modules",mt="css_settings",ct="add_menus",pt="email_setting_verified",_t="visible_subscription_modules";Xe.suppressDeprecationWarnings=!0;const Be=e=>{const s=window.localStorage.getItem(e);return s==="undefined"||s==="null"||s===void 0||s===null?null:JSON.parse(s)},no={namespaced:!0,state(){return{user:Be(et),allLangs:Be(st)||[],lang:window.localStorage.getItem(dt)||"en",token:window.localStorage.getItem(at)||null,expires:window.localStorage.getItem(tt)||null,globalSetting:Be(lt),appSetting:Be(nt),addMenus:Be(ct)||[],visibleSubscriptionModules:Be(_t)||[],perPage:window.localStorage.getItem(ot)||window.config.path,pageTitle:window.localStorage.getItem(it)||"",darkTheme:Be(rt),activeModules:Be(ut),cssSettings:Be(mt)||{leftRightPadding:"50px",headerMenuMode:"vertical"},appChecking:!0,emailSettingVerified:window.localStorage.getItem(pt)||!1,menuCollapsed:window.innerWidth<=991}},mutations:{updateUser(e,s){e.user=s,window.localStorage.setItem(et,JSON.stringify(s))},updateAppChecking(e,s){e.appChecking=s},updateToken(e,s){e.token=s,window.localStorage.setItem(at,s),axiosAdmin.defaults.headers.common.Authorization=`Bearer ${s}`},updateExpires(e,s){e.expires=new Date(s),window.localStorage.setItem(tt,s)},updateApp(e,s){e.appSetting=s,window.localStorage.setItem(nt,JSON.stringify(s));var m=document.querySelector("link[rel~='icon']");m.href=s.small_light_logo_url},updateGlobalSetting(e,s){e.globalSetting=s,window.localStorage.setItem(lt,JSON.stringify(s));var m=document.querySelector("link[rel~='icon']");m.href=s.small_light_logo_url},updateAddMenus(e,s){e.addMenus=s,window.localStorage.setItem(ct,JSON.stringify(s))},updatePerPage(e,s){e.perPage=s,window.localStorage.setItem(ot,s)},updateLang(e,s){e.lang=s,window.localStorage.setItem(dt,s)},updatePageTitle(e,s){e.pageTitle=s,window.localStorage.setItem(it,s),e.appSetting!==null&&e.appSetting!==void 0?document.title=`${s} - ${e.appSetting.name}`:document.title=`${s} - Stockify`},updateDarkTheme(e,s){e.darkTheme=s,window.localStorage.setItem(rt,s)},updateActiveModules(e,s){e.activeModules=s,window.localStorage.setItem(ut,JSON.stringify(s))},updateCssSettings(e,s){e.cssSettings=s,window.localStorage.setItem(mt,JSON.stringify(s))},updateAllLangs(e,s){e.allLangs=s,window.localStorage.setItem(st,JSON.stringify(s))},updateMenuCollapsed(e,s){e.menuCollapsed=s},updateEmailVerifiedSetting(e,s){e.emailSettingVerified=s,window.localStorage.setItem(pt,s)},updateVisibleSubscriptionModules(e,s){e.visibleSubscriptionModules=s,window.localStorage.setItem(_t,JSON.stringify(s))}},actions:{updateUser(e){axiosAdmin.post("/user").then(function(s){e.commit("updateUser",s.data.user)}).catch(function(s){})},updateGlobalSetting(e){axiosAdmin.get("/global-setting").then(function(s){e.commit("updateGlobalSetting",s.data.global_setting);var m=document.querySelector("link[rel~='icon']");m.href=globalSetting.small_light_logo_url}).catch(function(s){})},updateApp(e){axiosAdmin.get("/app").then(function(s){e.commit("updateApp",s.data.app),e.commit("updateAddMenus",s.data.shortcut_menus.credentials),e.commit("updateEmailVerifiedSetting",s.data.email_setting_verified);var m=document.querySelector("link[rel~='icon']");m.href=s.data.app.small_light_logo_url}).catch(function(s){})},updateAllLangs(e){axiosAdmin.get("/all-langs").then(function(s){e.commit("updateAllLangs",s.data.langs)}).catch(function(s){})},refreshToken(e){const s=e.state.token;s!==""&&s!=="undefined"&&s!="null"&&s!=null&&axiosAdmin.post("/auth/refresh-token").then(function(m){e.commit("updateUser",m.data.user),e.commit("updateToken",m.data.token),e.commit("updateExpires",m.data.expires_in)}).catch(function(m){})},logout(e){axiosAdmin.post("/auth/logout").then(function(s){window.sessionStorage.clear(),e.commit("updateUser",[]),e.commit("updateToken",null),e.commit("updateExpires",null),e.commit("updateEmailVerifiedSetting",0),ia.push({name:"admin.login"})}).catch(function(s){})},logoutToRootUrl(e){axiosAdmin.post("/auth/logout").then(function(s){e.commit("updateUser",[]),e.commit("updateToken",null),e.commit("updateExpires",null),window.location.href=window.config.path}).catch(function(s){})},updateVisibleSubscriptionModules(e){axiosAdmin.post("/visible-subscription-modules").then(function(s){e.commit("updateVisibleSubscriptionModules",s.data)}).catch(function(s){})},showNotificaiton(e,s){$e.success({message:"Success",description:"Hello",placement:"bottomRight"})}},getters:{isLoggedIn:e=>e.token===null||e.token===""?!1:Xe(e.expires).isAfter(Xe())}},lo=window.config.modules;var Ua={};lo.forEach(e=>{if(e){const s=require(`../../../../Modules/${e}/Resources/assets/js/store/index`).default;Ua={...Ua,...s}}});const ue=An({modules:{auth:no,...Ua}}),le=()=>{const e=I(!1),s=I({}),{t:m}=J(),{appSetting:l}=Q();return{loading:e,rules:s,addEditRequestAdmin:r=>{e.value=!0;const{url:i,data:p,success:_}=r;var g={};fe(p,function(f,b){f==null?g[b]=null:g[b]=f}),axiosAdmin.post(i,g).then(f=>{if(f&&f.is_error&&f.is_error=="yes"&&f.error&&typeof f.error.details<"u"){var b=f,v={};if(b.error&&typeof b.error.details<"u")for(var k=Object.keys(b.error.details),C=0;C<k.length;C++){var S=k[C].replace(".","\\.");v[S]={required:!0,message:b.error.details[k[C]][0]}}s.value=v,Ue.error(m("common.fix_errors")),b&&b.message&&(Ue.error(b.message),b={error:{...b}}),r.error&&r.error(b),e.value=!1}else r.successMessage&&$e.success({placement:l.value.rtl?"bottomLeft":"bottomRight",message:m("common.success"),description:r.successMessage}),_(f.data),e.value=!1,s.value={}}).catch(f=>{e.value=!1})},addEditFileRequestAdmin:r=>{e.value=!0;const{url:i,data:p,success:_}=r,g=new FormData;fe(p,function(f,b){f==null?g.append(b,""):r.fieldTypes&&r.fieldTypes.json&&Fe(r.fieldTypes.json,b)?g.append(b,JSON.stringify(f)):(r.fieldTypes&&r.fieldTypes.file&&Fe(r.fieldTypes.file,b),g.append(b,f))}),axiosAdmin.post(i,g,{headers:{"Content-Type":"multipart/form-data"}}).then(f=>{if(f&&f.is_error&&f.is_error=="yes"&&f.error&&typeof f.error.details<"u"){var b=f,v={};if(b.error&&typeof b.error.details<"u")for(var k=Object.keys(b.error.details),C=0;C<k.length;C++){var S=k[C].replace(".","\\.");v[S]={required:!0,message:b.error.details[k[C]][0]}}s.value=v,Ue.error(m("common.fix_errors")),b&&b.message&&(Ue.error(b.message),b={error:{...b}}),r.error&&r.error(b),e.value=!1}else r.successMessage&&$e.success({placement:l.value.rtl?"bottomLeft":"bottomRight",message:m("common.success"),description:r.successMessage}),_(f.data),e.value=!1,s.value={}}).catch(f=>{e.value=!1})}}},oo=x({props:["credentials"],components:{SnippetsOutlined:Tn},setup(){const e=window.config.app_env,s=window.config.app_type,m=I([{title:"Details",dataIndex:"details"},{title:"action",dataIndex:"action"}]),l=I([{name:"Admin",email:"admin@example.com",password:12345678},{name:"Manager",email:"manager@example.com",password:12345678},{name:"Member",email:"member@example.com",password:12345678}]);return ee(()=>{s=="saas"&&(l.value=[{name:"SuperAdmin",email:"superadmin@example.com",password:12345678},...l.value])}),{appEnv:e,demoCredentials:l,demoCredentialsColumns:m}}}),so={key:0},io=O("br",null,null,-1),ro=O("br",null,null,-1);function uo(e,s,m,l,h,y){const r=o("a-divider"),i=o("SnippetsOutlined"),p=o("a-tooltip"),_=o("a-table");return e.appEnv!="envato"?(d(),T("div",so,[a(r,null,{default:n(()=>[c(u(e.$t("common.demo_account_credentials")),1)]),_:1}),a(_,{pagination:!1,dataSource:e.demoCredentials,columns:e.demoCredentialsColumns},{bodyCell:n(({column:g,record:f})=>[g.dataIndex==="details"?(d(),T(L,{key:0},[O("b",null,u(f.name),1),c(),io,c(" Email : "+u(f.email)+" ",1),ro,c(" Password : "+u(f.password),1)],64)):$("",!0),g.dataIndex==="action"?(d(),w(p,{key:1,onClick:()=>{e.credentials.email=f.email,e.credentials.password=f.password}},{title:n(()=>[c(u(e.$t("popover.click_here_to_copy_credentials",[f.name])),1)]),default:n(()=>[a(i)]),_:2},1032,["onClick"])):$("",!0)]),_:1},8,["dataSource","columns"])])):$("",!0)}const mo=K(oo,[["render",uo]]);const co=x({components:{DemoCredentials:mo},setup(){const{addEditRequestAdmin:e,loading:s,rules:m}=le(),{globalSetting:l,appType:h}=Q(),y=l.value.login_image_url,r=be(),i=Oe(),p=qe({email:null,password:null}),_=I({error:"",success:""});return{loading:s,rules:m,credentials:p,onSubmit:()=>{_.value={error:"",success:!1},e({url:"auth/login",data:p,success:f=>{if(f&&f.status=="success"){const b=f.user;r.commit("auth/updateUser",b),r.commit("auth/updateToken",f.token),r.commit("auth/updateExpires",f.expires_in),r.commit("auth/updateVisibleSubscriptionModules",f.visible_subscription_modules),h=="non-saas"?i.push({name:"admin.dashboard.index",params:{success:!0}}):b.is_superadmin&&b.user_type=="super_admins"?(r.commit("auth/updateApp",f.app),r.commit("auth/updateEmailVerifiedSetting",f.email_setting_verified),i.push({name:"superadmin.dashboard.index",params:{success:!0}})):(r.commit("auth/updateApp",f.app),r.commit("auth/updateEmailVerifiedSetting",f.email_setting_verified),r.commit("auth/updateAddMenus",f.shortcut_menus.credentials),i.push({name:"admin.dashboard.index",params:{success:!0}}))}else _.value={error:f.message?f.message:"",success:!1}},error:f=>{}})},onRequestSend:_,globalSetting:l,loginBackground:y,innerWidth:window.innerWidth}}}),po={class:"login-main-container"},_o=O("div",{class:"login-logo mb-30"},[O("h1",null,"PolicyKaro")],-1),fo={class:"right-login-div"},go=["src"];function ho(e,s,m,l,h,y){const r=o("a-alert"),i=o("a-input"),p=o("a-form-item"),_=o("a-input-password"),g=o("a-button"),f=o("a-form"),b=o("a-card"),v=o("a-col"),k=o("a-row");return d(),T("div",po,[a(k,{class:"main-container-div"},{default:n(()=>[a(v,{xs:24,sm:24,md:24,lg:8},{default:n(()=>[a(k,{class:"login-left-div"},{default:n(()=>[a(v,{xs:{span:20,offset:2},sm:{span:20,offset:2},md:{span:16,offset:4},lg:{span:16,offset:4}},{default:n(()=>[a(b,{title:null,class:"login-div",bordered:e.innerWidth<=768},{default:n(()=>[a(f,{layout:"vertical"},{default:n(()=>[_o,e.onRequestSend.error!=""?(d(),w(r,{key:0,message:e.onRequestSend.error,type:"error","show-icon":"",class:"mb-20 mt-10"},null,8,["message"])):$("",!0),e.onRequestSend.success?(d(),w(r,{key:1,message:e.$t("messages.login_success"),type:"success","show-icon":"",class:"mb-20 mt-10"},null,8,["message"])):$("",!0),a(p,{label:e.$t("user.email_phone"),name:"email",help:e.rules.email?e.rules.email.message:null,validateStatus:e.rules.email?"error":null},{default:n(()=>[a(i,{value:e.credentials.email,"onUpdate:value":s[0]||(s[0]=C=>e.credentials.email=C),onPressEnter:e.onSubmit,placeholder:e.$t("common.placeholder_default_text",[e.$t("user.email_phone")])},null,8,["value","onPressEnter","placeholder"])]),_:1},8,["label","help","validateStatus"]),a(p,{label:e.$t("user.password"),name:"password",help:e.rules.password?e.rules.password.message:null,validateStatus:e.rules.password?"error":null},{default:n(()=>[a(_,{value:e.credentials.password,"onUpdate:value":s[1]||(s[1]=C=>e.credentials.password=C),onPressEnter:e.onSubmit,placeholder:e.$t("common.placeholder_default_text",[e.$t("user.password")])},null,8,["value","onPressEnter","placeholder"])]),_:1},8,["label","help","validateStatus"]),a(p,{class:"mt-30"},{default:n(()=>[a(g,{loading:e.loading,onClick:e.onSubmit,class:"login-btn",block:""},{default:n(()=>[c(u(e.$t("menu.login")),1)]),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["bordered"])]),_:1})]),_:1})]),_:1}),a(v,{xs:0,sm:0,md:24,lg:16},{default:n(()=>[O("div",fo,[O("img",{class:"right-image",src:e.loginBackground},null,8,go)])]),_:1})]),_:1})])}const bo=K(co,[["render",ho]]),qa=()=>{const e=I([]),s=I({}),m=I(""),l=I(""),h=I(""),y=I(!1),{t:r}=J(),i=I(window.config.product_name),p=I(window.config.product_version),_=be(),g=I([]),f=I([]),b=I(!1),v=I(""),k=I(0);var C;const S=()=>{const U=window.config.product_name,D=axiosAdmin.get(ge("modules")),M=Ke.post("https://envato.codeifly.com/product",{verified_name:U,domain:window.location.host});var q=[];Promise.all([D,M]).then(([B,N])=>{const R=N.data.product,F=window.config.installed_modules,z=window.config.modules;g.value=N.data.offers,f.value=N.data.settings,fe(R.modules,Z=>{const ne=Ne(F,["verified_name",Z.verified_name]);if(q.push({...Z,current_version:ne?ne.current_version:"-",status:Fe(z,Z.verified_name),installed:ne!=null}),!Z.verified||Z.other_domain_verified){var V=[...window.config.modules],W=vt(V,function(H){return H!=Z.verified_name});_.commit("auth/updateActiveModules",W),window.config.modules=W}}),e.value=q})},E=U=>{const{success:D}=U;y.value=!0,s.value={},l.value="",Ke.post("https://envato.codeifly.com/verify",{verified_name:i.value,purchase_code:m.value,domain:window.location.host,app_url:window.location.href,version:p.value}).then(M=>{y.value=!1,M.data.status=="success"?(y.value=!1,$e.success({message:r("common.success")}),h.value=r("messages.verify_success"),D(M.data)):($e.error({message:r("common.error")}),l.value=M.data.message)}).catch(M=>{y.value=!1;const q=M.response.data,B=M.response.status;var N={};if(B==422){if(q.errors&&typeof q.errors<"u")for(var R=Object.keys(q.errors),F=0;F<R.length;F++){var z=R[F].replace(".","\\.");N[z]={required:!0,message:q.errors[R[F]][0]}}s.value=N,Ue.error(r("common.fix_errors"))}else l.value=q.message?q.message:r("messages.somehing_went_wrong")})},A=U=>{b.value=!0,k.value=0,v.value="";const D={verified_name:U,domain:window.location.host};C=window.setInterval(function(){P()},1500),axiosAdmin.post(ge("modules/install"),D).then(M=>{b.value=!1,k.value=100,v.value="started",axiosAdmin.post(ge("modules/extract"),D).then(q=>{v.value="completed",Ke.post("https://envato.codeifly.com/version-update",{verified_name:q.data.verified_name,version:q.data.version,domain:window.location.host}),_.commit("auth/updateActiveModules",q.data.enabled_modules),window.config.modules=q.data.enabled_modules,window.config.installed_modules=q.data.installed_modules}).catch(q=>{v.value="failed"})}).catch(M=>{b.value=!1,k.value=0,clearInterval(C)})},P=()=>{axiosAdmin(ge("modules/download-percentage")).then(U=>{k.value=parseInt(U.data.percentage),k.value>=100&&clearInterval(C)})};return{allModules:e,getModuleData:S,install:A,verifyPurchase:E,rules:s,purchaseCode:m,errorMessage:l,successMessage:h,loading:y,productName:i,version:p,offers:g,settings:f,downloading:b,downloadPercentage:k,extracting:v}};const yo=x({setup(){const e=window.config.verify_purchase_background,s=Oe(),{rules:m,purchaseCode:l,errorMessage:h,successMessage:y,loading:r,verifyPurchase:i}=qa();return{rules:m,purchaseCode:l,loading:r,verify:()=>i({success:_=>{s.push({name:"admin.login"})}}),errorMessage:h,successMessage:y,verifyPurchaseBackground:e}}}),vo={class:"container-content"},ko={class:"text-center"},Co=["innerHTML"],wo=["innerHTML"];function So(e,s,m,l,h,y){const r=o("a-typography-title"),i=o("a-divider"),p=o("a-alert"),_=o("a-input"),g=o("a-form-item"),f=o("a-button"),b=o("a-form"),v=o("a-col"),k=o("a-row");return d(),T("div",{class:"main-container",style:ga({backgroundImage:`url(${e.verifyPurchaseBackground})`})},[O("div",vo,[a(k,{type:"flex",justify:"center"},{default:n(()=>[a(v,{span:8},{default:n(()=>[O("div",ko,[a(r,{level:4},{default:n(()=>[c(u(e.$t("common.verify_purchase")),1)]),_:1})]),a(i),e.successMessage!=""?(d(),w(p,{key:0,type:"success","show-icon":"",banner:""},{message:n(()=>[O("span",{innerHTML:e.successMessage},null,8,Co)]),_:1})):$("",!0),e.errorMessage!=""?(d(),w(p,{key:1,type:"error","show-icon":"",banner:""},{message:n(()=>[O("span",{innerHTML:e.errorMessage},null,8,wo)]),_:1})):$("",!0),a(b,{layout:"vertical",class:"mt-20"},{default:n(()=>[a(g,{label:e.$t("common.purchase_code"),name:"purchase_code",help:e.rules.purchase_code?e.rules.purchase_code.message:null,validateStatus:e.rules.purchase_code?"error":null,class:"required"},{default:n(()=>[a(_,{value:e.purchaseCode,"onUpdate:value":s[0]||(s[0]=C=>e.purchaseCode=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"]),a(g,null,{default:n(()=>[a(f,{type:"primary",onClick:e.verify,loading:e.loading},{default:n(()=>[c(u(e.$t("common.verify_purchase")),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1})]),_:1})])],4)}const Do=K(yo,[["render",So]]),$o=[{path:"/admin/login",component:bo,name:"admin.login",meta:{requireUnauth:!0,menuKey:e=>"login"}},{path:"/admin/verify",component:Do,name:"verify.main",meta:{requireUnauth:!0,menuKey:e=>"verify_product"}}],Ao="modulepreload",To=function(e){return"/build/"+e},ft={},Le=function(s,m,l){if(!m||m.length===0)return s();const h=document.getElementsByTagName("link");return Promise.all(m.map(y=>{if(y=To(y),y in ft)return;ft[y]=!0;const r=y.endsWith(".css"),i=r?'[rel="stylesheet"]':"";if(!!l)for(let g=h.length-1;g>=0;g--){const f=h[g];if(f.href===y&&(!r||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${y}"]${i}`))return;const _=document.createElement("link");if(_.rel=r?"stylesheet":Ao,r||(_.as="script",_.crossOrigin=""),_.href=y,document.head.appendChild(_),r)return new Promise((g,f)=>{_.addEventListener("load",g),_.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${y}`)))})})).then(()=>s()).catch(y=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=y,window.dispatchEvent(r),!r.defaultPrevented)throw y})},Eo=x({setup(){return{}}}),Uo={class:"breadcrumb-header"};function Oo(e,s,m,l,h,y){const r=o("a-col"),i=o("a-row"),p=o("a-card");return d(),T("div",Uo,[a(p,{class:"page-content-sub-header breadcrumb-left-border"},{default:n(()=>[a(i,null,{default:n(()=>[a(r,{span:24},{default:n(()=>[oe(e.$slots,"header",{key:"header"})]),_:3}),a(r,{span:24},{default:n(()=>[oe(e.$slots,"breadcrumb",{key:"breadcrumb"})]),_:3})]),_:3})]),_:3})])}const me=K(Eo,[["render",Oo]]),Po=[],Io=["bgColor"],Fo=kt("figure",Po)`
display: flex;
margin: 0;
position: relative;
h2,
p {
  margin: 0;
}
figcaption {
  .more {
	position: absolute;
	top: 0px;
	left: 0;
	a {
	  color: #888;
	}
  }
  h2 {
	font-size: 20px;
	font-weight: 600;
  }
  p {
	font-size: 14px;
	color: #9299B8;
  }
}
`,Mo=kt("div",Io)`
  width: 60px;
  height: 60px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: ${e=>e.bgColor?e.bgColor:"#5F63F2"};
margin - right: 20px;
`,Ro={props:{bgColor:{default:"#5F63F2"},bodyStyle:{default:{}}},components:{CardWidget:Fo,CardWidgetIcon:Mo}};function Lo(e,s,m,l,h,y){const r=o("CardWidgetIcon"),i=o("a-space"),p=o("CardWidget"),_=o("a-card");return d(),w(_,{bordered:!1,bodyStyle:m.bodyStyle},{default:n(()=>[a(p,null,{default:n(()=>[a(i,null,{default:n(()=>[a(r,{bgColor:m.bgColor},{default:n(()=>[oe(e.$slots,"image")]),_:3},8,["bgColor"]),O("figcaption",null,[oe(e.$slots,"description")])]),_:3})]),_:3})]),_:3},8,["bodyStyle"])}const jt=K(Ro,[["render",Lo]]);Ct.register(...wt);const qo={props:["data"],components:{DoughnutChart:St.DoughnutChart},setup(e){const s=I(),m=I({responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!1,text:"Chart.js Doughnut Chart"}}}),l=I({});return Se(e,(h,y)=>{l.value={labels:h.data.actionedCampaigns?h.data.actionedCampaigns.labels:[],datasets:[{data:h.data.actionedCampaigns?h.data.actionedCampaigns.values:[],backgroundColor:h.data.actionedCampaigns?h.data.actionedCampaigns.colors:[]}]}}),{chartRef:s,testData:l,options:m}}};function Bo(e,s,m,l,h,y){const r=o("DoughnutChart");return d(),w(r,{ref:"chartRef",chartData:l.testData,options:l.options},null,8,["chartData","options"])}const zo=K(qo,[["render",Bo]]);Ct.register(...wt);const Ko={props:["data"],components:{BarChart:St.BarChart},setup(e){const s=I(),{t:m}=J(),l=I({responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!1,text:"Chart.js Doughnut Chart"}}}),h=I({});return Se(e,(y,r)=>{h.value={labels:y.data.callMade.dates?y.data.callMade.dates:[],datasets:[{label:m("dashboard.call_made"),data:y.data.callMade.calls?y.data.callMade.calls:[],backgroundColor:"#20C997"}]}}),{chartRef:s,testData:h,options:l}}};function Vo(e,s,m,l,h,y){const r=o("BarChart");return d(),w(r,{ref:"chartRef",chartData:l.testData,options:l.options},null,8,["chartData","options"])}const Ho=K(Ko,[["render",Vo]]),Ve=()=>{const e=I({}),s=I(!1);return{viewDrawerData:e,isViewDrawerVisible:s,showViewDrawer:h=>{e.value=h,s.value=!0},hideViewDrawer:()=>{e.value={},s.value=!1}}},No={props:["responseData"],components:{PlayCircleOutlined:Me,EyeOutlined:Re},setup(){const e=Oe(),{formatDateTime:s}=Q(),m=Ve(),{t:l}=J(),h=I([{title:l("lead.campaign"),dataIndex:"campaign"},{title:l("salesman.salesman"),dataIndex:"salesman"},{title:l("lead.booking_time"),dataIndex:"booking_time"},{title:l("common.action"),dataIndex:"action"}]);return{formatDateTime:s,...m,appointmentColumns:h,goAndResumeLead:r=>{he.confirm({title:l("common.are_you_sure")+"?",icon:a(ie),content:l("lead.are_you_want_to_resume_this_lead"),centered:!0,okText:l("common.yes"),okType:"danger",cancelText:l("common.no"),onOk(){e.push({name:"admin.call_manager.take_action",params:{id:r.xid}})},onCancel(){}})}}}};function jo(e,s,m,l,h,y){const r=o("PlayCircleOutlined"),i=o("a-button"),p=o("EyeOutlined"),_=o("a-space"),g=o("a-tooltip"),f=o("a-table"),b=o("view-lead-details");return d(),T(L,null,[a(f,{columns:l.appointmentColumns,"row-key":v=>v.xid,"data-source":m.responseData.allAppointments,pagination:!1},{bodyCell:n(({column:v,record:k})=>[v.dataIndex==="campaign"?(d(),T(L,{key:0},[c(u(k.campaign.name),1)],64)):$("",!0),v.dataIndex==="salesman"?(d(),T(L,{key:1},[c(u(k.salesman_booking&&k.salesman_booking.user&&k.salesman_booking.user.name?k.salesman_booking.user.name:""),1)],64)):$("",!0),v.dataIndex==="booking_time"?(d(),T(L,{key:2},[c(u(k.salesman_booking&&k.salesman_booking.date_time?l.formatDateTime(k.salesman_booking.date_time):""),1)],64)):$("",!0),v.dataIndex==="action"?(d(),w(g,{key:3,title:e.$t("lead.go_resume_call")},{default:n(()=>[a(_,null,{default:n(()=>[a(i,{type:"primary",style:{backgroundColor:"#1ec997",borderColor:"#1ec997"},onClick:C=>l.goAndResumeLead(k)},{icon:n(()=>[a(r)]),_:2},1032,["onClick"]),a(i,{type:"primary",onClick:C=>e.showViewDrawer(k)},{icon:n(()=>[a(p)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["title"])):$("",!0)]),_:1},8,["columns","row-key","data-source"]),a(b,{visible:e.isViewDrawerVisible,lead:e.viewDrawerData,onClose:e.hideViewDrawer},null,8,["visible","lead","onClose"])],64)}const Wo=K(No,[["render",jo]]),Yo={props:["responseData"],components:{PlayCircleOutlined:Me,EyeOutlined:Re},setup(){const e=Oe(),{formatDateTime:s}=Q(),m=Ve(),{t:l}=J(),h=I([{title:l("lead.campaign"),dataIndex:"campaign"},{title:l("common.action"),dataIndex:"action"}]);return{formatDateTime:s,...m,appointmentColumns:h,goAndResumeLead:r=>{he.confirm({title:l("common.are_you_sure")+"?",icon:a(ie),content:l("lead.are_you_want_to_resume_this_lead"),centered:!0,okText:l("common.yes"),okType:"danger",cancelText:l("common.no"),onOk(){e.push({name:"admin.call_manager.take_action",params:{id:r.xid}})},onCancel(){}})}}}},Go=O("br",null,null,-1);function Xo(e,s,m,l,h,y){const r=o("PlayCircleOutlined"),i=o("a-button"),p=o("EyeOutlined"),_=o("a-space"),g=o("a-tooltip"),f=o("a-table"),b=o("view-lead-details");return d(),T(L,null,[a(f,{columns:l.appointmentColumns,"row-key":v=>v.xid,"data-source":m.responseData.allFollowUps,pagination:!1},{bodyCell:n(({column:v,record:k})=>[v.dataIndex==="campaign"?(d(),T(L,{key:0},[c(u(k.campaign.name)+" ",1),Go,O("small",null,u(k.lead_follow_up&&k.lead_follow_up.date_time?l.formatDateTime(k.lead_follow_up.date_time):""),1)],64)):$("",!0),v.dataIndex==="action"?(d(),w(g,{key:1,title:e.$t("lead.go_resume_call")},{default:n(()=>[a(_,null,{default:n(()=>[a(i,{type:"primary",style:{backgroundColor:"#1ec997",borderColor:"#1ec997"},onClick:C=>l.goAndResumeLead(k)},{icon:n(()=>[a(r)]),_:2},1032,["onClick"]),a(i,{type:"primary",onClick:C=>e.showViewDrawer(k)},{icon:n(()=>[a(p)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["title"])):$("",!0)]),_:1},8,["columns","row-key","data-source"]),a(b,{visible:e.isViewDrawerVisible,lead:e.viewDrawerData,onClose:e.hideViewDrawer},null,8,["visible","lead","onClose"])],64)}const Jo=K(Yo,[["render",Xo]]),Qo={props:["responseData"],components:{PlayCircleOutlined:Me,EyeOutlined:Re},setup(){const e=Oe(),{formatDateTime:s}=Q(),m=Ve(),{t:l}=J(),h=I([{title:l("lead.campaign"),dataIndex:"campaign"},{title:l("common.action"),dataIndex:"action"}]);return{formatDateTime:s,...m,appointmentColumns:h,goAndResumeLead:r=>{he.confirm({title:l("common.are_you_sure")+"?",icon:a(ie),content:l("lead.are_you_want_to_resume_this_lead"),centered:!0,okText:l("common.yes"),okType:"danger",cancelText:l("common.no"),onOk(){e.push({name:"admin.call_manager.take_action",params:{id:r.xid}})},onCancel(){}})}}}},Zo=O("br",null,null,-1);function xo(e,s,m,l,h,y){const r=o("PlayCircleOutlined"),i=o("a-button"),p=o("EyeOutlined"),_=o("a-space"),g=o("a-tooltip"),f=o("a-table"),b=o("view-lead-details");return d(),T(L,null,[a(f,{columns:l.appointmentColumns,"row-key":v=>v.xid,"data-source":m.responseData.allReminders,pagination:!1},{bodyCell:n(({column:v,record:k})=>[v.dataIndex==="campaign"?(d(),T(L,{key:0},[c(u(k.campaign.name)+" ",1),Zo,O("small",null,u(k.lead_follow_up&&k.lead_follow_up.date_time?l.formatDateTime(k.lead_follow_up.date_time):""),1)],64)):$("",!0),v.dataIndex==="action"?(d(),w(g,{key:1,title:e.$t("lead.go_resume_call")},{default:n(()=>[a(_,null,{default:n(()=>[a(i,{type:"primary",style:{backgroundColor:"#1ec997",borderColor:"#1ec997"},onClick:C=>l.goAndResumeLead(k)},{icon:n(()=>[a(r)]),_:2},1032,["onClick"]),a(i,{type:"primary",onClick:C=>e.showViewDrawer(k)},{icon:n(()=>[a(p)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["title"])):$("",!0)]),_:1},8,["columns","row-key","data-source"]),a(b,{visible:e.isViewDrawerVisible,lead:e.viewDrawerData,onClose:e.hideViewDrawer},null,8,["visible","lead","onClose"])],64)}const es=K(Qo,[["render",xo]]),as=x({props:{dateRange:{default:[]}},emits:["dateTimeChanged"],setup(e,{emit:s}){const m=I([]),{appSetting:l,dayjs:h}=Q();return ee(()=>{e.dateRange&&e.dateRange.length>0&&(m.value=[h(e.dateRange[0]),h(e.dateRange[1])])}),{appSetting:l,dateRangeValue:m,dateTimeChanged:i=>{i?s("dateTimeChanged",[i[0].tz(l.value.timezone).startOf("day").utc().format("YYYY-MM-DD HH:mm:ss"),i[1].tz(l.value.timezone).endOf("day").utc().format("YYYY-MM-DD HH:mm:ss")]):s("dateTimeChanged",[])},resetPicker:()=>{m.value=[]}}}});function ts(e,s,m,l,h,y){const r=o("a-range-picker");return d(),w(r,{value:e.dateRangeValue,"onUpdate:value":s[0]||(s[0]=i=>e.dateRangeValue=i),format:e.appSetting.date_format,placeholder:[e.$t("common.start_date"),e.$t("common.end_date")],style:{width:"100%"},onChange:e.dateTimeChanged},null,8,["value","format","placeholder","onChange"])}const oa=K(as,[["render",ts]]);const ns={components:{AdminPageHeader:me,StateWidget:jt,ActionedCampaigns:zo,CallMade:Ho,SalesmanBooking:Wo,Followups:Jo,Reminder:es,DateRangePicker:oa,MobileOutlined:Pa,CopyrightCircleOutlined:Dt,ClockCircleOutlined:Ia,ScheduleOutlined:ha,DoubleRightOutlined:ma},setup(){const{permsArray:e,appSetting:s,formatAmountCurrency:m}=Q(),{formatTimeDuration:l}=Q();J();const h=I([]),y=I([]),r="branches",i=qe({dates:[]}),p=g=>{const f={...i,branch_id:g},b=axiosAdmin.post("dashboard",f);Promise.all([b]).then(([v])=>{h.value=v.data})};ee(()=>{_(),p();const g=axiosAdmin.get(r);Promise.all([g]).then(([f])=>{y.value=f.data})});const _=()=>{const g=axiosAdmin.post("dashboard",i);Promise.all([g]).then(([f])=>{h.value=f.data})};return Se([i],(g,f)=>{_()}),{formatTimeDuration:l,filters:i,permsArray:e,responseData:h,branches:y,setUrlData:p}}},ls={class:"dashboard-page-content-container"},os=O("h2",null,"Select By Date Range",-1),ss=O("h2",null,"Select By Branch",-1),ds=O("h2",null,"Total lead",-1),is={key:0},rs={class:"mt-30 mb-20"},us=O("h3",null,[O("b",null,"Current Month")],-1),ms={key:0},cs={key:1},ps={key:2},_s={key:0},fs={key:0},gs={key:0},hs={key:0},bs={key:0},ys={class:"mt-30 mb-20"},vs=O("h3",null,[O("b",null,"Next Month")],-1),ks={key:0},Cs={key:1},ws={key:2},Ss={key:0},Ds={key:0},$s={key:0},As={key:0},Ts={key:0},Es={key:0},Us=O("div",null,[O("h3",{class:"text-primary"},"Please complete your followups to get Fresh Lead Link activated")],-1),Os=[Us];function Ps(e,s,m,l,h,y){const r=o("a-page-header"),i=o("AdminPageHeader"),p=o("DateRangePicker"),_=o("a-col"),g=o("a-select-option"),f=o("a-select"),b=o("a-row"),v=o("ScheduleOutlined"),k=o("router-link"),C=o("StateWidget"),S=o("ActionedCampaigns"),E=o("a-card"),A=o("CallMade"),P=o("DoubleRightOutlined"),U=o("a-button"),D=o("SalesmanBooking"),M=o("Followups"),q=o("Reminder");return d(),T(L,null,[a(i,null,{header:n(()=>[a(r,{title:e.$t("menu.dashboard"),style:{padding:"0px"}},null,8,["title"])]),_:1}),O("div",ls,[a(b,{gutter:[8,8],class:"mt-30 mb-30"},{default:n(()=>[a(_,{xs:24,sm:24,md:12,lg:6,xl:6},{default:n(()=>[os,a(p,{ref:"serachDateRangePicker",onDateTimeChanged:s[0]||(s[0]=B=>l.filters.dates=B)},null,512)]),_:1}),l.permsArray.includes("admin")?(d(),w(_,{key:0,xs:24,sm:24,md:6,lg:6},{default:n(()=>[ss,a(f,{placeholder:e.$t("common.select_default_text","Branch Name"),allowClear:!0,style:{width:"100%"},onChange:l.setUrlData},{default:n(()=>[(d(!0),T(L,null,X(l.branches,B=>(d(),w(g,{key:B.id,value:B.id},{default:n(()=>[c(u(B.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["placeholder","onChange"])]),_:1})):$("",!0),a(_,{xs:24,sm:24,md:6,lg:6},{default:n(()=>[ds,l.responseData.stateData?(d(),T("h2",is,u(l.responseData.getCount),1)):$("",!0)]),_:1})]),_:1}),O("div",rs,[us,a(b,{gutter:[15,15]},{default:n(()=>[a(_,{xs:24,sm:24,md:6,lg:8,xl:8},{default:n(()=>[a(C,{bgColor:"#389e0d"},{image:n(()=>[a(v,{style:{color:"#fff","font-size":"24px"}})]),description:n(()=>[l.responseData.stateData?(d(),T("h2",ms,u(l.responseData.stateData.total_fresh_leads),1)):$("",!0),e.total_follow_ups===0?(d(),T("p",cs,[a(k,{to:{path:"/admin/leads"},class:"text-primary"},{default:n(()=>[c(" Total Fresh Leads ")]),_:1})])):(d(),T("p",ps," Fresh Leads "))]),_:1})]),_:1}),a(_,{xs:24,sm:24,md:6,lg:8,xl:8},{default:n(()=>[a(C,{bgColor:"#389e0d"},{image:n(()=>[a(v,{style:{color:"#fff","font-size":"24px"}})]),description:n(()=>[l.responseData.stateData?(d(),T("h2",_s,u(l.responseData.stateData.total_follow_ups),1)):$("",!0),a(k,{to:{path:"/admin/bookings/lead-follow-up"},class:"text-primary"},{default:n(()=>[c(" Follow Up ")]),_:1})]),_:1})]),_:1}),a(_,{xs:24,sm:24,md:6,lg:8,xl:8},{default:n(()=>[a(C,{bgColor:"#389e0d"},{image:n(()=>[a(v,{style:{color:"#fff","font-size":"24px"}})]),description:n(()=>[l.responseData.stateData?(d(),T("h2",fs,u(l.responseData.stateData.total_callback_leads),1)):$("",!0),a(k,{to:{path:"/admin/leads"},class:"text-primary"},{default:n(()=>[c(" Total Callback Leads ")]),_:1})]),_:1})]),_:1}),a(_,{xs:24,sm:24,md:6,lg:8,xl:8},{default:n(()=>[a(C,{bgColor:"#389e0d"},{image:n(()=>[a(v,{style:{color:"#fff","font-size":"24px"}})]),description:n(()=>[l.responseData.stateData?(d(),T("h2",gs,u(l.responseData.stateData.total_converted_leads),1)):$("",!0),a(k,{to:{path:"/admin/leads"},class:"text-primary"},{default:n(()=>[c(" Total Converted Leads ")]),_:1})]),_:1})]),_:1}),a(_,{xs:24,sm:24,md:6,lg:8,xl:8},{default:n(()=>[a(C,{bgColor:"#389e0d"},{image:n(()=>[a(v,{style:{color:"#fff","font-size":"24px"}})]),description:n(()=>[l.responseData.stateData?(d(),T("h2",hs,u(l.responseData.stateData.total_lost_leads),1)):$("",!0),a(k,{to:{path:"/admin/leads"},class:"text-primary"},{default:n(()=>[c(" Total Lost Leads ")]),_:1})]),_:1})]),_:1}),a(_,{xs:24,sm:24,md:6,lg:8,xl:8},{default:n(()=>[a(C,{bgColor:"#389e0d"},{image:n(()=>[a(v,{style:{color:"#fff","font-size":"24px"}})]),description:n(()=>[l.responseData.stateData?(d(),T("h2",bs,u(l.responseData.stateData.total_yet_to_contact_leads),1)):$("",!0),a(k,{to:{path:"/admin/call-manager"},class:"text-primary"},{default:n(()=>[c(" Total Yet to Contact ")]),_:1})]),_:1})]),_:1})]),_:1})]),O("div",ys,[vs,a(b,{gutter:[15,15]},{default:n(()=>[a(_,{xs:24,sm:24,md:6,lg:8,xl:8},{default:n(()=>[a(C,{bgColor:"#389e0d"},{image:n(()=>[a(v,{style:{color:"#fff","font-size":"24px"}})]),description:n(()=>[l.responseData.stateData?(d(),T("h2",ks,u(l.responseData.stateData.total_fresh_leads_next_month),1)):$("",!0),e.total_follow_ups===0?(d(),T("p",Cs,[a(k,{to:{path:"/admin/leads"},class:"text-primary"},{default:n(()=>[c(" Total Fresh Leads ")]),_:1})])):(d(),T("p",ws," Fresh Leads "))]),_:1})]),_:1}),a(_,{xs:24,sm:24,md:6,lg:8,xl:8},{default:n(()=>[a(C,{bgColor:"#389e0d"},{image:n(()=>[a(v,{style:{color:"#fff","font-size":"24px"}})]),description:n(()=>[l.responseData.stateData?(d(),T("h2",Ss,u(l.responseData.stateData.total_followup_leads_next_month),1)):$("",!0),a(k,{to:{path:"/admin/bookings/lead-follow-up"},class:"text-primary"},{default:n(()=>[c(" Follow Up ")]),_:1})]),_:1})]),_:1}),a(_,{xs:24,sm:24,md:6,lg:8,xl:8},{default:n(()=>[a(C,{bgColor:"#389e0d"},{image:n(()=>[a(v,{style:{color:"#fff","font-size":"24px"}})]),description:n(()=>[l.responseData.stateData?(d(),T("h2",Ds,u(l.responseData.stateData.total_callback_leads_next_month),1)):$("",!0),a(k,{to:{path:"/admin/call-manager"},class:"text-primary"},{default:n(()=>[c(" Total Callback ")]),_:1})]),_:1})]),_:1}),a(_,{xs:24,sm:24,md:6,lg:8,xl:8},{default:n(()=>[a(C,{bgColor:"#389e0d"},{image:n(()=>[a(v,{style:{color:"#fff","font-size":"24px"}})]),description:n(()=>[l.responseData.stateData?(d(),T("h2",$s,u(l.responseData.stateData.total_converted_leads_next_month),1)):$("",!0),a(k,{to:{path:"/admin/leads"},class:"text-primary"},{default:n(()=>[c(" Total Converted Leads ")]),_:1})]),_:1})]),_:1}),a(_,{xs:24,sm:24,md:6,lg:8,xl:8},{default:n(()=>[a(C,{bgColor:"#389e0d"},{image:n(()=>[a(v,{style:{color:"#fff","font-size":"24px"}})]),description:n(()=>[l.responseData.stateData?(d(),T("h2",As,u(l.responseData.stateData.total_lost_leads_next_month),1)):$("",!0),a(k,{to:{path:"/admin/leads"},class:"text-primary"},{default:n(()=>[c(" Total Lost Leads ")]),_:1})]),_:1})]),_:1}),a(_,{xs:24,sm:24,md:6,lg:8,xl:8},{default:n(()=>[a(C,{bgColor:"#389e0d"},{image:n(()=>[a(v,{style:{color:"#fff","font-size":"24px"}})]),description:n(()=>[l.responseData.stateData?(d(),T("h2",Ts,u(l.responseData.stateData.total_yet_to_contact_leads_next_month),1)):$("",!0),a(k,{to:{path:"/admin/leads"},class:"text-primary"},{default:n(()=>[c(" Total Yet to Contact ")]),_:1})]),_:1})]),_:1})]),_:1})]),e.totalFollowUp!=0?(d(),T("p",Es,Os)):$("",!0),a(b,{gutter:[18,18],class:"mt-30 mb-20"},{default:n(()=>[a(_,{xs:24,sm:24,md:12,lg:6,xl:6},{default:n(()=>[a(E,{title:e.$t("dashboard.active_actioned_campaigns")},{default:n(()=>[a(S,{data:l.responseData},null,8,["data"])]),_:1},8,["title"])]),_:1}),a(_,{xs:24,sm:24,md:12,lg:18,xl:18},{default:n(()=>[a(E,{title:e.$t("dashboard.call_made")},{extra:n(()=>[a(U,{class:"mt-10",type:"link",onClick:s[1]||(s[1]=B=>e.$router.push({name:"admin.leads.index"}))},{default:n(()=>[c(u(e.$t("common.view_all"))+" ",1),a(P)]),_:1})]),default:n(()=>[a(A,{data:l.responseData},null,8,["data"])]),_:1},8,["title"])]),_:1})]),_:1}),a(b,{gutter:[18,18],class:"mt-30 mb-20"},{default:n(()=>[a(_,{xs:24,sm:24,md:12,lg:16,xl:16},{default:n(()=>[l.responseData&&l.responseData.allAppointments?(d(),w(E,{key:0,title:e.$t("salesman_booking.salesman_booking"),bodyStyle:{padding:"0px"}},{extra:n(()=>[a(U,{class:"mt-10",type:"link",onClick:s[2]||(s[2]=B=>e.$router.push({name:"admin.bookings.salesman_bookings.index"}))},{default:n(()=>[c(u(e.$t("common.view_all"))+" ",1),a(P)]),_:1})]),default:n(()=>[a(D,{responseData:l.responseData},null,8,["responseData"])]),_:1},8,["title"])):$("",!0)]),_:1}),a(_,{xs:24,sm:24,md:12,lg:8,xl:8},{default:n(()=>[l.responseData&&l.responseData.allFollowUps?(d(),w(E,{key:0,title:e.$t("lead_follow_up.follow_up"),bodyStyle:{padding:"0px"}},{extra:n(()=>[a(U,{class:"mt-10",type:"link",onClick:s[3]||(s[3]=B=>e.$router.push({name:"admin.bookings.lead_follow_up.index"}))},{default:n(()=>[c(u(e.$t("common.view_all"))+" ",1),a(P)]),_:1})]),default:n(()=>[a(M,{responseData:l.responseData},null,8,["responseData"])]),_:1},8,["title"])):$("",!0),l.responseData&&l.responseData.allFollowUps?(d(),w(E,{key:1,title:"Reminders",bodyStyle:{padding:"0px"}},{extra:n(()=>[a(U,{class:"mt-10",type:"link",onClick:s[4]||(s[4]=B=>e.$router.push({name:"admin.bookings.lead_follow_up.index"}))},{default:n(()=>[c(u(e.$t("common.view_all"))+" ",1),a(P)]),_:1})]),default:n(()=>[a(q,{responseData:l.responseData},null,8,["responseData"])]),_:1})):$("",!0)]),_:1})]),_:1})])],64)}const Is=K(ns,[["render",Ps]]),Fs=[{path:"/",component:()=>Le(()=>import("./Admin-ef1230f2.js"),["assets/Admin-ef1230f2.js","assets/vendor-7d287734.js","assets/vendor-ad46f743.css","assets/Admin-14aea5fe.css"]),children:[{path:"/admin/dashboard",component:Is,name:"admin.dashboard.index",meta:{requireAuth:!0,menuParent:"dashboard",menuKey:e=>"dashboard"}}]}],Wt=()=>{const{t:e}=J(),s="users?fields=id,xid,user_type,name,email,profile_image,profile_image_url,adhaar,adhaar_url,pan_card,pan_card_url,check_copy,check_copy_url,branch_id,phone,address,status,created_at,role_id,x_role_id,role{id,xid,name,display_name}",m="users",l=["role_id"],h={name:"",email:"",password:"",profile_image:void 0,profile_image_url:void 0,adhaar:void 0,adhaar_url:void 0,pan_card:void 0,pan_card_url:void 0,check_copy:void 0,check_copy_url:void 0,phone:"",address:"",status:"enabled",user_type:"staff_members",role_id:void 0,branch_id:void 0},y=[{title:e("user.name"),dataIndex:"name",key:"name"},{title:e("user.email"),dataIndex:"email"},{title:e("user.created_at"),dataIndex:"created_at"},{title:e("user.status"),dataIndex:"status",key:"status"},{title:e("common.action"),dataIndex:"action"}],r=[{key:"name",value:e("user.name")},{key:"email",value:e("user.email")},{key:"phone",value:e("user.phone")}];return{url:s,initData:h,columns:y,filterableColumns:r,addEditUrl:m,hashableColumns:l}},wa=()=>{const e=be(),s=qe({data:[],pagination:{pageSize:10,showSizeChanger:!0},loading:!1,sorter:{},searchColumn:void 0,searchString:"",searchStatus:void 0,filterLoading:!1,filterableColumns:[],selectedRowKeys:[],tableColumns:[]}),m=I(1),l=I({}),h=I([]),y=I(""),r=I({allowExport:!1,exportType:""}),i=v=>{const k=v.limit,C=(v.page-1)*k,S=p(k,C);return y.value=S,axiosAdmin.get(S)},p=(v,k)=>{var C=l.value.url,S="",E="",A=!1,P=!1;if("filterString"in l.value&&l.value.filterString!=""&&typeof l.value.filterString=="string"&&(S+=`${l.value.filterString} and `,A=!0),typeof l.value.filters=="object"&&ja(l.value.filters,(D,M)=>{D!=null&&D!=""&&(S+=`${M} eq "${D}" and `,A=!0,Fe(h.value,M)&&(E+=`${D},`,P=!0))}),s.searchColumn!=null&&s.searchString!="")S+=`${s.searchColumn} lk "%${s.searchString}%" and `,A=!0,s.filterLoading=!0;else if(s.searchString!=""&&s.filterableColumns.length>0){var U="";fe(s.filterableColumns,D=>{U+=`${D.key} lk "%${s.searchString}%" or `}),U.length>0&&(S+=`(${U.substring(0,U.length-3)})`,A=!1),s.filterLoading=!0}if(S.length>0&&A==!0?C+=`&filters=${encodeURIComponent(S.substring(0,S.length-5))}`:S.length>0&&A==!1&&(C+=`&filters=${encodeURIComponent(S)}`),l.value.extraFilters&&typeof l.value.extraFilters=="object"&&ja(l.value.extraFilters,(D,M)=>{D!=null&&D!=""&&(C+=`&${M}=${D}`,Fe(h.value,M)&&(E+=`${D},`,P=!0))}),s.sorter&&s.sorter.field){const D=s.sorter.order=="ascend"||s.sorter.order=="asc"?"asc":"desc";C+=`&order=${s.sorter.field} ${D}`}else C+="&order=id desc";return C+=`&offset=${k}&limit=${v}`,P&&(E=E.substring(0,E.length-1),C+=`&hashable=${E}`),C},_=(v,k,C)=>{const S={...s.pagination};S.current=v.current,S.pageSize=v.pageSize,s.pagination=S,m.value=v.current,C=s.sorter,g({limit:v.pageSize,page:v.current,sortField:C.field,sortOrder:C.order,...k})},g=(v={})=>{s.loading=!0,i({limit:s.pagination.pageSize,page:m.value,...v}).then(k=>{const C=k.data,S={...s.pagination};if(S.total=k.meta.paging.total,s.loading=!1,s.data=C,s.pagination=S,s.filterLoading=!1,s.selectedRowKeys=[],r.value.allowExport){var E=r.value.exportType;if(E!=""){var A=e.state.auth.allExportData,P=$t(A,U=>U.export_type!=E);e.commit("auth/updatAllExportData",[...P,{export_type:E,data:C,url:y.value}])}}v.success!=null&&v.success(C)})},f=En(()=>{g({page:1})},400);return{table:s,tableUrl:l,exportDetails:r,currentPage:m,hashable:h,handleTableChange:_,fetch:g,onTableSearch:f,onRowSelectChange:v=>{s.selectedRowKeys=v}}},Te=()=>{const{table:e,tableUrl:s,hashable:m,currentPage:l,handleTableChange:h,fetch:y,onTableSearch:r,onRowSelectChange:i,exportDetails:p}=wa(),_=I(!1),g=I({}),f=I(""),b=I(""),v=I({}),k=I([]),C=I({}),S=I(!1),E=I("add"),A=I(""),P=I({}),{t:U}=J(),D=be(),M=G=>{_.value=!0,g.value=G},q=()=>{A.value=f.value,E.value="add",S.value=!0,g.value={}},B=()=>{j(),S.value=!1},N=()=>{_.value=!1,g.value={}},R=G=>{console.log(G,"item");const te={};var ce=C.value;Object.keys(v.value).forEach(we=>{if(Un(ce,we)){const re=ce[we];te[we]=On(G,re)}else Fe(k.value,we)?te[we]=G[`x_${we}`]:te[we]=G[we]}),te._method="PUT",P.value=te,g.value=G,A.value=`${f.value}/${G.xid}`,E.value="edit",S.value=!0},F=()=>{D.dispatch("auth/updateVisibleSubscriptionModules")},z=G=>{V(G,"add-edit")},Z=G=>{V(G,"add-new")},ne=G=>{V(G,"add-continue")},V=(G,te="add-edit")=>{if(E.value=="add"){const ce={...e.pagination};ce.current=1,l.value=1,e.pagination=ce}F(),(te=="add-edit"||te=="add-new")&&j(),y({page:E.value=="add"?1:l.value,limit:10}),te=="add-edit"&&(S.value=!1)},W=G=>{he.confirm({title:U("common.delete")+"?",icon:a(ie),content:U(`${b.value}.delete_message`),centered:!0,okText:U("common.yes"),okType:"danger",cancelText:U("common.no"),onOk(){return axiosAdmin.delete(`${f.value}/${G}`).then(te=>{F(),y({page:l.value}),$e.success({message:U("common.success"),description:U(`${b.value}.deleted`),placement:"bottomRight"})}).catch(()=>{})},onCancel(){}})},H=()=>{he.confirm({title:U("common.delete")+"?",icon:a(ie),content:U(`${b.value}.selected_delete_message`),centered:!0,okText:U("common.yes"),okType:"danger",cancelText:U("common.no"),onOk(){const G=[];fe(e.selectedRowKeys,te=>{G.push(axiosAdmin.delete(`${f.value}/${te}`))}),Promise.all(G).then(te=>{F(),y({page:l.value}),$e.success({message:U("common.success"),description:U(`${b.value}.deleted`),placement:"bottomRight"})})},onCancel(){}})},j=()=>{P.value={...v.value}},Y=G=>{P.value={...P.value,...G}},se=ke(()=>b.value!=""?E.value=="add"?U(`${b.value}.add`):U(`${b.value}.edit`):""),Ce=ke(()=>b.value!=""?E.value=="add"?U(`${b.value}.created`):U(`${b.value}.updated`):"");return Se(k,(G,te)=>{m.value=G}),{detailsVisible:_,viewData:g,onCloseDetails:N,addEditVisible:S,addEditType:E,addEditUrl:A,currentPage:l,formData:P,initData:v,crudUrl:f,langKey:b,hashableColumns:k,multiDimensalObjectColumns:C,pageTitle:se,successMessage:Ce,viewItem:M,addItem:q,editItem:R,onCloseAddEdit:B,showDeleteConfirm:W,addEditSuccess:z,addAndNewSuccess:Z,addAndContinueSuccess:ne,restFormData:j,assignNewFormData:Y,showSelectedDeleteConfirm:H,table:e,tableUrl:s,hashable:m,handleTableChange:h,fetch:y,onTableSearch:r,onRowSelectChange:i,exportDetails:p}};const Ms=x({props:{formData:null,folder:String,imageField:{default:"image",type:String},url:{default:"upload-file",type:String}},components:{LoadingOutlined:Ae,PlusOutlined:ae},setup(e,{emit:s}){const m=I([]),l=I(!1),{t:h}=J();return{fileList:m,loading:l,customRequest:r=>{const i=new FormData;i.append("image",r.file),i.append("folder",e.folder),l.value=!0,axiosAdmin.post(e.url,i,{headers:{"Content-Type":"multipart/form-data"}}).then(p=>{m.value=[],l.value=!1,s("onFileUploaded",{file:p.data.file,file_url:p.data.file_url})}).catch(()=>{l.value=!1,Ue.error(h("messages.uploading_failed"))})}}}}),Rs={key:0},Ls=["src"],qs={key:1},Bs={class:"ant-upload-text"};function zs(e,s,m,l,h,y){const r=o("loading-outlined"),i=o("plus-outlined"),p=o("a-upload");return d(),w(p,{accept:"image/*","file-list":e.fileList,"onUpdate:fileList":s[0]||(s[0]=_=>e.fileList=_),name:"image","list-type":"picture-card",class:"avatar-uploader","show-upload-list":!1,customRequest:e.customRequest},{default:n(()=>[e.formData[e.imageField]!=null?(d(),T("div",Rs,[O("img",{style:{width:"128px"},src:e.formData[`${e.imageField}_url`],alt:"avatar"},null,8,Ls)])):(d(),T("div",qs,[e.loading?(d(),w(r,{key:0})):(d(),w(i,{key:1})),O("div",Bs,u(e.$t("common.upload")),1)]))]),_:1},8,["file-list","customRequest"])}const We=K(Ms,[["render",zs]]),Yt=()=>{const e="roles?fields=id,xid,name,display_name,description,perms.limit(10000)",s="roles",{t:m}=J(),l=qe({permissions:[]}),h={name:"",display_name:"",description:"",permissions:[]},y=[{title:m("role.role_name"),dataIndex:"display_name",sorter:!0},{title:m("role.description"),dataIndex:"description"},{title:m("common.action"),dataIndex:"action"}],r=[{key:"name",value:m("role.role_name")}];return{url:e,addEditUrl:s,initData:h,columns:y,filterableColumns:r,preFetchData:l,getPreFetchData:()=>{axiosAdmin.get("permissions?fields=id,xid,name,display_name&limit=10000").then(p=>{l.permissions=p.data})}}};const Ks=x({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ae,LoadingOutlined:Ae,SaveOutlined:_e},setup(e,{emit:s}){const{addEditRequestAdmin:m,loading:l,rules:h}=le(),y=I([]);J();const r=I([]),i=I([]),{slugify:p}=Q();ee(()=>{axiosAdmin.get("permissions?fields=id,xid,name,display_name&limit=10000").then(f=>{const b=[];f.data.map(v=>{b[v.name]=v.xid}),r.value=b})});const _=()=>{const f={...e.formData,permissions:i.value};m({url:e.url,data:f,successMessage:e.successMessage,success:b=>{s("addEditSuccess",b.xid)}})},g=()=>{h.value={},s("closed")};return Se(()=>e.visible,(f,b)=>{f&&e.addEditType=="edit"?e.data.perms.forEach(v=>{i.value.push(v.xid)}):i.value=[]}),{loading:l,rules:h,onClose:g,onSubmit:_,roles:y,permissions:r,drawerWidth:window.innerWidth<=991?"90%":"45%",checkedPermissions:i,slugify:p}}}),Vs={class:"d-flex flex-column scroll-y"},Hs={class:"tbl-responsive"},Ns={class:"table align-middle table-row-dashed row-gap"},js={class:"text-gray-600 fw-bold"},Ws={class:"text-gray-800"},Ys={class:"d-flex"},Gs={class:"form-check form-check-custom me-5 me-lg-20"},Xs={class:"form-check form-check-custom me-5 me-lg-20"},Js={class:"form-check form-check-custom me-5 me-lg-20"},Qs={class:"form-check form-check-custom me-5 me-lg-20"},Zs={class:"text-gray-800"},xs={class:"d-flex"},ed={class:"form-check form-check-custom me-5 me-lg-20"},ad={class:"form-check form-check-custom me-5 me-lg-20"},td={class:"form-check form-check-custom me-5 me-lg-20"},nd={class:"form-check form-check-custom me-5 me-lg-20"},ld={class:"text-gray-800"},od={class:"d-flex"},sd={class:"form-check form-check-custom me-5 me-lg-20"},dd={class:"form-check form-check-custom me-5 me-lg-20"},id={class:"form-check form-check-custom me-5 me-lg-20"},rd={class:"form-check form-check-custom me-5 me-lg-20"},ud={class:"text-gray-800"},md={class:"d-flex"},cd={class:"form-check form-check-custom me-5 me-lg-20"},pd={class:"form-check form-check-custom me-5 me-lg-20"},_d={class:"text-gray-800"},fd={class:"d-flex"},gd={class:"form-check form-check-custom me-5 me-lg-20"},hd={class:"form-check form-check-custom me-5 me-lg-20"},bd={class:"form-check form-check-custom me-5 me-lg-20"},yd={class:"text-gray-800"},vd={class:"d-flex"},kd={class:"form-check form-check-custom me-5 me-lg-20"},Cd={class:"form-check form-check-custom me-5 me-lg-20"},wd={class:"form-check form-check-custom me-5 me-lg-20"},Sd={class:"form-check form-check-custom me-5 me-lg-20"},Dd={class:"form-check form-check-custom me-5 me-lg-20"},$d={class:"text-gray-800"},Ad={class:"d-flex"},Td={class:"form-check form-check-custom me-5 me-lg-20"},Ed={class:"form-check form-check-custom me-5 me-lg-20"},Ud={class:"form-check form-check-custom me-5 me-lg-20"},Od={class:"form-check form-check-custom"},Pd={class:"text-gray-800"},Id={class:"d-flex"},Fd={class:"form-check form-check-custom me-5 me-lg-20"},Md={class:"form-check form-check-custom me-5 me-lg-20"},Rd={class:"form-check form-check-custom me-5 me-lg-20"},Ld={class:"form-check form-check-custom"},qd={class:"text-gray-800"},Bd={class:"d-flex"},zd={class:"form-check form-check-custom me-5 me-lg-20"},Kd={class:"form-check form-check-custom me-5 me-lg-20"},Vd={class:"form-check form-check-custom me-5 me-lg-20"},Hd={class:"form-check form-check-custom"},Nd={class:"text-gray-800"},jd={class:"d-flex"},Wd={class:"form-check form-check-custom me-5 me-lg-20"},Yd={class:"form-check form-check-custom me-5 me-lg-20"},Gd={class:"form-check form-check-custom me-5 me-lg-20"},Xd={class:"form-check form-check-custom me-5 me-lg-20"},Jd={class:"form-check form-check-custom me-5 me-lg-20"},Qd={class:"text-gray-800"},Zd={class:"d-flex"},xd={class:"form-check form-check-custom me-5 me-lg-20"},ei={class:"form-check form-check-custom me-5 me-lg-20"},ai={class:"form-check form-check-custom me-5 me-lg-20"},ti={class:"form-check form-check-custom me-5 me-lg-20"},ni={class:"text-gray-800"},li={class:"d-flex"},oi={class:"form-check form-check-custom me-5 me-lg-20"},si={class:"form-check form-check-custom me-5 me-lg-20"},di={class:"form-check form-check-custom me-5 me-lg-20"},ii={class:"form-check form-check-custom"},ri={class:"text-gray-800"},ui={class:"d-flex"},mi={class:"form-check form-check-custom me-5 me-lg-20"},ci={class:"form-check form-check-custom me-5 me-lg-20"},pi={class:"form-check form-check-custom me-5 me-lg-20"},_i={class:"form-check form-check-custom"},fi={class:"text-gray-800"},gi={class:"d-flex"},hi={class:"form-check form-check-custom me-5 me-lg-20"},bi={class:"form-check form-check-custom me-5 me-lg-20"},yi={class:"form-check form-check-custom me-5 me-lg-20"},vi={class:"form-check form-check-custom"},ki={class:"text-gray-800"},Ci={class:"d-flex"},wi={class:"form-check form-check-custom me-5 me-lg-20"},Si={class:"text-gray-800"},Di={class:"d-flex"},$i={class:"form-check form-check-custom me-5 me-lg-20"},Ai={class:"text-gray-800"},Ti={class:"d-flex"},Ei={class:"form-check form-check-custom me-5 me-lg-20"};function Ui(e,s,m,l,h,y){const r=o("a-input"),i=o("a-form-item"),p=o("a-col"),_=o("a-row"),g=o("a-textarea"),f=o("a-checkbox"),b=o("a-checkbox-group"),v=o("a-form"),k=o("SaveOutlined"),C=o("a-button"),S=o("a-drawer");return d(),w(S,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:n(()=>[a(C,{type:"primary",onClick:e.onSubmit,style:{"margin-right":"8px"},loading:e.loading},{icon:n(()=>[a(k)]),default:n(()=>[c(" "+u(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["onClick","loading"]),a(C,{onClick:e.onClose},{default:n(()=>[c(u(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[a(v,{layout:"vertical"},{default:n(()=>[a(_,{gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(i,{label:e.$t("role.display_name"),name:"display_name",help:e.rules.display_name?e.rules.display_name.message:null,validateStatus:e.rules.display_name?"error":null,class:"required"},{default:n(()=>[a(r,{value:e.formData.display_name,"onUpdate:value":s[0]||(s[0]=E=>e.formData.display_name=E),placeholder:e.$t("common.placeholder_default_text",[e.$t("role.display_name")]),onKeyup:s[1]||(s[1]=E=>e.formData.name=e.slugify(E.target.value))},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(p,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(i,{label:e.$t("role.role_name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:n(()=>[a(r,{value:e.formData.name,"onUpdate:value":s[2]||(s[2]=E=>e.formData.name=E),placeholder:e.$t("common.placeholder_default_text",[e.$t("role.role_name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(_,{gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("role.description"),name:"description",help:e.rules.description?e.rules.description.message:null,validateStatus:e.rules.description?"error":null},{default:n(()=>[a(g,{value:e.formData.description,"onUpdate:value":s[3]||(s[3]=E=>e.formData.description=E),placeholder:e.$t("common.placeholder_default_text",[e.$t("role.description")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(_,{gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("role.permissions"),name:"permissions",help:e.rules.permissions?e.rules.permissions.message:null,validateStatus:e.rules.permissions?"error":null},{default:n(()=>[O("div",Vs,[O("div",Hs,[a(b,{value:e.checkedPermissions,"onUpdate:value":s[4]||(s[4]=E=>e.checkedPermissions=E)},{default:n(()=>[O("table",Ns,[O("tbody",js,[O("tr",null,[O("td",Ws,u(e.$t("menu.staff_members")),1),O("td",null,[O("div",Ys,[O("label",Gs,[a(f,{value:e.permissions.users_view},{default:n(()=>[c(u(e.$t("common.view")),1)]),_:1},8,["value"])]),O("label",Xs,[a(f,{value:e.permissions.users_create},{default:n(()=>[c(u(e.$t("common.add")),1)]),_:1},8,["value"])]),O("label",Js,[a(f,{value:e.permissions.users_edit},{default:n(()=>[c(u(e.$t("common.edit")),1)]),_:1},8,["value"])]),O("label",Qs,[a(f,{value:e.permissions.users_delete},{default:n(()=>[c(u(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),O("tr",null,[O("td",Zs,u(e.$t("menu.salesmans")),1),O("td",null,[O("div",xs,[O("label",ed,[a(f,{value:e.permissions.salesmans_view},{default:n(()=>[c(u(e.$t("common.view")),1)]),_:1},8,["value"])]),O("label",ad,[a(f,{value:e.permissions.salesmans_create},{default:n(()=>[c(u(e.$t("common.add")),1)]),_:1},8,["value"])]),O("label",td,[a(f,{value:e.permissions.salesmans_edit},{default:n(()=>[c(u(e.$t("common.edit")),1)]),_:1},8,["value"])]),O("label",nd,[a(f,{value:e.permissions.salesmans_delete},{default:n(()=>[c(u(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),O("tr",null,[O("td",ld,u(e.$t("menu.campaigns")),1),O("td",null,[O("div",od,[O("label",sd,[a(f,{value:e.permissions.campaigns_view},{default:n(()=>[c(u(e.$t("common.view")),1)]),_:1},8,["value"])]),O("label",dd,[a(f,{value:e.permissions.campaigns_create},{default:n(()=>[c(u(e.$t("common.add")),1)]),_:1},8,["value"])]),O("label",id,[a(f,{value:e.permissions.campaigns_edit},{default:n(()=>[c(u(e.$t("common.edit")),1)]),_:1},8,["value"])]),O("label",rd,[a(f,{value:e.permissions.campaigns_delete},{default:n(()=>[c(u(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),O("tr",null,[O("td",ud,u(e.$t("campaign.campaign_view")),1),O("td",null,[O("div",md,[O("label",cd,[a(f,{value:e.permissions.campaigns_view_all},{default:n(()=>[c(u(e.$t("common.view_all")),1)]),_:1},8,["value"])]),O("label",pd,[a(f,{value:e.permissions.view_completed_campaigns},{default:n(()=>[c(u(e.$t("campaign.view_completed_campaigns")),1)]),_:1},8,["value"])])])])]),O("tr",null,[O("td",_d,u(e.$t("menu.leads")),1),O("td",null,[O("div",fd,[O("label",gd,[a(f,{value:e.permissions.leads_view_all},{default:n(()=>[c(u(e.$t("common.view_all")),1)]),_:1},8,["value"])]),O("label",hd,[a(f,{value:e.permissions.leads_create},{default:n(()=>[c(u(e.$t("common.add")),1)]),_:1},8,["value"])]),O("label",bd,[a(f,{value:e.permissions.leads_delete},{default:n(()=>[c(u(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),O("tr",null,[O("td",yd,u(e.$t("menu.email_templates")),1),O("td",null,[O("div",vd,[O("label",kd,[a(f,{value:e.permissions.email_templates_view},{default:n(()=>[c(u(e.$t("common.view")),1)]),_:1},8,["value"])]),O("label",Cd,[a(f,{value:e.permissions.email_templates_view_all},{default:n(()=>[c(u(e.$t("common.view_all")),1)]),_:1},8,["value"])]),O("label",wd,[a(f,{value:e.permissions.email_templates_create},{default:n(()=>[c(u(e.$t("common.add")),1)]),_:1},8,["value"])]),O("label",Sd,[a(f,{value:e.permissions.email_templates_edit},{default:n(()=>[c(u(e.$t("common.edit")),1)]),_:1},8,["value"])]),O("label",Dd,[a(f,{value:e.permissions.email_templates_delete},{default:n(()=>[c(u(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),O("tr",null,[O("td",$d,u(e.$t("menu.expense_categories")),1),O("td",null,[O("div",Ad,[O("label",Td,[a(f,{value:e.permissions.expense_categories_view},{default:n(()=>[c(u(e.$t("common.view")),1)]),_:1},8,["value"])]),O("label",Ed,[a(f,{value:e.permissions.expense_categories_create},{default:n(()=>[c(u(e.$t("common.add")),1)]),_:1},8,["value"])]),O("label",Ud,[a(f,{value:e.permissions.expense_categories_edit},{default:n(()=>[c(u(e.$t("common.edit")),1)]),_:1},8,["value"])]),O("label",Od,[a(f,{value:e.permissions.expense_categories_delete},{default:n(()=>[c(u(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),O("tr",null,[O("td",Pd,u(e.$t("menu.expenses")),1),O("td",null,[O("div",Id,[O("label",Fd,[a(f,{value:e.permissions.expenses_view},{default:n(()=>[c(u(e.$t("common.view")),1)]),_:1},8,["value"])]),O("label",Md,[a(f,{value:e.permissions.expenses_create},{default:n(()=>[c(u(e.$t("common.add")),1)]),_:1},8,["value"])]),O("label",Rd,[a(f,{value:e.permissions.expenses_edit},{default:n(()=>[c(u(e.$t("common.edit")),1)]),_:1},8,["value"])]),O("label",Ld,[a(f,{value:e.permissions.expenses_delete},{default:n(()=>[c(u(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),O("tr",null,[O("td",qd,u(e.$t("menu.products")),1),O("td",null,[O("div",Bd,[O("label",zd,[a(f,{value:e.permissions.products_view},{default:n(()=>[c(u(e.$t("common.view")),1)]),_:1},8,["value"])]),O("label",Kd,[a(f,{value:e.permissions.products_create},{default:n(()=>[c(u(e.$t("common.add")),1)]),_:1},8,["value"])]),O("label",Vd,[a(f,{value:e.permissions.products_edit},{default:n(()=>[c(u(e.$t("common.edit")),1)]),_:1},8,["value"])]),O("label",Hd,[a(f,{value:e.permissions.products_delete},{default:n(()=>[c(u(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),O("tr",null,[O("td",Nd,u(e.$t("menu.forms")),1),O("td",null,[O("div",jd,[O("label",Wd,[a(f,{value:e.permissions.forms_view},{default:n(()=>[c(u(e.$t("common.view")),1)]),_:1},8,["value"])]),O("label",Yd,[a(f,{value:e.permissions.forms_view_all},{default:n(()=>[c(u(e.$t("common.view_all")),1)]),_:1},8,["value"])]),O("label",Gd,[a(f,{value:e.permissions.forms_create},{default:n(()=>[c(u(e.$t("common.add")),1)]),_:1},8,["value"])]),O("label",Xd,[a(f,{value:e.permissions.forms_edit},{default:n(()=>[c(u(e.$t("common.edit")),1)]),_:1},8,["value"])]),O("label",Jd,[a(f,{value:e.permissions.forms_delete},{default:n(()=>[c(u(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),O("tr",null,[O("td",Qd,u(e.$t("menu.form_field_names")),1),O("td",null,[O("div",Zd,[O("label",xd,[a(f,{value:e.permissions.form_field_names_view},{default:n(()=>[c(u(e.$t("common.view")),1)]),_:1},8,["value"])]),O("label",ei,[a(f,{value:e.permissions.form_field_names_create},{default:n(()=>[c(u(e.$t("common.add")),1)]),_:1},8,["value"])]),O("label",ai,[a(f,{value:e.permissions.form_field_names_edit},{default:n(()=>[c(u(e.$t("common.edit")),1)]),_:1},8,["value"])]),O("label",ti,[a(f,{value:e.permissions.form_field_names_delete},{default:n(()=>[c(u(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),O("tr",null,[O("td",ni,u(e.$t("menu.translations")),1),O("td",null,[O("div",li,[O("label",oi,[a(f,{value:e.permissions.translations_view},{default:n(()=>[c(u(e.$t("common.view")),1)]),_:1},8,["value"])]),O("label",si,[a(f,{value:e.permissions.translations_create},{default:n(()=>[c(u(e.$t("common.add")),1)]),_:1},8,["value"])]),O("label",di,[a(f,{value:e.permissions.translations_edit},{default:n(()=>[c(u(e.$t("common.edit")),1)]),_:1},8,["value"])]),O("label",ii,[a(f,{value:e.permissions.translations_delete},{default:n(()=>[c(u(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),O("tr",null,[O("td",ri,u(e.$t("menu.roles")),1),O("td",null,[O("div",ui,[O("label",mi,[a(f,{value:e.permissions.roles_view},{default:n(()=>[c(u(e.$t("common.view")),1)]),_:1},8,["value"])]),O("label",ci,[a(f,{value:e.permissions.roles_create},{default:n(()=>[c(u(e.$t("common.add")),1)]),_:1},8,["value"])]),O("label",pi,[a(f,{value:e.permissions.roles_edit},{default:n(()=>[c(u(e.$t("common.edit")),1)]),_:1},8,["value"])]),O("label",_i,[a(f,{value:e.permissions.roles_delete},{default:n(()=>[c(u(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),O("tr",null,[O("td",fi,u(e.$t("menu.currencies")),1),O("td",null,[O("div",gi,[O("label",hi,[a(f,{value:e.permissions.currencies_view},{default:n(()=>[c(u(e.$t("common.view")),1)]),_:1},8,["value"])]),O("label",bi,[a(f,{value:e.permissions.currencies_create},{default:n(()=>[c(u(e.$t("common.add")),1)]),_:1},8,["value"])]),O("label",yi,[a(f,{value:e.permissions.currencies_edit},{default:n(()=>[c(u(e.$t("common.edit")),1)]),_:1},8,["value"])]),O("label",vi,[a(f,{value:e.permissions.currencies_delete},{default:n(()=>[c(u(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),O("tr",null,[O("td",ki,u(e.$t("menu.company")),1),O("td",null,[O("div",Ci,[O("label",wi,[a(f,{value:e.permissions.companies_edit},{default:n(()=>[c(u(e.$t("common.edit")),1)]),_:1},8,["value"])])])])]),O("tr",null,[O("td",Si,u(e.$t("menu.storage_settings")),1),O("td",null,[O("div",Di,[O("label",$i,[a(f,{value:e.permissions.storage_edit},{default:n(()=>[c(u(e.$t("common.edit")),1)]),_:1},8,["value"])])])])]),O("tr",null,[O("td",Ai,u(e.$t("menu.email_settings")),1),O("td",null,[O("div",Ti,[O("label",Ei,[a(f,{value:e.permissions.email_edit},{default:n(()=>[c(u(e.$t("common.edit")),1)]),_:1},8,["value"])])])])])])])]),_:1},8,["value"])])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])}const Gt=K(Ks,[["render",Ui]]),Oi=x({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:ae,AddEdit:Gt},setup(e,{emit:s}){const{permsArray:m}=Q(),{initData:l,addEditUrl:h}=Yt(),y=I(!1),r=I("add"),i=I({...l});return{permsArray:m,visible:y,addEditType:r,addEditUrl:h,formData:i,addEditSuccess:()=>{y.value=!1,i.value={...l},s("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),Pi={key:0};function Ii(e,s,m,l,h,y){const r=o("a-menu-item"),i=o("PlusOutlined"),p=o("a-button"),_=o("a-tooltip"),g=o("AddEdit");return e.permsArray.includes("roles_create")||e.permsArray.includes("admin")?(d(),T("div",Pi,[e.customType=="menu"?(d(),w(r,{onClick:e.showAdd,key:"categories"},{icon:n(()=>[oe(e.$slots,"icon")]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick"])):(d(),T(L,{key:1},[e.tooltip?(d(),w(_,{key:0,placement:"topLeft",title:e.$t("role.add"),"arrow-point-at-center":""},{default:n(()=>[a(p,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:n(()=>[a(i)]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(d(),w(p,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:n(()=>[a(i)]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),a(g,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("role.add"),successMessage:e.$t("role.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):$("",!0)}const Xt=K(Oi,[["render",Ii]]),Fi=x({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ae,LoadingOutlined:Ae,SaveOutlined:_e,Upload:We,RoleAddButton:Xt},setup(e,{emit:s}){const{permsArray:m,user:l,appSetting:h}=Q(),{addEditRequestAdmin:y,loading:r,rules:i}=le(),p=be(),_=I([]),g="roles?limit=10000",f=I([]),b="branches";return ee(()=>{const E=axiosAdmin.get(g),A=axiosAdmin.get(b);Promise.all([E,A]).then(([P,U])=>{_.value=P.data,f.value=U.data})}),{loading:r,rules:i,onClose:()=>{i.value={},s("closed")},onSubmit:()=>{if(!e.formData.branch_id){console.warn("Branch ID is missing! Please select a branch.");return}console.log(e.formData),y({url:e.url,data:e.formData,successMessage:e.successMessage,success:E=>{s("addEditSuccess",E.xid),l.value.xid==E.xid&&p.dispatch("auth/updateUser")}})},roles:_,roleAdded:()=>{axiosAdmin.get(g).then(E=>{_.value=E.data})},branches:f,branchAdded:()=>{axiosAdmin.get(b).then(E=>{f.value=E.data})},permsArray:m,appSetting:h,drawerWidth:window.innerWidth<=991?"90%":"45%"}}}),Mi={style:{display:"flex"}};function Ri(e,s,m,l,h,y){const r=o("Upload"),i=o("a-form-item"),p=o("a-col"),_=o("a-select-option"),g=o("a-select"),f=o("RoleAddButton"),b=o("a-row"),v=o("a-input"),k=o("a-input-password"),C=o("a-textarea"),S=o("a-form"),E=o("SaveOutlined"),A=o("a-button"),P=o("a-drawer");return d(),w(P,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:n(()=>[a(A,{type:"primary",onClick:e.onSubmit,style:{"margin-right":"8px"},loading:e.loading},{icon:n(()=>[a(E)]),default:n(()=>[c(" "+u(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["onClick","loading"]),a(A,{onClick:e.onClose},{default:n(()=>[c(u(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[a(S,{layout:"vertical"},{default:n(()=>[a(b,null,{default:n(()=>[a(p,{xs:24,sm:24,md:6,lg:6},{default:n(()=>[a(i,{label:e.$t("user.profile_image"),name:"profile_image",help:e.rules.profile_image?e.rules.profile_image.message:null,validateStatus:e.rules.profile_image?"error":null},{default:n(()=>[a(r,{formData:e.formData,folder:"user",imageField:"profile_image",onOnFileUploaded:s[0]||(s[0]=U=>{e.formData.profile_image=U.file,e.formData.profile_image_url=U.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(p,{xs:24,sm:24,md:6,lg:6},{default:n(()=>[a(i,{label:e.$t("user.adhaar"),name:"adhaar",help:e.rules.profile_image?e.rules.profile_image.message:null,validateStatus:e.rules.profile_image?"error":null},{default:n(()=>[a(r,{formData:e.formData,folder:"user",imageField:"adhaar",onOnFileUploaded:s[1]||(s[1]=U=>{e.formData.adhaar=U.file,e.formData.adhaar_url=U.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(p,{xs:24,sm:24,md:6,lg:6},{default:n(()=>[a(i,{label:e.$t("user.pan_card"),name:"pan_card",help:e.rules.profile_image?e.rules.profile_image.message:null,validateStatus:e.rules.profile_image?"error":null},{default:n(()=>[a(r,{formData:e.formData,folder:"user",imageField:"pan_card",onOnFileUploaded:s[2]||(s[2]=U=>{e.formData.pan_card=U.file,e.formData.pan_card_url=U.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(p,{xs:24,sm:24,md:6,lg:6},{default:n(()=>[a(i,{label:e.$t("user.pan_card"),name:"pan_card",help:e.rules.profile_image?e.rules.profile_image.message:null,validateStatus:e.rules.profile_image?"error":null},{default:n(()=>[a(r,{formData:e.formData,folder:"user",imageField:"check_copy",onOnFileUploaded:s[3]||(s[3]=U=>{e.formData.check_copy=U.file,e.formData.check_copy_url=U.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(p,{xs:24,sm:24,md:18,lg:18},{default:n(()=>{var U;return[e.permsArray.includes("admin")?(d(),w(b,{key:0,gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("user.role"),name:"role_id",help:e.rules.role_id?e.rules.role_id.message:null,validateStatus:e.rules.role_id?"error":null,class:"required"},{default:n(()=>[O("span",Mi,[a(g,{value:e.formData.role_id,"onUpdate:value":s[4]||(s[4]=D=>e.formData.role_id=D),placeholder:e.$t("common.select_default_text",[e.$t("user.role")]),allowClear:!0},{default:n(()=>[(d(!0),T(L,null,X(e.roles,D=>(d(),w(_,{key:D.xid,value:D.xid},{default:n(()=>[c(u(D.display_name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),a(f,{onOnAddSuccess:e.roleAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})):$("",!0),(U=e.permsArray)!=null&&U.includes("admin")?(d(),w(b,{key:1,gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("branch.select_branch"),name:"branch_id",class:"required"},{default:n(()=>[a(g,{value:e.formData.branch_id,"onUpdate:value":s[5]||(s[5]=D=>e.formData.branch_id=D),placeholder:e.$t("common.select_default_text",[e.$t("branch.name")]),allowClear:!0,style:{width:"100%"}},{default:n(()=>[(d(!0),T(L,null,X(e.branches,D=>(d(),w(_,{key:D.id,value:D.id},{default:n(()=>[c(u(D.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})):$("",!0),a(b,{gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(i,{label:e.$t("user.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:n(()=>[a(v,{value:e.formData.name,"onUpdate:value":s[6]||(s[6]=D=>e.formData.name=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(p,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(i,{label:e.$t("user.phone"),name:"phone",help:e.rules.phone?e.rules.phone.message:null,validateStatus:e.rules.phone?"error":null,class:"required"},{default:n(()=>[a(v,{value:e.formData.phone,"onUpdate:value":s[7]||(s[7]=D=>e.formData.phone=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.phone")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(b,null,{default:n(()=>[a(p,{span:24},{default:n(()=>[a(i,{label:e.$t("user.password"),name:"password",help:e.rules.password?e.rules.password.message:null,validateStatus:e.rules.password?"error":null,class:"required"},{default:n(()=>[a(k,{value:e.formData.password,"onUpdate:value":s[8]||(s[8]=D=>e.formData.password=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.password")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(b,{gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(i,{label:e.$t("user.email"),name:"email",help:e.rules.email?e.rules.email.message:null,validateStatus:e.rules.email?"error":null,class:"required"},{default:n(()=>[a(v,{value:e.formData.email,"onUpdate:value":s[9]||(s[9]=D=>e.formData.email=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(p,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(i,{label:e.$t("user.status"),name:"status",help:e.rules.status?e.rules.status.message:null,validateStatus:e.rules.status?"error":null,class:"required"},{default:n(()=>[a(g,{value:e.formData.status,"onUpdate:value":s[10]||(s[10]=D=>e.formData.status=D),placeholder:e.$t("common.select_default_text",[e.$t("user.status")]),allowClear:!0},{default:n(()=>[a(_,{value:"enabled"},{default:n(()=>[c("Enabled")]),_:1}),a(_,{value:"disabled"},{default:n(()=>[c("Disabled")]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]}),_:1})]),_:1}),a(b,{gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("user.address"),name:"address",help:e.rules.address?e.rules.address.message:null,validateStatus:e.rules.address?"error":null},{default:n(()=>[a(C,{value:e.formData.address,"onUpdate:value":s[11]||(s[11]=U=>e.formData.address=U),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.address")]),"auto-size":{minRows:2,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])}const Jt=K(Fi,[["render",Ri]]),Li=x({props:{acceptFormat:{default:"image/*,.pdf",type:String},formData:null,folder:String,uploadField:{default:"file",type:String}},components:{UploadOutlined:Fa,DownloadOutlined:ba,DeleteOutlined:pe},setup(e,{emit:s}){const m=I([]),l=I(!1),{t:h}=J();return{fileList:m,loading:l,customRequest:r=>{const i=new FormData;i.append("file",r.file),i.append("folder",e.folder),l.value=!0,axiosAdmin.post("upload-file",i,{headers:{"Content-Type":"multipart/form-data"}}).then(p=>{m.value=[],l.value=!1,s("onFileUploaded",{file:p.data.file,file_url:p.data.file_url})}).catch(()=>{l.value=!1,Ue.error(h("messages.uploading_failed"))})}}}}),qi={key:0},Bi={key:1};function zi(e,s,m,l,h,y){const r=o("UploadOutlined"),i=o("a-button"),p=o("a-upload"),_=o("DownloadOutlined"),g=o("a-tag"),f=o("a-typography-link"),b=o("DeleteOutlined");return e.formData[e.uploadField]==null?(d(),T("div",qi,[a(p,{accept:e.acceptFormat,"file-list":e.fileList,"onUpdate:fileList":s[0]||(s[0]=v=>e.fileList=v),name:"file",customRequest:e.customRequest},{default:n(()=>[a(i,{loading:e.loading},{icon:n(()=>[a(r)]),default:n(()=>[c(" "+u(e.$t("common.upload")),1)]),_:1},8,["loading"])]),_:1},8,["accept","file-list","customRequest"])])):(d(),T("div",Bi,[a(f,{href:e.formData[`${e.uploadField}_url`],target:"_blank"},{default:n(()=>[a(g,{color:"success"},{icon:n(()=>[a(_)]),default:n(()=>[c(" "+u(e.$t("common.download")),1)]),_:1})]),_:1},8,["href"]),a(f,{onClick:s[1]||(s[1]=()=>{e.formData[e.uploadField]=void 0,e.formData[`${e.uploadField}_url`]=void 0})},{default:n(()=>[a(g,{color:"error"},{icon:n(()=>[a(b)]),default:n(()=>[c(" "+u(e.$t("common.delete")),1)]),_:1})]),_:1})]))}const Qt=K(Li,[["render",zi]]),Ki=x({props:["pageTitle","sampleFileUrl","importUrl"],emits:["onUploadSuccess"],components:{CloudDownloadOutlined:Pn,UploadFile:Qt,UploadOutlined:Fa},setup(e,{emit:s}){const{addEditFileRequestAdmin:m,loading:l,rules:h}=le(),{t:y}=J(),r=I([]),i=I(!1),p=b=>(r.value=[...r.value,b],!1),_=()=>{const b={};r&&r.value&&r.value[0]!=null&&(b.file=r.value[0]),l.value=!0,m({url:e.importUrl,data:b,successMessage:y("messages.imported_successfully"),success:v=>{f(),s("onUploadSuccess")}})},g=()=>{i.value=!0},f=b=>{r.value=[],i.value=!1};return{fileList:r,rules:h,loading:l,visible:i,showModal:g,handleCancel:f,importItems:_,beforeUpload:p}}});function Vi(e,s,m,l,h,y){const r=o("CloudDownloadOutlined"),i=o("a-button"),p=o("a-typography-link"),_=o("a-typography-paragraph"),g=o("a-col"),f=o("a-row"),b=o("UploadOutlined"),v=o("a-upload"),k=o("a-form-item"),C=o("a-form"),S=o("a-modal");return d(),T("div",null,[a(i,{type:"primary",onClick:e.showModal},{default:n(()=>[a(r),c(" "+u(e.pageTitle),1)]),_:1},8,["onClick"]),a(S,{open:e.visible,"onUpdate:open":s[1]||(s[1]=E=>e.visible=E),title:e.pageTitle},{footer:n(()=>[a(i,{type:"primary",loading:e.loading,onClick:e.importItems},{default:n(()=>[c(u(e.$t("common.import")),1)]),_:1},8,["loading","onClick"]),a(i,{key:"back",onClick:e.handleCancel},{default:n(()=>[c(u(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[a(f,{gutter:16,class:"mb-10"},{default:n(()=>[a(g,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(_,null,{default:n(()=>[O("ul",null,[O("li",null,[a(p,{href:e.sampleFileUrl,target:"_blank"},{default:n(()=>[c(u(e.$t("messages.click_here_to_download_sample_file")),1)]),_:1},8,["href"])])])]),_:1})]),_:1})]),_:1}),a(f,{gutter:16},{default:n(()=>[a(g,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(C,{layout:"vertical"},{default:n(()=>[a(k,{label:e.$t("common.file"),name:"file",help:e.rules.file?e.rules.file.message:null,validateStatus:e.rules.file?"error":null},{default:n(()=>[a(v,{accept:".xlsx,.csv","file-list":e.fileList,"onUpdate:fileList":s[0]||(s[0]=E=>e.fileList=E),name:"file","before-upload":e.beforeUpload,maxCount:1},{default:n(()=>[a(i,{loading:e.loading},{icon:n(()=>[a(b)]),default:n(()=>[c(" "+u(e.$t("common.upload")),1)]),_:1},8,["loading"])]),_:1},8,["accept","file-list","before-upload"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title"])])}const Sa=K(Ki,[["render",Vi]]),Hi={props:["user","size"]},Ni={key:0},ji={key:1};function Wi(e,s,m,l,h,y){const r=o("a-avatar"),i=o("a-space");return d(),w(i,null,{default:n(()=>[a(r,{size:30,src:m.user.profile_image_url},null,8,["src"]),O("span",null,[c(u(m.user.name)+" ",1),m.user&&m.user.role&&m.user.role.name?(d(),T("br",Ni)):$("",!0),m.user&&m.user.role&&m.user.role.display_name?(d(),T("small",ji,u(m.user&&m.user.role.display_name),1)):$("",!0)])]),_:1})}const Zt=K(Hi,[["render",Wi]]),Yi={components:{PlusOutlined:ae,EditOutlined:ye,DeleteOutlined:pe,AddEdit:Jt,AdminPageHeader:me,ImportUsers:Sa,UserInfo:Zt},setup(){const{url:e,addEditUrl:s,initData:m,columns:l,filterableColumns:h,hashableColumns:y}=Wt(),r=Te(),{permsArray:i,statusColors:p,formatDateTime:_,user:g}=Q(),f=window.config.staff_member_sample_file;ee(()=>{b()});const b=()=>{r.tableUrl.value={url:e},r.table.filterableColumns=h,r.fetch({page:1}),r.crudUrl.value=s,r.langKey.value="user",r.initData.value={...m},r.formData.value={...m},r.hashableColumns.value=[...y]};return{user:g,columns:l,filterableColumns:h,permsArray:i,statusColors:p,formatDateTime:_,...r,sampleFileUrl:f,setUrlData:b}}},Gi={class:"table-responsive"};function Xi(e,s,m,l,h,y){const r=o("a-page-header"),i=o("router-link"),p=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("PlusOutlined"),b=o("a-button"),v=o("DeleteOutlined"),k=o("a-space"),C=o("a-col"),S=o("a-select-option"),E=o("a-select"),A=o("a-input-search"),P=o("a-input-group"),U=o("a-row"),D=o("admin-page-filters"),M=o("AddEdit"),q=o("user-info"),B=o("a-tag"),N=o("EditOutlined"),R=o("a-table"),F=o("admin-page-table-content");return d(),T(L,null,[a(g,null,{header:n(()=>[a(r,{title:e.$t("menu.users"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(p,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[c(u(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(p,null,{default:n(()=>[c(u(e.$t("menu.users")),1)]),_:1})]),_:1})]),_:1}),a(D,null,{default:n(()=>[a(U,{gutter:[16,16]},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:n(()=>[a(k,null,{default:n(()=>[l.permsArray.includes("staff_members_create")||l.permsArray.includes("admin")?(d(),w(b,{key:0,type:"primary",onClick:e.addItem},{default:n(()=>[a(f),c(" "+u(e.$t("staff_member.add")),1)]),_:1},8,["onClick"])):$("",!0),e.table.selectedRowKeys.length>0&&(l.permsArray.includes("staff_members_delete")||l.permsArray.includes("admin"))?(d(),w(b,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:n(()=>[a(v)]),default:n(()=>[c(" "+u(e.$t("common.delete")),1)]),_:1},8,["onClick"])):$("",!0)]),_:1})]),_:1}),a(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:n(()=>[a(U,{gutter:[16,16],justify:"end"},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:12,xl:8},{default:n(()=>[a(P,{compact:""},{default:n(()=>[a(E,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=z=>e.table.searchColumn=z),placeholder:e.$t("common.select_default_text",[""])},{default:n(()=>[(d(!0),T(L,null,X(l.filterableColumns,z=>(d(),w(S,{key:z.key},{default:n(()=>[c(u(z.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),a(A,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=z=>e.table.searchString=z),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(F,null,{default:n(()=>[a(M,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),a(U,null,{default:n(()=>[a(C,{span:24},{default:n(()=>[O("div",Gi,[a(R,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:z=>({disabled:!((l.permsArray.includes("users_delete")||l.permsArray.includes("admin"))&&z.xid!=l.user.xid),name:z.xid})},columns:l.columns,"row-key":z=>z.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:n(({column:z,text:Z,record:ne})=>[z.dataIndex==="name"?(d(),w(q,{key:0,user:ne},null,8,["user"])):$("",!0),z.dataIndex==="status"?(d(),w(B,{key:1,color:l.statusColors[Z]},{default:n(()=>[c(u(e.$t(`common.${Z}`)),1)]),_:2},1032,["color"])):$("",!0),z.dataIndex==="created_at"?(d(),T(L,{key:2},[c(u(l.formatDateTime(ne.created_at)),1)],64)):$("",!0),z.dataIndex==="action"?(d(),T(L,{key:3},[l.permsArray.includes("users_edit")||l.permsArray.includes("admin")?(d(),w(b,{key:0,type:"primary",onClick:V=>e.editItem(ne),style:{"margin-left":"4px"}},{icon:n(()=>[a(N)]),_:2},1032,["onClick"])):$("",!0),(l.permsArray.includes("users_delete")||l.permsArray.includes("admin"))&&ne.xid!=l.user.xid?(d(),w(b,{key:1,type:"primary",onClick:V=>e.showDeleteConfirm(ne.xid),style:{"margin-left":"4px"}},{icon:n(()=>[a(v)]),_:2},1032,["onClick"])):$("",!0)],64)):$("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const Ji=K(Yi,[["render",Xi]]),Qi=()=>{const{t:e}=J(),s="salesmans?fields=id,xid,name,email,profile_image,profile_image_url,phone,address,status,created_at",m="salesmans",l={name:"",email:"",password:"12345678",profile_image:void 0,profile_image_url:void 0,phone:"",address:"",status:"enabled"},h=[{title:e("salesman.name"),dataIndex:"name",key:"name"},{title:e("salesman.email"),dataIndex:"email"},{title:e("salesman.created_at"),dataIndex:"created_at"},{title:e("salesman.status"),dataIndex:"status",key:"status"},{title:e("common.action"),dataIndex:"action"}],y=[{key:"name",value:e("salesman.name")},{key:"email",value:e("salesman.email")},{key:"phone",value:e("salesman.phone")}];return{url:s,initData:l,columns:h,filterableColumns:y,addEditUrl:m}},Zi=x({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ae,LoadingOutlined:Ae,SaveOutlined:_e,Upload:We,RoleAddButton:Xt},setup(e,{emit:s}){const{permsArray:m,appSetting:l}=Q(),{addEditRequestAdmin:h,loading:y,rules:r}=le();return{loading:y,rules:r,onClose:()=>{r.value={},s("closed")},onSubmit:()=>{h({url:e.url,data:e.formData,successMessage:e.successMessage,success:_=>{s("addEditSuccess",_.xid)}})},permsArray:m,appSetting:l,drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function xi(e,s,m,l,h,y){const r=o("Upload"),i=o("a-form-item"),p=o("a-col"),_=o("a-input"),g=o("a-select-option"),f=o("a-select"),b=o("a-row"),v=o("a-textarea"),k=o("a-form"),C=o("SaveOutlined"),S=o("a-button"),E=o("a-drawer");return d(),w(E,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:n(()=>[a(S,{type:"primary",onClick:e.onSubmit,style:{"margin-right":"8px"},loading:e.loading},{icon:n(()=>[a(C)]),default:n(()=>[c(" "+u(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["onClick","loading"]),a(S,{onClick:e.onClose},{default:n(()=>[c(u(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[a(k,{layout:"vertical"},{default:n(()=>[a(b,null,{default:n(()=>[a(p,{xs:24,sm:24,md:6,lg:6},{default:n(()=>[a(i,{label:e.$t("salesman.profile_image"),name:"profile_image",help:e.rules.profile_image?e.rules.profile_image.message:null,validateStatus:e.rules.profile_image?"error":null},{default:n(()=>[a(r,{formData:e.formData,folder:"user",imageField:"profile_image",onOnFileUploaded:s[0]||(s[0]=A=>{e.formData.profile_image=A.file,e.formData.profile_image_url=A.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(p,{xs:24,sm:24,md:18,lg:18},{default:n(()=>[a(b,{gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(i,{label:e.$t("salesman.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:n(()=>[a(_,{value:e.formData.name,"onUpdate:value":s[1]||(s[1]=A=>e.formData.name=A),placeholder:e.$t("common.placeholder_default_text",[e.$t("salesman.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(p,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(i,{label:e.$t("salesman.status"),name:"status",help:e.rules.status?e.rules.status.message:null,validateStatus:e.rules.status?"error":null,class:"required"},{default:n(()=>[a(f,{value:e.formData.status,"onUpdate:value":s[2]||(s[2]=A=>e.formData.status=A),placeholder:e.$t("common.select_default_text",[e.$t("salesman.status")]),allowClear:!0},{default:n(()=>[a(g,{value:"enabled"},{default:n(()=>[c("Enabled")]),_:1}),a(g,{value:"disabled"},{default:n(()=>[c("Disabled")]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(b,{gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(i,{label:e.$t("salesman.email"),name:"email",help:e.rules.email?e.rules.email.message:null,validateStatus:e.rules.email?"error":null,class:"required"},{default:n(()=>[a(_,{value:e.formData.email,"onUpdate:value":s[3]||(s[3]=A=>e.formData.email=A),placeholder:e.$t("common.placeholder_default_text",[e.$t("salesman.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(p,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(i,{label:e.$t("salesman.phone"),name:"phone",help:e.rules.phone?e.rules.phone.message:null,validateStatus:e.rules.phone?"error":null,class:"required"},{default:n(()=>[a(_,{value:e.formData.phone,"onUpdate:value":s[4]||(s[4]=A=>e.formData.phone=A),placeholder:e.$t("common.placeholder_default_text",[e.$t("salesman.phone")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1}),a(b,{gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("salesman.address"),name:"address",help:e.rules.address?e.rules.address.message:null,validateStatus:e.rules.address?"error":null},{default:n(()=>[a(v,{value:e.formData.address,"onUpdate:value":s[5]||(s[5]=A=>e.formData.address=A),placeholder:e.$t("common.placeholder_default_text",[e.$t("salesman.address")]),"auto-size":{minRows:2,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])}const er=K(Zi,[["render",xi]]),ar={components:{PlusOutlined:ae,EditOutlined:ye,DeleteOutlined:pe,AddEdit:er,AdminPageHeader:me,ImportSalesman:Sa},setup(){const{url:e,addEditUrl:s,initData:m,columns:l,filterableColumns:h}=Qi(),y=Te(),{permsArray:r,statusColors:i,formatDateTime:p}=Q(),_=window.config.staff_member_sample_file;ee(()=>{g()});const g=()=>{y.tableUrl.value={url:e},y.table.filterableColumns=h,y.fetch({page:1}),y.crudUrl.value=s,y.langKey.value="salesman",y.initData.value={...m},y.formData.value={...m}};return{columns:l,filterableColumns:h,permsArray:r,statusColors:i,formatDateTime:p,...y,sampleFileUrl:_,setUrlData:g}}},tr={class:"table-responsive"};function nr(e,s,m,l,h,y){const r=o("a-page-header"),i=o("router-link"),p=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("PlusOutlined"),b=o("a-button"),v=o("DeleteOutlined"),k=o("a-space"),C=o("a-col"),S=o("a-select-option"),E=o("a-select"),A=o("a-input-search"),P=o("a-input-group"),U=o("a-row"),D=o("admin-page-filters"),M=o("AddEdit"),q=o("a-tag"),B=o("EditOutlined"),N=o("a-table"),R=o("admin-page-table-content");return d(),T(L,null,[a(g,null,{header:n(()=>[a(r,{title:e.$t("menu.salesmans"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(p,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[c(u(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(p,null,{default:n(()=>[c(u(e.$t("menu.salesmans")),1)]),_:1})]),_:1})]),_:1}),a(D,null,{default:n(()=>[a(U,{gutter:[16,16]},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:n(()=>[a(k,null,{default:n(()=>[l.permsArray.includes("salesmans_create")||l.permsArray.includes("admin")?(d(),w(b,{key:0,type:"primary",onClick:e.addItem},{default:n(()=>[a(f),c(" "+u(e.$t("salesman.add")),1)]),_:1},8,["onClick"])):$("",!0),e.table.selectedRowKeys.length>0&&(l.permsArray.includes("salesmans_delete")||l.permsArray.includes("admin"))?(d(),w(b,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:n(()=>[a(v)]),default:n(()=>[c(" "+u(e.$t("common.delete")),1)]),_:1},8,["onClick"])):$("",!0)]),_:1})]),_:1}),a(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:n(()=>[a(U,{gutter:[16,16],justify:"end"},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:12,xl:8},{default:n(()=>[a(P,{compact:""},{default:n(()=>[a(E,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=F=>e.table.searchColumn=F),placeholder:e.$t("common.select_default_text",[""])},{default:n(()=>[(d(!0),T(L,null,X(l.filterableColumns,F=>(d(),w(S,{key:F.key},{default:n(()=>[c(u(F.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),a(A,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=F=>e.table.searchString=F),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(R,null,{default:n(()=>[a(M,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),a(U,null,{default:n(()=>[a(C,{span:24},{default:n(()=>[O("div",tr,[a(N,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:F=>({disabled:!1,name:F.xid})},columns:l.columns,"row-key":F=>F.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:n(({column:F,text:z,record:Z})=>[F.dataIndex==="status"?(d(),w(q,{key:0,color:l.statusColors[z]},{default:n(()=>[c(u(e.$t(`common.${z}`)),1)]),_:2},1032,["color"])):$("",!0),F.dataIndex==="created_at"?(d(),T(L,{key:1},[c(u(l.formatDateTime(Z.created_at)),1)],64)):$("",!0),F.dataIndex==="action"?(d(),T(L,{key:2},[l.permsArray.includes("salesmans_edit")||l.permsArray.includes("admin")?(d(),w(b,{key:0,type:"primary",onClick:ne=>e.editItem(Z),style:{"margin-left":"4px"}},{icon:n(()=>[a(B)]),_:2},1032,["onClick"])):$("",!0),l.permsArray.includes("salesmans_delete")||l.permsArray.includes("admin")?(d(),w(b,{key:1,type:"primary",onClick:ne=>e.showDeleteConfirm(Z.xid),style:{"margin-left":"4px"}},{icon:n(()=>[a(v)]),_:2},1032,["onClick"])):$("",!0)],64)):$("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const lr=K(ar,[["render",nr]]),or=[{path:"/",component:()=>Le(()=>import("./Admin-ef1230f2.js"),["assets/Admin-ef1230f2.js","assets/vendor-7d287734.js","assets/vendor-ad46f743.css","assets/Admin-14aea5fe.css"]),children:[{path:"/admin/users",component:Ji,name:"admin.users.index",meta:{requireAuth:!0,menuParent:"users",menuKey:"users",permission:"users_view"}},{path:"/admin/salesman",component:lr,name:"admin.salesman.index",meta:{requireAuth:!0,menuParent:"salesmans",menuKey:"salesmans",permission:"salesmans_view"}}]}],xt=()=>{const e="campaigns?fields=id,xid,name,reference_prefix,allow_reference_prefix,remaining_leads,total_leads,branch_id,campaignUsers{id,xid,user_id,x_user_id,campaign_id,x_campaign_id},campaignUsers:user{id,xid,name,profile_image,profile_image_url},email_template_id,x_email_template_id,emailTemplate{id,xid,name},form_id,x_form_id,form{id,xid,name,form_fields},detail_fields,last_action_by,x_last_action_by,lastActioner{id,xid,name},completed_by,x_completed_by,completedBy{id,xid,name},started_on,completed_on,upcoming_lead_action",s="campaigns",m=["form_id","email_template_id"],{t:l}=J(),h=I({campaign_status:"active"}),y={name:"",user_id:void 0,form_id:void 0,email_template_id:void 0,allow_reference_prefix:0,reference_prefix:"",current_step:0,detail_fields:[],import_lead_fields:[],branch_id:void 0},r=ke(()=>h.value.campaign_status=="active"?[{title:l("campaign.name"),dataIndex:"name"},{title:l("campaign.progress"),dataIndex:"progress"},{title:l("campaign.members"),dataIndex:"members"},{title:l("campaign.form"),dataIndex:"form"},{title:l("campaign.started_on"),dataIndex:"started_on"},{title:l("campaign.last_actioner"),dataIndex:"last_actioner"},{title:l("common.action"),dataIndex:"action"}]:[{title:l("campaign.name"),dataIndex:"name"},{title:l("campaign.total_leads"),dataIndex:"total_leads"},{title:l("campaign.started_on"),dataIndex:"started_on"},{title:l("campaign.completed_on"),dataIndex:"completed_on"},{title:l("campaign.completed_by"),dataIndex:"completed_by"}]),i=[{key:"name",value:l("common.name")}];return{url:e,addEditUrl:s,initData:y,columns:r,filterableColumns:i,hashableColumns:m,extraFilters:h}},sr=x({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:ae,AddEdit:Jt},setup(e,{emit:s}){const{permsArray:m}=Q(),{initData:l,addEditUrl:h}=Wt(),y=I(!1),r=I("add"),i=I({...l});return{permsArray:m,visible:y,addEditType:r,addEditUrl:h,formData:i,addEditSuccess:()=>{y.value=!1,i.value={...l},s("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),dr={key:0};function ir(e,s,m,l,h,y){const r=o("a-menu-item"),i=o("PlusOutlined"),p=o("a-button"),_=o("a-tooltip"),g=o("AddEdit");return e.permsArray.includes("users_create")||e.permsArray.includes("admin")?(d(),T("div",dr,[e.customType=="menu"?(d(),w(r,{onClick:e.showAdd,key:"staff_members"},{icon:n(()=>[oe(e.$slots,"icon")]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick"])):(d(),T(L,{key:1},[e.tooltip?(d(),w(_,{key:0,placement:"topLeft",title:e.$t("user.add"),"arrow-point-at-center":""},{default:n(()=>[a(p,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:n(()=>[a(i)]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(d(),w(p,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:n(()=>[a(i)]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),a(g,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("staff_member.add"),successMessage:e.$t("staff_member.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):$("",!0)}const en=K(sr,[["render",ir]]),an=()=>{const e="forms?fields=id,xid,name,status,form_fields",s="forms",m=[],{t:l}=J(),h={name:"",form_fields:[],status:1},y=[{title:l("form.name"),dataIndex:"name"},{title:l("form.form_fields"),dataIndex:"form_fields"},{title:l("form.status"),dataIndex:"status"},{title:l("common.action"),dataIndex:"action"}],r=[{key:"name",value:l("form.name")}];return{url:e,addEditUrl:s,initData:h,columns:y,filterableColumns:r,hashableColumns:m}},rr={};function ur(e,s,m,l,h,y){const r=o("a-typography-title"),i=o("a-divider");return d(),T(L,null,[a(r,{level:5},{default:n(()=>[oe(e.$slots,"default")]),_:3}),a(i,{style:{height:"2px","background-color":"#f0f2f5","margin-top":"5px","margin-bottom":"20px"}})],64)}const tn=K(rr,[["render",ur]]),mr=x({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ae,MinusCircleOutlined:At,LoadingOutlined:Ae,SaveOutlined:_e,FormItemHeading:tn},setup(e,{emit:s}){const m=I({name:"",form_fields:[],status:1}),l=I([]),{addEditRequestAdmin:h,loading:y,rules:r}=le(),i=b=>{let v=l.value.indexOf(b);v!==-1&&l.value.splice(v,1)},p=()=>{l.value.push({name:"",type:"text",required:0,id:Math.random().toString(36).slice(2)})},_=()=>{const b=$t(l.value,v=>v.name!="");h({url:e.url,data:{...m.value,form_fields:b},successMessage:e.successMessage,success:v=>{s("addEditSuccess",v.xid)}})},g=()=>{r.value={},s("closed")},f=ke(()=>l.value.length==0?!1:Ta(l.value,{name:""}));return Se(()=>e.visible,(b,v)=>{e.addEditType=="edit"&&b?(m.value={name:e.data.name,status:e.data.status,_method:"PUT"},l.value=e.data.form_fields):(m.value={name:"",status:1},l.value=[])}),{loading:y,rules:r,onClose:g,onSubmit:_,newFormData:m,formFields:l,removeFormField:i,addFormField:p,addFormButtonStatus:f,drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function cr(e,s,m,l,h,y){const r=o("a-input"),i=o("a-form-item"),p=o("a-col"),_=o("a-row"),g=o("a-radio-button"),f=o("a-radio-group"),b=o("FormItemHeading"),v=o("a-select-option"),k=o("a-select"),C=o("MinusCircleOutlined"),S=o("PlusOutlined"),E=o("a-button"),A=o("a-form"),P=o("SaveOutlined"),U=o("a-space"),D=o("a-drawer");return d(),w(D,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:n(()=>[a(U,null,{default:n(()=>[a(E,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:n(()=>[a(P)]),default:n(()=>[c(" "+u(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),a(E,{key:"back",onClick:e.onClose},{default:n(()=>[c(u(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),default:n(()=>[a(A,{layout:"vertical"},{default:n(()=>[a(_,{gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("form.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:n(()=>[a(r,{value:e.newFormData.name,"onUpdate:value":s[0]||(s[0]=M=>e.newFormData.name=M),placeholder:e.$t("common.placeholder_default_text",[e.$t("form.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(_,{gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("form.status"),name:"status",help:e.rules.status?e.rules.status.message:null,validateStatus:e.rules.status?"error":null},{default:n(()=>[a(f,{value:e.newFormData.status,"onUpdate:value":s[1]||(s[1]=M=>e.newFormData.status=M),"button-style":"solid",size:"small"},{default:n(()=>[a(g,{value:1},{default:n(()=>[c(u(e.$t("common.active")),1)]),_:1}),a(g,{value:0},{default:n(()=>[c(u(e.$t("common.inactive")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(b,null,{default:n(()=>[c(u(e.$t("form.form_fields")),1)]),_:1}),e.formFields.length>0?(d(!0),T(L,{key:0},X(e.formFields,(M,q)=>(d(),w(_,{gutter:16,key:M.id},{default:n(()=>[a(p,{span:16},{default:n(()=>[a(i,{name:["form_fields",q,"name"]},{default:n(()=>[a(r,{value:M.name,"onUpdate:value":B=>M.name=B,placeholder:e.$t("form.field_name")},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["name"])]),_:2},1024),a(p,{span:6},{default:n(()=>[a(i,{name:["form_fields",q,"name"]},{default:n(()=>[a(k,{value:M.type,"onUpdate:value":B=>M.type=B,placeholder:e.$t("common.select_default_text",[e.$t("campaign.field_type")])},{default:n(()=>[a(v,{value:"text"},{default:n(()=>[c(u(e.$t("common.text")),1)]),_:1}),a(v,{value:"email"},{default:n(()=>[c(u(e.$t("common.email")),1)]),_:1}),a(v,{value:"phone"},{default:n(()=>[c(u(e.$t("common.phone")),1)]),_:1})]),_:2},1032,["value","onUpdate:value","placeholder"])]),_:2},1032,["name"])]),_:2},1024),a(p,{span:2},{default:n(()=>[a(C,{onClick:B=>e.removeFormField(M)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)):$("",!0),a(_,{gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,null,{default:n(()=>[a(E,{type:"dashed",block:"",onClick:e.addFormField,disabled:e.addFormButtonStatus},{default:n(()=>[a(S),c(" "+u(e.$t("form.add_form_field")),1)]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])}const nn=K(mr,[["render",cr]]),pr=x({props:{btnType:{default:"default"},tooltip:{default:!0}},emits:["onAddSuccess"],components:{PlusOutlined:ae,AddEdit:nn},setup(e,{emit:s}){const{permsArray:m}=Q(),{initData:l,addEditUrl:h}=an(),y=I(!1),r=I("add"),i=I({...l});return{permsArray:m,visible:y,addEditType:r,addEditUrl:h,formData:i,addEditSuccess:()=>{y.value=!1,i.value={...l},s("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),_r={key:0};function fr(e,s,m,l,h,y){const r=o("PlusOutlined"),i=o("a-button"),p=o("a-tooltip"),_=o("AddEdit");return e.permsArray.includes("forms_create")||e.permsArray.includes("admin")?(d(),T("div",_r,[e.tooltip?(d(),w(p,{key:0,placement:"topLeft",title:e.$t("form.add"),"arrow-point-at-center":""},{default:n(()=>[a(i,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:n(()=>[a(r)]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(d(),w(i,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:n(()=>[a(r)]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick","type"])),a(_,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("form.add"),successMessage:e.$t("form.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):$("",!0)}const ln=K(pr,[["render",fr]]),on=()=>{const e="email-templates?fields=id,xid,name,subject,body,status,sharable",s="email-templates",m=[],{t:l}=J(),h={name:"",subject:"",body:"",status:1,sharable:0},y=[{title:l("email_template.name"),dataIndex:"name"},{title:l("email_template.subject"),dataIndex:"subject"},{title:l("email_template.status"),dataIndex:"status"},{title:l("common.action"),dataIndex:"action"}],r=[{key:"name",value:l("email_template.name")},{key:"subject",value:l("email_template.subject")},{key:"body",value:l("email_template.body")}];return{url:e,addEditUrl:s,initData:h,columns:y,filterableColumns:r,hashableColumns:m}};const gr=x({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ae,LoadingOutlined:Ae,SaveOutlined:_e,InfoCircleOutlined:Qe,QuillEditor:Tt,FormAddButton:ln},setup(e,{emit:s}){const{addEditRequestAdmin:m,loading:l,rules:h}=le(),y="forms/all",r=I(null),i=I([]),p=I(void 0),_=I({});ee(()=>{const S=axiosAdmin.get(y);Promise.all([S]).then(([E])=>{i.value=E.data.data})});const g=()=>{m({url:e.url,data:e.formData,successMessage:e.successMessage,success:S=>{s("addEditSuccess",S.xid)}})},f=S=>{const E=v.value.getSelection(!0);var A=E.length>0?`##${S}##`:` ##${S}## `;v.value.deleteText(E.index,E.length),v.value.insertText(E.index,A)},b=()=>{h.value={},s("closed")},v=ke(()=>r.value.getQuill()),k=()=>{axiosAdmin.get(y).then(S=>{i.value=S.data.data})},C=(S,E)=>{_.value=E.form};return Se(()=>e.visible,(S,E)=>{S==!0&&r.value&&(e.addEditType=="edit"?r.value.setHTML(e.formData.body):r.value.setHTML("")),p.value=void 0,_.value={}}),{loading:l,rules:h,onClose:b,onSubmit:g,insertFormText:f,textEditor:r,allForms:i,selectedFormId:p,formAdded:k,formSelected:C,selectedForm:_,drawerWidth:window.innerWidth<=991?"90%":"45%"}}}),hr={style:{display:"flex"}};function br(e,s,m,l,h,y){const r=o("a-input"),i=o("a-form-item"),p=o("a-col"),_=o("InfoCircleOutlined"),g=o("a-tooltip"),f=o("a-space"),b=o("a-radio-button"),v=o("a-radio-group"),k=o("a-row"),C=o("QuillEditor"),S=o("a-select-option"),E=o("a-select"),A=o("FormAddButton"),P=o("a-button"),U=o("a-form"),D=o("SaveOutlined"),M=o("a-drawer");return d(),w(M,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:n(()=>[a(f,null,{default:n(()=>[a(P,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:n(()=>[a(D)]),default:n(()=>[c(" "+u(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),a(P,{key:"back",onClick:e.onClose},{default:n(()=>[c(u(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),default:n(()=>[a(U,{layout:"vertical"},{default:n(()=>[a(k,{gutter:16},{default:n(()=>[a(p,{xs:24,sm:12,md:16,lg:16},{default:n(()=>[a(i,{label:e.$t("email_template.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:n(()=>[a(r,{value:e.formData.name,"onUpdate:value":s[0]||(s[0]=q=>e.formData.name=q),placeholder:e.$t("common.placeholder_default_text",[e.$t("email_template.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(p,{xs:24,sm:12,md:8,lg:8},{default:n(()=>[a(i,{name:"sharable",help:e.rules.sharable?e.rules.sharable.message:null,validateStatus:e.rules.sharable?"error":null},{label:n(()=>[a(f,null,{default:n(()=>[c(u(e.$t("email_template.sharable"))+" ",1),a(g,null,{title:n(()=>[c(u(e.$t("email_template.sharable_message")),1)]),default:n(()=>[a(_)]),_:1})]),_:1})]),default:n(()=>[a(v,{value:e.formData.sharable,"onUpdate:value":s[1]||(s[1]=q=>e.formData.sharable=q),"button-style":"solid",size:"small"},{default:n(()=>[a(b,{value:1},{default:n(()=>[c(u(e.$t("common.yes")),1)]),_:1}),a(b,{value:0},{default:n(()=>[c(u(e.$t("common.no")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["help","validateStatus"])]),_:1})]),_:1}),a(k,{gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("email_template.subject"),name:"subject",help:e.rules.subject?e.rules.subject.message:null,validateStatus:e.rules.subject?"error":null,class:"required"},{default:n(()=>[a(r,{value:e.formData.subject,"onUpdate:value":s[2]||(s[2]=q=>e.formData.subject=q),placeholder:e.$t("common.placeholder_default_text",[e.$t("email_template.subject")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(k,{gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("email_template.body"),name:"body",help:e.rules.body?e.rules.body.message:null,validateStatus:e.rules.body?"error":null},{default:n(()=>[a(C,{ref:"textEditor",content:e.formData.body,"onUpdate:content":s[3]||(s[3]=q=>e.formData.body=q),contentType:"html",placeholder:e.$t("common.placeholder_default_text",[e.$t("email_template.body")]),style:{height:"200px"}},null,8,["content","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(k,{gutter:16},{default:n(()=>[a(p,{span:24},{default:n(()=>[a(i,{label:e.$t("form.form"),name:"form_id"},{default:n(()=>[O("span",hr,[a(E,{value:e.selectedFormId,"onUpdate:value":s[4]||(s[4]=q=>e.selectedFormId=q),placeholder:e.$t("common.select_default_text",[e.$t("form.form")]),allowClear:!0,optionFilterProp:"label","show-search":"",onChange:e.formSelected},{default:n(()=>[(d(!0),T(L,null,X(e.allForms,q=>(d(),w(S,{key:q.xid,value:q.xid,label:q.name,form:q},{default:n(()=>[c(u(q.name),1)]),_:2},1032,["value","label","form"]))),128))]),_:1},8,["value","placeholder","onChange"]),a(A,{onOnAddSuccess:e.formAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label"])]),_:1})]),_:1}),e.selectedForm&&e.selectedForm.form_fields&&e.selectedForm.form_fields.length>0?(d(),w(k,{key:0,gutter:16,class:"mb-20"},{default:n(()=>[(d(!0),T(L,null,X(e.selectedForm.form_fields,q=>(d(),w(p,{xs:8,sm:8,md:6,lg:4,key:q.id},{default:n(()=>[a(P,{onClick:B=>e.insertFormText(q.name),type:"link",style:{padding:"0px"}},{default:n(()=>[c(u(q.name),1)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})):$("",!0),a(k,{gutter:16,class:"mt-10"},{default:n(()=>[a(p,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("email_template.status"),name:"status",help:e.rules.status?e.rules.status.message:null,validateStatus:e.rules.status?"error":null},{default:n(()=>[a(v,{value:e.formData.status,"onUpdate:value":s[5]||(s[5]=q=>e.formData.status=q),"button-style":"solid",size:"small"},{default:n(()=>[a(b,{value:1},{default:n(()=>[c(u(e.$t("common.active")),1)]),_:1}),a(b,{value:0},{default:n(()=>[c(u(e.$t("common.inactive")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])}const sn=K(gr,[["render",br]]),yr=x({props:{btnType:{default:"default"},tooltip:{default:!0}},emits:["onAddSuccess"],components:{PlusOutlined:ae,AddEdit:sn},setup(e,{emit:s}){const{permsArray:m}=Q(),{initData:l,addEditUrl:h}=on(),y=I(!1),r=I("add"),i=I({...l});return{permsArray:m,visible:y,addEditType:r,addEditUrl:h,formData:i,addEditSuccess:()=>{y.value=!1,i.value={...l},s("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),vr={key:0};function kr(e,s,m,l,h,y){const r=o("PlusOutlined"),i=o("a-button"),p=o("a-tooltip"),_=o("AddEdit");return e.permsArray.includes("email_templates_create")||e.permsArray.includes("admin")?(d(),T("div",vr,[e.tooltip?(d(),w(p,{key:0,placement:"topLeft",title:e.$t("email_template.add"),"arrow-point-at-center":""},{default:n(()=>[a(i,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:n(()=>[a(r)]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(d(),w(i,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:n(()=>[a(r)]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick","type"])),a(_,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("email_template.add"),successMessage:e.$t("email_template.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):$("",!0)}const dn=K(yr,[["render",kr]]),Cr=x({props:{acceptFormat:{default:"image/*,.pdf",type:String},allFields:null},emits:["fileUploaded","leadColumnChanged"],components:{UploadOutlined:Fa,FileOutlined:In},setup(e,{emit:s}){const m=I([]),l=I(!1),{t:h}=J(),y=I(void 0),r=I([]),i=I([]),p=I([]),_=I({}),g=I([...e.allFields]),f=I("all"),b=[{title:h("campaign.csv_header_field"),dataIndex:"csv_header_field"},{title:h("campaign.csv_field_data"),dataIndex:"csv_field_data"},{title:h("campaign.column_status"),dataIndex:"column_status"}],v=D=>{const M=D.file,q=M.name.split(".").pop().toLowerCase();if(l.value=!0,q==="csv"){let B=new FileReader;B.readAsText(M,"UTF-8"),B.onload=function(N){A(N.target.result)}}else if(q==="xlsx"){let B=new FileReader;B.readAsArrayBuffer(M),B.onload=function(N){P(N.target.result)}}else console.error("Unsupported file format");s("fileUploaded",M)},k=D=>{var M="";return fe(r.value,(q,B)=>{M+=`${q[D]}<br />`}),M},C=()=>{var D=[];fe(e.allFields,(M,q)=>{Fe(_.value,M)||D.push(M)}),g.value=D,E(f.value),s("leadColumnChanged",_.value)},S=ke(()=>{var D=0;return fe(_.value,(M,q)=>{M==null&&(D=D+1)}),D}),E=D=>{if(D=="matched"){var M=[];fe(p.value,(q,B)=>{_.value[q]!=null&&M.push(q)}),i.value=M}else if(D=="un_matched"){var M=[];fe(p.value,(B,N)=>{_.value[B]==null&&M.push(B)}),i.value=M}else i.value=p.value};Se(()=>e.allFields,(D,M)=>{C()});const A=D=>{const M=Mn.parse(D,{preview:3,header:!0,skipEmptyLines:!0});U(M.data,M.meta.fields)},P=D=>{const M=Rn(D,{type:"array"}),q=M.SheetNames[0],B=M.Sheets[q],N=Ln.sheet_to_csv(B);A(N)},U=(D,M)=>{r.value=D,p.value=M;let q={};M.forEach(B=>{const N=e.allFields.includes(B);q[B]=N?B:void 0}),_.value=q,C()};return{fileList:m,loading:l,customRequest:v,parseCSV:A,parseXLSX:P,processParsedData:U,columns:b,currentUploadedFile:y,parsedFileData:r,parsedHeader:p,getPreviewData:k,formProperties:_,currentFormFields:g,reAssignCurrentFormFields:C,unMatchedColumnsCount:S,activeTabKey:f,tabChanged:E,tableRecords:i,size:Fn}}}),wr={class:"ant-upload-drag-icon"},Sr=O("p",{class:"ant-upload-text"},"Click or drag file to this area to upload",-1),Dr=O("p",{class:"ant-upload-hint"}," Support for a single or bulk upload. Strictly prohibit from uploading company data or other band files ",-1),$r=["innerHTML"];function Ar(e,s,m,l,h,y){const r=o("UploadOutlined"),i=o("a-upload-dragger"),p=o("a-col"),_=o("a-row"),g=o("a-badge"),f=o("a-space"),b=o("a-tab-pane"),v=o("a-tabs"),k=o("a-select-option"),C=o("a-select"),S=o("a-table");return e.parsedFileData.length==0?(d(),w(_,{key:0,gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{fileList:e.fileList,"onUpdate:fileList":s[0]||(s[0]=E=>e.fileList=E),name:"file",accept:e.acceptFormat,customRequest:e.customRequest,onDrop:e.customRequest},{default:n(()=>[O("p",wr,[a(r)]),Sr,Dr]),_:1},8,["fileList","accept","customRequest","onDrop"])]),_:1})]),_:1})):(d(),w(_,{key:1,gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(_,{gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(v,{activeKey:e.activeTabKey,"onUpdate:activeKey":s[1]||(s[1]=E=>e.activeTabKey=E),onChange:e.tabChanged},{default:n(()=>[a(b,{key:"all"},{tab:n(()=>[a(f,null,{default:n(()=>[a(g,{count:e.size(e.formProperties),"number-style":{backgroundColor:"#fff",color:"#999",boxShadow:"0 0 0 1px #d9d9d9 inset"},overflowCount:2e3},null,8,["count"]),c(" "+u(e.$t("campaign.all_columns")),1)]),_:1})]),_:1}),a(b,{key:"matched"},{tab:n(()=>[a(f,null,{default:n(()=>[a(g,{count:e.size(e.formProperties)-e.unMatchedColumnsCount,"number-style":{backgroundColor:"#52c41a"},overflowCount:2e3},null,8,["count"]),c(" "+u(e.$t("campaign.matched_columns")),1)]),_:1})]),_:1}),a(b,{key:"un_matched"},{tab:n(()=>[a(f,null,{default:n(()=>[a(g,{count:e.unMatchedColumnsCount,overflowCount:2e3},null,8,["count"]),c(" "+u(e.$t("campaign.unmatched_columns")),1)]),_:1})]),_:1})]),_:1},8,["activeKey","onChange"])]),_:1})]),_:1}),a(S,{columns:e.columns,"row-key":E=>E,"data-source":e.tableRecords,pagination:!1},{bodyCell:n(({column:E,record:A})=>[E.dataIndex==="csv_header_field"?(d(),T(L,{key:0},[c(u(A),1)],64)):$("",!0),E.dataIndex==="csv_field_data"?(d(),T("span",{key:1,innerHTML:e.getPreviewData(A)},null,8,$r)):$("",!0),E.dataIndex==="column_status"?(d(),T(L,{key:2},[a(C,{value:e.formProperties[A],"onUpdate:value":P=>e.formProperties[A]=P,placeholder:e.$t("common.select_default_text",[e.$t("lead.campaign")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:e.reAssignCurrentFormFields,open:e.formProperties[A]!=null?!1:void 0},{default:n(()=>[(d(!0),T(L,null,X(e.currentFormFields,P=>(d(),w(k,{key:P,title:A,value:P},{default:n(()=>[c(u(P),1)]),_:2},1032,["title","value"]))),128))]),_:2},1032,["value","onUpdate:value","placeholder","onChange","open"]),qn(O("div",{class:"ant-form-item-explain-error",style:{}},u(e.$t("campaign.column_will_not_imported")),513),[[Bn,e.formProperties[A]==null]])],64)):$("",!0)]),_:1},8,["columns","row-key","data-source"])]),_:1})]),_:1}))}const Tr=K(Cr,[["render",Ar]]),Er=x({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ae,LoadingOutlined:Ae,SaveOutlined:_e,FileTextOutlined:ya,OrderedListOutlined:zn,DoubleRightOutlined:ma,DoubleLeftOutlined:Et,MinusCircleOutlined:At,ImportLeads:Tr,StaffMemberAddButton:en,FormAddButton:ln,EmailTemplateAddButton:dn},setup(e,{emit:s}){const m=I(0),{addEditFileRequestAdmin:l,addEditRequestAdmin:h,loading:y,rules:r}=le(),i="forms?fields=xid,name,form_fields&limit=10000",p="email-templates/all",_=I([]),g=I([]),f=I([]),b="users?limit=10000",v=I(void 0),k=I(void 0),C=I([]),S=I([]),E="branches";ee(()=>{const H=axiosAdmin.get(b),j=axiosAdmin.get(i),Y=axiosAdmin.get(p),se=axiosAdmin.get(E);Promise.all([H,j,Y,se]).then(([Ce,G,te,ce])=>{g.value=Ce.data,_.value=G.data,f.value=te.data.email_templates,S.value=ce.data})});const A=()=>{axiosAdmin.get(E).then(H=>{S.value=H.data})},P=H=>{let j=e.formData.detail_fields.indexOf(H);j!==-1&&e.formData.detail_fields.splice(j,1)},U=()=>{e.formData.detail_fields.push({field_name:"",field_value:"",field_type:"text",id:Math.random().toString(36).slice(2)})},D=()=>{m.value==0?e.formData.name==""||e.formData.user_id.length==0||e.formData.form_id==null||e.formData.email_template_id==null||e.formData.allow_reference_prefix&&e.formData.reference_prefix==""?M():(r.value={},z(1)):z(m.value+1)},M=()=>{var H={...e.formData};(H.user_id==null||H.user_id!=null&&typeof H.user_id=="object"&&H.user_id.length==0)&&(H={...e.formData,user_id:void 0}),v.value!=null&&(H.file=v.value),H.import_lead_fields=k.value,l({url:e.url,fieldTypes:{json:["detail_fields","user_id","import_lead_fields"],file:["file"]},data:H,successMessage:e.successMessage,success:j=>{s("addEditSuccess",j.xid)}})},q=()=>{m.value=m.value-1,e.formData.current_step=m.value},B=()=>{r.value={},s("closed")},N=()=>{axiosAdmin.get(b).then(H=>{g.value=H.data})},R=()=>{axiosAdmin.get(i).then(H=>{_.value=H.data})},F=()=>{axiosAdmin.get(p).then(H=>{f.value=H.data.email_templates})},z=H=>{m.value=H,e.formData.current_step=H},Z=ke(()=>e.formData.detail_fields&&e.formData.detail_fields.length==0?!1:Ta(e.formData.detail_fields,{field_name:""})||Ta(e.formData.detail_fields,{field_value:""})),ne=H=>{v.value=H},V=H=>{k.value=H},W=(H,j)=>{if(j&&j.form&&j.form.form_fields){var Y=[];fe(j.form.form_fields,(se,Ce)=>{Y.push(se.name)}),C.value=Y}else C.value=[]};return Se(()=>e.visible,(H,j)=>{H&&e.addEditType=="edit"&&e.data&&e.data.campaign_users&&e.data.campaign_users.length>0?e.formData.user_id=e.data.campaign_users.map(function(Y){return Y.x_user_id}):e.formData.user_id=void 0,W("",e.data),z(0)}),{currentStep:m,loading:y,rules:r,allStaffMembers:g,allForms:_,allEmailTemplates:f,onClose:B,onSubmit:D,staffMemberAdded:N,formAdded:R,emailTemplateAdded:F,goBack:q,branches:S,submitForm:M,branchAdded:A,removeDetailField:P,addDetailField:U,addFieldsButtonStatus:Z,leadFileUploaded:ne,leadColumnChanged:V,selectedFormFields:C,formSelected:W,drawerWidth:window.innerWidth<=991?"90%":"60%"}}}),Ur={style:{display:"flex"}},Or={style:{display:"flex"}},Pr={style:{display:"flex"}},Ir={class:"mt-20"};function Fr(e,s,m,l,h,y){const r=o("FileTextOutlined"),i=o("a-step"),p=o("OrderedListOutlined"),_=o("a-steps"),g=o("a-divider"),f=o("a-input"),b=o("a-form-item"),v=o("a-col"),k=o("a-row"),C=o("a-select-option"),S=o("a-select"),E=o("StaffMemberAddButton"),A=o("FormAddButton"),P=o("EmailTemplateAddButton"),U=o("a-switch"),D=o("a-alert"),M=o("MinusCircleOutlined"),q=o("PlusOutlined"),B=o("a-button"),N=o("ImportLeads"),R=o("a-form"),F=o("DoubleLeftOutlined"),z=o("DoubleRightOutlined"),Z=o("SaveOutlined"),ne=o("a-space"),V=o("a-drawer");return d(),w(V,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:n(()=>[a(ne,null,{default:n(()=>[e.currentStep!=0?(d(),w(B,{key:"submit",type:"primary",loading:e.loading,onClick:e.goBack},{default:n(()=>[a(F),c(" "+u(e.$t("campaign.previous_step")),1)]),_:1},8,["loading","onClick"])):$("",!0),e.currentStep!=2?(d(),w(B,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit,disabled:e.currentStep==1&&e.addFieldsButtonStatus},{default:n(()=>[c(u(e.$t("campaign.next_step"))+" ",1),a(z)]),_:1},8,["loading","onClick","disabled"])):$("",!0),e.currentStep==2?(d(),w(B,{key:"submit",type:"primary",loading:e.loading,onClick:e.submitForm},{icon:n(()=>[a(Z)]),default:n(()=>[c(" "+u(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"])):$("",!0),a(B,{key:"back",onClick:e.onClose},{default:n(()=>[c(u(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),default:n(()=>[a(R,{layout:"vertical"},{default:n(()=>[a(_,{current:e.currentStep,type:"navigation"},{default:n(()=>[a(i,{title:e.$t("campaign.basic_settings"),description:e.$t("campaign.basic_settings_description")},{icon:n(()=>[a(r)]),_:1},8,["title","description"]),a(i,{title:e.$t("campaign.about_campaign"),description:e.$t("campaign.about_campaign_description")},{icon:n(()=>[a(p)]),_:1},8,["title","description"]),a(i,{title:e.$t("campaign.import_leads"),description:e.$t("campaign.import_leads_description")},null,8,["title","description"])]),_:1},8,["current"]),a(g),e.currentStep==0?(d(),T(L,{key:0},[a(k,{gutter:16,class:"mt-20"},{default:n(()=>[a(v,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(b,{label:e.$t("campaign.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:n(()=>[a(f,{value:e.formData.name,"onUpdate:value":s[0]||(s[0]=W=>e.formData.name=W),placeholder:e.$t("common.placeholder_default_text",[e.$t("campaign.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(k,{gutter:16},{default:n(()=>[a(v,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(b,{label:"Branch Name",name:"branch_id",class:"required"},{default:n(()=>[a(S,{value:e.formData.branch_id,"onUpdate:value":s[1]||(s[1]=W=>e.formData.branch_id=W),placeholder:e.$t("common.select_default_text",[e.$t("branch.name")]),allowClear:!0,style:{width:"100%"}},{default:n(()=>[(d(!0),T(L,null,X(e.branches,W=>(d(),w(C,{key:W.id,value:W.id},{default:n(()=>[c(u(W.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1})]),_:1})]),_:1}),a(k,{gutter:16},{default:n(()=>[a(v,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(b,{label:e.$t("campaign.members"),name:"user_id",help:e.rules.user_id?e.rules.user_id.message:null,validateStatus:e.rules.user_id?"error":null,class:"required"},{default:n(()=>[O("span",Ur,[a(S,{value:e.formData.user_id,"onUpdate:value":s[2]||(s[2]=W=>e.formData.user_id=W),mode:"multiple",placeholder:e.$t("common.select_default_text",[e.$t("campaign.members")]),allowClear:!0},{default:n(()=>[(d(!0),T(L,null,X(e.allStaffMembers,W=>(d(),w(C,{key:W.xid,value:W.xid},{default:n(()=>[c(u(W.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),a(E,{onOnAddSuccess:e.staffMemberAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(k,{gutter:16},{default:n(()=>[a(v,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(b,{label:e.$t("campaign.form"),name:"form_id",help:e.rules.form_id?e.rules.form_id.message:null,validateStatus:e.rules.form_id?"error":null,class:"required"},{default:n(()=>[O("span",Or,[a(S,{value:e.formData.form_id,"onUpdate:value":s[3]||(s[3]=W=>e.formData.form_id=W),placeholder:e.$t("common.select_default_text",[e.$t("campaign.form")]),allowClear:!0,onChange:e.formSelected},{default:n(()=>[(d(!0),T(L,null,X(e.allForms,W=>(d(),w(C,{key:W.xid,value:W.xid,form:W},{default:n(()=>[c(u(W.name),1)]),_:2},1032,["value","form"]))),128))]),_:1},8,["value","placeholder","onChange"]),a(A,{onOnAddSuccess:e.formAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(v,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(b,{label:e.$t("campaign.email_template"),name:"email_template_id",help:e.rules.email_template_id?e.rules.email_template_id.message:null,validateStatus:e.rules.email_template_id?"error":null,class:"required"},{default:n(()=>[O("span",Pr,[a(S,{value:e.formData.email_template_id,"onUpdate:value":s[4]||(s[4]=W=>e.formData.email_template_id=W),placeholder:e.$t("common.select_default_text",[e.$t("campaign.email_template")]),allowClear:!0},{default:n(()=>[(d(!0),T(L,null,X(e.allEmailTemplates,W=>(d(),w(C,{key:W.xid,value:W.xid},{default:n(()=>[c(u(W.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),a(P,{onOnAddSuccess:e.emailTemplateAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(k,{gutter:16,class:"mt-20"},{default:n(()=>[a(v,{xs:24,sm:24,md:8,lg:8},{default:n(()=>[a(b,{label:e.$t("campaign.allow_reference_prefix"),name:"allow_reference_prefix",help:e.rules.allow_reference_prefix?e.rules.allow_reference_prefix.message:null,validateStatus:e.rules.allow_reference_prefix?"error":null,class:"required"},{default:n(()=>[a(U,{checked:e.formData.allow_reference_prefix,"onUpdate:checked":s[5]||(s[5]=W=>e.formData.allow_reference_prefix=W),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1}),e.formData.allow_reference_prefix?(d(),w(v,{key:0,xs:24,sm:24,md:16,lg:16},{default:n(()=>[a(b,{label:e.$t("campaign.reference_prefix"),name:"reference_prefix",help:e.rules.reference_prefix?e.rules.reference_prefix.message:null,validateStatus:e.rules.reference_prefix?"error":null,class:"required"},{default:n(()=>[a(f,{value:e.formData.reference_prefix,"onUpdate:value":s[6]||(s[6]=W=>e.formData.reference_prefix=W),placeholder:e.$t("common.placeholder_default_text",[e.$t("campaign.reference_prefix")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})):$("",!0)]),_:1})],64)):$("",!0),e.currentStep==1?(d(),T(L,{key:1},[!e.formData.detail_fields||e.formData.detail_fields&&e.formData.detail_fields.length==0?(d(),w(D,{key:0,class:"mt-20",description:e.$t("campaign.add_detail_field_description"),type:"info","show-icon":""},null,8,["description"])):$("",!0),e.formData.detail_fields&&e.formData.detail_fields.length>0&&e.addFieldsButtonStatus?(d(),w(D,{key:1,class:"mt-20",description:e.$t("campaign.add_detail_field_error"),type:"error","show-icon":""},null,8,["description"])):$("",!0),O("div",Ir,[(d(!0),T(L,null,X(e.formData.detail_fields,(W,H)=>(d(),w(k,{gutter:16,key:W.id},{default:n(()=>[a(v,{span:7},{default:n(()=>[a(b,{name:["detail_fields",H,"field_name"]},{default:n(()=>[a(f,{value:W.field_name,"onUpdate:value":j=>W.field_name=j,placeholder:e.$t("campaign.field_name")},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["name"])]),_:2},1024),a(v,{span:7},{default:n(()=>[a(b,{name:["detail_fields",H,"field_value"]},{default:n(()=>[a(f,{value:W.field_value,"onUpdate:value":j=>W.field_value=j,placeholder:e.$t("campaign.field_value")},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["name"])]),_:2},1024),a(v,{span:7},{default:n(()=>[a(b,{name:["detail_fields",H,"field_type"]},{default:n(()=>[a(S,{value:W.field_type,"onUpdate:value":j=>W.field_type=j,placeholder:e.$t("common.select_default_text",[e.$t("campaign.field_type")]),allowClear:!0},{default:n(()=>[a(C,{value:"text"},{default:n(()=>[c(u(e.$t("common.text")),1)]),_:1}),a(C,{value:"link"},{default:n(()=>[c(u(e.$t("common.link")),1)]),_:1})]),_:2},1032,["value","onUpdate:value","placeholder"])]),_:2},1032,["name"])]),_:2},1024),a(v,{span:3},{default:n(()=>[a(M,{onClick:j=>e.removeDetailField(W)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),a(k,{gutter:16},{default:n(()=>[a(v,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(b,null,{default:n(()=>[a(B,{type:"dashed",block:"",onClick:e.addDetailField,disabled:e.addFieldsButtonStatus},{default:n(()=>[a(q),c(" "+u(e.$t("campaign.add_detail_field")),1)]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})]),_:1})],64)):$("",!0),e.currentStep==2?(d(),w(N,{key:2,acceptFormat:".csv",allFields:e.selectedFormFields,onFileUploaded:e.leadFileUploaded,onLeadColumnChanged:e.leadColumnChanged},null,8,["allFields","onFileUploaded","onLeadColumnChanged"])):$("",!0)]),_:1})]),_:1},8,["title","width","open","onClose"])}const rn=K(Er,[["render",Fr]]),Mr=x({props:{btnType:{default:"default"},btnClass:{default:""},tooltip:{default:!0},campaign:{default:{}}},emits:["success"],components:{SaveOutlined:_e},setup(e,{emit:s}){const{permsArray:m}=Q(),{addEditRequestAdmin:l,loading:h,rules:y}=le(),r=I(!1),i=I({}),{t:p}=J();ee(()=>{_()});const _=()=>{var v=[];e.campaign&&e.campaign.form&&e.campaign.form.form_fields&&fe(e.campaign.form.form_fields,k=>{v.push({id:Math.random().toString(36).slice(2),field_name:k.name,field_value:""})}),i.value={campaign_id:e.campaign.xid,lead_data:v}},g=()=>{r.value=!0},f=()=>{l({url:"leads/create-lead",data:i.value,successMessage:p("lead.created"),success:v=>{s("success"),b()}})},b=()=>{_(),r.value=!1};return{permsArray:m,visible:r,formData:i,loading:h,rules:y,onSubmit:f,onClose:b,showAdd:g,drawerWidth:window.innerWidth<=991?"90%":"45%"}}}),Rr={key:0};function Lr(e,s,m,l,h,y){const r=o("a-button"),i=o("a-tooltip"),p=o("a-input"),_=o("a-form-item"),g=o("a-col"),f=o("a-row"),b=o("a-form"),v=o("SaveOutlined"),k=o("a-space"),C=o("a-drawer");return e.permsArray.includes("leads_create")||e.permsArray.includes("admin")?(d(),T("div",Rr,[a(i,{title:e.$t("lead.add")},{default:n(()=>[a(r,{type:e.btnType,class:Ut(e.btnClass),onClick:e.showAdd},{icon:n(()=>[oe(e.$slots,"icon")]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["type","class","onClick"])]),_:3},8,["title"]),a(C,{title:e.$t("lead.add"),width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:n(()=>[a(k,null,{default:n(()=>[a(r,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:n(()=>[a(v)]),default:n(()=>[c(" "+u(e.$t("common.create")),1)]),_:1},8,["loading","onClick"]),a(r,{key:"back",onClick:e.onClose},{default:n(()=>[c(u(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),default:n(()=>[a(b,{layout:"vertical"},{default:n(()=>[a(f,{gutter:16},{default:n(()=>[(d(!0),T(L,null,X(e.formData.lead_data,S=>(d(),w(g,{key:S.id,xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(_,{label:S.field_name,name:S.field_name,help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null},{default:n(()=>[a(p,{value:S.field_value,"onUpdate:value":E=>S.field_value=E,placeholder:e.$t("common.placeholder_default_text",[S.field_name])},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["label","name","help","validateStatus"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])])):$("",!0)}const un=K(Mr,[["render",Lr]]),qr=x({props:["members"],setup(e,{emit:s}){return{}}});function Br(e,s,m,l,h,y){const r=o("a-avatar"),i=o("a-tooltip"),p=o("a-avatar-group");return d(),w(p,{"max-count":4,"max-style":{color:"#f56a00",backgroundColor:"#fde3cf"}},{default:n(()=>[(d(!0),T(L,null,X(e.members,_=>(d(),w(i,{key:_.x_user_id,title:_.user.name,placement:"top"},{default:n(()=>[a(r,{src:_.user.profile_image_url},null,8,["src"])]),_:2},1032,["title"]))),128))]),_:1})}const mn=K(qr,[["render",Br]]),zr=x({props:["campaign"],emits:["success"],components:{PlusOutlined:ae,AddLead:un},setup(e,{emit:s}){const{permsArray:m}=Q();return{leadAdded:()=>{s("success")},permsArray:m}}}),Kr={key:1},Vr=O("br",null,null,-1);function Hr(e,s,m,l,h,y){const r=o("PlusOutlined"),i=o("AddLead"),p=o("a-progress"),_=o("a-typography-text"),g=o("a-typography-paragraph");return e.campaign.remaining_leads==0?(d(),T(L,{key:0},[e.permsArray.includes("leads_create")||e.permsArray.includes("admin")?(d(),w(i,{key:0,campaign:e.campaign,btnClass:"p-0",btnType:"link",onSuccess:e.leadAdded},{icon:n(()=>[a(r)]),default:n(()=>[c(" "+u(e.$t("lead.add")),1)]),_:1},8,["campaign","onSuccess"])):(d(),T("span",Kr,"-"))],64)):(d(),T(L,{key:1},[a(p,{percent:parseInt((e.campaign.total_leads-e.campaign.remaining_leads)/e.campaign.total_leads*100),size:"small"},null,8,["percent"]),Vr,a(g,{class:"mt-5"},{default:n(()=>[c(u(e.$t("campaign.remaining_leads"))+": ",1),a(_,{strong:""},{default:n(()=>[c(u(e.campaign.total_leads-e.campaign.remaining_leads)+"/"+u(e.campaign.total_leads),1)]),_:1})]),_:1})],64))}const cn=K(zr,[["render",Hr]]),Nr={components:{PlusOutlined:ae,EditOutlined:ye,DeleteOutlined:pe,PlayCircleOutlined:Me,StopOutlined:ca,AddEdit:rn,AdminPageHeader:me,AddLead:un,CampaignMembers:mn,CampaignProgress:cn},setup(){const{permsArray:e,appSetting:s,formatDateTime:m}=Q(),{url:l,addEditUrl:h,initData:y,columns:r,filterableColumns:i,hashableColumns:p,extraFilters:_}=xt(),g=Te();ee(()=>{f(),g.crudUrl.value=h,g.langKey.value="campaign",g.initData.value={...y},g.formData.value={...y},g.hashableColumns.value=[...p]});const f=()=>{g.tableUrl.value={url:l,extraFilters:_},g.table.filterableColumns=i,g.fetch({page:1})};return{permsArray:e,formatDateTime:m,appSetting:s,columns:r,...g,filterableColumns:i,extraFilters:_,setUrlData:f}}},jr={class:"table-responsive"};function Wr(e,s,m,l,h,y){const r=o("a-page-header"),i=o("router-link"),p=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("PlusOutlined"),b=o("a-button"),v=o("DeleteOutlined"),k=o("a-space"),C=o("a-col"),S=o("a-select-option"),E=o("a-select"),A=o("a-input-search"),P=o("a-input-group"),U=o("a-row"),D=o("admin-page-filters"),M=o("AddEdit"),q=o("PlayCircleOutlined"),B=o("a-tab-pane"),N=o("StopOutlined"),R=o("a-tabs"),F=o("CampaignProgress"),z=o("CampaignMembers"),Z=o("AddLead"),ne=o("EditOutlined"),V=o("a-tooltip"),W=o("a-table"),H=o("admin-page-table-content");return d(),T(L,null,[a(g,null,{header:n(()=>[a(r,{title:e.$t("menu.campaigns"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(p,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[c(u(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(p,null,{default:n(()=>[c(u(e.$t("menu.campaigns")),1)]),_:1})]),_:1})]),_:1}),a(D,null,{default:n(()=>[a(U,{gutter:[16,16]},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:n(()=>[a(k,null,{default:n(()=>[l.permsArray.includes("campaigns_create")||l.permsArray.includes("admin")?(d(),w(b,{key:0,type:"primary",onClick:e.addItem},{default:n(()=>[a(f),c(" "+u(e.$t("campaign.add")),1)]),_:1},8,["onClick"])):$("",!0),e.table.selectedRowKeys.length>0&&(l.permsArray.includes("campaigns_delete")||l.permsArray.includes("admin"))?(d(),w(b,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:n(()=>[a(v)]),default:n(()=>[c(" "+u(e.$t("common.delete")),1)]),_:1},8,["onClick"])):$("",!0)]),_:1})]),_:1}),a(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:n(()=>[a(U,{gutter:[16,16],justify:"end"},{default:n(()=>[a(C,{xs:24,sm:24,md:24,lg:24,xl:12},{default:n(()=>[a(P,{compact:""},{default:n(()=>[a(E,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=j=>e.table.searchColumn=j),placeholder:e.$t("common.select_default_text",[""])},{default:n(()=>[(d(!0),T(L,null,X(l.filterableColumns,j=>(d(),w(S,{key:j.key},{default:n(()=>[c(u(j.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),a(A,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=j=>e.table.searchString=j),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(H,null,{default:n(()=>[a(M,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),l.permsArray.includes("view_completed_campaigns")||l.permsArray.includes("admin")?(d(),w(U,{key:0},{default:n(()=>[a(C,{span:24},{default:n(()=>[a(R,{activeKey:l.extraFilters.campaign_status,"onUpdate:activeKey":s[2]||(s[2]=j=>l.extraFilters.campaign_status=j),onChange:l.setUrlData},{default:n(()=>[a(B,{key:"active"},{tab:n(()=>[O("span",null,[a(q),c(" "+u(e.$t("campaign.active_campaign")),1)])]),_:1}),a(B,{key:"completed"},{tab:n(()=>[O("span",null,[a(N),c(" "+u(e.$t("campaign.completed_campaign")),1)])]),_:1})]),_:1},8,["activeKey","onChange"])]),_:1})]),_:1})):$("",!0),a(U,null,{default:n(()=>[a(C,{span:24},{default:n(()=>[O("div",jr,[a(W,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:j=>({disabled:!1,name:j.xid})},columns:l.columns,"row-key":j=>j.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:n(({column:j,record:Y})=>[j.dataIndex==="progress"?(d(),w(F,{key:0,campaign:Y,onSuccess:e.fetch},null,8,["campaign","onSuccess"])):$("",!0),j.dataIndex==="form"?(d(),T(L,{key:1},[c(u(Y.x_form_id!=""&&Y.form&&Y.form.xid?Y.form.name:"-"),1)],64)):$("",!0),j.dataIndex==="members"?(d(),w(z,{key:2,members:Y.campaign_users},null,8,["members"])):$("",!0),j.dataIndex==="started_on"?(d(),T(L,{key:3},[c(u(Y.started_on&&Y.started_on!=""?l.formatDateTime(Y.started_on):"-"),1)],64)):$("",!0),j.dataIndex==="completed_on"?(d(),T(L,{key:4},[c(u(Y.completed_on&&Y.completed_on!=""?l.formatDateTime(Y.completed_on):"-"),1)],64)):$("",!0),j.dataIndex==="completed_by"?(d(),T(L,{key:5},[c(u(Y.x_completed_by&&Y.completed_by&&Y.completed_by.name?Y.completed_by.name:"-"),1)],64)):$("",!0),j.dataIndex==="last_actioner"?(d(),T(L,{key:6},[c(u(Y.last_actioner&&Y.last_actioner.name?Y.last_actioner.name:"-"),1)],64)):$("",!0),j.dataIndex==="action"?(d(),w(k,{key:7},{default:n(()=>[a(Z,{campaign:Y,btnType:"primary",onSuccess:l.setUrlData},{icon:n(()=>[a(f)]),_:2},1032,["campaign","onSuccess"]),a(V,{title:e.$t("common.edit")},{default:n(()=>[l.permsArray.includes("campaigns_edit")||l.permsArray.includes("admin")?(d(),w(b,{key:0,type:"primary",onClick:se=>e.editItem(Y)},{icon:n(()=>[a(ne)]),_:2},1032,["onClick"])):$("",!0)]),_:2},1032,["title"]),a(V,{title:e.$t("common.delete")},{default:n(()=>[(l.permsArray.includes("campaigns_delete")||l.permsArray.includes("admin"))&&(!Y.children||Y.children.length==0)?(d(),w(b,{key:0,type:"primary",onClick:se=>e.showDeleteConfirm(Y.xid)},{icon:n(()=>[a(v)]),_:2},1032,["onClick"])):$("",!0)]),_:2},1032,["title"])]),_:2},1024)):$("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const Yr=K(Nr,[["render",Wr]]),Gr=x({props:{btnType:{default:"default"},tooltip:{default:!0}},emits:["onAddSuccess"],components:{PlusOutlined:ae,AddEdit:rn},setup(e,{emit:s}){const{permsArray:m}=Q(),{initData:l,addEditUrl:h}=xt(),y=I(!1),r=I("add"),i=I({...l});return{permsArray:m,visible:y,addEditType:r,addEditUrl:h,formData:i,addEditSuccess:()=>{y.value=!1,i.value={...l},s("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),Xr={key:0};function Jr(e,s,m,l,h,y){const r=o("PlusOutlined"),i=o("a-button"),p=o("a-tooltip"),_=o("AddEdit");return e.permsArray.includes("campaigns_create")||e.permsArray.includes("admin")?(d(),T("div",Xr,[e.tooltip?(d(),w(p,{key:0,placement:"topLeft",title:e.$t("campaign.add"),"arrow-point-at-center":""},{default:n(()=>[a(i,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:n(()=>[a(r)]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(d(),w(i,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:n(()=>[a(r)]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick","type"])),a(_,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("campaign.add"),successMessage:e.$t("campaign.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):$("",!0)}const Qr=K(Gr,[["render",Jr]]),Zr={components:{AdminPageHeader:me,CampaignMembers:mn,CampaignProgress:cn,CampaignAddButton:Qr,PlusCircleOutlined:Kn,StopOutlined:ca,PlayCircleOutlined:Me,SyncOutlined:Je},setup(){const{formatDateTime:e,permsArray:s}=Q(),{addEditRequestAdmin:m,loading:l,rules:h}=le(),y=I(void 0),{t:r}=J(),i="call-managers?fields=id,xid,name,reference_prefix,allow_reference_prefix,remaining_leads,total_leads,campaignUsers{id,xid,user_id,x_user_id,campaign_id,x_campaign_id},campaignUsers:user{id,xid,name,profile_image,profile_image_url},form_id,x_form_id,form{id,xid,name,form_fields},detail_fields,last_action_by,x_last_action_by,lastActioner{id,xid,name},completed_by,x_completed_by,completedBy{id,xid,name},started_on,completed_on,upcoming_lead_action",p=Oe();ee(()=>{_()});const _=()=>{const k=axiosAdmin.get(i);Promise.all([k]).then(([C])=>{y.value=C.data})};return{permsArray:s,formatDateTime:e,allCampaigns:y,fetchCampaigns:_,campaignAdded:()=>{axiosAdmin.get(i).then(k=>{y.value=k.data})},stopCampaign:k=>{he.confirm({title:r("campaign.stop_campaign")+"?",icon:a(ie),content:r("campaign.are_you_want_to_stop_campaign"),centered:!0,okText:r("common.yes"),okType:"danger",cancelText:r("common.no"),onOk(){m({url:"campaigns/stop",data:{x_campaign_id:k},successMessage:r("campaign.campaign_stopped_successfully"),success:C=>{_()}})},onCancel(){}})},getLeaActionColor:k=>k=="start_and_new_lead"?"#faad14":k=="resume"?"#52c41a":"",takeAction:k=>{he.confirm({title:r("common.are_you_sure")+"?",icon:a(ie),content:r("campaign.are_you_want_to_create_new_lead"),centered:!0,okText:r("common.yes"),okType:"danger",cancelText:r("common.no"),onOk(){m({url:"campaigns/take-action",data:{x_campaign_id:k.xid},successMessage:r("campaign.new_lead_added"),success:C=>{p.push({name:"admin.call_manager.take_action",params:{id:C.x_lead_id}})}})},onCancel(){}})}}}},xr={class:"dashboard-page-content-container"},eu={key:0},au={key:1};function tu(e,s,m,l,h,y){const r=o("a-page-header"),i=o("router-link"),p=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("a-typography-text"),b=o("CampaignAddButton"),v=o("a-empty"),k=o("a-col"),C=o("a-row"),S=o("CampaignMembers"),E=o("CampaignProgress"),A=o("a-card-meta"),P=o("PlayCircleOutlined"),U=o("PlusCircleOutlined"),D=o("SyncOutlined"),M=o("a-button"),q=o("StopOutlined"),B=o("a-card"),N=o("a-skeleton");return d(),T(L,null,[a(g,null,{header:n(()=>[a(r,{title:e.$t("menu.call_manager"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(p,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[c(u(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(p,null,{default:n(()=>[c(u(e.$t("menu.call_manager")),1)]),_:1})]),_:1})]),_:1}),O("div",xr,[l.allCampaigns!=null?(d(),T("div",eu,[l.allCampaigns.length==0?(d(),w(C,{key:0,gutter:[15,15],class:"mt-30 mb-20"},{default:n(()=>[a(k,{span:24},{default:n(()=>[a(v,{"image-style":{height:"250px"}},{description:n(()=>[a(f,{type:"warning",strong:""},{default:n(()=>[c(u(e.$t("campaign.no_call_manager_data")),1)]),_:1})]),default:n(()=>[a(b,{btnType:"primary",onOnAddSuccess:l.campaignAdded,tooltip:!1},{default:n(()=>[c(u(e.$t("campaign.add")),1)]),_:1},8,["onOnAddSuccess"])]),_:1})]),_:1})]),_:1})):(d(),w(C,{key:1,gutter:[15,15],class:"mt-30 mb-20"},{default:n(()=>[(d(!0),T(L,null,X(l.allCampaigns,R=>(d(),w(k,{key:R.xid,xs:24,sm:24,md:12,lg:8,xl:8},{default:n(()=>[a(B,{title:R.name,hoverable:""},{actions:n(()=>[a(M,{type:"link",style:ga({color:l.getLeaActionColor(R.upcoming_lead_action)}),onClick:F=>l.takeAction(R)},{icon:n(()=>[R.upcoming_lead_action=="start_and_new_lead"?(d(),w(P,{key:0})):R.upcoming_lead_action=="new_lead"?(d(),w(U,{key:1})):R.upcoming_lead_action=="start"?(d(),w(P,{key:2})):(d(),w(D,{key:3}))]),default:n(()=>[c(" "+u(e.$t(`campaign.${R.upcoming_lead_action}`)),1)]),_:2},1032,["style","onClick"]),a(M,{type:"link",onClick:F=>l.stopCampaign(R.xid),danger:""},{icon:n(()=>[a(q)]),default:n(()=>[c(" "+u(e.$t("common.stop")),1)]),_:2},1032,["onClick"])]),default:n(()=>[a(A,null,{description:n(()=>[a(C,{gutter:16,class:"mt-10"},{default:n(()=>[a(k,{span:8},{default:n(()=>[c(u(e.$t("campaign.members")),1)]),_:1}),a(k,{span:16},{default:n(()=>[a(S,{members:R.campaign_users},null,8,["members"])]),_:2},1024)]),_:2},1024),a(C,{gutter:16,class:"mt-10"},{default:n(()=>[a(k,{span:8},{default:n(()=>[c(u(e.$t("campaign.progress")),1)]),_:1}),a(k,{span:16},{default:n(()=>[a(E,{campaign:R,onSuccess:l.fetchCampaigns},null,8,["campaign","onSuccess"])]),_:2},1024)]),_:2},1024),a(C,{gutter:16,class:"mt-20"},{default:n(()=>[a(k,{span:8},{default:n(()=>[c(u(e.$t("campaign.last_actioner")),1)]),_:1}),a(k,{span:16},{default:n(()=>[c(u(R.last_actioner&&R.last_actioner.name?R.last_actioner.name:"-"),1)]),_:2},1024)]),_:2},1024),a(C,{gutter:16,class:"mt-25"},{default:n(()=>[a(k,{span:8},{default:n(()=>[c(u(e.$t("campaign.started_on")),1)]),_:1}),a(k,{span:16},{default:n(()=>[c(u(R.started_on!=null?l.formatDateTime(R.started_on):"-"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["title"])]),_:2},1024))),128))]),_:1}))])):(d(),T("div",au,[a(N,{active:""})]))])],64)}const nu=K(Zr,[["render",tu]]),lu=x({props:{dateTime:{default:void 0},disabled:{default:!1},isFutureDateDisabled:{default:!0}},emits:["dateTimeChanged"],setup(e,{emit:s}){const m=I(void 0),{disabledDate:l,formatDateTime:h,dayjs:y}=Q();return ee(()=>{e.dateTime&&(m.value=y(e.dateTime))}),{dateTimeValue:m,disabledDate:l,formatOrderDate:p=>p?h(p.format()):void 0,dateTimeChanged:p=>{const _=p?p.utc().format("YYYY-MM-DDTHH:mm:ssZ"):void 0;s("dateTimeChanged",_)}}}});function ou(e,s,m,l,h,y){const r=o("a-date-picker");return d(),w(r,{value:e.dateTimeValue,"onUpdate:value":s[0]||(s[0]=i=>e.dateTimeValue=i),format:e.formatOrderDate,"disabled-date":e.isFutureDateDisabled?e.disabledDate:void 0,"show-time":"",placeholder:e.$t("common.date_time"),style:{width:"100%"},onChange:e.dateTimeChanged,disabled:e.disabled},null,8,["value","format","disabled-date","placeholder","onChange","disabled"])}const su=K(lu,[["render",ou]]),du=x({props:{bookingType:{default:null},xLeadId:{default:null},showDeleteIcon:{default:!0},showDeleteText:{default:!0}},emits:["success"],components:{DeleteOutlined:pe,ExclamationCircleOutlined:ie},setup(e,{emit:s}){const{t:m}=J(),l=I(""),{addEditRequestAdmin:h,loading:y}=le();return ee(()=>{l.value=e.bookingType=="salesman_bookings"?m("salesman_booking.delete_salesman_booking"):m("lead_follow_up.delete_follow_up")}),{pageTitle:l,loading:y,deleteModal:()=>{const i=e.bookingType=="salesman_bookings"?"salesman-bookings":"lead-follow-ups/delete",p=e.bookingType=="salesman_bookings"?"salesman_booking":"lead_follow_up";he.confirm({title:m("common.delete")+"?",icon:a(ie),content:m(`${p}.delete_message`),centered:!0,okText:m("common.yes"),okType:"danger",cancelText:m("common.no"),onOk(){h({url:i,data:{x_lead_id:e.xLeadId,booking_type:e.bookingType},success:_=>{s("success"),$e.success({message:m("common.success"),description:m(`${p}.deleted`),placement:"bottomRight"})}})},onCancel(){}})}}}});function iu(e,s,m,l,h,y){const r=o("DeleteOutlined"),i=o("a-button"),p=o("a-tooltip");return d(),w(p,{title:e.pageTitle},{default:n(()=>[a(i,{style:{background:"#ff4d4f",borderColor:"#ff4d4f"},type:"primary",onClick:e.deleteModal,loading:e.loading},ta({default:n(()=>[e.showDeleteText?(d(),T(L,{key:0},[c(u(e.$t("common.delete")),1)],64)):$("",!0)]),_:2},[e.showDeleteIcon?{name:"icon",fn:n(()=>[a(r)]),key:"0"}:void 0]),1032,["onClick","loading"])]),_:1},8,["title"])}const Ba=K(du,[["render",iu]]),ru=x({props:{leadId:{default:null},bookingType:{default:null},btnType:{default:"primary"},btnShape:{default:"rectangle"}},emits:["success"],components:{PlusOutlined:ae,LoadingOutlined:Ae,SaveOutlined:_e,DeleteOutlined:pe,DateTimePicker:su,DeleteBooking:Ba},setup(e,{emit:s}){const{t:m}=J(),l=I("add"),h=I({lead_id:e.leadId,booking_type:e.bookingType,date_time:void 0,user_id:void 0,notes:""}),y=I(!1),r=I(""),i=I({}),p=I([]),_=e.bookingType=="salesman_bookings"?`leads/${e.leadId}?fields=id,xid,salesman_booking_id,x_salesman_booking_id,salesmanBooking{id,xid,log_type,user_id,x_user_id,date_time,notes},salesmanBooking:user{id,xid,name}`:`leads/${e.leadId}?fields=id,xid,lead_follow_up_id,x_lead_follow_up_id,leadFollowUp{id,xid,log_type,user_id,x_user_id,date_time,notes},leadFollowUp:user{id,xid,name}`,{addEditRequestAdmin:g,loading:f,rules:b}=le(),{appSetting:v}=Q(),k=ke(()=>e.bookingType=="salesman_bookings"?"salesman_booking":"lead_follow_up");ee(()=>{r.value=e.bookingType=="salesman_bookings"?m("menu.salesman_bookings"):m("menu.lead_follow_up"),C()});const C=()=>{const P=axiosAdmin.get(_),U=axiosAdmin.get(`leads/campaign-members?lead_id=${e.leadId}&booking_type=${e.bookingType}`);Promise.all([P,U]).then(([D,M])=>{var q=D.data;e.bookingType=="salesman_bookings"&&q.salesman_booking&&q.salesman_booking.xid?(h.value={...h.value,date_time:q.salesman_booking.date_time,user_id:q.salesman_booking.x_user_id,notes:q.salesman_booking.notes},l.value="edit"):e.bookingType=="lead_follow_up"&&q.lead_follow_up&&q.lead_follow_up.xid?(h.value={...h.value,date_time:q.lead_follow_up.date_time,user_id:q.lead_follow_up.x_user_id,notes:q.lead_follow_up.notes},l.value="edit"):h.value={...h.value,date_time:void 0,user_id:void 0,notes:""},i.value=q,p.value=M.data.users})},S=()=>{const P=l.value=="add"?"created":"updated";g({url:"leads/create-booking",data:h.value,successMessage:m(`${k.value}.${P}`),success:U=>{s("success",U.booking),A(),C()}})},E=()=>{y.value=!0},A=()=>{y.value=!1};return{loading:f,rules:b,onSubmit:S,appSetting:v,formData:h,addEditType:l,pageTitle:r,hideModal:A,showModal:E,visible:y,users:p,leadDetails:i,getInitData:C,drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function uu(e,s,m,l,h,y){const r=o("a-button"),i=o("a-tooltip"),p=o("a-select-option"),_=o("a-select"),g=o("a-form-item"),f=o("a-col"),b=o("a-row"),v=o("DateTimePicker"),k=o("a-textarea"),C=o("a-form"),S=o("SaveOutlined"),E=o("DeleteBooking"),A=o("a-modal");return d(),T(L,null,[a(i,{title:e.pageTitle},{default:n(()=>[a(r,{type:e.btnType,shape:e.btnShape,size:"small",onClick:e.showModal},{default:n(()=>[oe(e.$slots,"default")]),_:3},8,["type","shape","onClick"])]),_:3},8,["title"]),a(A,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit,destroyOnClose:!0},{footer:n(()=>[a(r,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:n(()=>[a(S)]),default:n(()=>[c(" "+u(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),e.leadDetails&&e.leadDetails.xid&&e.bookingType=="salesman_bookings"&&e.leadDetails.x_salesman_booking_id!=null||e.leadDetails&&e.leadDetails.xid&&e.bookingType=="lead_follow_up"&&e.leadDetails.x_lead_follow_up_id!=null?(d(),w(E,{key:0,bookingType:e.bookingType,onSuccess:s[3]||(s[3]=()=>{e.visible=!1,e.getInitData()}),xLeadId:e.leadDetails.xid},null,8,["bookingType","xLeadId"])):$("",!0),a(r,{key:"back",onClick:e.hideModal},{default:n(()=>[c(u(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[a(C,{layout:"vertical"},{default:n(()=>[a(b,{gutter:16},{default:n(()=>[a(f,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(g,{label:e.bookingType=="salesman_bookings"?e.$t("salesman.salesman"):e.$t("user.staff_member"),name:"user_id",help:e.rules.user_id?e.rules.user_id.message:null,validateStatus:e.rules.user_id?"error":null,class:"required"},{default:n(()=>[a(_,{value:e.formData.user_id,"onUpdate:value":s[0]||(s[0]=P=>e.formData.user_id=P),placeholder:e.$t("common.select_default_text",[e.bookingType=="salesman_bookings"?e.$t("salesman.salesman"):e.$t("user.staff_member")]),allowClear:!0,optionFilterProp:"title","show-search":""},{default:n(()=>[(d(!0),T(L,null,X(e.users,P=>(d(),w(p,{key:P.xid,value:P.xid,title:P.name},{default:n(()=>[c(u(P.name),1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(b,{gutter:16},{default:n(()=>[a(f,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(g,{label:e.bookingType=="salesman_bookings"?e.$t("lead.booking_time"):e.$t("lead_follow_up.follow_up_time"),name:"date_time",help:e.rules.date_time?e.rules.date_time.message:null,validateStatus:e.rules.date_time?"error":null,class:"required"},{default:n(()=>[a(v,{dateTime:e.formData.date_time,isFutureDateDisabled:!1,onDateTimeChanged:s[1]||(s[1]=P=>e.formData.date_time=P)},null,8,["dateTime"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(b,{gutter:16},{default:n(()=>[a(f,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(g,{label:e.$t("common.notes"),name:"notes",help:e.rules.notes?e.rules.notes.message:null,validateStatus:e.rules.notes?"error":null,class:"required"},{default:n(()=>[a(k,{value:e.formData.notes,"onUpdate:value":s[2]||(s[2]=P=>e.formData.notes=P),placeholder:e.$t("common.placeholder_default_text",[e.$t("common.notes")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])],64)}const mu=K(ru,[["render",uu]]),cu=e=>{const{convertStringToKey:s,getCampaignUrl:m,user:l}=Q(),h="lead{id,xid,reference_number,lead_data,started,campaign_id,x_campaign_id,time_taken,first_action_by,x_first_action_by,last_action_by,x_last_action_by},lead:campaign{id,xid,name,status},lead:firstActioner{id,xid,name},lead:lastActioner{id,xid,name}",y="form-field-names/all",r=`lead-logs?fields=id,xid,log_type,time_taken,date_time,user_id,x_user_id,user{id,xid,name,profile_image,profile_image_url},lead_id,x_lead_id,${h}`,i=I([]),p=["lead_id","campaign_id","user_id"],{t:_}=J(),g=I([]),f=I([]),b=I([]);return{url:r,columns:g,filterableColumns:[],hashableColumns:p,allFormFieldNames:i,allCampaigns:f,allUsers:b,getPrefetchData:()=>{const C=m(),S=axiosAdmin.get(C),E=axiosAdmin.get(y),A=axiosAdmin.get(`all-users?log_type=${e.logType}`);return Promise.all([E,S,A]).then(([P,U,D])=>{i.value=P.data.data,f.value=U.data,b.value=D.data.users;var M=[];if(e.showLeadDetails){var M=[{title:_("lead.reference_number"),dataIndex:"reference_number"},{title:_("lead.campaign"),dataIndex:"campaign"}];e.showFormFields&&fe(P.data.data,R=>{M.push({title:R.field_name,dataIndex:s(R.field_name)})})}e.logType=="call_log"&&M.push({title:_("lead.call_duration"),dataIndex:"time_taken"});var q=_("lead.called_on"),B=_("lead.call_by");e.logType=="lead_follow_up"?q=_("lead.follow_up_time"):e.logType=="salesman_booking"?(q=_("lead.booking_time"),B=_("menu.salesman")):e.logType=="notes"&&(q=_("lead.added_on"),B=_("lead.added_by")),e.logType=="notes"&&M.push({title:_("common.notes"),dataIndex:"notes"}),M=[...M,{title:q,dataIndex:"date_time"},{title:B,dataIndex:"actioner"}],e.showAction&&M.push({title:_("common.action"),dataIndex:"action"}),g.value=M})}}},pu={props:{pageName:{default:"index"},leadId:{default:void 0},showCampaignStatus:{default:!1},showTableSearch:{default:!0},showUserFilter:{default:!1},showDateFilter:{default:!0},showLeadDetails:{default:!0},showFormFields:{default:!0},showAction:{default:!0},logType:{default:"call_log"},scrollStyle:{default:{}}},components:{PlayCircleOutlined:Me,StopOutlined:ca,DateRangePicker:oa},setup(e){const{permsArray:s,appSetting:m,formatDateTime:l,convertStringToKey:h,getCampaignUrl:y,user:r,formatTimeDuration:i}=Q(),p=Ve(),_=wa(),{url:g,columns:f,filterableColumns:b,allFormFieldNames:v,hashableColumns:k,allCampaigns:C,allUsers:S,getPrefetchData:E}=cu(e),A=I({campaign_id:void 0,page_name:e.pageName,campaign_status:"active",lead_id:e.leadId!=null?e.leadId:void 0,log_type:e.logType,dates:[]}),P=I({log_type:e.logType,user_id:void 0});ee(()=>{E().then(q=>{e.logType!="salesman_bookings"&&e.pageName!="lead_action"&&(P.value={...P.value,user_id:r.value.xid}),_.hashable.value=[...k],U()})});const U=()=>{_.tableUrl.value={url:g,filters:P,extraFilters:A},_.table.filterableColumns=b,_.hashable.value=[...k],_.table.pagination={..._.table.pagination,current:1},_.fetch({page:1})};return{..._,...p,permsArray:s,appSetting:m,formatDateTime:l,formatTimeDuration:i,columns:f,filterableColumns:b,allFormFieldNames:v,convertStringToKey:h,findFieldValue:(q,B)=>{var N="-";return fe(B,R=>{q.includes(R.field_name)&&(N=R.field_value)}),N},allCampaigns:C,allUsers:S,filters:P,extraFilters:A,setUrlData:U,campaignTypeChanged:q=>{A.value={...A.value,campaign_id:void 0};const B=y(A.value.campaign_status),N=axiosAdmin.get(B);Promise.all([N]).then(([R])=>{C.value=R.data,U()})}}}},_u={key:0,class:"table-responsive"},fu={key:1};function gu(e,s,m,l,h,y){const r=o("PlayCircleOutlined"),i=o("a-tab-pane"),p=o("StopOutlined"),_=o("a-tabs"),g=o("a-col"),f=o("a-row"),b=o("a-select-option"),v=o("a-select"),k=o("DateRangePicker"),C=o("a-button"),S=o("a-table"),E=o("view-lead-details");return d(),T(L,null,[m.showCampaignStatus?(d(),w(f,{key:0},{default:n(()=>[a(g,{span:24},{default:n(()=>[a(_,{activeKey:l.extraFilters.campaign_status,"onUpdate:activeKey":s[0]||(s[0]=A=>l.extraFilters.campaign_status=A),onChange:l.campaignTypeChanged},{default:n(()=>[a(i,{key:"active"},{tab:n(()=>[O("span",null,[a(r),c(" "+u(e.$t("campaign.active_campaign")),1)])]),_:1}),l.permsArray.includes("view_completed_campaigns")||l.permsArray.includes("admin")?(d(),w(i,{key:"completed"},{tab:n(()=>[O("span",null,[a(p),c(" "+u(e.$t("campaign.completed_campaign")),1)])]),_:1})):$("",!0)]),_:1},8,["activeKey","onChange"])]),_:1})]),_:1})):$("",!0),m.showTableSearch||m.showDateFilter||m.showUserFilter||l.permsArray.includes("leads_view_all")||l.permsArray.includes("admin")?(d(),w(f,{key:1,gutter:[15,15],class:"mb-20"},{default:n(()=>[m.showTableSearch?(d(),w(g,{key:0,xs:24,sm:24,md:12,lg:6,xl:6},{default:n(()=>[a(v,{value:l.extraFilters.campaign_id,"onUpdate:value":s[1]||(s[1]=A=>l.extraFilters.campaign_id=A),placeholder:e.$t("common.select_default_text",[e.$t("lead.campaign")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:l.setUrlData},{default:n(()=>[(d(!0),T(L,null,X(l.allCampaigns,A=>(d(),w(b,{key:A.xid,title:A.name,value:A.xid},{default:n(()=>[c(u(A.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1})):$("",!0),m.showUserFilter||l.permsArray.includes("leads_view_all")||l.permsArray.includes("admin")?(d(),w(g,{key:1,xs:24,sm:24,md:12,lg:6,xl:6},{default:n(()=>[a(v,{value:l.filters.user_id,"onUpdate:value":s[2]||(s[2]=A=>l.filters.user_id=A),placeholder:e.$t("common.select_default_text",[e.$t("user.user")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:l.setUrlData},{default:n(()=>[(d(!0),T(L,null,X(l.allUsers,A=>(d(),w(b,{key:A.xid,title:A.name,value:A.xid},{default:n(()=>[c(u(A.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1})):$("",!0),m.showDateFilter||l.permsArray.includes("leads_view_all")||l.permsArray.includes("admin")?(d(),w(g,{key:2,xs:24,sm:24,md:8,lg:8,xl:8},{default:n(()=>[a(k,{onDateTimeChanged:s[3]||(s[3]=A=>{l.extraFilters.dates=A,l.setUrlData()})})]),_:1})):$("",!0)]),_:1})):$("",!0),a(f,{class:"mt-20"},{default:n(()=>[a(g,{span:24},{default:n(()=>[l.columns&&l.columns.length>0?(d(),T("div",_u,[a(S,{columns:l.columns,"row-key":A=>A.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,scroll:m.scrollStyle},{bodyCell:n(({column:A,record:P})=>[(d(!0),T(L,null,X(l.allFormFieldNames,U=>(d(),T(L,{key:U.xid},[A.dataIndex===l.convertStringToKey(U.field_name)?(d(),T(L,{key:0},[c(u(l.findFieldValue(U.similar_field_names,P.lead.lead_data)),1)],64)):$("",!0)],64))),128)),A.dataIndex==="time_taken"?(d(),T(L,{key:0},[c(u(l.formatTimeDuration(P.time_taken)),1)],64)):$("",!0),A.dataIndex==="date_time"?(d(),T(L,{key:1},[c(u(l.formatDateTime(P.date_time)),1)],64)):$("",!0),A.dataIndex==="reference_number"?(d(),T(L,{key:2},[m.showLeadDetails?(d(),w(C,{key:0,type:"link",class:"p-0",onClick:U=>e.showViewDrawer(P.lead)},{default:n(()=>[c(u(P.lead.reference_number!=""&&P.lead.reference_number!=null?P.lead.reference_number:"---"),1)]),_:2},1032,["onClick"])):(d(),T("span",fu,u(P.lead.reference_number),1))],64)):$("",!0),A.dataIndex==="campaign"?(d(),T(L,{key:3},[c(u(P.lead&&P.lead.campaign&&P.lead.campaign.name?P.lead.campaign.name:"-"),1)],64)):$("",!0),A.dataIndex==="actioner"?(d(),T(L,{key:4},[c(u(P.user&&P.user.name?P.user.name:"-"),1)],64)):$("",!0),A.dataIndex=="action"?oe(e.$slots,"action",{key:5,record:P}):$("",!0)]),_:3},8,["columns","row-key","data-source","pagination","loading","onChange","scroll"])])):$("",!0)]),_:3})]),_:3}),a(E,{visible:e.isViewDrawerVisible,lead:e.viewDrawerData,onClose:e.hideViewDrawer},null,8,["visible","lead","onClose"])],64)}const za=K(pu,[["render",gu]]);const hu={props:{leadId:{default:void 0},refresh:{default:void 0}},emits:["dataFetched"],components:{FileTextOutlined:ya,PhoneOutlined:Ma,ShoppingCartOutlined:va,ScheduleOutlined:ha,MailOutlined:ka},setup(e,{emit:s}){const{formatDateTime:m}=Q(),l=`lead-logs?fields=id,xid,log_type,time_taken,date_time,user_id,x_user_id,user{id,xid,name},created_by_id,x_created_by_id,creator{id,xid,name},lead_id,x_lead_id,lead{id,xid,reference_number,lead_data,campaign_id,x_campaign_id},lead:campaign{id,xid,name}&log_type=all&page_name=lead_action&lead_id=${e.leadId}&order=id desc`,h=I([]),y=I(1),r=I(0),i=I(10);ee(()=>{p(1)});const p=_=>{const g=(_-1)*i.value;var f=`${l}&offset=${g}&limit=${i.value}`;axiosAdmin.get(f).then(b=>{h.value=b.data,r.value=b.meta.paging.total,s("dataFetched")})};return Se(y,(_,g)=>{p(_)}),Se(()=>e.refresh,(_,g)=>{_==!0&&p(1)}),{allLeadLogs:h,formatDateTime:m,totalRecords:r,currentPage:y,perPageRecords:i}}},bu={class:"right-timeline-div"},yu={key:0},vu={key:1},ku={key:2},Cu={key:3},wu={key:4},Su={style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",zIndex:1,textAlign:"center"}};function Du(e,s,m,l,h,y){const r=o("PhoneOutlined"),i=o("MailOutlined"),p=o("FileTextOutlined"),_=o("ScheduleOutlined"),g=o("ShoppingCartOutlined"),f=o("a-timeline-item"),b=o("a-timeline"),v=o("perfect-scrollbar"),k=o("a-pagination");return d(),T(L,null,[O("div",bu,[a(v,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:n(()=>[a(b,null,{default:n(()=>[(d(!0),T(L,null,X(l.allLeadLogs,C=>(d(),w(f,{key:C.xid},{dot:n(()=>[C.log_type=="call_log"?(d(),w(r,{key:0})):$("",!0),C.log_type=="email"?(d(),w(i,{key:1})):C.log_type=="notes"?(d(),w(p,{key:2})):C.log_type=="lead_follow_up"?(d(),w(_,{key:3})):C.log_type=="salesman_bookings"?(d(),w(g,{key:4})):$("",!0)]),default:n(()=>[C.log_type=="call_log"?(d(),T("span",yu,u(e.$t("lead.call_log_timeline_message",[C.user.name,l.formatDateTime(C.date_time)])),1)):C.log_type=="email"?(d(),T("span",vu,u(e.$t("lead.email_timeline_message",[C.user.name,l.formatDateTime(C.date_time)])),1)):C.log_type=="notes"?(d(),T("span",ku,u(e.$t("lead.notes_timeline_message",[C.user.name,l.formatDateTime(C.date_time)])),1)):C.log_type=="lead_follow_up"?(d(),T("span",Cu,u(e.$t("lead_follow_up.follow_up_timeline_message",[C.creator.name,C.user.name,l.formatDateTime(C.date_time)])),1)):C.log_type=="salesman_bookings"?(d(),T("span",wu,u(e.$t("salesman_booking.salesman_bookings_timeline_message",[C.creator.name,C.user.name,l.formatDateTime(C.date_time)])),1)):$("",!0)]),_:2},1024))),128))]),_:1})]),_:1})]),O("div",Su,[a(k,{current:l.currentPage,"onUpdate:current":s[0]||(s[0]=C=>l.currentPage=C),simple:"",total:l.totalRecords},null,8,["current","total"])])],64)}const $u=K(hu,[["render",Du]]),Au=e=>{const{convertStringToKey:s,getCampaignUrl:m,user:l}=Q(),h="lead{id,xid,reference_number,lead_data,started,campaign_id,x_campaign_id,time_taken,first_action_by,x_first_action_by,last_action_by,x_last_action_by},lead:campaign{id,xid,name,status},lead:firstActioner{id,xid,name},lead:lastActioner{id,xid,name}",y="form-field-names/all",r=`lead-logs?fields=id,xid,log_type,time_taken,date_time,user_id,x_user_id,notes,user{id,xid,name,profile_image,profile_image_url},lead_id,x_lead_id,${h}`,i=I([]),p="lead-logs",_=["lead_id","campaign_id","user_id"],{t:g}=J(),f={notes:"",log_type:"notes"},b=I([]),v=I([]),k=I([]);return{url:r,addEditUrl:p,initData:f,columns:b,filterableColumns:[],hashableColumns:_,allFormFieldNames:i,allCampaigns:v,allUsers:k,getPrefetchData:()=>{const E=m(),A=axiosAdmin.get(E),P=axiosAdmin.get(y),U=axiosAdmin.get(`all-users?log_type=${e.logType}`);return Promise.all([P,A,U]).then(([D,M,q])=>{i.value=D.data.data,v.value=M.data,k.value=q.data.users;var B=[];if(e.showLeadDetails){var B=[{title:g("lead.reference_number"),dataIndex:"reference_number"},{title:g("lead.campaign"),dataIndex:"campaign"}];e.showFormFields&&fe(D.data.data,R=>{B.push({title:R.field_name,dataIndex:s(R.field_name)})})}B.push({title:g("common.notes"),dataIndex:"notes",width:e.showLeadDetails&&e.showFormFields?"40%":"80%"}),e.showActionButton&&B.push({title:g("common.action"),dataIndex:"action"}),b.value=B})}}},Tu=x({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ae,LoadingOutlined:Ae,SaveOutlined:_e},setup(e,{emit:s}){const{addEditRequestAdmin:m,loading:l,rules:h}=le();return{loading:l,rules:h,onClose:()=>{h.value={},s("closed")},onSubmit:()=>{m({url:e.url,data:e.formData,successMessage:e.successMessage,success:i=>{s("addEditSuccess",i.xid)}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function Eu(e,s,m,l,h,y){const r=o("a-textarea"),i=o("a-form-item"),p=o("a-col"),_=o("a-row"),g=o("a-form"),f=o("SaveOutlined"),b=o("a-button"),v=o("a-modal");return d(),w(v,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:n(()=>[a(b,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:n(()=>[a(f)]),default:n(()=>[c(" "+u(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),a(b,{key:"back",onClick:e.onClose},{default:n(()=>[c(u(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[a(g,{layout:"vertical"},{default:n(()=>[a(_,{gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("common.notes"),name:"notes",help:e.rules.notes?e.rules.notes.message:null,validateStatus:e.rules.notes?"error":null,class:"required"},{default:n(()=>[a(r,{value:e.formData.notes,"onUpdate:value":s[0]||(s[0]=k=>e.formData.notes=k),placeholder:e.$t("common.placeholder_default_text",[e.$t("common.notes")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const Uu=K(Tu,[["render",Eu]]),Ou={props:{pageName:{default:"index"},leadId:{default:void 0},logType:{default:"notes"},scrollStyle:{default:{}},showCampaignStatus:{default:!1},showTableSearch:{default:!1},showUserFilter:{default:!1},showDateFilter:{default:!0},showAddButton:{default:!1},showActionButton:{default:!0},showFormFields:{default:!1},showLeadDetails:{default:!1}},emits:["success"],components:{PlusOutlined:ae,EditOutlined:ye,DeleteOutlined:pe,PlayCircleOutlined:Me,StopOutlined:ca,AddEdit:Uu,DateRangePicker:oa},setup(e,{emit:s}){const{permsArray:m,appSetting:l,user:h,formatDateTime:y,convertStringToKey:r,getCampaignUrl:i}=Q(),{url:p,addEditUrl:_,initData:g,columns:f,filterableColumns:b,allFormFieldNames:v,hashableColumns:k,allCampaigns:C,allUsers:S,getPrefetchData:E}=Au(e),A=Te(),P=Ve(),U=I({page_name:e.pageName,log_type:e.logType,campaign_id:void 0,campaign_status:"active",lead_id:e.leadId,dates:[]}),D=I({log_type:e.logType,user_id:void 0});ee(()=>{E().then(R=>{e.logType!="salesman_bookings"&&e.pageName!="lead_action"&&(D.value={...D.value,user_id:h.value.xid}),A.crudUrl.value=_,A.langKey.value="notes",A.initData.value={...g,lead_id:e.leadId},A.formData.value={...g,lead_id:e.leadId},A.hashableColumns.value=[...k],A.hashable.value=[...k],M()})});const M=()=>{A.hashableColumns.value=[...k],A.tableUrl.value={url:p,filters:D,extraFilters:U},A.table.filterableColumns=b,A.table.pagination={...A.table.pagination,current:1},A.fetch({page:1})};return{permsArray:m,appSetting:l,columns:f,...A,...P,filterableColumns:b,user:h,formatDateTime:y,allFormFieldNames:v,findFieldValue:(R,F)=>{var z="-";return fe(F,Z=>{R.includes(Z.field_name)&&(z=Z.field_value)}),z},convertStringToKey:r,onAddEditSuccess:R=>{A.addEditSuccess(R),s("success")},allCampaigns:C,allUsers:S,filters:D,extraFilters:U,setUrlData:M,campaignTypeChanged:R=>{U.value={...U.value,campaign_id:void 0};const F=i(U.value.campaign_status),z=axiosAdmin.get(F);Promise.all([z]).then(([Z])=>{C.value=Z.data,M()})}}}},Pu={class:"table-responsive lead-notes-table"},Iu={key:1},Fu={style:{"text-align":"justify"}};function Mu(e,s,m,l,h,y){const r=o("AddEdit"),i=o("PlayCircleOutlined"),p=o("a-tab-pane"),_=o("StopOutlined"),g=o("a-tabs"),f=o("a-col"),b=o("a-row"),v=o("PlusOutlined"),k=o("a-button"),C=o("a-select-option"),S=o("a-select"),E=o("DateRangePicker"),A=o("a-avatar"),P=o("a-typography-paragraph"),U=o("a-comment"),D=o("EditOutlined"),M=o("DeleteOutlined"),q=o("a-space"),B=o("a-table"),N=o("view-lead-details");return d(),T(L,null,[a(r,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:l.onAddEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),m.showCampaignStatus?(d(),w(b,{key:0},{default:n(()=>[a(f,{span:24},{default:n(()=>[a(g,{activeKey:l.extraFilters.campaign_status,"onUpdate:activeKey":s[0]||(s[0]=R=>l.extraFilters.campaign_status=R),onChange:l.campaignTypeChanged},{default:n(()=>[a(p,{key:"active"},{tab:n(()=>[O("span",null,[a(i),c(" "+u(e.$t("campaign.active_campaign")),1)])]),_:1}),l.permsArray.includes("view_completed_campaigns")||l.permsArray.includes("admin")?(d(),w(p,{key:"completed"},{tab:n(()=>[O("span",null,[a(_),c(" "+u(e.$t("campaign.completed_campaign")),1)])]),_:1})):$("",!0)]),_:1},8,["activeKey","onChange"])]),_:1})]),_:1})):$("",!0),m.showAddButton||m.showTableSearch||m.showDateFilter||m.showUserFilter||l.permsArray.includes("leads_view_all")||l.permsArray.includes("admin")?(d(),w(b,{key:1,gutter:[15,15],class:"mb-20"},{default:n(()=>[m.showAddButton?(d(),w(f,{key:0,xs:24,sm:24,md:12,lg:6,xl:6},{default:n(()=>[a(k,{type:"primary",onClick:e.addItem,block:""},{default:n(()=>[a(v),c(" "+u(e.$t("notes.add")),1)]),_:1},8,["onClick"])]),_:1})):$("",!0),m.showTableSearch?(d(),w(f,{key:1,xs:24,sm:24,md:12,lg:6,xl:6},{default:n(()=>[a(S,{value:l.extraFilters.campaign_id,"onUpdate:value":s[1]||(s[1]=R=>l.extraFilters.campaign_id=R),placeholder:e.$t("common.select_default_text",[e.$t("lead.campaign")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:l.setUrlData},{default:n(()=>[(d(!0),T(L,null,X(l.allCampaigns,R=>(d(),w(C,{key:R.xid,title:R.name,value:R.xid},{default:n(()=>[c(u(R.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1})):$("",!0),m.showUserFilter||l.permsArray.includes("leads_view_all")||l.permsArray.includes("admin")?(d(),w(f,{key:2,xs:24,sm:24,md:12,lg:6,xl:6},{default:n(()=>[a(S,{value:l.filters.user_id,"onUpdate:value":s[2]||(s[2]=R=>l.filters.user_id=R),placeholder:e.$t("common.select_default_text",[e.$t("user.user")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:l.setUrlData},{default:n(()=>[(d(!0),T(L,null,X(l.allUsers,R=>(d(),w(C,{key:R.xid,title:R.name,value:R.xid},{default:n(()=>[c(u(R.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1})):$("",!0),m.showDateFilter||l.permsArray.includes("leads_view_all")||l.permsArray.includes("admin")?(d(),w(f,{key:3,xs:24,sm:24,md:8,lg:8,xl:8},{default:n(()=>[a(E,{onDateTimeChanged:s[3]||(s[3]=R=>{l.extraFilters.dates=R,l.setUrlData()})})]),_:1})):$("",!0)]),_:1})):$("",!0),a(b,{class:"mt-20"},{default:n(()=>[a(f,{span:24},{default:n(()=>[O("div",Pu,[a(B,{columns:l.columns,"row-key":R=>R.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,scroll:m.scrollStyle},{bodyCell:n(({column:R,record:F})=>[R.dataIndex==="reference_number"?(d(),T(L,{key:0},[m.showLeadDetails?(d(),w(k,{key:0,type:"link",class:"p-0",onClick:z=>e.showViewDrawer(F.lead)},{default:n(()=>[c(u(F.lead&&F.lead.reference_number!=""&&F.lead.reference_number!=null?F.lead.reference_number:"---"),1)]),_:2},1032,["onClick"])):(d(),T("span",Iu,u(F.lead.reference_number),1))],64)):$("",!0),R.dataIndex==="campaign"?(d(),T(L,{key:1},[c(u(F.lead&&F.lead.campaign&&F.lead.campaign.name?F.lead.campaign.name:"-"),1)],64)):$("",!0),(d(!0),T(L,null,X(l.allFormFieldNames,z=>(d(),T(L,{key:z.xid},[F&&F.lead&&F.lead.lead_data&&R.dataIndex===l.convertStringToKey(z.field_name)?(d(),T(L,{key:0},[c(u(l.findFieldValue(z.similar_field_names,F.lead.lead_data)),1)],64)):$("",!0)],64))),128)),R.dataIndex==="notes"?(d(),w(U,{key:2},{author:n(()=>[c(u(F.user.name),1)]),avatar:n(()=>[a(A,{src:F.user.profile_image_url,alt:F.user.name},null,8,["src","alt"])]),content:n(()=>[O("p",Fu,[a(P,{ellipsis:{rows:2,expandable:!0,symbol:e.$t("common.more")},content:F.notes},null,8,["ellipsis","content"])])]),datetime:n(()=>[c(u(l.formatDateTime(F.date_time)),1)]),_:2},1024)):$("",!0),R.dataIndex==="action"?(d(),T(L,{key:3},[l.permsArray.includes("admin")||F.x_user_id==l.user.xid?(d(),w(q,{key:0},{default:n(()=>[a(k,{type:"primary",onClick:z=>e.editItem(F)},{icon:n(()=>[a(D)]),_:2},1032,["onClick"]),a(k,{type:"primary",onClick:z=>e.showDeleteConfirm(F.xid)},{icon:n(()=>[a(M)]),_:2},1032,["onClick"])]),_:2},1024)):$("",!0)],64)):$("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange","scroll"])])]),_:1})]),_:1}),a(N,{visible:e.isViewDrawerVisible,lead:e.viewDrawerData,onClose:e.hideViewDrawer},null,8,["visible","lead","onClose"])],64)}const Ka=K(Ou,[["render",Mu]]),Ru={props:["visible","leadId"],emits:["close","onSkipDelete","onSkip"],components:{InfoCircleOutlined:Qe,DeleteOutlined:pe,LogoutOutlined:Vn,CloseOutlined:Hn},setup(e,{emit:s}){const{addEditRequestAdmin:m,loading:l,rules:h}=le();return{loading:l,closeModal:()=>{s("close")},skipAndDelete:()=>{m({url:"campaigns/skip-delete-lead",data:{lead_id:e.leadId},success:p=>{s("onSkipDelete",p.lead),$e.success({message:t("common.success"),description:t("lead.skip_delete_success_message"),placement:"bottomRight"})}})},onSkip:()=>{s("onSkip")}}}},Lu={style:{color:"#7676e3"}};function qu(e,s,m,l,h,y){const r=o("InfoCircleOutlined"),i=o("LogoutOutlined"),p=o("a-button"),_=o("a-popconfirm"),g=o("a-col"),f=o("DeleteOutlined"),b=o("a-row"),v=o("CloseOutlined"),k=o("a-result"),C=o("a-modal");return d(),w(C,{open:m.visible,maskClosable:!1,closable:!1,footer:null,centered:""},{default:n(()=>[a(k,null,{title:n(()=>[O("span",Lu,u(e.$t("lead.skip_or_delete")),1)]),subTitle:n(()=>[c(u(e.$t("lead.skip_delete_message")),1)]),icon:n(()=>[a(r)]),extra:n(()=>[a(b,{gutter:[10,10]},{default:n(()=>[a(g,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(_,{title:e.$t("lead.come_back_confirm_message"),okText:e.$t("common.yes"),cancelText:e.$t("common.no"),onConfirm:l.onSkip},{default:n(()=>[a(p,{type:"primary",style:{backgroundColor:"#52c41a",border:"#52c41a"},block:""},{default:n(()=>[a(i),c(" "+u(e.$t("lead.combe_back_later")),1)]),_:1})]),_:1},8,["title","okText","cancelText","onConfirm"])]),_:1}),a(g,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(_,{title:e.$t("lead.skip_delete_message"),okText:e.$t("common.yes"),cancelText:e.$t("common.no"),onConfirm:l.skipAndDelete},{default:n(()=>[a(p,{type:"primary",style:{backgroundColor:"#ff4d4f",border:"#ff4d4f"},loading:l.loading,block:""},{icon:n(()=>[a(f)]),default:n(()=>[c(" "+u(e.$t("lead.skip_and_delete")),1)]),_:1},8,["loading"])]),_:1},8,["title","okText","cancelText","onConfirm"])]),_:1})]),_:1}),a(b,{class:"mt-10"},{default:n(()=>[a(g,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(p,{onClick:l.closeModal,type:"primary",style:{backgroundColor:"#faad14",border:"#faad14"},block:""},{default:n(()=>[a(v),c(" "+u(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}const Bu=K(Ru,[["render",qu]]),zu=x({props:{lead:{default:{}},leadFormData:{default:{}},email:{default:null}},emits:["success"],components:{SendOutlined:Ot,MailOutlined:ka,EmailTemplateAddButton:dn,QuillEditor:Tt},setup(e,{emit:s}){const{t:m}=J(),{addEditRequestAdmin:l,loading:h,rules:y}=le(),r=I(!1),i=I({lead_id:e.lead.xid,email_template_id:void 0,email:e.email,subject:"",message:""}),p="email-templates/all",_=I([]),g=I(null);ee(()=>{const P=axiosAdmin.get(p);Promise.all([P]).then(([U])=>{_.value=U.data.email_templates,v(),k()})});const f=ke(()=>g.value.getQuill()),b=P=>{const U=f.value.getSelection(!0);var D=Ne(e.leadFormData.lead_data,["field_name",P]);if(D!=null&&D.field_value!=null&&D.field_value!="")var M=U.length>0?`${D.field_value}`:`${D.field_value}`;else var M=U.length>0?`##${insertedTextField}##`:`##${insertedTextField}##`;f.value.deleteText(U.index,U.length),f.value.insertText(U.index,M)},v=()=>{e.lead&&e.lead.campaign&&e.lead.campaign.email_template&&e.lead.campaign.email_template.xid&&(i.value={...i.value,email_template_id:e.lead.campaign.email_template.xid})},k=()=>{const P=Ne(_.value,["xid",i.value.email_template_id]);if(P&&P.body){var U=P.body;fe(e.leadFormData.lead_data,(D,M)=>{D.field_value!=null&&D.field_value!=""&&(U=Pt(U,`##${D.field_name}##`,D.field_value))}),i.value={...i.value,message:U,subject:P.subject},g.value!=null&&g.value.setHTML(U)}};return{loading:h,visible:r,rules:y,formData:i,sendEmail:()=>{i.value={...i.value,email:e.email},k(),r.value=!0},onSubmit:()=>{l({url:"leads/send-email",data:i.value,success:P=>{P&&P.success?(r.value=!1,$e.success({message:m("common.success"),description:m("email_template.mail_send_successfully"),placement:"bottomRight"}),s("success")):$e.error({message:m("common.error"),description:m("email_template.mail_send_error_message"),placement:"bottomRight"})}})},hideModal:()=>{r.value=!1,h.value=!1,y.value={},v()},textEditor:g,allEmailTemplates:_,emailTemplateAdded:()=>{axiosAdmin.get(p).then(P=>{_.value=P.data.email_templates})},emailTemplateChanged:k,insertFormText:b,drawerWidth:window.innerWidth<=991?"90%":"45%"}}}),Ku={style:{display:"flex"}};function Vu(e,s,m,l,h,y){const r=o("MailOutlined"),i=o("a-button"),p=o("a-tooltip"),_=o("a-select-option"),g=o("a-select"),f=o("EmailTemplateAddButton"),b=o("a-form-item"),v=o("a-col"),k=o("a-row"),C=o("a-input"),S=o("QuillEditor"),E=o("a-form"),A=o("SendOutlined"),P=o("a-space"),U=o("a-drawer");return d(),T(L,null,[a(p,{title:e.$t("lead.send_email")},{default:n(()=>[a(i,{type:"primary",onClick:e.sendEmail},{icon:n(()=>[a(r)]),_:1},8,["onClick"])]),_:1},8,["title"]),a(U,{title:e.$t("lead.send_email"),width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.hideModal},{footer:n(()=>[a(P,null,{default:n(()=>[a(i,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:n(()=>[a(A)]),default:n(()=>[c(" "+u(e.$t("common.send")),1)]),_:1},8,["loading","onClick"]),a(i,{key:"back",onClick:e.hideModal},{default:n(()=>[c(u(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),default:n(()=>[a(E,{layout:"vertical"},{default:n(()=>[a(k,{gutter:16},{default:n(()=>[a(v,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(b,{label:e.$t("campaign.email_template"),name:"email_template_id",help:e.rules.email_template_id?e.rules.email_template_id.message:null,validateStatus:e.rules.email_template_id?"error":null,class:"required"},{default:n(()=>[O("span",Ku,[a(g,{value:e.formData.email_template_id,"onUpdate:value":s[0]||(s[0]=D=>e.formData.email_template_id=D),placeholder:e.$t("common.select_default_text",[e.$t("campaign.email_template")]),onChange:e.emailTemplateChanged},{default:n(()=>[(d(!0),T(L,null,X(e.allEmailTemplates,D=>(d(),w(_,{key:D.xid,value:D.xid},{default:n(()=>[c(u(D.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder","onChange"]),a(f,{onOnAddSuccess:e.emailTemplateAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(k,{gutter:16},{default:n(()=>[a(v,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(b,{label:e.$t("common.email"),name:"email",help:e.rules.email?e.rules.email.message:null,validateStatus:e.rules.email?"error":null,class:"required"},{default:n(()=>[a(C,{value:e.formData.email,"onUpdate:value":s[1]||(s[1]=D=>e.formData.email=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("common.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(k,{gutter:16},{default:n(()=>[a(v,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(b,{label:e.$t("email_template.subject"),name:"subject",help:e.rules.subject?e.rules.subject.message:null,validateStatus:e.rules.subject?"error":null,class:"required"},{default:n(()=>[a(C,{value:e.formData.subject,"onUpdate:value":s[2]||(s[2]=D=>e.formData.subject=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("email_template.subject")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(k,{gutter:16},{default:n(()=>[a(v,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(b,{label:e.$t("email_template.message"),name:"message",help:e.rules.message?e.rules.message.message:null,validateStatus:e.rules.message?"error":null,class:"required"},{default:n(()=>[a(S,{ref:"textEditor",content:e.formData.message,"onUpdate:content":s[3]||(s[3]=D=>e.formData.message=D),contentType:"html",placeholder:e.$t("common.placeholder_default_text",[e.$t("email_template.message")]),style:{height:"200px"}},null,8,["content","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),e.lead&&e.lead.campaign&&e.lead.campaign.form&&e.lead.campaign.form.form_fields&&e.lead.campaign.form.form_fields.length>0?(d(),w(k,{key:0,gutter:16,class:"mb-20"},{default:n(()=>[(d(!0),T(L,null,X(e.lead.campaign.form.form_fields,D=>(d(),w(v,{xs:8,sm:8,md:6,lg:4,key:D.id},{default:n(()=>[a(i,{onClick:M=>e.insertFormText(D.name),type:"link",style:{padding:"0px"}},{default:n(()=>[c(u(D.name),1)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})):$("",!0)]),_:1})]),_:1},8,["title","width","open","onClose"])],64)}const Hu=K(zu,[["render",Vu]]);const Nu={components:{SaveOutlined:_e,DoubleRightOutlined:ma,ArrowRightOutlined:Nn,ArrowLeftOutlined:jn,ScheduleOutlined:ha,FileTextOutlined:ya,PhoneOutlined:Ma,ShoppingCartOutlined:va,ExclamationCircleOutlined:ie,CheckOutlined:pa,DeliveredProcedureOutlined:Wn,MailOutlined:ka,MobileOutlined:Pa,ClockCircleOutlined:Ia,SearchOutlined:It,BookingModal:mu,LeadLogTable:za,LeadNotesTable:Ka,LogTimeline:$u,SkipLeadModal:Bu,SendMail:Hu},setup(){const{formatDateTime:e}=Q(),{addEditRequestAdmin:s,loading:m,rules:l}=le(),h=Oa(),y=Oe();be();const r=I({}),i=I({}),p=I("lead_details"),_=I("lead_details"),g=I({}),f=Yn(0,!0),{t:b}=J(),v=I(""),k=I({}),C=I({}),S=I(void 0),E=I(void 0),A=I(void 0),P=I(0),U=I(!0),D=I(!1),M=I(!1),q=I(!1),B=I(!1),N=I(!1);ee(()=>{R()});const R=()=>{const G=h.params.id,ce=`leads/${G}?fields=id,xid,reference_number,lead_data,started,lead_status,time_taken,last_action_by,x_last_action_by,lastActioner{id,xid,name},campaign_id,x_campaign_id,campaign{id,xid,name,status,remaining_leads,total_leads,form_id,x_form_id,email_template_id,x_email_template_id,detail_fields,last_action_by,x_last_action_by,completed_by,x_completed_by,started_on,completed_on,upcoming_lead_action},campaign:campaignUsers{id,xid,user_id,x_user_id,campaign_id,x_campaign_id},campaign:campaignUsers:user{id,xid,name,profile_image,profile_image_url},campaign:emailTemplate{id,xid,name},campaign:form{id,xid,name,form_fields},campaign:lastActioner{id,xid,name},campaign:completedBy{id,xid,name},leadFollowUp{id,xid,log_type,user_id,x_user_id,date_time,notes},leadFollowUp:user{id,xid,name},salesmanBooking{id,xid,log_type,user_id,x_user_id,date_time,notes},salesmanBooking:user{id,xid,name}`;r.value={},i.value={},p.value="lead_details",_.value="lead_details",g.value={},k.value={},C.value={},v.value="",S.value=void 0,E.value=void 0,A.value=void 0,P.value=0,U.value=!0;const we=axiosAdmin.get(ce),re=axiosAdmin.get(`leads/create-call-log/${G}`);Promise.all([we,re]).then(([De,Ie])=>{var ve=De.data;console.log(ve),P.value=Ie.data.lead_number,i.value=Ie.data.call_log,r.value=ve;var Ze=[];ve.lead_data&&ve.lead_data.length>0&&fe(ve.lead_data,He=>{Ze.push({id:He.id,field_name:He.field_name,field_value:He.field_value})}),ve.campaign&&ve.campaign.form&&ve.campaign.form.form_fields&&ve.campaign.form.form_fields.length>0&&fe(ve.campaign.form.form_fields,He=>{var de=Ne(Ze,{field_name:He.name});de==null&&Ze.push({id:Math.random().toString(36).slice(2),field_name:He.name,field_value:""})}),g.value={campaign_id:ve.x_campaign_id,lead_data:Ze},v.value=ve.reference_number,k.value=ve.lead_follow_up?ve.lead_follow_up:[],C.value=ve.salesman_booking?ve.salesman_booking:[],S.value=ve.lead_status,E.value=ve.sub_lead_status,A.value=ve.expiry_date,f.reset(ve.time_taken,!0),U.value=!1})},F=()=>{var G=f.minutes.value*60,te=f.hours.value*60*60,ce=f.days.value*24*60*60;return f.seconds.value+G+te+ce},z=()=>{B.value=!0,he.confirm({title:b("common.are_you_sure")+"?",icon:a(ie),content:b("lead.are_you_want_go_to_save_exit"),centered:!0,okText:b("common.yes"),okType:"danger",cancelText:b("common.no"),onOk(){V("save_exit")},onCancel(){B.value=!1}})},Z=(G,te)=>{A.value=te},ne=I(!1),V=(G="auto")=>{if(!ne.value){if(ne.value=!0,G==="save"?q.value=!0:G==="save_exit"&&(B.value=!0),S.value==="Converted"){const te=g.value.lead_data.find(ce=>ce.field_name==="Policy No *");if(console.log(S.value,g.value.lead_data,te,"valuesss"),!te||!te.field_value||!te.field_value.trim()){alert("Policy No is required when Lead Status is Converted."),q.value=!1,B.value=!1,ne.value=!1;return}}console.log(A,"s"),s({url:"campaigns/update-actioned-lead",data:{...g.value,reference_number:v.value,lead_status:S.value,sub_lead_status:E.value,expiry_date:A.value,call_log_id:i.value.xid,call_time:F(),x_lead_id:h.params.id},success:te=>{M.value=!0,q.value=!1,ne.value=!1,G==="save_exit"&&(B.value=!1,y.push({name:"admin.call_manager.index"}))},error:()=>{ne.value=!1}})}},W=G=>{var te="";G=="next"?te=b("lead.are_you_want_go_to_next_lead"):G=="previous"&&(te=b("lead.are_you_want_go_to_previous_lead")),he.confirm({title:b("common.are_you_sure")+"?",icon:a(ie),content:te,centered:!0,okText:b("common.yes"),okType:"danger",cancelText:b("common.no"),onOk(){j(G)},onCancel(){}})},H=()=>{N.value=!1,j("skip-next")},j=G=>{var te=G=="skip-next"?"next":G;s({url:"campaigns/take-lead-action",data:{...g.value,reference_number:v.value,call_log_id:i.value.xid,call_time:F(),action_type:te,x_lead_id:h.params.id},success:ce=>{ce&&ce.lead&&ce.lead.xid?($e.success({message:b("common.success"),description:b(`lead.you_are_on_${te}_lead`),placement:"bottomRight"}),y.push({name:"admin.call_manager.take_action",params:{id:ce.lead.xid}})):he.confirm({title:b("lead.no_lead_exists")+"?",icon:a(ie),content:b("lead.no_lead_exist_message"),centered:!0,okText:b("campaign.save_exit"),okType:"danger",cancelText:b("common.continue"),onOk(){V("save_exit")},onCancel(){V("save")}})}})},Y=G=>{N.value=!1,G&&G.xid?y.push({name:"admin.call_manager.take_action",params:{id:G.xid}}):y.push({name:"admin.call_manager.index"})},se=G=>{var te="text";if(r.value.campaign&&r.value.campaign.form&&r.value.campaign.form.form_fields&&r.value.campaign.form.form_fields.length>0){var ce=Ne(r.value.campaign.form.form_fields,{name:G});ce&&ce.type&&(te=ce.type)}return te},Ce=()=>{N.value=!0};return Se(f.seconds,(G,te)=>{f.seconds.value%5}),Se(h,(G,te)=>{G.params.id!=null&&R()}),Se(M,(G,te)=>{G&&setTimeout(()=>M.value=!1,3e3)}),{activeLeftPanelKey:_,leadDetails:r,activeKey:p,leadFormData:g,referenceNumber:v,leadFollowUp:k,salesmanBooking:C,loading:m,rules:l,formatDateTime:e,timer:f,leadStatus:S,subLeadStatus:E,expiryDate:A,leadNumber:P,newPageLoad:U,handleExpiryDateChange:Z,takeLeadAction:W,refreshTimeLine:D,saveAndExit:z,saveLead:V,saveExitLoading:B,saveLoading:q,autoSaved:M,skipLead:Ce,showSkipModal:N,skipDeleteSuccess:Y,skipSuccess:H,getLeadDataFieldType:se,selectedCategory:null,selectedSubcategory:null,subcategories:{Converted:["Deal"],"Follow-up":["Hot","Warm","Cold"],Callback:["Busy","Driving","Meeting","Out of Station"],"Yet to Contact":["Not Reachable","Ringing","Switched Off"],Lost:["Number Does Not Exist","Not Contactable","Not Interested","Own Agent","Already Renewed","Lost to Competition","High Premium"]}}},data(){return{leadStatus:null,expiryDate:null,selectedCategory:null,selectedSubcategory:null,subcategories:{Converted:["Deal"],"Follow-up":["Hot","Warm","Cold"],Callback:["Busy","Driving","Meeting","Out of Station"],"Yet to Contact":["Not Reachable","Ringing","Switched Off"],Lost:["Number Does Not Exist","Not Contactable","Not Interested","Own Agent","Already Renewed","Lost to Competition","High Premium"]}}},methods:{handleCategoryChange(e){console.log(e,"value"),this.leadStatus=e,this.expiryDate="",this.selectedCategory=e,this.selectedSubcategory=null,this.subcategories={...this.subcategories},console.log("Selected Lead Status:",e),this.leadStatus=e,this.leadFormData.lead_data=this.leadFormData.lead_data.filter(s=>s.field_name!=="Policy"),e==="Converted"?this.leadFormData.lead_data.some(m=>m.field_name==="Policy No *")||this.leadFormData.lead_data.push({id:new Date().getTime(),field_name:"Policy No *",field_value:"",type:"text"}):this.leadFormData.lead_data=this.leadFormData.lead_data.filter(s=>s.field_name!=="Policy No *")},handleSubCategoryChange(e){this.subLeadStatus=e}}},ju={class:"callmanager-left-sidebar"},Wu={key:1},Yu={key:1},Gu={style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",zIndex:1}};function Xu(e,s,m,l,h,y){const r=o("ArrowLeftOutlined"),i=o("a-button"),p=o("ArrowRightOutlined"),_=o("a-page-header"),g=o("a-col"),f=o("router-link"),b=o("a-breadcrumb-item"),v=o("a-breadcrumb"),k=o("a-row"),C=o("a-card"),S=o("ClockCircleOutlined"),E=o("a-typography-title"),A=o("ScheduleOutlined"),P=o("BookingModal"),U=o("ShoppingCartOutlined"),D=o("a-space"),M=o("a-divider"),q=o("a-skeleton"),B=o("a-typography-text"),N=o("a-collapse-panel"),R=o("a-collapse"),F=o("perfect-scrollbar"),z=o("FileTextOutlined"),Z=o("a-input"),ne=o("a-form-item"),V=o("a-select-option"),W=o("a-select"),H=o("a-date-picker"),j=o("SendMail"),Y=o("MobileOutlined"),se=o("a-input-group"),Ce=o("a-form"),G=o("SaveOutlined"),te=o("DeliveredProcedureOutlined"),ce=o("CheckOutlined"),we=o("a-tab-pane"),re=o("PhoneOutlined"),De=o("LeadLogTable"),Ie=o("LeadNotesTable"),ve=o("a-tabs"),Ze=o("LogTimeline"),He=o("SkipLeadModal");return d(),T(L,null,[a(C,{class:"page-content-sub-header breadcrumb-left-border",bodyStyle:{padding:"0px",margin:"0px 16px 0"}},{default:n(()=>[a(k,null,{default:n(()=>[a(g,{span:24},{default:n(()=>[a(_,{onBack:l.saveAndExit,class:"p-0"},{title:n(()=>[c(u(l.leadDetails&&l.leadDetails.campaign&&l.leadDetails.campaign.name?l.referenceNumber!=null&&l.referenceNumber!=""?`${l.leadDetails.campaign.name} (${l.referenceNumber})`:l.leadDetails.campaign.name:""),1)]),extra:n(()=>[a(i,{style:{background:"#faad14",borderColor:"#faad14"},type:"primary",onClick:s[0]||(s[0]=de=>l.takeLeadAction("previous"))},{default:n(()=>[a(r),c(" "+u(e.$t("campaign.previous_lead")),1)]),_:1}),a(i,{style:{background:"#52c41a",borderColor:"#52c41a"},type:"primary",onClick:s[1]||(s[1]=de=>l.takeLeadAction("next"))},{default:n(()=>[c(u(e.$t("campaign.next_lead"))+" ",1),a(p)]),_:1})]),_:1},8,["onBack"])]),_:1}),a(g,{span:24},{default:n(()=>[a(v,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(b,null,{default:n(()=>[a(f,{to:{name:"admin.dashboard.index"}},{default:n(()=>[c(u(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(b,null,{default:n(()=>[a(f,{to:{name:"admin.call_manager.index"}},{default:n(()=>[c(u(e.$t("menu.call_manager")),1)]),_:1},8,["to"])]),_:1}),a(b,null,{default:n(()=>[c(u(l.leadDetails&&l.leadDetails.campaign&&l.leadDetails.campaign.name?l.leadDetails.campaign.name:""),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l.leadDetails&&l.leadDetails.xid?(d(),w(k,{key:0,gutter:16,class:"mt-5",style:{margin:"10px"}},{default:n(()=>[a(g,{xs:24,sm:24,md:24,lg:6,xl:6,class:"bg-setting-sidebar"},{default:n(()=>[O("div",ju,[a(C,{bordered:!1,bodyStyle:{paddingBottom:"0px"}},{default:n(()=>[a(k,null,{default:n(()=>[a(g,{span:24,class:"text-center"},{default:n(()=>[a(E,{level:2},{default:n(()=>[a(S),c(" "+u(l.timer.hours.value<10?`0${l.timer.hours.value}`:l.timer.hours)+":"+u(l.timer.minutes.value<10?`0${l.timer.minutes.value}`:l.timer.minutes)+":"+u(l.timer.seconds.value<10?`0${l.timer.seconds.value}`:l.timer.seconds),1)]),_:1})]),_:1})]),_:1}),a(k,{class:"mt-10"},{default:n(()=>[a(g,{span:24},{default:n(()=>[a(D,null,{default:n(()=>[l.leadDetails&&l.leadDetails.xid?(d(),w(P,{key:"lead_follow_up",leadId:l.leadDetails.xid,bookingType:"lead_follow_up",onSuccess:s[2]||(s[2]=de=>{l.leadFollowUp=de,l.refreshTimeLine=!0})},{default:n(()=>[a(A),c(" "+u(e.$t("menu.lead_follow_up")),1)]),_:1},8,["leadId"])):$("",!0),l.leadDetails&&l.leadDetails.xid?(d(),w(P,{key:"salesman_bookings",leadId:l.leadDetails.xid,bookingType:"salesman_bookings",onSuccess:s[3]||(s[3]=de=>{l.salesmanBooking=de,l.refreshTimeLine=!0})},{default:n(()=>[a(U),c(" "+u(e.$t("menu.salesman_bookings")),1)]),_:1},8,["leadId"])):$("",!0)]),_:1})]),_:1})]),_:1}),a(M)]),_:1}),a(F,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:n(()=>[a(R,{activeKey:l.activeLeftPanelKey,"onUpdate:activeKey":s[4]||(s[4]=de=>l.activeLeftPanelKey=de),bordered:!1},{default:n(()=>[a(N,{key:"lead_details",style:{background:"white"}},{header:n(()=>[a(E,{level:5},{default:n(()=>[c(u(e.$t("lead.lead_details")),1)]),_:1})]),default:n(()=>[l.newPageLoad?(d(),w(q,{key:0,active:""})):(d(),T(L,{key:1},[a(k,null,{default:n(()=>[a(g,{span:24},{default:n(()=>[a(B,{strong:""},{default:n(()=>[c(u(e.$t("lead.lead_number")),1)]),_:1})]),_:1}),a(g,{span:24,class:"mt-5"},{default:n(()=>[a(B,null,{default:n(()=>[c(u(l.leadNumber)+" / "+u(l.leadDetails.campaign.total_leads),1)]),_:1})]),_:1})]),_:1}),a(k,{class:"mt-5"},{default:n(()=>[a(g,{span:24},{default:n(()=>[a(B,{strong:""},{default:n(()=>[c(u(e.$t("campaign.last_actioner")),1)]),_:1})]),_:1}),a(g,{span:24,class:"mt-5"},{default:n(()=>[a(B,null,{default:n(()=>[c(u(l.leadDetails.campaign.last_actioner&&l.leadDetails.campaign.last_actioner.name?l.leadDetails.campaign.last_actioner.name:"-"),1)]),_:1})]),_:1})]),_:1}),a(k,{class:"mt-5"},{default:n(()=>[a(g,{span:24},{default:n(()=>[a(B,{strong:""},{default:n(()=>[c(u(e.$t("lead_follow_up.follow_up")),1)]),_:1})]),_:1}),a(g,{span:24,class:"mt-5"},{default:n(()=>[l.leadFollowUp&&l.leadFollowUp.user&&l.leadFollowUp.user.name?(d(),w(B,{key:0},{default:n(()=>[c(u(l.leadFollowUp.user.name)+" on "+u(l.formatDateTime(l.leadFollowUp.date_time)),1)]),_:1})):(d(),T("span",Wu,"-"))]),_:1})]),_:1}),a(k,{class:"mt-5"},{default:n(()=>[a(g,{span:24},{default:n(()=>[a(B,{strong:""},{default:n(()=>[c(u(e.$t("salesman_booking.salesman_booking")),1)]),_:1})]),_:1}),a(g,{span:24,class:"mt-5"},{default:n(()=>[l.salesmanBooking&&l.salesmanBooking.user&&l.salesmanBooking.user.name?(d(),w(B,{key:0},{default:n(()=>[c(u(l.salesmanBooking.user.name)+" on "+u(l.formatDateTime(l.salesmanBooking.date_time)),1)]),_:1})):(d(),T("span",Yu,"-"))]),_:1})]),_:1})],64))]),_:1}),a(N,{key:"campaign_details",style:{background:"white"}},{header:n(()=>[a(E,{level:5},{default:n(()=>[c(u(e.$t("campaign.campaign_details")),1)]),_:1})]),default:n(()=>[(d(!0),T(L,null,X(l.leadDetails.campaign.detail_fields,(de,Ee)=>(d(),w(k,{key:de.id,gutter:16,class:Ut({"mt-25":Ee>0})},{default:n(()=>[a(g,{span:24},{default:n(()=>[a(B,{strong:""},{default:n(()=>[c(u(de.field_name),1)]),_:2},1024)]),_:2},1024),a(g,{span:24,class:"mt-5"},{default:n(()=>[a(B,null,{default:n(()=>[c(u(de.field_value),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1},8,["activeKey"])]),_:1})])]),_:1}),a(g,{xs:24,sm:24,md:24,lg:12,xl:12},{default:n(()=>[a(C,{class:"callmanager-middle-sidebar"},{default:n(()=>[a(ve,{activeKey:l.activeKey,"onUpdate:activeKey":s[12]||(s[12]=de=>l.activeKey=de)},{default:n(()=>[a(we,{key:"lead_details"},{tab:n(()=>[O("span",null,[a(z),c(" "+u(e.$t("lead.lead_details")),1)])]),default:n(()=>[a(F,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:n(()=>[l.newPageLoad?(d(),w(q,{key:0,active:""})):(d(),w(Ce,{key:1,layout:"vertical",class:"mt-20 mb-20 pb-20",style:{"margin-bottom":"50px"}},{default:n(()=>[a(k,{gutter:16},{default:n(()=>{var de;return[a(g,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(ne,{label:e.$t("lead.reference_number"),name:"reference_number",help:l.rules.reference_number?l.rules.reference_number.message:null,validateStatus:l.rules.reference_number?"error":null,class:"required"},{default:n(()=>[a(Z,{value:l.referenceNumber,"onUpdate:value":s[5]||(s[5]=Ee=>l.referenceNumber=Ee),placeholder:e.$t("common.placeholder_default_text",[e.$t("lead.reference_number")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(g,{xs:24,sm:24,md:12,lg:12}),a(g,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(ne,{label:"Lead Category",name:"lead_status",help:l.rules.lead_category?l.rules.lead_category.message:null,validateStatus:l.rules.lead_category?"error":null},{default:n(()=>[a(W,{value:h.selectedCategory,"onUpdate:value":s[6]||(s[6]=Ee=>h.selectedCategory=Ee),placeholder:e.$t("common.select_default_text","Lead Status"),onChange:y.handleCategoryChange},{default:n(()=>[a(V,{key:"Fresh",value:"Fresh"},{default:n(()=>[c("Fresh")]),_:1}),a(V,{key:"Follow-up",value:"Follow-up"},{default:n(()=>[c("Follow-up")]),_:1}),a(V,{key:"Callback",value:"Callback"},{default:n(()=>[c("Callback")]),_:1}),a(V,{key:"Yet to Contact",value:"Yet to Contact"},{default:n(()=>[c("Yet to Contact")]),_:1}),a(V,{key:"Lost",value:"Lost"},{default:n(()=>[c("Lost")]),_:1}),a(V,{key:"Converted",value:"Converted"},{default:n(()=>[c("Converted")]),_:1})]),_:1},8,["value","placeholder","onChange"])]),_:1},8,["help","validateStatus"])]),_:1}),h.selectedCategory&&((de=h.subcategories[h.selectedCategory])!=null&&de.length)?(d(),w(g,{key:0,xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(ne,{label:"Lead Sub Category",name:"lead_subcategory",help:l.rules.lead_subcategory?l.rules.lead_subcategory.message:null,validateStatus:l.rules.lead_subcategory?"error":null},{default:n(()=>[a(W,{value:h.selectedSubcategory,"onUpdate:value":s[7]||(s[7]=Ee=>h.selectedSubcategory=Ee),placeholder:e.$t("common.select_default_text",[e.$t("lead.lead_subcategory")]),onChange:y.handleSubCategoryChange},{default:n(()=>[(d(!0),T(L,null,X(h.subcategories[h.selectedCategory],Ee=>(d(),w(V,{key:Ee,value:Ee},{default:n(()=>[c(u(Ee),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1},8,["help","validateStatus"])]),_:1})):$("",!0),a(g,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(ne,{label:"Expiry Date",name:"expiry_date",help:l.rules.expiry_date?l.rules.expiry_date.message:null,validateStatus:l.rules.expiry_date?"error":null},{default:n(()=>[a(H,{value:e.selectedExpiryDate,"onUpdate:value":s[8]||(s[8]=Ee=>e.selectedExpiryDate=Ee),format:"YYYY-MM-DD",placeholder:e.$t("common.select_default_text","Select Expiry Date"),onChange:l.handleExpiryDateChange,style:{width:"100%"}},null,8,["value","placeholder","onChange"])]),_:1},8,["help","validateStatus"])]),_:1})]}),_:1}),a(k,{gutter:16},{default:n(()=>[(d(!0),T(L,null,X(l.leadFormData.lead_data,de=>(d(),w(g,{key:de.id,xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(ne,{label:de.field_name,name:de.field_name,help:l.rules.name?l.rules.name.message:null,validateStatus:l.rules.name?"error":null},{default:n(()=>[a(se,{compact:""},{default:n(()=>[a(Z,{value:de.field_value,"onUpdate:value":Ee=>de.field_value=Ee,placeholder:e.$t("common.placeholder_default_text",[de.field_name]),style:ga({width:l.getLeadDataFieldType(de.field_name)=="email"||l.getLeadDataFieldType(de.field_name)=="phone"?"calc(100% - 32px)":"100%"})},null,8,["value","onUpdate:value","placeholder","style"]),l.getLeadDataFieldType(de.field_name)=="email"?(d(),w(j,{key:0,email:de.field_value,lead:l.leadDetails,leadFormData:l.leadFormData,onSuccess:s[9]||(s[9]=()=>l.refreshTimeLine=!0)},null,8,["email","lead","leadFormData"])):$("",!0),l.getLeadDataFieldType(de.field_name)=="phone"?(d(),w(i,{key:1,href:de.field_value?`tel:${de.field_value}`:"javascript:void(0)",type:"primary"},{icon:n(()=>[a(Y)]),_:2},1032,["href"])):$("",!0)]),_:2},1024)]),_:2},1032,["label","name","help","validateStatus"])]),_:2},1024))),128))]),_:1})]),_:1}))]),_:1}),O("div",Gu,[a(k,{gutter:16},{default:n(()=>[a(g,{xs:24,sm:24,md:20,lg:20},{default:n(()=>[a(D,null,{default:n(()=>[a(i,{type:"primary",loading:l.saveLoading,onClick:s[10]||(s[10]=de=>l.saveLead("save"))},{icon:n(()=>[a(G)]),default:n(()=>[c(" "+u(e.$t("common.save")),1)]),_:1},8,["loading"]),a(i,{type:"primary",loading:l.saveExitLoading,onClick:l.saveAndExit},{icon:n(()=>[a(te)]),default:n(()=>[c(" "+u(e.$t("campaign.save_exit")),1)]),_:1},8,["loading","onClick"])]),_:1})]),_:1}),a(g,{xs:24,sm:24,md:4,lg:4},{default:n(()=>[l.autoSaved?(d(),w(i,{key:0,type:"text",style:{background:"transparent",borderColor:"transparent"}},{default:n(()=>[a(B,{type:"secondary"},{default:n(()=>[a(ce),c(" Auto Saved ")]),_:1})]),_:1})):$("",!0)]),_:1})]),_:1})])]),_:1}),a(we,{key:"call_logs"},{tab:n(()=>[O("span",null,[a(re),c(" "+u(e.$t("menu.call_logs")),1)])]),default:n(()=>[a(De,{key:"lead_logs",pageName:"lead_action",logType:"call_log",leadId:l.leadDetails.xid,showTableSearch:!1,showLeadDetails:!1,showAction:!1,scrollStyle:{y:"calc(100vh - 320px)"}},null,8,["leadId","scrollStyle"])]),_:1}),a(we,{key:"lead_notes"},{tab:n(()=>[O("span",null,[a(z),c(" "+u(e.$t("common.notes")),1)])]),default:n(()=>[a(Ie,{pageName:"lead_action",leadId:l.leadDetails.xid,scrollStyle:{y:"calc(100vh - 320px)"},onSuccess:s[11]||(s[11]=()=>l.refreshTimeLine=!0),showAddButton:!(l.leadDetails&&l.leadDetails.campaign&&l.leadDetails.campaign.status=="completed")},null,8,["leadId","scrollStyle","showAddButton"])]),_:1})]),_:1},8,["activeKey"])]),_:1})]),_:1}),a(g,{xs:24,sm:24,md:24,lg:6,xl:6,class:"bg-setting-sidebar"},{default:n(()=>[a(C,{bordered:!1,class:"callmanager-right-sidebar",bodyStyle:{padding:"15px"}},{title:n(()=>[a(E,{level:5,type:"success",strong:""},{default:n(()=>[c(u(e.$t("lead.lead_history")),1)]),_:1})]),default:n(()=>[l.newPageLoad?(d(),w(q,{key:0,active:""})):(d(),w(Ze,{key:1,leadId:l.leadDetails.xid,refresh:l.refreshTimeLine,onDataFetched:s[13]||(s[13]=()=>l.refreshTimeLine=!1)},null,8,["leadId","refresh"]))]),_:1})]),_:1})]),_:1})):$("",!0),l.leadDetails&&l.leadDetails.xid?(d(),w(He,{key:1,leadId:l.leadDetails.xid,visible:l.showSkipModal,onOnSkipDelete:l.skipDeleteSuccess,onOnSkip:l.skipSuccess,onClose:s[14]||(s[14]=()=>l.showSkipModal=!1)},null,8,["leadId","visible","onOnSkipDelete","onOnSkip"])):$("",!0)],64)}const Ju=K(Nu,[["render",Xu],["__scopeId","data-v-351480b5"]]),Qu=[{path:"/admin/call-manager/:id",component:Ju,name:"admin.call_manager.take_action",meta:{requireAuth:!0,menuParent:"call_manager",menuKey:"call_manager"}},{path:"/",component:()=>Le(()=>import("./Admin-ef1230f2.js"),["assets/Admin-ef1230f2.js","assets/vendor-7d287734.js","assets/vendor-ad46f743.css","assets/Admin-14aea5fe.css"]),children:[{path:"/admin/call-manager",component:nu,name:"admin.call_manager.index",meta:{requireAuth:!0,menuParent:"call_manager",menuKey:"call_manager"}},{path:"/admin/campaigns",component:Yr,name:"admin.campaigns.index",meta:{requireAuth:!0,menuParent:"campaigns",menuKey:"campaigns",permission:"campaigns_view"}}]}],pn=()=>{const e="expense-categories",{t:s}=J(),m={name:"",description:""},l=[{title:s("expense_category.name"),dataIndex:"name"},{title:s("expense_category.description"),dataIndex:"description"},{title:s("common.action"),dataIndex:"action"}],h=[{key:"name",value:s("common.name")}];return{addEditUrl:e,initData:m,columns:l,filterableColumns:h}},Zu=x({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ae,LoadingOutlined:Ae,SaveOutlined:_e},setup(e,{emit:s}){const{addEditRequestAdmin:m,loading:l,rules:h}=le();return{loading:l,rules:h,onClose:()=>{h.value={},s("closed")},onSubmit:()=>{m({url:e.url,data:e.formData,successMessage:e.successMessage,success:i=>{s("addEditSuccess",i.xid)}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function xu(e,s,m,l,h,y){const r=o("a-input"),i=o("a-form-item"),p=o("a-col"),_=o("a-row"),g=o("a-textarea"),f=o("a-form"),b=o("SaveOutlined"),v=o("a-button"),k=o("a-modal");return d(),w(k,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:n(()=>[a(v,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:n(()=>[a(b)]),default:n(()=>[c(" "+u(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),a(v,{key:"back",onClick:e.onClose},{default:n(()=>[c(u(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[a(f,{layout:"vertical"},{default:n(()=>[a(_,{gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("expense_category.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:n(()=>[a(r,{value:e.formData.name,"onUpdate:value":s[0]||(s[0]=C=>e.formData.name=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("expense_category.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(_,{gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("expense_category.description"),name:"description",help:e.rules.description?e.rules.description.message:null,validateStatus:e.rules.description?"error":null},{default:n(()=>[a(g,{value:e.formData.description,"onUpdate:value":s[1]||(s[1]=C=>e.formData.description=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("expense_category.description")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const _n=K(Zu,[["render",xu]]),em={components:{PlusOutlined:ae,EditOutlined:ye,DeleteOutlined:pe,AddEdit:_n,AdminPageHeader:me},setup(){const{addEditUrl:e,initData:s,columns:m,filterableColumns:l}=pn(),h=Te(),{permsArray:y}=Q();return ee(()=>{h.tableUrl.value={url:"expense-categories?fields=id,xid,name,description"},h.table.filterableColumns=l,h.fetch({page:1}),h.crudUrl.value=e,h.langKey.value="expense_category",h.initData.value={...s},h.formData.value={...s}}),{columns:m,...h,filterableColumns:l,permsArray:y}}},am={class:"table-responsive"};function tm(e,s,m,l,h,y){const r=o("a-page-header"),i=o("router-link"),p=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("PlusOutlined"),b=o("a-button"),v=o("DeleteOutlined"),k=o("a-space"),C=o("a-col"),S=o("a-select-option"),E=o("a-select"),A=o("a-input-search"),P=o("a-input-group"),U=o("a-row"),D=o("admin-page-filters"),M=o("AddEdit"),q=o("EditOutlined"),B=o("a-table"),N=o("admin-page-table-content");return d(),T(L,null,[a(g,null,{header:n(()=>[a(r,{title:e.$t("menu.expense_categories"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(p,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[c(u(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(p,null,{default:n(()=>[c(u(e.$t("menu.expense_manager")),1)]),_:1}),a(p,null,{default:n(()=>[c(u(e.$t("menu.expense_categories")),1)]),_:1})]),_:1})]),_:1}),a(D,null,{default:n(()=>[a(U,{gutter:[16,16]},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:n(()=>[a(k,null,{default:n(()=>[l.permsArray.includes("expense_categories_create")||l.permsArray.includes("admin")?(d(),w(b,{key:0,type:"primary",onClick:e.addItem},{default:n(()=>[a(f),c(" "+u(e.$t("expense_category.add")),1)]),_:1},8,["onClick"])):$("",!0),e.table.selectedRowKeys.length>0&&(l.permsArray.includes("expense_categories_delete")||l.permsArray.includes("admin"))?(d(),w(b,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:n(()=>[a(v)]),default:n(()=>[c(" "+u(e.$t("common.delete")),1)]),_:1},8,["onClick"])):$("",!0)]),_:1})]),_:1}),a(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:n(()=>[a(U,{gutter:[16,16],justify:"end"},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:12,xl:8},{default:n(()=>[a(P,{compact:""},{default:n(()=>[a(E,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=R=>e.table.searchColumn=R),placeholder:e.$t("common.select_default_text",[""])},{default:n(()=>[(d(!0),T(L,null,X(l.filterableColumns,R=>(d(),w(S,{key:R.key},{default:n(()=>[c(u(R.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),a(A,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=R=>e.table.searchString=R),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(N,null,{default:n(()=>[a(M,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),a(U,null,{default:n(()=>[a(C,{span:24},{default:n(()=>[O("div",am,[a(B,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:R=>({disabled:!1,name:R.xid})},columns:l.columns,"row-key":R=>R.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:n(({column:R,record:F})=>[R.dataIndex==="action"?(d(),T(L,{key:0},[l.permsArray.includes("expense_categories_edit")||l.permsArray.includes("admin")?(d(),w(b,{key:0,type:"primary",onClick:z=>e.editItem(F),style:{"margin-left":"4px"}},{icon:n(()=>[a(q)]),_:2},1032,["onClick"])):$("",!0),l.permsArray.includes("expense_categories_delete")||l.permsArray.includes("admin")?(d(),w(b,{key:1,type:"primary",onClick:z=>e.showDeleteConfirm(F.xid),style:{"margin-left":"4px"}},{icon:n(()=>[a(v)]),_:2},1032,["onClick"])):$("",!0)],64)):$("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const nm=K(em,[["render",tm]]),lm=x({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:ae,AddEdit:_n},setup(e,{emit:s}){const{permsArray:m}=Q(),{initData:l,addEditUrl:h}=pn(),y=I(!1),r=I("add"),i=I({...l});return{permsArray:m,visible:y,addEditType:r,addEditUrl:h,formData:i,addEditSuccess:()=>{y.value=!1,i.value={...l},s("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),om={key:0};function sm(e,s,m,l,h,y){const r=o("a-menu-item"),i=o("PlusOutlined"),p=o("a-button"),_=o("a-tooltip"),g=o("AddEdit");return e.permsArray.includes("expense_categories_create")||e.permsArray.includes("admin")?(d(),T("div",om,[e.customType=="menu"?(d(),w(r,{onClick:e.showAdd,key:"expense_categories"},{icon:n(()=>[oe(e.$slots,"icon")]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick"])):(d(),T(L,{key:1},[e.tooltip?(d(),w(_,{key:0,placement:"topLeft",title:e.$t("expense_category.add"),"arrow-point-at-center":""},{default:n(()=>[a(p,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:n(()=>[a(i)]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(d(),w(p,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:n(()=>[a(i)]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),a(g,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("expense_category.add"),successMessage:e.$t("expense_category.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):$("",!0)}const dm=K(lm,[["render",sm]]);const im=x({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ae,LoadingOutlined:Ae,UserInfo:Zt,ExpenseCategoryAddButton:dm,StaffAddButton:en,UploadFile:Qt},setup(e,{emit:s}){const{addEditRequestAdmin:m,loading:l,rules:h}=le(),y=I({}),r=I({}),{appSetting:i,disabledDate:p,permsArray:_}=Q(),g="expense-categories?limit=10000",f="users?limit=10000";ee(()=>{const S=axiosAdmin.get(g),E=axiosAdmin.get(f);Promise.all([S,E]).then(([A,P])=>{y.value=A.data,r.value=P.data})});const b=()=>{m({url:e.url,data:e.formData,successMessage:e.successMessage,success:S=>{s("addEditSuccess",S.xid)}})},v=()=>{h.value={},s("closed")},k=()=>{axiosAdmin.get(g).then(S=>{y.value=S.data})},C=()=>{axiosAdmin.get(f).then(S=>{r.value=S.data})};return{loading:l,rules:h,onClose:v,onSubmit:b,disabledDate:p,permsArray:_,expenseCategories:y,staffMembers:r,drawerWidth:window.innerWidth<=991?"90%":"45%",appSetting:i,expenseCategoryAdded:k,staffMemberAdded:C}}}),rm={style:{display:"flex"}},um={style:{display:"flex"}};function mm(e,s,m,l,h,y){const r=o("a-select-option"),i=o("a-select"),p=o("ExpenseCategoryAddButton"),_=o("a-form-item"),g=o("a-col"),f=o("StaffAddButton"),b=o("a-row"),v=o("a-date-picker"),k=o("a-input-number"),C=o("UploadFile"),S=o("a-textarea"),E=o("a-form"),A=o("a-button"),P=o("a-drawer");return d(),w(P,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:n(()=>[a(A,{type:"primary",onClick:e.onSubmit,style:{"margin-right":"8px"},loading:e.loading},{default:n(()=>[c(u(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["onClick","loading"]),a(A,{onClick:e.onClose},{default:n(()=>[c(u(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[a(E,{layout:"vertical"},{default:n(()=>[a(b,{gutter:16},{default:n(()=>[a(g,{xs:24,sm:24,md:e.permsArray.includes("admin")?12:24,lg:e.permsArray.includes("admin")?12:24},{default:n(()=>[a(_,{label:e.$t("expense.expense_category"),name:"expense_category_id",help:e.rules.expense_category_id?e.rules.expense_category_id.message:null,validateStatus:e.rules.expense_category_id?"error":null,class:"required"},{default:n(()=>[O("span",rm,[a(i,{value:e.formData.expense_category_id,"onUpdate:value":s[0]||(s[0]=U=>e.formData.expense_category_id=U),placeholder:e.$t("common.select_default_text",[e.$t("expense.expense_category")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:n(()=>[(d(!0),T(L,null,X(e.expenseCategories,U=>(d(),w(r,{key:U.xid,value:U.xid,label:U.name},{default:n(()=>[c(u(U.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder"]),a(p,{onOnAddSuccess:e.expenseCategoryAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1},8,["md","lg"]),e.permsArray.includes("admin")?(d(),w(g,{key:0,xs:24,sm:24,md:e.permsArray.includes("admin")?12:24,lg:e.permsArray.includes("admin")?12:24},{default:n(()=>[a(_,{label:e.$t("expense.created_by_user"),name:"user_id",help:e.rules.user_id?e.rules.user_id.message:null,validateStatus:e.rules.user_id?"error":null},{default:n(()=>[O("span",um,[a(i,{value:e.formData.user_id,"onUpdate:value":s[1]||(s[1]=U=>e.formData.user_id=U),placeholder:e.$t("common.select_default_text",[e.$t("expense.user")]),allowClear:!0,"option-label-prop":"label",optionFilterProp:"label","show-search":""},{default:n(()=>[(d(!0),T(L,null,X(e.staffMembers,U=>(d(),w(r,{key:U.xid,value:U.xid,label:U.name},{default:n(()=>[c(u(U.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder"]),a(f,{onOnAddSuccess:e.staffMemberAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1},8,["md","lg"])):$("",!0)]),_:1}),a(b,{gutter:16},{default:n(()=>[a(g,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(_,{label:e.$t("expense.date"),name:"date",help:e.rules.date?e.rules.date.message:null,validateStatus:e.rules.date?"error":null,class:"required"},{default:n(()=>[a(v,{value:e.formData.date,"onUpdate:value":s[2]||(s[2]=U=>e.formData.date=U),format:e.appSetting.date_format,valueFormat:"YYYY-MM-DD","disabled-date":e.disabledDate,style:{width:"100%"}},null,8,["value","format","disabled-date"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(g,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(_,{label:e.$t("expense.amount"),name:"amount",help:e.rules.amount?e.rules.amount.message:null,validateStatus:e.rules.amount?"error":null,class:"required"},{default:n(()=>[a(k,{value:e.formData.amount,"onUpdate:value":s[3]||(s[3]=U=>e.formData.amount=U),placeholder:e.$t("common.placeholder_default_text",[e.$t("expense.amount")]),min:"0",style:{width:"100%"}},{addonBefore:n(()=>[c(u(e.appSetting.currency.symbol),1)]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(b,{gutter:16},{default:n(()=>[a(g,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(_,{label:e.$t("expense.bill"),name:"bill",help:e.rules.bill?e.rules.bill.message:null,validateStatus:e.rules.bill?"error":null},{default:n(()=>[a(C,{acceptFormat:"image/*,.pdf",formData:e.formData,folder:"expenses",uploadField:"bill",onOnFileUploaded:s[4]||(s[4]=U=>{e.formData.bill=U.file,e.formData.bill_url=U.file_url})},null,8,["acceptFormat","formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(b,{gutter:16},{default:n(()=>[a(g,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(_,{label:e.$t("expense.notes"),name:"notes",help:e.rules.notes?e.rules.notes.message:null,validateStatus:e.rules.notes?"error":null},{default:n(()=>[a(S,{value:e.formData.notes,"onUpdate:value":s[5]||(s[5]=U=>e.formData.notes=U),placeholder:e.$t("common.placeholder_default_text",[e.$t("expense.notes")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])}const cm=K(im,[["render",mm]]),pm=()=>{const{t:e}=J(),s="expenses",m=I("expenses?fields=id,xid,bill,bill_url,expense_category_id,x_expense_category_id,expenseCategory{id,xid,name},amount,user_id,x_user_id,user{id,xid,name},notes,date"),l=["user_id","expense_category_id"],h=qe({expenseCategories:[],staffMembers:[]}),y={expense_category_id:void 0,amount:"",bill:void 0,bill_url:void 0,date:void 0,user_id:void 0,notes:""},r=[{title:e("expense.expense_category"),dataIndex:"expense_category_id"},{title:e("expense.amount"),dataIndex:"amount"},{title:e("expense.date"),dataIndex:"date"},{title:e("expense.created_by_user"),dataIndex:"user_id"},{title:e("common.action"),dataIndex:"action"}],i=qe({expense_category_id:void 0,user_id:void 0});return{url:m,addEditUrl:s,initData:y,columns:r,filters:i,hashableColumns:l,preFetchData:h,getPreFetchData:()=>{const _=axiosAdmin.get("expense-categories?limit=10000"),g=axiosAdmin.get("users?limit=10000");Promise.all([_,g]).then(([f,b])=>{h.expenseCategories=f.data,h.staffMembers=b.data})}}},_m={components:{PlusOutlined:ae,EditOutlined:ye,DeleteOutlined:pe,AddEdit:cm,AdminPageHeader:me},setup(){const{url:e,addEditUrl:s,initData:m,columns:l,filters:h,preFetchData:y,getPreFetchData:r,hashableColumns:i,filterableColumns:p}=pm(),_=Te(),{appSetting:g,permsArray:f,formatDate:b,formatAmountCurrency:v}=Q();ee(()=>{r(),_.crudUrl.value=s,_.langKey.value="expense",_.initData.value={...m},_.formData.value={...m},_.hashableColumns.value=[...i],k()});const k=()=>{_.tableUrl.value={url:e,filters:h},_.fetch({page:1})};return{columns:l,appSetting:g,formatDate:b,..._,filterableColumns:p,filters:h,preFetchData:y,reFetchDatatable:k,permsArray:f,formatAmountCurrency:v}}},fm={class:"table-responsive"};function gm(e,s,m,l,h,y){const r=o("a-page-header"),i=o("router-link"),p=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("PlusOutlined"),b=o("a-button"),v=o("DeleteOutlined"),k=o("a-space"),C=o("a-col"),S=o("a-select-option"),E=o("a-select"),A=o("a-input-search"),P=o("a-input-group"),U=o("a-row"),D=o("admin-page-filters"),M=o("AddEdit"),q=o("EditOutlined"),B=o("a-table"),N=o("admin-page-table-content");return d(),T(L,null,[a(g,null,{header:n(()=>[a(r,{title:e.$t("menu.expenses"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(p,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[c(u(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(p,null,{default:n(()=>[c(u(e.$t("menu.expense_manager")),1)]),_:1}),a(p,null,{default:n(()=>[c(u(e.$t("menu.expenses")),1)]),_:1})]),_:1})]),_:1}),a(D,null,{default:n(()=>[a(U,{gutter:[16,16]},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:n(()=>[a(k,null,{default:n(()=>[l.permsArray.includes("expenses_create")||l.permsArray.includes("admin")?(d(),w(b,{key:0,type:"primary",onClick:e.addItem},{default:n(()=>[a(f),c(" "+u(e.$t("expense.add")),1)]),_:1},8,["onClick"])):$("",!0),e.table.selectedRowKeys.length>0&&(l.permsArray.includes("expenses_delete")||l.permsArray.includes("admin"))?(d(),w(b,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:n(()=>[a(v)]),default:n(()=>[c(" "+u(e.$t("common.delete")),1)]),_:1},8,["onClick"])):$("",!0)]),_:1})]),_:1}),a(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:n(()=>[a(U,{gutter:[16,16],justify:"end"},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:12,xl:8},{default:n(()=>[a(E,{value:l.filters.expense_category_id,"onUpdate:value":s[0]||(s[0]=R=>l.filters.expense_category_id=R),"show-search":"",style:{width:"100%"},placeholder:e.$t("common.select_default_text",[e.$t("expense.expense_category")]),onChange:l.reFetchDatatable,allowClear:!0,optionFilterProp:"label"},{default:n(()=>[(d(!0),T(L,null,X(l.preFetchData.expenseCategories,R=>(d(),w(S,{key:R.xid,value:R.xid,label:R.name},{default:n(()=>[c(u(R.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1}),a(C,{xs:24,sm:24,md:12,lg:12,xl:8},{default:n(()=>[a(E,{value:l.filters.user_id,"onUpdate:value":s[1]||(s[1]=R=>l.filters.user_id=R),"show-search":"",style:{width:"100%"},placeholder:e.$t("common.select_default_text",[e.$t("expense.user")]),onChange:l.reFetchDatatable,allowClear:!0,optionFilterProp:"label"},{default:n(()=>[(d(!0),T(L,null,X(l.preFetchData.staffMembers,R=>(d(),w(S,{key:R.xid,value:R.xid,label:R.name},{default:n(()=>[c(u(R.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1}),a(C,{xs:24,sm:24,md:12,lg:12,xl:8},{default:n(()=>[a(P,{compact:""},{default:n(()=>[a(E,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[2]||(s[2]=R=>e.table.searchColumn=R),placeholder:e.$t("common.select_default_text",[""])},{default:n(()=>[(d(!0),T(L,null,X(l.filterableColumns,R=>(d(),w(S,{key:R.key},{default:n(()=>[c(u(R.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),a(A,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[3]||(s[3]=R=>e.table.searchString=R),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(N,null,{default:n(()=>[a(M,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),a(U,null,{default:n(()=>[a(C,{span:24},{default:n(()=>[O("div",fm,[a(B,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:R=>({disabled:!1,name:R.xid})},columns:l.columns,"row-key":R=>R.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:n(({column:R,text:F,record:z})=>[R.dataIndex==="expense_category_id"?(d(),T(L,{key:0},[c(u(z.expense_category.name),1)],64)):$("",!0),R.dataIndex==="user_id"?(d(),T(L,{key:1},[c(u(z.user.name),1)],64)):$("",!0),R.dataIndex==="amount"?(d(),T(L,{key:2},[c(u(l.formatAmountCurrency(F)),1)],64)):$("",!0),R.dataIndex==="date"?(d(),T(L,{key:3},[c(u(l.formatDate(z.date)),1)],64)):$("",!0),R.dataIndex==="action"?(d(),T(L,{key:4},[l.permsArray.includes("expenses_edit")||l.permsArray.includes("admin")?(d(),w(b,{key:0,type:"primary",onClick:Z=>e.editItem(z),style:{"margin-left":"4px"}},{icon:n(()=>[a(q)]),_:2},1032,["onClick"])):$("",!0),l.permsArray.includes("expenses_delete")||l.permsArray.includes("admin")?(d(),w(b,{key:1,type:"primary",onClick:Z=>e.showDeleteConfirm(z.xid),style:{"margin-left":"4px"}},{icon:n(()=>[a(v)]),_:2},1032,["onClick"])):$("",!0)],64)):$("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const hm=K(_m,[["render",gm]]),bm=[{path:"/",component:()=>Le(()=>import("./Admin-ef1230f2.js"),["assets/Admin-ef1230f2.js","assets/vendor-7d287734.js","assets/vendor-ad46f743.css","assets/Admin-14aea5fe.css"]),children:[{path:"/admin/expense-categories",component:nm,name:"admin.expense_categories.index",meta:{requireAuth:!0,menuParent:"expense_manager",menuKey:e=>"expense_categories",permission:"expense_categories_view"}},{path:"/admin/expenses",component:hm,name:"admin.expenses.index",meta:{requireAuth:!0,menuParent:"expense_manager",menuKey:e=>"expenses",permission:"expenses_view"}}]}],ym=()=>{const e="products?fields=id,xid,name,price,product_type,tax_rate,tax_label,logo,logo_url",s="products",{t:m}=J(),l={name:"",price:"",product_type:"product",tax_rate:0,tax_label:"",logo:void 0,logo_url:void 0},h=[{title:m("product.logo"),dataIndex:"logo"},{title:m("product.product_type"),dataIndex:"product_type"},{title:m("product.name"),dataIndex:"name"},{title:m("product.price"),dataIndex:"price"},{title:m("product.tax_label"),dataIndex:"tax_label"},{title:m("product.tax_rate"),dataIndex:"tax_rate"},{title:m("common.action"),dataIndex:"action"}],y=[{key:"name",value:m("common.name")}];return{url:e,addEditUrl:s,initData:l,columns:h,filterableColumns:y}},vm=x({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ae,LoadingOutlined:Ae,SaveOutlined:_e,Upload:We},setup(e,{emit:s}){const{appSetting:m}=Q(),{addEditRequestAdmin:l,loading:h,rules:y}=le();return{appSetting:m,loading:h,rules:y,onClose:()=>{y.value={},s("closed")},onSubmit:()=>{l({url:e.url,data:e.formData,successMessage:e.successMessage,success:p=>{s("addEditSuccess",p.xid)}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function km(e,s,m,l,h,y){const r=o("Upload"),i=o("a-form-item"),p=o("a-col"),_=o("a-select-option"),g=o("a-select"),f=o("a-row"),b=o("a-input"),v=o("a-input-number"),k=o("a-form"),C=o("SaveOutlined"),S=o("a-button"),E=o("a-space"),A=o("a-drawer");return d(),w(A,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:n(()=>[a(E,null,{default:n(()=>[a(S,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:n(()=>[a(C)]),default:n(()=>[c(" "+u(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),a(S,{key:"back",onClick:e.onClose},{default:n(()=>[c(u(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),default:n(()=>[a(k,{layout:"vertical"},{default:n(()=>[a(f,{gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:6,lg:6},{default:n(()=>[a(i,{label:e.$t("product.logo"),name:"logo",help:e.rules.logo?e.rules.logo.message:null,validateStatus:e.rules.logo?"error":null},{default:n(()=>[a(r,{formData:e.formData,folder:"product",imageField:"logo",onOnFileUploaded:s[0]||(s[0]=P=>{e.formData.logo=P.file,e.formData.logo_url=P.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(p,{xs:24,sm:24,md:18,lg:18},{default:n(()=>[a(f,{gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("product.product_type"),name:"product_type",help:e.rules.product_type?e.rules.product_type.message:null,validateStatus:e.rules.product_type?"error":null,class:"required"},{default:n(()=>[a(g,{value:e.formData.product_type,"onUpdate:value":s[1]||(s[1]=P=>e.formData.product_type=P),placeholder:e.$t("common.select_default_text",[e.$t("product.product_type")]),allowClear:!0,"show-search":""},{default:n(()=>[a(_,{key:"products",value:"product"},{default:n(()=>[c(u(e.$t("common.product")),1)]),_:1}),a(_,{key:"service",value:"service"},{default:n(()=>[c(u(e.$t("common.service")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(f,{gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(i,{label:e.$t("product.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:n(()=>[a(b,{value:e.formData.name,"onUpdate:value":s[2]||(s[2]=P=>e.formData.name=P),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(p,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(i,{label:e.$t("product.price"),name:"price",help:e.rules.price?e.rules.price.message:null,validateStatus:e.rules.price?"error":null,class:"required"},{default:n(()=>[a(v,{value:e.formData.price,"onUpdate:value":s[3]||(s[3]=P=>e.formData.price=P),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.price")]),min:"0",style:{width:"100%"}},{addonBefore:n(()=>[c(u(e.appSetting.currency.symbol),1)]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1}),a(f,{gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(i,{label:e.$t("product.tax_label"),name:"tax_label",help:e.rules.tax_label?e.rules.tax_label.message:null,validateStatus:e.rules.tax_label?"error":null,class:"required"},{default:n(()=>[a(b,{value:e.formData.tax_label,"onUpdate:value":s[4]||(s[4]=P=>e.formData.tax_label=P),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.tax_label")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(p,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(i,{label:e.$t("product.tax_rate"),name:"tax_rate",help:e.rules.tax_rate?e.rules.tax_rate.message:null,validateStatus:e.rules.tax_rate?"error":null,class:"required"},{default:n(()=>[a(v,{value:e.formData.tax_rate,"onUpdate:value":s[5]||(s[5]=P=>e.formData.tax_rate=P),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.tax_rate")]),min:"0",style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])}const Cm=K(vm,[["render",km]]),wm={components:{PlusOutlined:ae,EditOutlined:ye,DeleteOutlined:pe,AddEdit:Cm,AdminPageHeader:me},setup(){const{permsArray:e,appSetting:s,formatAmountCurrency:m}=Q(),{url:l,addEditUrl:h,initData:y,columns:r,filterableColumns:i}=ym(),p=Te();return ee(()=>{p.tableUrl.value={url:l},p.table.filterableColumns=i,p.fetch({page:1}),p.crudUrl.value=h,p.langKey.value="product",p.initData.value={...y},p.formData.value={...y}}),{permsArray:e,appSetting:s,formatAmountCurrency:m,columns:r,...p,filterableColumns:i}}},Sm={class:"table-responsive"};function Dm(e,s,m,l,h,y){const r=o("a-page-header"),i=o("router-link"),p=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("PlusOutlined"),b=o("a-button"),v=o("DeleteOutlined"),k=o("a-space"),C=o("a-col"),S=o("a-select-option"),E=o("a-select"),A=o("a-input-search"),P=o("a-input-group"),U=o("a-row"),D=o("admin-page-filters"),M=o("AddEdit"),q=o("a-image"),B=o("EditOutlined"),N=o("a-table"),R=o("admin-page-table-content");return d(),T(L,null,[a(g,null,{header:n(()=>[a(r,{title:e.$t("menu.products"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(p,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[c(u(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(p,null,{default:n(()=>[c(u(e.$t("menu.products")),1)]),_:1})]),_:1})]),_:1}),a(D,null,{default:n(()=>[a(U,{gutter:[16,16]},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:n(()=>[a(k,null,{default:n(()=>[l.permsArray.includes("products_create")||l.permsArray.includes("admin")?(d(),w(b,{key:0,type:"primary",onClick:e.addItem},{default:n(()=>[a(f),c(" "+u(e.$t("product.add")),1)]),_:1},8,["onClick"])):$("",!0),e.table.selectedRowKeys.length>0&&(l.permsArray.includes("products_delete")||l.permsArray.includes("admin"))?(d(),w(b,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:n(()=>[a(v)]),default:n(()=>[c(" "+u(e.$t("common.delete")),1)]),_:1},8,["onClick"])):$("",!0)]),_:1})]),_:1}),a(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:n(()=>[a(U,{gutter:[16,16],justify:"end"},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:12,xl:8},{default:n(()=>[a(P,{compact:""},{default:n(()=>[a(E,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=F=>e.table.searchColumn=F),placeholder:e.$t("common.select_default_text",[""])},{default:n(()=>[(d(!0),T(L,null,X(l.filterableColumns,F=>(d(),w(S,{key:F.key},{default:n(()=>[c(u(F.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),a(A,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=F=>e.table.searchString=F),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(R,null,{default:n(()=>[a(M,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),a(U,null,{default:n(()=>[a(C,{span:24},{default:n(()=>[O("div",Sm,[a(N,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:F=>({disabled:!1,name:F.xid})},columns:l.columns,"row-key":F=>F.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:n(({column:F,record:z})=>[F.dataIndex==="logo"?(d(),w(q,{key:0,width:32,src:z.logo_url},null,8,["src"])):$("",!0),F.dataIndex==="product_type"?(d(),T(L,{key:1},[c(u(z.product_type=="product"?e.$t("common.product"):e.$t("common.service")),1)],64)):$("",!0),F.dataIndex==="price"?(d(),T(L,{key:2},[c(u(l.formatAmountCurrency(z.price)),1)],64)):$("",!0),F.dataIndex==="action"?(d(),T(L,{key:3},[l.permsArray.includes("products_edit")||l.permsArray.includes("admin")?(d(),w(b,{key:0,type:"primary",onClick:Z=>e.editItem(z),style:{"margin-left":"4px"}},{icon:n(()=>[a(B)]),_:2},1032,["onClick"])):$("",!0),(l.permsArray.includes("products_delete")||l.permsArray.includes("admin"))&&(!z.children||z.children.length==0)?(d(),w(b,{key:1,type:"primary",onClick:Z=>e.showDeleteConfirm(z.xid),style:{"margin-left":"4px"}},{icon:n(()=>[a(v)]),_:2},1032,["onClick"])):$("",!0)],64)):$("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const $m=K(wm,[["render",Dm]]),Am=[{path:"/",component:()=>Le(()=>import("./Admin-ef1230f2.js"),["assets/Admin-ef1230f2.js","assets/vendor-7d287734.js","assets/vendor-ad46f743.css","assets/Admin-14aea5fe.css"]),children:[{path:"/admin/product",component:$m,name:"admin.products.index",meta:{requireAuth:!0,menuParent:"product",menuKey:e=>"products"}}]}],Tm=x({props:["xid","status"],emits:["success"],setup(e,{emit:s}){const{addEditRequestAdmin:m,loading:l}=le(),{t:h}=J();return{changeStatus:r=>{const i={xid:e.xid,status:r?1:0};m({url:"email-templates/update-status",data:i,successMessage:h("email_template.status_update"),success:p=>{s("success")}})},loading:l}}});function Em(e,s,m,l,h,y){const r=o("a-switch");return d(),w(r,{checked:e.status==1,size:"small",onClick:e.changeStatus,loading:e.loading},null,8,["checked","onClick","loading"])}const Um=K(Tm,[["render",Em]]),Om={components:{PlusOutlined:ae,EditOutlined:ye,DeleteOutlined:pe,AddEdit:sn,AdminPageHeader:me,UpdateStatus:Um},setup(){const{permsArray:e,appSetting:s}=Q(),{url:m,addEditUrl:l,initData:h,columns:y,filterableColumns:r}=on(),i=Te();return ee(()=>{i.tableUrl.value={url:m},i.table.filterableColumns=r,i.fetch({page:1}),i.crudUrl.value=l,i.langKey.value="email_template",i.initData.value={...h},i.formData.value={...h}}),{permsArray:e,appSetting:s,columns:y,...i,filterableColumns:r}}},Pm={class:"table-responsive"};function Im(e,s,m,l,h,y){const r=o("a-page-header"),i=o("router-link"),p=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("PlusOutlined"),b=o("a-button"),v=o("DeleteOutlined"),k=o("a-space"),C=o("a-col"),S=o("a-select-option"),E=o("a-select"),A=o("a-input-search"),P=o("a-input-group"),U=o("a-row"),D=o("admin-page-filters"),M=o("AddEdit"),q=o("UpdateStatus"),B=o("EditOutlined"),N=o("a-table"),R=o("admin-page-table-content");return d(),T(L,null,[a(g,null,{header:n(()=>[a(r,{title:e.$t("menu.email_templates"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(p,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[c(u(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(p,null,{default:n(()=>[c(u(e.$t("menu.email_templates")),1)]),_:1})]),_:1})]),_:1}),a(D,null,{default:n(()=>[a(U,{gutter:[16,16]},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:n(()=>[a(k,null,{default:n(()=>[l.permsArray.includes("email_templates_create")||l.permsArray.includes("admin")?(d(),w(b,{key:0,type:"primary",onClick:e.addItem},{default:n(()=>[a(f),c(" "+u(e.$t("email_template.add")),1)]),_:1},8,["onClick"])):$("",!0),e.table.selectedRowKeys.length>0&&(l.permsArray.includes("email_templates_delete")||l.permsArray.includes("admin"))?(d(),w(b,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:n(()=>[a(v)]),default:n(()=>[c(" "+u(e.$t("common.delete")),1)]),_:1},8,["onClick"])):$("",!0)]),_:1})]),_:1}),a(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:n(()=>[a(U,{gutter:[16,16],justify:"end"},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:12,xl:12},{default:n(()=>[a(P,{compact:""},{default:n(()=>[a(E,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=F=>e.table.searchColumn=F),placeholder:e.$t("common.select_default_text",[""])},{default:n(()=>[(d(!0),T(L,null,X(l.filterableColumns,F=>(d(),w(S,{key:F.key},{default:n(()=>[c(u(F.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),a(A,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=F=>e.table.searchString=F),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(R,null,{default:n(()=>[a(M,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),a(U,null,{default:n(()=>[a(C,{span:24},{default:n(()=>[O("div",Pm,[a(N,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:F=>({disabled:!1,name:F.xid})},columns:l.columns,"row-key":F=>F.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:n(({column:F,record:z})=>[F.dataIndex==="status"?(d(),w(q,{key:0,status:z.status,xid:z.xid,onSuccess:e.fetch},null,8,["status","xid","onSuccess"])):$("",!0),F.dataIndex==="action"?(d(),T(L,{key:1},[l.permsArray.includes("email_templates_edit")||l.permsArray.includes("admin")?(d(),w(b,{key:0,type:"primary",onClick:Z=>e.editItem(z),style:{"margin-left":"4px"}},{icon:n(()=>[a(B)]),_:2},1032,["onClick"])):$("",!0),(l.permsArray.includes("email_templates_delete")||l.permsArray.includes("admin"))&&(!z.children||z.children.length==0)?(d(),w(b,{key:1,type:"primary",onClick:Z=>e.showDeleteConfirm(z.xid),style:{"margin-left":"4px"}},{icon:n(()=>[a(v)]),_:2},1032,["onClick"])):$("",!0)],64)):$("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const Fm=K(Om,[["render",Im]]),Mm=[{path:"/",component:()=>Le(()=>import("./Admin-ef1230f2.js"),["assets/Admin-ef1230f2.js","assets/vendor-7d287734.js","assets/vendor-ad46f743.css","assets/Admin-14aea5fe.css"]),children:[{path:"/admin/email-templates",component:Fm,name:"admin.email_templates.index",meta:{requireAuth:!0,menuParent:"messaging",menuKey:"email_templates",permission:"email_templates_view"}}]}],Rm=x({props:["xid","status"],emits:["success"],setup(e,{emit:s}){const{addEditRequestAdmin:m,loading:l}=le(),{t:h}=J();return{changeStatus:r=>{const i={xid:e.xid,status:r?1:0};m({url:"forms/update-status",data:i,successMessage:h("form.status_update"),success:p=>{s("success")}})},loading:l}}});function Lm(e,s,m,l,h,y){const r=o("a-switch");return d(),w(r,{checked:e.status==1,size:"small",onClick:e.changeStatus,loading:e.loading},null,8,["checked","onClick","loading"])}const qm=K(Rm,[["render",Lm]]),Bm={components:{PlusOutlined:ae,EditOutlined:ye,DeleteOutlined:pe,AddEdit:nn,AdminPageHeader:me,UpdateStatus:qm},setup(){const{permsArray:e,appSetting:s}=Q(),{url:m,addEditUrl:l,initData:h,columns:y,filterableColumns:r}=an(),i=Te();return ee(()=>{i.tableUrl.value={url:m},i.table.filterableColumns=r,i.fetch({page:1}),i.crudUrl.value=l,i.langKey.value="form",i.initData.value={...h},i.formData.value={...h}}),{permsArray:e,appSetting:s,columns:y,...i,filterableColumns:r}}},zm={class:"table-responsive"},Km={key:0};function Vm(e,s,m,l,h,y){const r=o("a-page-header"),i=o("router-link"),p=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("PlusOutlined"),b=o("a-button"),v=o("DeleteOutlined"),k=o("a-space"),C=o("a-col"),S=o("a-select-option"),E=o("a-select"),A=o("a-input-search"),P=o("a-input-group"),U=o("a-row"),D=o("admin-page-filters"),M=o("AddEdit"),q=o("UpdateStatus"),B=o("EditOutlined"),N=o("a-table"),R=o("admin-page-table-content");return d(),T(L,null,[a(g,null,{header:n(()=>[a(r,{title:e.$t("menu.forms"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(p,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[c(u(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(p,null,{default:n(()=>[c(u(e.$t("menu.forms")),1)]),_:1})]),_:1})]),_:1}),a(D,null,{default:n(()=>[a(U,{gutter:[16,16]},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:n(()=>[a(k,null,{default:n(()=>[l.permsArray.includes("forms_create")||l.permsArray.includes("admin")?(d(),w(b,{key:0,type:"primary",onClick:e.addItem},{default:n(()=>[a(f),c(" "+u(e.$t("form.add")),1)]),_:1},8,["onClick"])):$("",!0),e.table.selectedRowKeys.length>0&&(l.permsArray.includes("forms_delete")||l.permsArray.includes("admin"))?(d(),w(b,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:n(()=>[a(v)]),default:n(()=>[c(" "+u(e.$t("common.delete")),1)]),_:1},8,["onClick"])):$("",!0)]),_:1})]),_:1}),a(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:n(()=>[a(U,{gutter:[16,16],justify:"end"},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:12,xl:12},{default:n(()=>[a(P,{compact:""},{default:n(()=>[a(E,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=F=>e.table.searchColumn=F),placeholder:e.$t("common.select_default_text",[""])},{default:n(()=>[(d(!0),T(L,null,X(l.filterableColumns,F=>(d(),w(S,{key:F.key},{default:n(()=>[c(u(F.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),a(A,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=F=>e.table.searchString=F),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(R,null,{default:n(()=>[a(M,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),a(U,null,{default:n(()=>[a(C,{span:24},{default:n(()=>[O("div",zm,[a(N,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:F=>({disabled:!1,name:F.xid})},columns:l.columns,"row-key":F=>F.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:n(({column:F,record:z})=>[F.dataIndex==="form_fields"?(d(),T("ul",Km,[(d(!0),T(L,null,X(z.form_fields,Z=>(d(),T("li",{key:Z.id},u(Z.name),1))),128))])):$("",!0),F.dataIndex==="status"?(d(),w(q,{key:1,status:z.status,xid:z.xid,onSuccess:e.fetch},null,8,["status","xid","onSuccess"])):$("",!0),F.dataIndex==="action"?(d(),T(L,{key:2},[l.permsArray.includes("forms_edit")||l.permsArray.includes("admin")?(d(),w(b,{key:0,type:"primary",onClick:Z=>e.editItem(z),style:{"margin-left":"4px"}},{icon:n(()=>[a(B)]),_:2},1032,["onClick"])):$("",!0),(l.permsArray.includes("forms_delete")||l.permsArray.includes("admin"))&&(!z.children||z.children.length==0)?(d(),w(b,{key:1,type:"primary",onClick:Z=>e.showDeleteConfirm(z.xid),style:{"margin-left":"4px"}},{icon:n(()=>[a(v)]),_:2},1032,["onClick"])):$("",!0)],64)):$("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const Hm=K(Bm,[["render",Vm]]),Nm=()=>{const e="form-field-names?fields=id,xid,field_name,similar_field_names,visible",s="form-field-names",m=[],{t:l}=J(),h={field_name:"",similar_field_names:[],visible:1},y=[{title:l("form_field_name.field_name"),dataIndex:"field_name"},{title:l("form_field_name.similar_field_names"),dataIndex:"similar_field_names"},{title:l("form_field_name.visible"),dataIndex:"visible"},{title:l("common.action"),dataIndex:"action"}],r=[{key:"field_name",value:l("form_field_name.field_name")},{key:"similar_field_names",value:l("form_field_name.similar_field_names")},{key:"deletable",value:l("form_field_name.deletable")},{key:"visible",value:l("form_field_name.visible")}];return{url:e,addEditUrl:s,initData:h,columns:y,filterableColumns:r,hashableColumns:m}},jm=x({props:["data","addText"],emits:["onEntry"],components:{PlusOutlined:ae},setup(e,{emit:s}){const m=I(),l=qe({tags:e.data,inputVisible:!1,inputValue:""}),h=i=>{const p=l.tags.filter(_=>_!==i);l.tags=p,s("onEntry",p)},y=()=>{l.inputVisible=!0,Mt(()=>{m.value.focus()})},r=()=>{const i=l.inputValue;let p=l.tags;i&&p.indexOf(i)===-1&&(p=[...p,i]),Object.assign(l,{tags:p,inputVisible:!1,inputValue:""}),s("onEntry",p)};return Se(()=>e.data,(i,p)=>{l.tags=i}),{...Ft(l),handleClose:h,showInput:y,handleInputConfirm:r,inputRef:m}}}),Wm={style:{marginBottom:"20px"}};function Ym(e,s,m,l,h,y){const r=o("a-tag"),i=o("a-tooltip"),p=o("a-input"),_=o("plus-outlined");return d(),T("div",Wm,[(d(!0),T(L,null,X(e.tags,g=>(d(),T(L,{key:g},[g.length>20?(d(),w(i,{key:0,title:g},{default:n(()=>[a(r,{closable:"",onClose:f=>e.handleClose(g),style:{marginBottom:"20px"}},{default:n(()=>[c(u(`${g.slice(0,20)}...`),1)]),_:2},1032,["onClose"])]),_:2},1032,["title"])):(d(),w(r,{key:1,closable:"",onClose:f=>e.handleClose(g),style:{marginBottom:"20px"}},{default:n(()=>[c(u(g),1)]),_:2},1032,["onClose"]))],64))),128)),e.inputVisible?(d(),w(p,{key:0,ref:"inputRef",value:e.inputValue,"onUpdate:value":s[0]||(s[0]=g=>e.inputValue=g),type:"text",size:"small",style:{width:"100px"},onBlur:e.handleInputConfirm,onKeyup:Gn(e.handleInputConfirm,["enter"])},null,8,["value","onBlur","onKeyup"])):(d(),w(r,{key:1,style:{background:"#fff","border-style":"dashed"},onClick:e.showInput},{default:n(()=>[a(_),c(" "+u(e.addText),1)]),_:1},8,["onClick"]))])}const Gm=K(jm,[["render",Ym]]),Xm=x({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ae,LoadingOutlined:Ae,SaveOutlined:_e,DynamicFields:Gm},setup(e,{emit:s}){const{addEditRequestAdmin:m,loading:l,rules:h}=le();return{loading:l,rules:h,onClose:()=>{h.value={},s("closed")},onSubmit:()=>{m({url:e.url,data:e.formData,successMessage:e.successMessage,success:i=>{s("addEditSuccess",i.xid)}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function Jm(e,s,m,l,h,y){const r=o("a-input"),i=o("a-form-item"),p=o("a-col"),_=o("a-row"),g=o("a-typography-title"),f=o("DynamicFields"),b=o("a-radio-button"),v=o("a-radio-group"),k=o("a-form"),C=o("SaveOutlined"),S=o("a-button"),E=o("a-modal");return d(),w(E,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:n(()=>[a(S,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:n(()=>[a(C)]),default:n(()=>[c(" "+u(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),a(S,{key:"back",onClick:e.onClose},{default:n(()=>[c(u(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[a(k,{layout:"vertical"},{default:n(()=>[a(_,{gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("form_field_name.field_name"),name:"field_name",help:e.rules.field_name?e.rules.field_name.message:null,validateStatus:e.rules.field_name?"error":null,class:"required"},{default:n(()=>[a(r,{value:e.formData.field_name,"onUpdate:value":s[0]||(s[0]=A=>e.formData.field_name=A),placeholder:e.$t("common.placeholder_default_text",[e.$t("form_field_name.field_name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(_,{gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(g,{level:5,style:{marginBottom:"10px"}},{default:n(()=>[c(u(e.$t("form_field_name.similar_field_names")),1)]),_:1}),e.formData.similar_field_names?(d(),w(f,{key:0,data:e.formData.similar_field_names,addText:e.$t("form_field_name.add_field"),onOnEntry:s[1]||(s[1]=A=>e.formData.similar_field_names=A)},null,8,["data","addText"])):$("",!0)]),_:1})]),_:1}),a(_,{gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("form_field_name.visible"),name:"visible",help:e.rules.visible?e.rules.visible.message:null,validatevisible:e.rules.visible?"error":null},{default:n(()=>[a(v,{value:e.formData.visible,"onUpdate:value":s[2]||(s[2]=A=>e.formData.visible=A),"button-style":"solid",size:"small"},{default:n(()=>[a(b,{value:1},{default:n(()=>[c(u(e.$t("common.yes")),1)]),_:1}),a(b,{value:0},{default:n(()=>[c(u(e.$t("common.no")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label","help","validatevisible"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const Qm=K(Xm,[["render",Jm]]),Zm=x({props:["xid","status"],emits:["success"],setup(e,{emit:s}){const{addEditRequestAdmin:m,loading:l}=le(),{t:h}=J();return{changeStatus:r=>{const i={xid:e.xid,status:r?1:0};m({url:"form-field-names/update-status",data:i,successMessage:h("form_field_name.status_update"),success:p=>{s("success")}})},loading:l}}});function xm(e,s,m,l,h,y){const r=o("a-switch");return d(),w(r,{checked:e.status==1,size:"small",onClick:e.changeStatus,loading:e.loading},null,8,["checked","onClick","loading"])}const ec=K(Zm,[["render",xm]]),ac={components:{PlusOutlined:ae,EditOutlined:ye,DeleteOutlined:pe,AddEdit:Qm,AdminPageHeader:me,UpdateStatus:ec},setup(){const{permsArray:e,appSetting:s}=Q(),{url:m,addEditUrl:l,initData:h,columns:y,filterableColumns:r}=Nm(),i=Te();return ee(()=>{i.tableUrl.value={url:m},i.table.filterableColumns=r,i.fetch({page:1}),i.crudUrl.value=l,i.langKey.value="form_field_name",i.initData.value={...h},i.formData.value={...h}}),{permsArray:e,appSetting:s,columns:y,...i,filterableColumns:r}}},tc={class:"table-responsive"},nc={key:0};function lc(e,s,m,l,h,y){const r=o("a-page-header"),i=o("router-link"),p=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("PlusOutlined"),b=o("a-button"),v=o("DeleteOutlined"),k=o("a-space"),C=o("a-col"),S=o("a-select-option"),E=o("a-select"),A=o("a-input-search"),P=o("a-input-group"),U=o("a-row"),D=o("admin-page-filters"),M=o("AddEdit"),q=o("UpdateStatus"),B=o("EditOutlined"),N=o("a-table"),R=o("admin-page-table-content");return d(),T(L,null,[a(g,null,{header:n(()=>[a(r,{title:e.$t("menu.form_field_names"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(p,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[c(u(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(p,null,{default:n(()=>[c(u(e.$t("menu.form_field_names")),1)]),_:1})]),_:1})]),_:1}),a(D,null,{default:n(()=>[a(U,{gutter:[16,16]},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:n(()=>[a(k,null,{default:n(()=>[l.permsArray.includes("form_field_names_create")||l.permsArray.includes("admin")?(d(),w(b,{key:0,type:"primary",onClick:e.addItem},{default:n(()=>[a(f),c(" "+u(e.$t("form_field_name.add")),1)]),_:1},8,["onClick"])):$("",!0),e.table.selectedRowKeys.length>0&&(l.permsArray.includes("form_field_names_delete")||l.permsArray.includes("admin"))?(d(),w(b,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:n(()=>[a(v)]),default:n(()=>[c(" "+u(e.$t("common.delete")),1)]),_:1},8,["onClick"])):$("",!0)]),_:1})]),_:1}),a(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:n(()=>[a(U,{gutter:[16,16],justify:"end"},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:12,xl:12},{default:n(()=>[a(P,{compact:""},{default:n(()=>[a(E,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=F=>e.table.searchColumn=F),placeholder:e.$t("common.select_default_text",[""])},{default:n(()=>[(d(!0),T(L,null,X(l.filterableColumns,F=>(d(),w(S,{key:F.key},{default:n(()=>[c(u(F.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),a(A,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=F=>e.table.searchString=F),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(R,null,{default:n(()=>[a(M,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),a(U,null,{default:n(()=>[a(C,{span:24},{default:n(()=>[O("div",tc,[a(N,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:F=>({disabled:!1,name:F.xid})},columns:l.columns,"row-key":F=>F.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:n(({column:F,record:z})=>[F.dataIndex==="similar_field_names"?(d(),T("ul",nc,[(d(!0),T(L,null,X(z.similar_field_names,Z=>(d(),T("li",{key:Z},u(Z),1))),128))])):$("",!0),F.dataIndex==="visible"?(d(),w(q,{key:1,status:z.visible,xid:z.xid,onSuccess:e.fetch},null,8,["status","xid","onSuccess"])):$("",!0),F.dataIndex==="action"?(d(),T(L,{key:2},[l.permsArray.includes("form_field_names_edit")||l.permsArray.includes("admin")?(d(),w(b,{key:0,type:"primary",onClick:Z=>e.editItem(z),style:{"margin-left":"4px"}},{icon:n(()=>[a(B)]),_:2},1032,["onClick"])):$("",!0),(l.permsArray.includes("form_field_names_delete")||l.permsArray.includes("admin"))&&(!z.children||z.children.length==0)?(d(),w(b,{key:1,type:"primary",onClick:Z=>e.showDeleteConfirm(z.xid),style:{"margin-left":"4px"}},{icon:n(()=>[a(v)]),_:2},1032,["onClick"])):$("",!0)],64)):$("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const oc=K(ac,[["render",lc]]),sc=[{path:"/",component:()=>Le(()=>import("./Admin-ef1230f2.js"),["assets/Admin-ef1230f2.js","assets/vendor-7d287734.js","assets/vendor-ad46f743.css","assets/Admin-14aea5fe.css"]),children:[{path:"/admin/forms",component:Hm,name:"admin.forms.index",meta:{requireAuth:!0,menuParent:"forms",menuKey:"forms",permission:"forms_view"}},{path:"/admin/form-field-names",component:oc,name:"admin.form_field_names.index",meta:{requireAuth:!0,menuParent:"form_field_names",menuKey:"form_field_names",permission:"form_field_names_view"}}]}],dc=()=>{const{convertStringToKey:e,getCampaignUrl:s,getCampaignStatsUrl:m}=Q(),l="leads?fields=id,xid,reference_number,lead_data,started,campaign_id,x_campaign_id,campaign{id,xid,name,status},time_taken,first_action_by,x_first_action_by,firstActioner{id,xid,name},last_action_by,x_last_action_by,lastActioner{id,xid,name}",h="leads",y=["campaign_id"],{t:r}=J(),i=I([]),p=I([]),_="form-field-names/all",g=I({}),f=I([]),b=I("self"),v=I("active"),k={reference_number:""},C=I([]),S=[{key:"reference_number",value:r("lead.reference_number")}];return ee(()=>{const E=s(v.value,b.value),A=m(),P=axiosAdmin.get(_),U=axiosAdmin.get(E),D=axiosAdmin.get(A),M=axiosAdmin.get("campaigns/user-campaigns");Promise.all([P,U,D,M]).then(([q,B,N,R])=>{i.value=q.data.data,p.value=B.data,g.value=N.data,f.value=R.data.user_campaigns;var F=[{title:r("lead.reference_number"),dataIndex:"reference_number"},{title:r("lead.campaign"),dataIndex:"campaign"},{title:"Customer",dataIndex:"reference_number"},{title:"Vehicle",dataIndex:"campaign"},{title:"Status",dataIndex:"campaign"},{title:"Sub Status",dataIndex:"campaign"},{title:"Reminder Date",dataIndex:"campaign"},{title:"Expiry Date",dataIndex:"campaign"}];fe(q.data.data,z=>{F.push({title:z.field_name,dataIndex:e(z.field_name)})}),F.push({title:r("common.action"),dataIndex:"action"}),C.value=F})}),{url:l,addEditUrl:h,initData:k,columns:C,filterableColumns:S,hashableColumns:y,allFormFieldNames:i,convertStringToKey:e,allCampaigns:p,campaignStats:g,userCampaigns:f,activeCampaignType:v,viewType:b}},ic=x({props:["xid","status"],emits:["success"],setup(e,{emit:s}){const{addEditRequestAdmin:m,loading:l}=le(),{t:h}=J();return{changeStatus:r=>{const i={xid:e.xid,status:r?1:0};m({url:"leads/update-status",data:i,successMessage:h("lead.status_update"),success:p=>{s("success")}})},loading:l}}});function rc(e,s,m,l,h,y){const r=o("a-switch");return d(),w(r,{checked:e.status==1,size:"small",onClick:e.changeStatus,loading:e.loading},null,8,["checked","onClick","loading"])}const uc=K(ic,[["render",rc]]);const mc={components:{PlusOutlined:ae,EditOutlined:ye,DeleteOutlined:pe,SearchOutlined:It,LineChartOutlined:Xn,EyeOutlined:Re,PlayCircleOutlined:Me,DownOutlined:Ra,AreaChartOutlined:Jn,HistoryOutlined:Rt,ExclamationCircleOutlined:ie,StopOutlined:ca,CopyrightCircleOutlined:Dt,ApartmentOutlined:Lt,MobileOutlined:Pa,ClockCircleOutlined:Ia,DateRangePicker:oa,AdminPageHeader:me,UpdateStatus:uc,StateWidget:jt},setup(){const{permsArray:e,appSetting:s,convertStringToKey:m,formatTimeDuration:l,getCampaignUrl:h,getCampaignStatsUrl:y}=Q(),r=Ve(),i=Oe(),{url:p,addEditUrl:_,initData:g,columns:f,hashableColumns:b,filterableColumns:v,allFormFieldNames:k,allCampaigns:C,campaignStats:S,userCampaigns:E,activeCampaignType:A,viewType:P}=dc(),U=Te(),D=I({campaign_id:void 0}),M=I([]),q=I({lead_field_name:void 0,lead_field_value:"",started:"started",lead_status:void 0,campaign_status:"active"}),B=I(void 0),{t:N}=J(),R={marginLeft:"0px",marginRight:"0px"};ee(()=>{F(),U.crudUrl.value=_,U.langKey.value="lead",U.initData.value={...g},U.formData.value={...g},U.hashableColumns.value=[...b]});const F=()=>{U.tableUrl.value={url:p,filters:D,extraFilters:q},U.table.filterableColumns=v,U.table.pagination={...U.table.pagination,current:1},U.fetch({page:1})};return{permsArray:e,appSetting:s,columns:f,allFormFieldNames:k,...U,...r,filterableColumns:v,convertStringToKey:m,filters:D,extraFilters:q,setUrlData:F,findFieldValue:(Y,se)=>{var Ce="-";return fe(se,G=>{Y.includes(G.field_name)&&(Ce=G.field_value)}),Ce},allCampaigns:C,campaignFormFields:M,searchFieldName:B,goAndResumeLead:Y=>{he.confirm({title:N("common.are_you_sure")+"?",icon:a(ie),content:N("lead.are_you_want_to_resume_this_lead"),centered:!0,okText:N("common.yes"),okType:"danger",cancelText:N("common.no"),onOk(){i.push({name:"admin.call_manager.take_action",params:{id:Y.xid}})},onCancel(){}})},activeCampaignType:A,widgetBodyStyle:R,campaignChanged:(Y,se)=>{M.value=se&&se.campaign&&se.campaign.form&&se.campaign.form.form_fields?se.campaign.form.form_fields:[],q.value={...q.value,lead_field_name:void 0,lead_field_value:"",started:"started",lead_status:void 0},B.value=void 0,F()},searchFieldChanged:(Y,se)=>{q.value={...q.value,lead_field_name:se&&se.formField&&se.formField.name?se.formField.name:void 0,lead_field_value:""},F()},campaignTypeChanged:Y=>{D.value={...D.value,campaign_id:void 0},q.value={...q.value,lead_field_name:void 0,lead_field_value:"",started:"started",lead_status:void 0};const se=h(q.value.campaign_status,P.value),Ce=y(q.value.campaign_status,D.value.campaign_id),G=axiosAdmin.get(se),te=axiosAdmin.get(Ce);Promise.all([G,te]).then(([ce,we])=>{C.value=ce.data,S.value=we.data,F()})},campaignStats:S,formatTimeDuration:l,isLeadActionValid:Y=>e.value.includes("leads_view_all")||e.value.includes("admin")?!0:!!Ne(E.value,{x_campaign_id:Y}),viewType:P,viewTypeChanged:()=>{const Y=h(q.value.campaign_status,P.value),se=axiosAdmin.get(Y);Promise.all([se]).then(([Ce,G])=>{C.value=Ce.data,F()})}}}},cc={class:"left-lead-campaigns"},pc={key:0,class:"table-responsive"},_c={key:1};function fc(e,s,m,l,h,y){const r=o("a-typography-text"),i=o("a-switch"),p=o("a-space"),_=o("a-page-header"),g=o("router-link"),f=o("a-breadcrumb-item"),b=o("a-breadcrumb"),v=o("AdminPageHeader"),k=o("PlayCircleOutlined"),C=o("a-tab-pane"),S=o("StopOutlined"),E=o("a-tabs"),A=o("a-col"),P=o("a-row"),U=o("a-select-option"),D=o("a-select"),M=o("a-form-item"),q=o("a-form"),B=o("CopyrightCircleOutlined"),N=o("StateWidget"),R=o("LineChartOutlined"),F=o("ApartmentOutlined"),z=o("MobileOutlined"),Z=o("ClockCircleOutlined"),ne=o("perfect-scrollbar"),V=o("AreaChartOutlined"),W=o("HistoryOutlined"),H=o("a-input-search"),j=o("DateRangePicker"),Y=o("a-button"),se=o("a-tooltip"),Ce=o("DeleteOutlined"),G=o("a-table"),te=o("a-card"),ce=o("admin-page-table-content"),we=o("view-lead-details");return d(),T(L,null,[a(v,null,{header:n(()=>[a(_,{title:e.$t("menu.leads"),class:"p-0"},ta({_:2},[l.permsArray.includes("campaigns_view_all")||l.permsArray.includes("admin")?{name:"extra",fn:n(()=>[a(p,null,{default:n(()=>[a(r,{strong:""},{default:n(()=>[c(u(e.$t("campaign.view_all_campaigns")),1)]),_:1}),a(i,{checked:l.viewType,"onUpdate:checked":s[0]||(s[0]=re=>l.viewType=re),onChange:l.viewTypeChanged,unCheckedValue:"self",checkedValue:"all",size:"small"},null,8,["checked","onChange"])]),_:1})]),key:"0"}:void 0]),1032,["title"])]),breadcrumb:n(()=>[a(b,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(f,null,{default:n(()=>[a(g,{to:{name:"admin.dashboard.index"}},{default:n(()=>[c(u(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(f,null,{default:n(()=>[c(u(e.$t("menu.leads_calls")),1)]),_:1}),a(f,null,{default:n(()=>[c(u(e.$t("menu.leads")),1)]),_:1})]),_:1})]),_:1}),a(ce,null,{default:n(()=>[a(te,{class:"page-content-container mt-20 mb-20"},{default:n(()=>[a(P,null,{default:n(()=>[a(A,{span:24},{default:n(()=>[a(E,{activeKey:l.extraFilters.campaign_status,"onUpdate:activeKey":s[1]||(s[1]=re=>l.extraFilters.campaign_status=re),onChange:l.campaignTypeChanged},{default:n(()=>[a(C,{key:"active"},{tab:n(()=>[O("span",null,[a(k),c(" "+u(e.$t("campaign.active_campaign")),1)])]),_:1}),l.permsArray.includes("view_completed_campaigns")||l.permsArray.includes("admin")?(d(),w(C,{key:"completed"},{tab:n(()=>[O("span",null,[a(S),c(" "+u(e.$t("campaign.completed_campaign")),1)])]),_:1})):$("",!0)]),_:1},8,["activeKey","onChange"])]),_:1})]),_:1}),a(P,{gutter:[24,24]},{default:n(()=>[a(A,{xs:24,sm:24,md:6,lg:6,xl:6,style:{"border-right":"1px solid #f0f0f0"}},{default:n(()=>[O("div",cc,[a(ne,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:n(()=>[a(P,null,{default:n(()=>[a(A,{span:24},{default:n(()=>[a(q,{layout:"vertical"},{default:n(()=>[a(M,{label:e.$t("lead.campaign"),name:"campaign"},{default:n(()=>[a(D,{value:l.filters.campaign_id,"onUpdate:value":s[2]||(s[2]=re=>l.filters.campaign_id=re),placeholder:e.$t("common.select_default_text",[e.$t("lead.campaign")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:l.campaignChanged},{default:n(()=>[(d(!0),T(L,null,X(l.allCampaigns,re=>(d(),w(U,{key:re.xid,title:re.name,value:re.xid,campaign:re},{default:n(()=>[c(u(re.name),1)]),_:2},1032,["title","value","campaign"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),l.campaignStats?(d(),w(P,{key:0},{default:n(()=>[a(A,{span:24},{default:n(()=>[a(N,{bodyStyle:l.widgetBodyStyle},{image:n(()=>[a(B,{style:{color:"#fff","font-size":"24px"}})]),description:n(()=>[O("h2",null,u(l.campaignStats.total_active_campaign),1),O("p",null,u(e.$t("campaign.active_campaign")),1)]),_:1},8,["bodyStyle"])]),_:1}),a(A,{span:24},{default:n(()=>[a(N,{bgColor:"#ffa39e",bodyStyle:l.widgetBodyStyle},{image:n(()=>[a(R,{style:{color:"#fff","font-size":"24px"}})]),description:n(()=>[O("h2",null,u(l.campaignStats.total_completed_campaign),1),O("p",null,u(e.$t("campaign.completed_campaign")),1)]),_:1},8,["bodyStyle"])]),_:1}),l.permsArray.includes("leads_view_all")||l.permsArray.includes("admin")||l.filters.campaign_id!=null?(d(),w(A,{key:0,span:24},{default:n(()=>[a(N,{bgColor:"#d46b08",bodyStyle:l.widgetBodyStyle},{image:n(()=>[a(F,{style:{color:"#fff","font-size":"24px"}})]),description:n(()=>[O("h2",null,u(l.campaignStats.total_leads),1),O("p",null,u(e.$t("campaign.total_leads")),1)]),_:1},8,["bodyStyle"])]),_:1})):$("",!0),a(A,{span:24},{default:n(()=>[a(N,{bgColor:"#389e0d",bodyStyle:l.widgetBodyStyle},{image:n(()=>[a(z,{style:{color:"#fff","font-size":"24px"}})]),description:n(()=>[O("h2",null,u(l.campaignStats.call_made),1),O("p",null,u(e.$t("campaign.call_made")),1)]),_:1},8,["bodyStyle"])]),_:1}),a(A,{span:24},{default:n(()=>[a(N,{bgColor:"#08979c",bodyStyle:l.widgetBodyStyle},{image:n(()=>[a(Z,{style:{color:"#fff","font-size":"24px"}})]),description:n(()=>[O("h2",null,u(l.formatTimeDuration(l.campaignStats.total_duration)),1),O("p",null,u(e.$t("campaign.total_duration")),1)]),_:1},8,["bodyStyle"])]),_:1})]),_:1})):$("",!0)]),_:1})])]),_:1}),a(A,{xs:24,sm:24,md:18,lg:18,xl:18},{default:n(()=>[a(P,null,{default:n(()=>[a(A,{span:24},{default:n(()=>[a(E,{activeKey:l.extraFilters.started,"onUpdate:activeKey":s[3]||(s[3]=re=>l.extraFilters.started=re),onChange:l.setUrlData},{default:n(()=>[a(C,{key:"started"},{tab:n(()=>[O("span",null,[a(V),c(" "+u(e.$t("lead.started")),1)])]),_:1}),l.permsArray.includes("leads_view_all")||l.permsArray.includes("admin")?(d(),w(C,{key:"not_started"},{tab:n(()=>[O("span",null,[a(W),c(" "+u(e.$t("lead.not_started")),1)])]),_:1})):$("",!0)]),_:1},8,["activeKey","onChange"])]),_:1})]),_:1}),a(P,{gutter:16},{default:n(()=>[a(A,{xs:24,sm:24,md:6,lg:6,xl:6},{default:n(()=>[a(H,{style:{width:"100%"},value:e.table.searchString,"onUpdate:value":s[4]||(s[4]=re=>e.table.searchString=re),placeholder:e.$t("common.select_default_text",[e.$t("lead.reference_number")]),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","placeholder","onChange","onSearch","loading"])]),_:1}),l.extraFilters.started=="started"?(d(),w(A,{key:0,xs:24,sm:24,md:6,lg:6,xl:6},{default:n(()=>[a(D,{value:l.extraFilters.lead_status,"onUpdate:value":s[5]||(s[5]=re=>l.extraFilters.lead_status=re),placeholder:e.$t("common.select_default_text",[e.$t("lead.lead_status")]),allowClear:!0,style:{width:"100%"},onChange:l.setUrlData},{default:n(()=>[a(U,{key:"Fresh",value:"Fresh"},{default:n(()=>[c(" Fresh ")]),_:1}),a(U,{key:"converted",value:"Converted"},{default:n(()=>[c(" Converted ")]),_:1}),a(U,{key:"Follow-up",value:"Follow-up"},{default:n(()=>[c(" Follow-up ")]),_:1}),a(U,{key:"Callback",value:"Callback"},{default:n(()=>[c(" Callback ")]),_:1}),a(U,{key:"Yet to Contact",value:"Yet to Contact"},{default:n(()=>[c(" Yet to Contact ")]),_:1}),a(U,{key:"Lost",value:"Lost"},{default:n(()=>[c(" Lost ")]),_:1})]),_:1},8,["value","placeholder","onChange"])]),_:1})):$("",!0),a(A,{xs:24,sm:24,md:8,lg:8,xl:6},{default:n(()=>[a(j,{onDateTimeChanged:s[6]||(s[6]=re=>{l.extraFilters.dates=re,l.setUrlData()})})]),_:1})]),_:1}),a(P,{class:"mt-20"},{default:n(()=>[a(A,{span:24},{default:n(()=>[l.columns&&l.columns.length>0?(d(),T("div",pc,[a(G,{columns:l.columns,"row-key":re=>re.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange},{bodyCell:n(({column:re,record:De})=>[re.dataIndex==="reference_number"?(d(),w(Y,{key:0,type:"link",class:"p-0",onClick:Ie=>e.showViewDrawer(De)},{default:n(()=>[c(u(De.reference_number!=""&&De.reference_number!=null?De.reference_number:"---"),1)]),_:2},1032,["onClick"])):$("",!0),re.dataIndex==="campaign"?(d(),T(L,{key:1},[c(u(De.campaign.name),1)],64)):$("",!0),(d(!0),T(L,null,X(l.allFormFieldNames,Ie=>(d(),T(L,{key:Ie.xid},[re.dataIndex===l.convertStringToKey(Ie.field_name)?(d(),T(L,{key:0},[c(u(l.findFieldValue(Ie.similar_field_names,De.lead_data)),1)],64)):$("",!0)],64))),128)),re.dataIndex==="action"?(d(),T(L,{key:2},[l.isLeadActionValid(De.campaign.xid)?(d(),w(p,{key:0},{default:n(()=>[De.started&&De.campaign&&De.campaign.status!="completed"?(d(),w(se,{key:0,title:e.$t("lead.go_resume_call")},{default:n(()=>[a(Y,{type:"primary",onClick:Ie=>l.goAndResumeLead(De)},{icon:n(()=>[a(k)]),_:2},1032,["onClick"])]),_:2},1032,["title"])):$("",!0),a(se,{title:e.$t("lead.delete_lead")},{default:n(()=>[(l.permsArray.includes("leads_delete")||l.permsArray.includes("admin"))&&!De.started?(d(),w(Y,{key:0,type:"primary",onClick:Ie=>e.showDeleteConfirm(De.xid)},{icon:n(()=>[a(Ce)]),_:2},1032,["onClick"])):$("",!0)]),_:2},1032,["title"])]),_:2},1024)):(d(),T("span",_c,"-"))],64)):$("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])])):$("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(we,{visible:e.isViewDrawerVisible,lead:e.viewDrawerData,onClose:e.hideViewDrawer},null,8,["visible","lead","onClose"])],64)}const gc=K(mc,[["render",fc]]),hc={components:{EyeOutlined:Re,PlayCircleOutlined:Me,DownOutlined:Ra,AdminPageHeader:me,CallLogTable:za},setup(){return{}}};function bc(e,s,m,l,h,y){const r=o("a-page-header"),i=o("router-link"),p=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("CallLogTable"),b=o("a-card"),v=o("admin-page-table-content");return d(),T(L,null,[a(g,null,{header:n(()=>[a(r,{title:e.$t("menu.call_logs"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(p,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[c(u(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(p,null,{default:n(()=>[c(u(e.$t("menu.leads_calls")),1)]),_:1}),a(p,null,{default:n(()=>[c(u(e.$t("menu.call_logs")),1)]),_:1})]),_:1})]),_:1}),a(v,null,{default:n(()=>[a(b,{class:"page-content-container mt-20 mb-20"},{default:n(()=>[a(f,{showAction:!1,showCampaignStatus:!0})]),_:1})]),_:1})],64)}const yc=K(hc,[["render",bc]]),vc={components:{EyeOutlined:Re,PlayCircleOutlined:Me,DownOutlined:Ra,AdminPageHeader:me,LeadNotesTable:Ka},setup(){return{...Ve()}}};function kc(e,s,m,l,h,y){const r=o("a-page-header"),i=o("router-link"),p=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("LeadNotesTable"),b=o("a-card"),v=o("admin-page-table-content");return d(),T(L,null,[a(g,null,{header:n(()=>[a(r,{title:e.$t("menu.lead_notes"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(p,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[c(u(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(p,null,{default:n(()=>[c(u(e.$t("menu.leads_calls")),1)]),_:1}),a(p,null,{default:n(()=>[c(u(e.$t("menu.lead_notes")),1)]),_:1})]),_:1})]),_:1}),a(v,null,{default:n(()=>[a(b,{class:"page-content-container mt-20 mb-20"},{default:n(()=>[a(f,{logType:"notes",showFormFields:!0,showCampaignStatus:!0,showTableSearch:!0,showLeadDetails:!0,showAddButton:!1,showActionButton:!1})]),_:1})]),_:1})],64)}const Cc=K(vc,[["render",kc]]),wc=[{path:"/",component:()=>Le(()=>import("./Admin-ef1230f2.js"),["assets/Admin-ef1230f2.js","assets/vendor-7d287734.js","assets/vendor-ad46f743.css","assets/Admin-14aea5fe.css"]),children:[{path:"/admin/leads",component:gc,name:"admin.leads.index",meta:{requireAuth:!0,menuParent:"leads",menuKey:"leads"}},{path:"/admin/call-logs",component:yc,name:"admin.call_logs.index",meta:{requireAuth:!0,menuParent:"leads",menuKey:"call_logs"}},{path:"/admin/notes",component:Cc,name:"admin.lead_notes.index",meta:{requireAuth:!0,menuParent:"leads",menuKey:"lead_notes"}}]}];const Va=e=>{const s=e=="admin"?"currencies?fields=id,xid,name,symbol,position,code":"superadmin/currencies?fields=id,xid,name,symbol,position,code",m=e=="admin"?"currencies":"superadmin/currencies",{t:l}=J(),h={name:"",symbol:"",position:"",code:""},y=[{title:l("currency.name"),dataIndex:"name"},{title:l("currency.symbol"),dataIndex:"symbol"},{title:l("currency.position"),dataIndex:"position"},{title:l("currency.code"),dataIndex:"code"},{title:l("common.action"),dataIndex:"action"}],r=[{key:"name",value:l("common.name")}];return{url:s,addEditUrl:m,initData:h,columns:y,filterableColumns:r}},Sc=x({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],emits:["addEditSuccess"],components:{PlusOutlined:ae,LoadingOutlined:Ae,SaveOutlined:_e},setup(e,{emit:s}){const{addEditRequestAdmin:m,loading:l,rules:h}=le(),{appSetting:y}=Q(),r=be();return{loading:l,rules:h,onClose:()=>{h.value={},s("closed")},onSubmit:()=>{m({url:e.url,data:e.formData,successMessage:e.successMessage,success:_=>{y.value.currency&&y.value.currency.xid==_.xid&&r.dispatch("auth/updateApp"),s("addEditSuccess",_.xid)}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function Dc(e,s,m,l,h,y){const r=o("a-input"),i=o("a-form-item"),p=o("a-col"),_=o("a-row"),g=o("a-radio"),f=o("a-radio-group"),b=o("a-form"),v=o("SaveOutlined"),k=o("a-button"),C=o("a-modal");return d(),w(C,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:n(()=>[a(k,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:n(()=>[a(v)]),default:n(()=>[c(" "+u(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),a(k,{key:"back",onClick:e.onClose},{default:n(()=>[c(u(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[a(b,{layout:"vertical"},{default:n(()=>[a(_,{gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("currency.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:n(()=>[a(r,{value:e.formData.name,"onUpdate:value":s[0]||(s[0]=S=>e.formData.name=S),placeholder:e.$t("common.placeholder_default_text",[e.$t("currency.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(_,{gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("currency.symbol"),name:"symbol",help:e.rules.symbol?e.rules.symbol.message:null,validateStatus:e.rules.symbol?"error":null,class:"required"},{default:n(()=>[a(r,{value:e.formData.symbol,"onUpdate:value":s[1]||(s[1]=S=>e.formData.symbol=S),placeholder:e.$t("common.placeholder_default_text",[e.$t("currency.symbol")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(_,{gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("currency.position"),name:"position",help:e.rules.position?e.rules.position.message:null,validateStatus:e.rules.position?"error":null},{default:n(()=>[a(f,{value:e.formData.position,"onUpdate:value":s[2]||(s[2]=S=>e.formData.position=S)},{default:n(()=>[a(g,{value:"front"},{default:n(()=>[c(u(e.$t("currency.front"))+" ("+u(e.$t("currency.front_position_example"))+") ",1)]),_:1}),a(g,{value:"behind"},{default:n(()=>[c(u(e.$t("currency.behind"))+" ("+u(e.$t("currency.behind_position_example"))+") ",1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(_,{gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("currency.code"),name:"code",help:e.rules.code?e.rules.code.message:null,validateStatus:e.rules.code?"error":null,class:"required"},{default:n(()=>[a(r,{value:e.formData.code,"onUpdate:value":s[3]||(s[3]=S=>e.formData.code=S),placeholder:e.$t("common.placeholder_default_text",[e.$t("currency.code")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const Ha=K(Sc,[["render",Dc]]),$c=x({props:{panelType:{type:String,default:"admin"},btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:ae,AddEdit:Ha},setup(e,{emit:s}){const{permsArray:m}=Q(),{initData:l,addEditUrl:h}=Va(e.panelType),y=I(!1),r=I("add"),i=I({...l});return{permsArray:m,visible:y,addEditType:r,addEditUrl:h,formData:i,addEditSuccess:()=>{y.value=!1,i.value={...l},s("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),Ac={key:0};function Tc(e,s,m,l,h,y){const r=o("a-menu-item"),i=o("PlusOutlined"),p=o("a-button"),_=o("a-tooltip"),g=o("AddEdit");return e.panelType=="admin"&&(e.permsArray.includes("currencies_create")||e.permsArray.includes("admin"))||e.panelType=="superadmin"?(d(),T("div",Ac,[e.customType=="menu"?(d(),w(r,{onClick:e.showAdd,key:"categories"},{icon:n(()=>[oe(e.$slots,"icon")]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick"])):(d(),T(L,{key:1},[e.tooltip?(d(),w(_,{key:0,placement:"topLeft",title:e.$t("currency.add"),"arrow-point-at-center":""},{default:n(()=>[a(p,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:n(()=>[a(i)]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(d(),w(p,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:n(()=>[a(i)]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),a(g,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("currency.add"),successMessage:e.$t("currency.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):$("",!0)}const fn=K($c,[["render",Tc]]),gn=()=>{const e=ge("langs?fields=id,xid,name,image,image_url,key,enabled"),s=ge("langs"),{t:m}=J(),l={name:"",key:"",image:void 0,image_url:void 0,enabled:!0},h=[{title:m("langs.name"),dataIndex:"name"},{title:m("langs.key"),dataIndex:"key"},{title:m("langs.enabled"),dataIndex:"enabled"},{title:m("common.action"),dataIndex:"action"}],y=[{key:"name",value:m("langs.name")}];return{url:e,addEditUrl:s,initData:l,columns:h,filterableColumns:y}},Ec=x({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ae,LoadingOutlined:Ae,SaveOutlined:_e,Upload:We},setup(e,{emit:s}){const{addEditRequestAdmin:m,loading:l,rules:h}=le(),y=be();return{loading:l,rules:h,onClose:()=>{h.value={},s("closed")},onSubmit:()=>{m({url:e.url,data:e.formData,successMessage:e.successMessage,success:p=>{s("addEditSuccess",p.xid),y.dispatch("auth/updateAllLangs")}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function Uc(e,s,m,l,h,y){const r=o("a-input"),i=o("a-form-item"),p=o("a-col"),_=o("a-row"),g=o("Upload"),f=o("a-form"),b=o("SaveOutlined"),v=o("a-button"),k=o("a-modal");return d(),w(k,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:n(()=>[a(v,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:n(()=>[a(b)]),default:n(()=>[c(" "+u(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),a(v,{key:"back",onClick:e.onClose},{default:n(()=>[c(u(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[a(f,{layout:"vertical"},{default:n(()=>[a(_,{gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("langs.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:n(()=>[a(r,{value:e.formData.name,"onUpdate:value":s[0]||(s[0]=C=>e.formData.name=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("langs.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(_,{gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("langs.key"),name:"key",help:e.rules.key?e.rules.key.message:null,validateStatus:e.rules.key?"error":null,class:"required"},{default:n(()=>[a(r,{value:e.formData.key,"onUpdate:value":s[1]||(s[1]=C=>e.formData.key=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("langs.key")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(_,null,{default:n(()=>[a(p,{span:24},{default:n(()=>[a(i,{label:e.$t("langs.flag"),name:"image",help:e.rules.image?e.rules.image.message:null,validateStatus:e.rules.image?"error":null},{default:n(()=>[a(g,{formData:e.formData,folder:"langs",onOnFileUploaded:s[2]||(s[2]=C=>{e.formData.image=C.file,e.formData.image_url=C.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const hn=K(Ec,[["render",Uc]]),Oc=x({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:ae,AddEdit:hn},setup(e,{emit:s}){const{permsArray:m}=Q(),{initData:l,addEditUrl:h}=gn(),y=I(!1),r=I("add"),i=I({...l});return{permsArray:m,visible:y,addEditType:r,addEditUrl:h,formData:i,addEditSuccess:()=>{y.value=!1,i.value={...l},s("onAddSuccess")},onClose:()=>{y.value=!1},showAdd:()=>{y.value=!0}}}}),Pc={key:0};function Ic(e,s,m,l,h,y){const r=o("a-menu-item"),i=o("PlusOutlined"),p=o("a-button"),_=o("a-tooltip"),g=o("AddEdit");return e.permsArray.includes("translations_create")||e.permsArray.includes("admin")?(d(),T("div",Pc,[e.customType=="menu"?(d(),w(r,{onClick:e.showAdd,key:"categories"},{icon:n(()=>[oe(e.$slots,"icon")]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick"])):(d(),T(L,{key:1},[e.tooltip?(d(),w(_,{key:0,placement:"topLeft",title:e.$t("langs.add"),"arrow-point-at-center":""},{default:n(()=>[a(p,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:n(()=>[a(i)]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(d(),w(p,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:n(()=>[a(i)]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),a(g,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("langs.add"),successMessage:e.$t("langs.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):$("",!0)}const Da=K(Oc,[["render",Ic]]);const Fc=x({components:{LaptopOutlined:Qn,UserOutlined:Zn,TranslationOutlined:xn,ShopOutlined:el,SolutionOutlined:al,ScheduleOutlined:ha,DollarOutlined:tl,AccountBookOutlined:nl,AppstoreAddOutlined:ll,ApartmentOutlined:Lt,FolderOpenOutlined:ol,MailOutlined:ka,HistoryOutlined:Rt,FormOutlined:sl,DatabaseOutlined:dl},setup(){const{appSetting:e,user:s,permsArray:m,appModules:l,appType:h}=Q(),y=Oa();be();const r=I([]);return ee(()=>{const i=typeof y.meta.menuKey=="function"?y.meta.menuKey(y):y.meta.menuKey;r.value=[i.replace("-","_")]}),Se(y,(i,p)=>{const _=typeof i.meta.menuKey=="function"?i.meta.menuKey(i):i.meta.menuKey;r.value=[_.replace("-","_")]}),{permsArray:m,selectedKeys:r,appType:h}}}),Mc={class:"setting-sidebar"};function Rc(e,s,m,l,h,y){const r=o("LaptopOutlined"),i=o("a-menu-item"),p=o("UserOutlined"),_=o("TranslationOutlined"),g=o("SolutionOutlined"),f=o("DollarOutlined"),b=o("MailOutlined"),v=o("AppstoreAddOutlined"),k=o("FolderOpenOutlined"),C=o("DatabaseOutlined"),S=o("HistoryOutlined"),E=o("a-menu"),A=o("perfect-scrollbar");return d(),T("div",Mc,[a(A,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:n(()=>[a(E,{selectedKeys:e.selectedKeys,"onUpdate:selectedKeys":s[12]||(s[12]=P=>e.selectedKeys=P)},{default:n(()=>[e.permsArray.includes("companies_edit")||e.permsArray.includes("admin")?(d(),w(i,{key:"company",onClick:s[0]||(s[0]=P=>e.$router.push({name:"admin.settings.company.index"}))},{icon:n(()=>[a(r)]),default:n(()=>[c(" "+u(e.$t("menu.company")),1)]),_:1})):$("",!0),a(i,{key:"profile",onClick:s[1]||(s[1]=P=>e.$router.push({name:"admin.settings.profile.index"}))},{icon:n(()=>[a(p)]),default:n(()=>[c(" "+u(e.$t("menu.profile")),1)]),_:1}),a(i,{key:"Banner",onClick:s[2]||(s[2]=P=>e.$router.push({name:"admin.settings.banner.index"}))},{icon:n(()=>[a(p)]),default:n(()=>[c(" Banner ")]),_:1}),e.appType=="non-saas"&&(e.permsArray.includes("translations_view")||e.permsArray.includes("admin"))?(d(),w(i,{key:"translations",onClick:s[3]||(s[3]=P=>e.$router.push({name:"admin.settings.translations.index"}))},{icon:n(()=>[a(_)]),default:n(()=>[c(" "+u(e.$t("menu.translations")),1)]),_:1})):$("",!0),e.permsArray.includes("roles_view")||e.permsArray.includes("admin")?(d(),w(i,{key:"roles",onClick:s[4]||(s[4]=P=>e.$router.push({name:"admin.settings.roles.index"}))},{icon:n(()=>[a(g)]),default:n(()=>[c(" "+u(e.$t("menu.roles")),1)]),_:1})):$("",!0),e.permsArray.includes("currencies_view")||e.permsArray.includes("admin")?(d(),w(i,{key:"currencies",onClick:s[5]||(s[5]=P=>e.$router.push({name:"admin.settings.currencies.index"}))},{icon:n(()=>[a(f)]),default:n(()=>[c(" "+u(e.$t("menu.currencies")),1)]),_:1})):$("",!0),e.appType=="saas"&&(e.permsArray.includes("email_edit")||e.permsArray.includes("admin"))?(d(),w(i,{key:"email_settings",onClick:s[6]||(s[6]=P=>e.$router.push({name:"admin.settings.email.index"}))},{icon:n(()=>[a(b)]),default:n(()=>[c(" "+u(e.$t("menu.email_settings")),1)]),_:1})):$("",!0),e.appType=="non-saas"?(d(),T(L,{key:5},[e.permsArray.includes("admin")?(d(),w(i,{key:"modules",onClick:s[7]||(s[7]=P=>e.$router.push({name:"admin.settings.modules.index"}))},{icon:n(()=>[a(v)]),default:n(()=>[c(" "+u(e.$t("menu.modules")),1)]),_:1})):$("",!0),e.permsArray.includes("storage_edit")||e.permsArray.includes("admin")?(d(),w(i,{key:"storage_settings",onClick:s[8]||(s[8]=P=>e.$router.push({name:"admin.settings.storage.index"}))},{icon:n(()=>[a(k)]),default:n(()=>[c(" "+u(e.$t("menu.storage_settings")),1)]),_:1})):$("",!0),e.permsArray.includes("email_edit")||e.permsArray.includes("admin")?(d(),w(i,{key:"email_settings",onClick:s[9]||(s[9]=P=>e.$router.push({name:"admin.settings.email.index"}))},{icon:n(()=>[a(b)]),default:n(()=>[c(" "+u(e.$t("menu.email_settings")),1)]),_:1})):$("",!0),e.permsArray.includes("database_backup")||e.permsArray.includes("admin")?(d(),w(i,{key:"database_backup",onClick:s[10]||(s[10]=P=>e.$router.push({name:"admin.settings.database_backup.index"}))},{icon:n(()=>[a(C)]),default:n(()=>[c(" "+u(e.$t("menu.database_backup")),1)]),_:1})):$("",!0),e.permsArray.includes("update_app")||e.permsArray.includes("admin")?(d(),w(i,{key:"update_app",onClick:s[11]||(s[11]=P=>e.$router.push({name:"admin.settings.update_app.index"}))},{icon:n(()=>[a(S)]),default:n(()=>[c(" "+u(e.$t("menu.update_app")),1)]),_:1})):$("",!0)],64)):$("",!0)]),_:1},8,["selectedKeys"])]),_:1})])}const Pe=K(Fc,[["render",Rc]]),Lc=x({emits:["success"],components:{PlusOutlined:ae,LoadingOutlined:Ae,SaveOutlined:_e,SettingOutlined:Ca},setup(e,{emit:s}){const{appSetting:m,addMenus:l}=Q(),{addEditRequestAdmin:h,loading:y,rules:r}=le(),{t:i}=J(),p=I(m.value.shortcut_menus),_=I(l.value),g=I(!1),f=be(),b=()=>{const C={position:p.value,shortcut_menus_settings:_.value};h({url:"companies/update-create-menu",data:C,successMessage:i("company.menu_setting_updated"),success:S=>{s("success",p.value),f.dispatch("auth/updateApp"),g.value=!1}})},v=()=>{r.value={},g.value=!0},k=()=>{r.value={},g.value=!1};return Se(m,(C,S)=>{p.value=C.shortcut_menus}),{visible:g,loading:y,rules:r,onClose:k,openDrawer:v,onSubmit:b,createMenuPosition:p,createMenus:_,drawerWidth:window.innerWidth<=991?"90%":"35%"}}});function qc(e,s,m,l,h,y){const r=o("SettingOutlined"),i=o("a-button"),p=o("a-select-option"),_=o("a-select"),g=o("a-form-item"),f=o("a-col"),b=o("a-row"),v=o("a-checkbox"),k=o("a-checkbox-group"),C=o("a-form"),S=o("SaveOutlined"),E=o("a-drawer");return d(),T(L,null,[a(i,{type:"primary",onClick:e.openDrawer},{icon:n(()=>[a(r)]),default:n(()=>[c(" "+u(e.$t("company.shortcut_menu_setting")),1)]),_:1},8,["onClick"]),a(E,{title:e.$t("company.shortcut_menu_setting"),width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:n(()=>[a(i,{type:"primary",onClick:e.onSubmit,style:{"margin-right":"8px"},loading:e.loading},{icon:n(()=>[a(S)]),default:n(()=>[c(" "+u(e.$t("common.update")),1)]),_:1},8,["onClick","loading"]),a(i,{onClick:e.onClose},{default:n(()=>[c(u(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[a(C,{layout:"vertical"},{default:n(()=>[a(b,{gutter:16},{default:n(()=>[a(f,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(g,{label:e.$t("company.shortcut_menu_Placement"),name:"shortcut_menus",help:e.rules.shortcut_menus?e.rules.shortcut_menus.message:null,validateStatus:e.rules.shortcut_menus?"error":null,class:"required"},{default:n(()=>[a(_,{value:e.createMenuPosition,"onUpdate:value":s[0]||(s[0]=A=>e.createMenuPosition=A),placeholder:e.$t("common.select_default_text",[e.$t("company.shortcut_menu_Placement")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:n(()=>[a(p,{key:"top_bottom",value:"top_bottom"},{default:n(()=>[c(u(e.$t("company.top_and_bottom")),1)]),_:1}),a(p,{key:"top",value:"top"},{default:n(()=>[c(u(e.$t("company.top_header")),1)]),_:1}),a(p,{key:"bottom",value:"bottom"},{default:n(()=>[c(u(e.$t("company.bottom_corner")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(b,{gutter:16},{default:n(()=>[a(f,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(g,{label:e.$t("company.shortcut_menu_setting"),name:"shortcut_menus",help:e.rules.createMenus?e.rules.shortcut_menus.message:null,validateStatus:e.rules.shortcut_menus?"error":null},{default:n(()=>[a(k,{value:e.createMenus,"onUpdate:value":s[1]||(s[1]=A=>e.createMenus=A),style:{width:"100%"}},{default:n(()=>[a(b,{gutter:[16,10]},{default:n(()=>[a(f,{span:24},{default:n(()=>[a(v,{value:"staff_member"},{default:n(()=>[c(u(e.$t("topbar_add_button.add_staff_member")),1)]),_:1})]),_:1}),a(f,{span:24},{default:n(()=>[a(v,{value:"language"},{default:n(()=>[c(u(e.$t("topbar_add_button.add_language")),1)]),_:1})]),_:1}),a(f,{span:24},{default:n(()=>[a(v,{value:"role"},{default:n(()=>[c(u(e.$t("topbar_add_button.add_role")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])],64)}const bn=K(Lc,[["render",qc]]),Bc={components:{EyeOutlined:Re,PlusOutlined:ae,EditOutlined:ye,DeleteOutlined:pe,ExclamationCircleOutlined:ie,SaveOutlined:_e,SettingOutlined:Ca,ColorPicker:qt,CurrencyAddButton:fn,Upload:We,SettingSidebar:Pe,AdminPageHeader:me,CreateMenuSetting:bn,LanguageAddButton:Da},setup(){const{addEditRequestAdmin:e,loading:s,rules:m}=le(),{permsArray:l,appSetting:h,dayjsObject:y,appType:r}=Q(),{t:i}=J(),p=be(),_=I({}),g=I([]),f="currencies?limit=10000",b=I([]),v=I([]),k=I([]),C=I([]),S=h.value,E="timezones",A="all-langs",P=I("linear-gradient(0deg, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 1) 100%)"),U=window.config.theme_mode;ee(()=>{const R=axiosAdmin.get(E),F=axiosAdmin.get(f),z=axiosAdmin.get(A);Promise.all([R,F,z]).then(([Z,ne,V])=>{v.value=Z.data.timezones,k.value=Z.data.date_formates,C.value=Z.data.time_formates,g.value=ne.data,b.value=V.data.langs,D()})});const D=()=>{_.value={name:S.name,short_name:S.short_name,email:S.email,phone:S.phone,address:S.address,left_sidebar_theme:S.left_sidebar_theme,dark_logo:S.dark_logo,dark_logo_url:S.dark_logo_url,light_logo:S.light_logo,light_logo_url:S.light_logo_url,small_dark_logo:S.small_dark_logo,small_light_logo:S.small_light_logo,small_dark_logo_url:S.small_dark_logo_url,small_light_logo_url:S.small_light_logo_url,login_image:S.login_image,login_image_url:S.login_image_url,shortcut_menus:S.shortcut_menus,rtl:S.rtl,currency_id:S.x_currency_id,lang_id:S.x_lang_id,primary_color:S.primary_color,timezone:S.timezone,date_format:S.date_format,time_format:S.time_format,auto_detect_timezone:S.auto_detect_timezone,app_debug:S.app_debug,update_app_notification:S.update_app_notification,_method:"PUT"}};return{appType:r,permsArray:l,formData:_,loading:s,rules:m,onSubmit:()=>{e({url:`companies/${S.xid}`,data:_.value,successMessage:i("company.updated"),success:R=>{p.dispatch("auth/updateApp")}})},gradientColor:P,timezones:v,dateFormats:k,timeFormats:C,dayjsObject:y,appThemeMode:U,addMenuSettingUpdated:R=>{_.value.shortcut_menus=R},currencyAdded:()=>{axiosAdmin.get(f).then(R=>{g.value=R.data})},currencies:g,allLangs:b,languageAdded:()=>{axiosAdmin.get(A).then(R=>{b.value=R.data.langs})}}}},zc={style:{display:"flex"}},Kc={style:{display:"flex"}};function Vc(e,s,m,l,h,y){const r=o("SaveOutlined"),i=o("a-button"),p=o("CreateMenuSetting"),_=o("a-space"),g=o("a-page-header"),f=o("router-link"),b=o("a-breadcrumb-item"),v=o("a-breadcrumb"),k=o("AdminPageHeader"),C=o("SettingSidebar"),S=o("a-col"),E=o("a-input"),A=o("a-form-item"),P=o("a-row"),U=o("a-textarea"),D=o("a-select-option"),M=o("a-select"),q=o("color-picker"),B=o("Upload"),N=o("CurrencyAddButton"),R=o("LanguageAddButton"),F=o("a-switch"),z=o("a-form"),Z=o("a-card"),ne=o("admin-page-table-content");return d(),T(L,null,[a(k,null,{header:n(()=>[a(g,{title:e.$t("menu.company"),class:"p-0"},ta({_:2},[l.permsArray.includes("companies_edit")||l.permsArray.includes("admin")?{name:"extra",fn:n(()=>[a(_,null,{default:n(()=>[a(i,{type:"primary",onClick:l.onSubmit},{icon:n(()=>[a(r)]),default:n(()=>[c(" "+u(e.$t("common.update")),1)]),_:1},8,["onClick"]),a(p,{onSuccess:l.addMenuSettingUpdated},null,8,["onSuccess"])]),_:1})]),key:"0"}:void 0]),1032,["title"])]),breadcrumb:n(()=>[a(v,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(b,null,{default:n(()=>[a(f,{to:{name:"admin.dashboard.index"}},{default:n(()=>[c(u(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(b,null,{default:n(()=>[c(u(e.$t("menu.settings")),1)]),_:1}),a(b,null,{default:n(()=>[c(u(e.$t("menu.company")),1)]),_:1})]),_:1})]),_:1}),a(P,null,{default:n(()=>[a(S,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:n(()=>[a(C)]),_:1}),a(S,{xs:24,sm:24,md:24,lg:20,xl:20},{default:n(()=>[a(ne,null,{default:n(()=>[a(Z,{class:"page-content-container mt-20 mb-20"},{default:n(()=>[a(z,{layout:"vertical"},{default:n(()=>[a(P,{gutter:16},{default:n(()=>[a(S,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(A,{label:e.$t("company.name"),name:"name",help:l.rules.name?l.rules.name.message:null,validateStatus:l.rules.name?"error":null,class:"required"},{default:n(()=>[a(E,{value:l.formData.name,"onUpdate:value":s[0]||(s[0]=V=>l.formData.name=V),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(S,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(A,{label:e.$t("company.short_name"),name:"short_name",help:l.rules.short_name?l.rules.short_name.message:null,validateStatus:l.rules.short_name?"error":null,class:"required"},{default:n(()=>[a(E,{value:l.formData.short_name,"onUpdate:value":s[1]||(s[1]=V=>l.formData.short_name=V),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.short_name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(P,{gutter:16},{default:n(()=>[a(S,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(A,{label:e.$t("company.email"),name:"email",help:l.rules.email?l.rules.email.message:null,validateStatus:l.rules.email?"error":null,class:"required"},{default:n(()=>[a(E,{value:l.formData.email,"onUpdate:value":s[2]||(s[2]=V=>l.formData.email=V),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(S,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(A,{label:e.$t("company.phone"),name:"phone",help:l.rules.phone?l.rules.phone.message:null,validateStatus:l.rules.phone?"error":null,class:"required"},{default:n(()=>[a(E,{value:l.formData.phone,"onUpdate:value":s[3]||(s[3]=V=>l.formData.phone=V),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.phone")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(P,{gutter:16},{default:n(()=>[a(S,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(A,{label:e.$t("company.address"),name:"address",help:l.rules.address?l.rules.address.message:null,validateStatus:l.rules.address?"error":null},{default:n(()=>[a(U,{value:l.formData.address,"onUpdate:value":s[4]||(s[4]=V=>l.formData.address=V),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.address")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(P,{gutter:16},{default:n(()=>[a(S,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(A,{label:e.$t("company.left_sidebar_theme"),name:"left_sidebar_theme",help:l.rules.left_sidebar_theme?l.rules.left_sidebar_theme.message:null,validateStatus:l.rules.left_sidebar_theme?"error":null},{default:n(()=>[a(M,{value:l.formData.left_sidebar_theme,"onUpdate:value":s[5]||(s[5]=V=>l.formData.left_sidebar_theme=V),placeholder:e.$t("common.select_default_text",[e.$t("company.left_sidebar_theme")])},{default:n(()=>[a(D,{key:"dark",value:"dark"},{default:n(()=>[c(u(e.$t("company.dark")),1)]),_:1}),l.appThemeMode!="dark"?(d(),w(D,{key:"light",value:"light"},{default:n(()=>[c(u(e.$t("company.light")),1)]),_:1})):$("",!0)]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(S,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(A,{label:e.$t("company.primary_color"),name:"primary_color",help:l.rules.primary_color?l.rules.primary_color.message:null,validateStatus:l.rules.primary_color?"error":null},{default:n(()=>[a(q,{pureColor:l.formData.primary_color,"onUpdate:pureColor":s[6]||(s[6]=V=>l.formData.primary_color=V),format:"hex",useType:"pure",gradientColor:l.gradientColor,"onUpdate:gradientColor":s[7]||(s[7]=V=>l.gradientColor=V)},null,8,["pureColor","gradientColor"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(P,{gutter:16},{default:n(()=>[a(S,{xs:24,sm:24,md:6,lg:6},{default:n(()=>[a(A,{label:e.$t("company.dark_logo"),name:"dark_logo",help:l.rules.dark_logo?l.rules.dark_logo.message:null,validateStatus:l.rules.dark_logo?"error":null},{default:n(()=>[a(B,{formData:l.formData,folder:"company",imageField:"dark_logo",onOnFileUploaded:s[8]||(s[8]=V=>{l.formData.dark_logo=V.file,l.formData.dark_logo_url=V.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(S,{xs:24,sm:24,md:6,lg:6},{default:n(()=>[a(A,{label:e.$t("company.light_logo"),name:"light_logo",help:l.rules.light_logo?l.rules.light_logo.message:null,validateStatus:l.rules.light_logo?"error":null},{default:n(()=>[a(B,{formData:l.formData,folder:"company",imageField:"light_logo",onOnFileUploaded:s[9]||(s[9]=V=>{l.formData.light_logo=V.file,l.formData.light_logo_url=V.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(S,{xs:24,sm:24,md:6,lg:6},{default:n(()=>[a(A,{label:e.$t("company.small_dark_logo"),name:"small_dark_logo",help:l.rules.small_dark_logo?l.rules.small_dark_logo.message:null,validateStatus:l.rules.small_dark_logo?"error":null},{default:n(()=>[a(B,{formData:l.formData,folder:"company",imageField:"small_dark_logo",onOnFileUploaded:s[10]||(s[10]=V=>{l.formData.small_dark_logo=V.file,l.formData.small_dark_logo_url=V.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(S,{xs:24,sm:24,md:6,lg:6},{default:n(()=>[a(A,{label:e.$t("company.small_light_logo"),name:"small_light_logo",help:l.rules.small_light_logo?l.rules.small_light_logo.message:null,validateStatus:l.rules.small_light_logo?"error":null},{default:n(()=>[a(B,{formData:l.formData,folder:"company",imageField:"small_light_logo",onOnFileUploaded:s[11]||(s[11]=V=>{l.formData.small_light_logo=V.file,l.formData.small_light_logo_url=V.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(P,{gutter:16},{default:n(()=>[a(S,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(A,{label:e.$t("company.currency"),name:"currency_id",help:l.rules.currency_id?l.rules.currency_id.message:null,validateStatus:l.rules.currency_id?"error":null,class:"required"},{default:n(()=>[O("span",zc,[a(M,{value:l.formData.currency_id,"onUpdate:value":s[12]||(s[12]=V=>l.formData.currency_id=V),placeholder:e.$t("common.select_default_text",[e.$t("company.currency")]),optionFilterProp:"label","show-search":""},{default:n(()=>[(d(!0),T(L,null,X(l.currencies,V=>(d(),w(D,{key:V.xid,value:V.xid},{default:n(()=>[c(u(`${V.name} (${V.symbol})`),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),a(N,{onOnAddSuccess:l.currencyAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(S,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(A,{label:e.$t("company.language"),name:"lang_id",help:l.rules.lang_id?l.rules.lang_id.message:null,validateStatus:l.rules.lang_id?"error":null,class:"required"},{default:n(()=>[O("span",Kc,[a(M,{value:l.formData.lang_id,"onUpdate:value":s[13]||(s[13]=V=>l.formData.lang_id=V),placeholder:e.$t("common.select_default_text",[e.$t("company.language")]),optionFilterProp:"label","show-search":""},{default:n(()=>[(d(!0),T(L,null,X(l.allLangs,V=>(d(),w(D,{key:V.xid,value:V.xid},{default:n(()=>[c(u(V.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),a(R,{onOnAddSuccess:l.languageAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(P,{gutter:16},{default:n(()=>[a(S,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(A,{label:e.$t("company.layout"),name:"rtl",help:l.rules.rtl?l.rules.rtl.message:null,validateStatus:l.rules.rtl?"error":null,class:"required"},{default:n(()=>[a(M,{value:l.formData.rtl,"onUpdate:value":s[14]||(s[14]=V=>l.formData.rtl=V),placeholder:e.$t("common.select_default_text",[e.$t("company.layout")]),optionFilterProp:"label","show-search":""},{default:n(()=>[a(D,{key:"rtl",value:1},{default:n(()=>[c(u(e.$t("company.rtl")),1)]),_:1}),a(D,{key:"ltr",value:0},{default:n(()=>[c(u(e.$t("company.ltr")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(S,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(A,{label:e.$t("company.shortcut_menu_Placement"),name:"shortcut_menus",help:l.rules.shortcut_menus?l.rules.shortcut_menus.message:null,validateStatus:l.rules.shortcut_menus?"error":null,class:"required"},{default:n(()=>[a(M,{value:l.formData.shortcut_menus,"onUpdate:value":s[15]||(s[15]=V=>l.formData.shortcut_menus=V),placeholder:e.$t("common.select_default_text",[e.$t("company.shortcut_menu_Placement")]),optionFilterProp:"label","show-search":""},{default:n(()=>[a(D,{key:"top_bottom",value:"top_bottom"},{default:n(()=>[c(u(e.$t("company.top_and_bottom")),1)]),_:1}),a(D,{key:"top",value:"top"},{default:n(()=>[c(u(e.$t("company.top_header")),1)]),_:1}),a(D,{key:"bottom",value:"bottom"},{default:n(()=>[c(u(e.$t("company.bottom_corner")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(P,{gutter:16},{default:n(()=>[a(S,{xs:24,sm:24,md:4,lg:4},{default:n(()=>[a(A,{label:e.$t("company.auto_detect_timezone"),name:"auto_detect_timezone",help:l.rules.auto_detect_timezone?l.rules.auto_detect_timezone.message:null,validateStatus:l.rules.auto_detect_timezone?"error":null},{default:n(()=>[a(F,{checked:l.formData.auto_detect_timezone,"onUpdate:checked":s[16]||(s[16]=V=>l.formData.auto_detect_timezone=V),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(S,{xs:24,sm:24,md:8,lg:8},{default:n(()=>[a(A,{label:e.$t("company.default_timezone"),name:"timezone",help:l.rules.timezone?l.rules.timezone.message:null,validateStatus:l.rules.timezone?"error":null,class:"required"},{default:n(()=>[a(M,{value:l.formData.timezone,"onUpdate:value":s[17]||(s[17]=V=>l.formData.timezone=V),placeholder:e.$t("common.select_default_text",[e.$t("company.default_timezone")]),optionFilterProp:"value","show-search":""},{default:n(()=>[(d(!0),T(L,null,X(l.timezones,(V,W)=>(d(),w(D,{key:W,value:V},{default:n(()=>[c(u(V),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l.appType=="non-saas"?(d(),w(S,{key:0,xs:24,sm:24,md:4,lg:4},{default:n(()=>[a(A,{label:e.$t("company.app_debug"),name:"app_debug",help:l.rules.app_debug?l.rules.app_debug.message:null,validateStatus:l.rules.app_debug?"error":null},{default:n(()=>[a(F,{checked:l.formData.app_debug,"onUpdate:checked":s[18]||(s[18]=V=>l.formData.app_debug=V),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1})):$("",!0),l.appType=="non-saas"?(d(),w(S,{key:1,xs:24,sm:24,md:4,lg:4},{default:n(()=>[a(A,{label:e.$t("company.update_app_notification"),name:"update_app_notification",help:l.rules.update_app_notification?l.rules.update_app_notification.message:null,validateStatus:l.rules.update_app_notification?"error":null},{default:n(()=>[a(F,{checked:l.formData.update_app_notification,"onUpdate:checked":s[19]||(s[19]=V=>l.formData.update_app_notification=V),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1})):$("",!0)]),_:1}),a(P,{gutter:16},{default:n(()=>[a(S,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(A,{label:e.$t("company.date_format"),name:"date_format",help:l.rules.date_format?l.rules.date_format.message:null,validateStatus:l.rules.date_format?"error":null,class:"required"},{default:n(()=>[a(M,{value:l.formData.date_format,"onUpdate:value":s[20]||(s[20]=V=>l.formData.date_format=V),placeholder:e.$t("common.select_default_text",[e.$t("company.date_format")]),optionFilterProp:"value","show-search":""},{default:n(()=>[(d(!0),T(L,null,X(l.dateFormats,(V,W)=>(d(),w(D,{key:W,value:V},{default:n(()=>[c(u(`(${W}) => `+l.dayjsObject().format(V)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(S,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(A,{label:e.$t("company.time_format"),name:"time_format",help:l.rules.time_format?l.rules.time_format.message:null,validateStatus:l.rules.time_format?"error":null,class:"required"},{default:n(()=>[a(M,{value:l.formData.time_format,"onUpdate:value":s[21]||(s[21]=V=>l.formData.time_format=V),placeholder:e.$t("common.select_default_text",[e.$t("company.time_format")]),optionFilterProp:"value","show-search":""},{default:n(()=>[(d(!0),T(L,null,X(l.timeFormats,(V,W)=>(d(),w(D,{key:W,value:W},{default:n(()=>[c(u(`(${V}) => `+l.dayjsObject().format(W)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l.appType=="non-saas"?(d(),w(P,{key:0,gutter:16},{default:n(()=>[a(S,{xs:24,sm:24,md:6,lg:6},{default:n(()=>[a(A,{label:e.$t("company.login_image"),name:"login_image",help:l.rules.login_image?l.rules.login_image.message:null,validateStatus:l.rules.login_image?"error":null},{default:n(()=>[a(B,{formData:l.formData,folder:"company",imageField:"login_image",onOnFileUploaded:s[22]||(s[22]=V=>{l.formData.login_image=V.file,l.formData.login_image_url=V.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})):$("",!0),a(P,{gutter:16},{default:n(()=>[a(S,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(A,null,{default:n(()=>[a(i,{type:"primary",onClick:l.onSubmit,loading:l.loading},{icon:n(()=>[a(r)]),default:n(()=>[c(" "+u(e.$t("common.update")),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const Hc=K(Bc,[["render",Vc]]),Nc={components:{EyeOutlined:Re,PlusOutlined:ae,EditOutlined:ye,DeleteOutlined:pe,ExclamationCircleOutlined:ie,SaveOutlined:_e,Upload:We,SettingSidebar:Pe,AdminPageHeader:me},setup(){const{addEditRequestAdmin:e,loading:s,rules:m}=le(),{t:l}=J(),h=be(),y=I({}),r=I({}),i=h.state.auth.user;return ee(()=>{y.value={name:i.name,email:i.email,password:"",phone:i.phone,profile_image:i.profile_image,profile_image_url:i.profile_image_url}}),{loading:s,rules:m,formData:y,currencies:r,onSubmit:()=>{e({url:"profile",data:y.value,successMessage:l("user.profile_updated"),success:_=>{h.commit("auth/updateUser",_.user)}})}}}},jc={class:"small-text-message"};function Wc(e,s,m,l,h,y){const r=o("SaveOutlined"),i=o("a-button"),p=o("a-page-header"),_=o("router-link"),g=o("a-breadcrumb-item"),f=o("a-breadcrumb"),b=o("AdminPageHeader"),v=o("SettingSidebar"),k=o("a-col"),C=o("a-input"),S=o("a-form-item"),E=o("a-row"),A=o("Upload"),P=o("a-textarea"),U=o("a-form"),D=o("a-card"),M=o("admin-page-table-content");return d(),T(L,null,[a(b,null,{header:n(()=>[a(p,{title:e.$t("menu.profile"),class:"p-0"},{extra:n(()=>[a(i,{type:"primary",onClick:l.onSubmit},{icon:n(()=>[a(r)]),default:n(()=>[c(" "+u(e.$t("common.update")),1)]),_:1},8,["onClick"])]),_:1},8,["title"])]),breadcrumb:n(()=>[a(f,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(g,null,{default:n(()=>[a(_,{to:{name:"admin.dashboard.index"}},{default:n(()=>[c(u(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(g,null,{default:n(()=>[c(u(e.$t("menu.settings")),1)]),_:1}),a(g,null,{default:n(()=>[c(u(e.$t("menu.profile")),1)]),_:1})]),_:1})]),_:1}),a(E,null,{default:n(()=>[a(k,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:n(()=>[a(v)]),_:1}),a(k,{xs:24,sm:24,md:24,lg:20,xl:20},{default:n(()=>[a(M,null,{default:n(()=>[a(D,{class:"page-content-container mt-20 mb-20"},{default:n(()=>[a(U,{layout:"vertical"},{default:n(()=>[a(E,{gutter:16},{default:n(()=>[a(k,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(S,{label:e.$t("user.name"),name:"name",help:l.rules.name?l.rules.name.message:null,validateStatus:l.rules.name?"error":null,class:"required"},{default:n(()=>[a(C,{value:l.formData.name,"onUpdate:value":s[0]||(s[0]=q=>l.formData.name=q),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(k,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(S,{label:e.$t("user.email"),name:"email",help:l.rules.email?l.rules.email.message:null,validateStatus:l.rules.email?"error":null,class:"required"},{default:n(()=>[a(C,{value:l.formData.email,placeholder:e.$t("common.placeholder_default_text",[e.$t("user.email")]),disabled:""},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(E,{gutter:16},{default:n(()=>[a(k,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(S,{label:e.$t("user.password"),name:"password",help:l.rules.password?l.rules.password.message:null,validateStatus:l.rules.password?"error":null},{default:n(()=>[a(C,{value:l.formData.password,"onUpdate:value":s[1]||(s[1]=q=>l.formData.password=q),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.password")]),type:"password",autocomplete:"off"},null,8,["value","placeholder"]),O("small",jc,u(e.$t("user.password_blank")),1)]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(E,{gutter:16},{default:n(()=>[a(k,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(S,{label:e.$t("user.phone"),name:"phone",help:l.rules.phone?l.rules.phone.message:null,validateStatus:l.rules.phone?"error":null},{default:n(()=>[a(C,{value:l.formData.phone,"onUpdate:value":s[2]||(s[2]=q=>l.formData.phone=q),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.phone")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(E,{gutter:16},{default:n(()=>[a(k,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(S,{label:e.$t("user.profile_image"),name:"profile_image",help:l.rules.profile_image?l.rules.profile_image.message:null,validateStatus:l.rules.profile_image?"error":null},{default:n(()=>[a(A,{formData:l.formData,folder:"user",imageField:"profile_image",onOnFileUploaded:s[3]||(s[3]=q=>{l.formData.profile_image=q.file,l.formData.profile_image_url=q.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(E,{gutter:16},{default:n(()=>[a(k,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(S,{label:e.$t("user.address"),name:"address",help:l.rules.address?l.rules.address.message:null,validateStatus:l.rules.address?"error":null},{default:n(()=>[a(P,{value:l.formData.address,"onUpdate:value":s[4]||(s[4]=q=>l.formData.address=q),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.address")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(E,{gutter:16},{default:n(()=>[a(k,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(S,null,{default:n(()=>[a(i,{type:"primary",onClick:l.onSubmit,loading:l.loading},{icon:n(()=>[a(r)]),default:n(()=>[c(" "+u(e.$t("common.update")),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const Yc=K(Nc,[["render",Wc]]),Gc={components:{EyeOutlined:Re,PlusOutlined:ae,EditOutlined:ye,DeleteOutlined:pe,ExclamationCircleOutlined:ie,SaveOutlined:_e,Upload:We,SettingSidebar:Pe,AdminPageHeader:me},setup(){const{addEditRequestAdmin:e,loading:s,rules:m}=le();J();const l=be(),h=I({}),y=I({}),r=l.state.auth.user;return console.log(r),ee(()=>{const p=axiosAdmin.get("banner");Promise.all([p]).then(([_])=>{console.log(_.data),h.value=_.data,setFormData()}),h.value={head:h.head,sub_head:h.sub_head}}),{loading:s,rules:m,formData:h,currencies:y,onSubmit:()=>{e({url:"banner",data:h.value,successMessage:"Banner updated",success:p=>{}})}}}};function Xc(e,s,m,l,h,y){const r=o("SaveOutlined"),i=o("a-button"),p=o("a-page-header"),_=o("router-link"),g=o("a-breadcrumb-item"),f=o("a-breadcrumb"),b=o("AdminPageHeader"),v=o("SettingSidebar"),k=o("a-col"),C=o("a-input"),S=o("a-form-item"),E=o("a-row"),A=o("a-form"),P=o("a-card"),U=o("admin-page-table-content");return d(),T(L,null,[a(b,null,{header:n(()=>[a(p,{title:e.$t("menu.profile"),class:"p-0"},{extra:n(()=>[a(i,{type:"primary",onClick:l.onSubmit},{icon:n(()=>[a(r)]),default:n(()=>[c(" "+u(e.$t("common.update")),1)]),_:1},8,["onClick"])]),_:1},8,["title"])]),breadcrumb:n(()=>[a(f,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(g,null,{default:n(()=>[a(_,{to:{name:"admin.dashboard.index"}},{default:n(()=>[c(u(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(g,null,{default:n(()=>[c(u(e.$t("menu.settings")),1)]),_:1}),a(g,null,{default:n(()=>[c(u(e.$t("menu.profile")),1)]),_:1})]),_:1})]),_:1}),a(E,null,{default:n(()=>[a(k,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:n(()=>[a(v)]),_:1}),a(k,{xs:24,sm:24,md:24,lg:20,xl:20},{default:n(()=>[a(U,null,{default:n(()=>[a(P,{class:"page-content-container mt-20 mb-20"},{default:n(()=>[a(A,{layout:"vertical"},{default:n(()=>[a(E,{gutter:16},{default:n(()=>[a(k,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(S,{label:"Header",name:"head",help:l.rules.name?l.rules.name.message:null,validateStatus:l.rules.name?"error":null,class:"required"},{default:n(()=>[a(C,{value:l.formData.head,"onUpdate:value":s[0]||(s[0]=D=>l.formData.head=D),placeholder:"Header"},null,8,["value"])]),_:1},8,["help","validateStatus"])]),_:1}),a(k,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(S,{label:"Sub Header",name:"sub_header",help:l.rules.name?l.rules.name.message:null,validateStatus:l.rules.name?"error":null,class:"required"},{default:n(()=>[a(C,{value:l.formData.sub_head,"onUpdate:value":s[1]||(s[1]=D=>l.formData.sub_head=D),placeholder:"Header"},null,8,["value"])]),_:1},8,["help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const Jc=K(Gc,[["render",Xc]]),Qc={props:{panelType:{type:String,default:"admin"}},components:{EditOutlined:ye,DeleteOutlined:pe,AddEdit:hn,DownloadOutlined:ba},setup(){const{addEditRequestAdmin:e,loading:s}=le(),{permsArray:m,downloadLangCsvUrl:l}=Q(),{url:h,addEditUrl:y,initData:r,columns:i,filterableColumns:p}=gn(),_=Te(),{t:g}=J();return ee(()=>{_.tableUrl.value={url:h},_.table.filterableColumns=p,_.fetch({page:1}),_.crudUrl.value=y,_.langKey.value="langs",_.initData.value={...r},_.formData.value={...r}}),{permsArray:m,downloadLangCsvUrl:l,columns:i,..._,filterableColumns:p,changeLangStatus:b=>{e({url:ge(`langs/${b.xid}`),data:{name:b.name,key:b.key,enabled:b.enabled,_method:"PUT"},successMessage:g("langs.status_updated"),success:v=>{}})},loading:s}}},Zc={class:"table-responsive"};function xc(e,s,m,l,h,y){const r=o("DeleteOutlined"),i=o("a-button"),p=o("a-space"),_=o("a-col"),g=o("a-select-option"),f=o("a-select"),b=o("a-input-search"),v=o("a-input-group"),k=o("a-row"),C=o("admin-page-filters"),S=o("AddEdit"),E=o("a-avatar"),A=o("a-list-item-meta"),P=o("a-list-item"),U=o("a-switch"),D=o("EditOutlined"),M=o("DownloadOutlined"),q=o("a-typography-link"),B=o("a-table"),N=o("admin-page-table-content");return d(),T(L,null,[a(C,null,{default:n(()=>[a(k,{gutter:[16,16]},{default:n(()=>[a(_,{xs:24,sm:24,md:12,lg:10,xl:10},{default:n(()=>[a(p,null,{default:n(()=>[oe(e.$slots,"actionButtons"),e.table.selectedRowKeys.length>0&&(l.permsArray.includes("translations_edit")||l.permsArray.includes("admin"))?(d(),w(i,{key:0,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:n(()=>[a(r)]),default:n(()=>[c(" "+u(e.$t("common.delete")),1)]),_:1},8,["onClick"])):$("",!0)]),_:3})]),_:3}),a(_,{xs:24,sm:24,md:12,lg:14,xl:14},{default:n(()=>[a(k,{gutter:[16,16],justify:"end"},{default:n(()=>[a(_,{xs:24,sm:24,md:16,lg:12,xl:10},{default:n(()=>[a(v,{compact:""},{default:n(()=>[a(f,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=R=>e.table.searchColumn=R),placeholder:e.$t("common.select_default_text",[""])},{default:n(()=>[(d(!0),T(L,null,X(l.filterableColumns,R=>(d(),w(g,{key:R.key},{default:n(()=>[c(u(R.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),a(b,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=R=>e.table.searchString=R),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:3})]),_:3}),a(N,null,{default:n(()=>[a(S,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),a(k,null,{default:n(()=>[a(_,{span:24},{default:n(()=>[O("div",Zc,[a(B,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:R=>({disabled:!((m.panelType=="admin"&&(l.permsArray.includes("translations_delete")||l.permsArray.includes("admin"))||m.panelType=="superadmin")&&R.key!="en"),name:R.xid})},columns:l.columns,"row-key":R=>R.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading||l.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:n(({column:R,record:F})=>[R.dataIndex==="name"?(d(),w(P,{key:0},{default:n(()=>[a(A,null,{title:n(()=>[c(u(F.name),1)]),avatar:n(()=>[a(E,{shape:"square",size:"small",src:F.image_url},null,8,["src"])]),_:2},1024)]),_:2},1024)):$("",!0),R.dataIndex==="enabled"?(d(),w(U,{key:1,checked:F.enabled,"onUpdate:checked":z=>F.enabled=z,checkedValue:1,unCheckedValue:0,onChange:z=>l.changeLangStatus(F),size:"small",disabled:m.panelType=="admin"&&!(l.permsArray.includes("translations_edit")||l.permsArray.includes("admin"))||F.key=="en"},null,8,["checked","onUpdate:checked","onChange","disabled"])):$("",!0),R.dataIndex==="action"?(d(),T(L,{key:2},[(m.panelType=="admin"&&(l.permsArray.includes("translations_edit")||l.permsArray.includes("admin"))||m.panelType=="superadmin")&&F.key!="en"?(d(),w(i,{key:0,type:"primary",onClick:z=>e.editItem(F),style:{"margin-left":"4px"}},{icon:n(()=>[a(D)]),_:2},1032,["onClick"])):$("",!0),(m.panelType=="admin"&&(l.permsArray.includes("translations_delete")||l.permsArray.includes("admin"))||m.panelType=="superadmin")&&F.key!="en"?(d(),w(i,{key:1,type:"primary",onClick:z=>e.showDeleteConfirm(F.xid),style:{"margin-left":"4px"}},{icon:n(()=>[a(r)]),_:2},1032,["onClick"])):$("",!0),a(q,{href:`${l.downloadLangCsvUrl}/${F.xid}`,target:"_blank"},{default:n(()=>[a(i,{type:"primary",style:{"margin-left":"4px"}},{icon:n(()=>[a(M)]),_:1})]),_:2},1032,["href"])],64)):$("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const ep=K(Qc,[["render",xc]]),ap={components:{PlusOutlined:ae,SettingSidebar:Pe,AdminPageHeader:me,LanguageSettings:ep,ImportTranslation:Sa},setup(){const{permsArray:e,appType:s}=Q(),m=I(null),l=window.config.translatioins_sample_file;return{permsArray:e,appType:s,langSettingRef:m,addItem:()=>{m.value.addItem()},sampleFileUrl:l}}};function tp(e,s,m,l,h,y){const r=o("ImportTranslation"),i=o("PlusOutlined"),p=o("a-button"),_=o("a-space"),g=o("a-page-header"),f=o("router-link"),b=o("a-breadcrumb-item"),v=o("a-breadcrumb"),k=o("AdminPageHeader"),C=o("SettingSidebar"),S=o("a-col"),E=o("LanguageSettings"),A=o("a-row");return d(),T(L,null,[a(k,null,{header:n(()=>[a(g,{title:e.$t("menu.languages"),onBack:s[0]||(s[0]=()=>e.$router.push({name:"admin.settings.translations.index"})),class:"p-0"},ta({_:2},[l.permsArray.includes("translations_create")||l.permsArray.includes("admin")?{name:"extra",fn:n(()=>[a(_,null,{default:n(()=>[l.appType=="non-saas"?(d(),w(r,{key:0,pageTitle:e.$t("translations.import_translations"),sampleFileUrl:l.sampleFileUrl,importUrl:"translations/import"},null,8,["pageTitle","sampleFileUrl"])):$("",!0),a(p,{type:"primary",onClick:l.addItem},{default:n(()=>[a(i),c(" "+u(e.$t("langs.add")),1)]),_:1},8,["onClick"])]),_:1})]),key:"0"}:void 0]),1032,["title"])]),breadcrumb:n(()=>[a(v,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(b,null,{default:n(()=>[a(f,{to:{name:"admin.dashboard.index"}},{default:n(()=>[c(u(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(b,null,{default:n(()=>[c(u(e.$t("menu.settings")),1)]),_:1}),a(b,null,{default:n(()=>[a(f,{to:{name:"admin.settings.translations.index"}},{default:n(()=>[c(u(e.$t("menu.translations")),1)]),_:1},8,["to"])]),_:1}),a(b,null,{default:n(()=>[c(u(e.$t("menu.languages")),1)]),_:1})]),_:1})]),_:1}),a(A,null,{default:n(()=>[a(S,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:n(()=>[a(C)]),_:1}),a(S,{xs:24,sm:24,md:24,lg:20,xl:20},{default:n(()=>[a(E,{ref:"langSettingRef"},{actionButtons:n(()=>[l.permsArray.includes("translations_create")||l.permsArray.includes("admin")?(d(),w(_,{key:0},{default:n(()=>[a(p,{type:"primary",onClick:l.addItem},{default:n(()=>[a(i),c(" "+u(e.$t("langs.add")),1)]),_:1},8,["onClick"]),l.appType=="non-saas"?(d(),w(r,{key:0,pageTitle:e.$t("translations.import_translations"),sampleFileUrl:l.sampleFileUrl,importUrl:"translations/import"},null,8,["pageTitle","sampleFileUrl"])):$("",!0)]),_:1})):$("",!0)]),_:1},512)]),_:1})]),_:1})],64)}const np=K(ap,[["render",tp]]);const lp={components:{PlusOutlined:ae,EditOutlined:ye,DeleteOutlined:pe,AddEdit:Gt,SettingSidebar:Pe,AdminPageHeader:me},setup(){const{permsArray:e}=Q(),{url:s,addEditUrl:m,initData:l,columns:h,filterableColumns:y,preFetchData:r,getPreFetchData:i}=Yt(),p=Te();return ee(()=>{i(),p.tableUrl.value={url:s,filters:""},p.table.filterableColumns=y,p.fetch({page:1}),p.crudUrl.value=m,p.langKey.value="role",p.initData.value={...l},p.formData.value={...l}}),{permsArray:e,columns:h,...p,filterableColumns:y,preFetchData:r}}},op={class:"table-responsive"};function sp(e,s,m,l,h,y){const r=o("a-page-header"),i=o("router-link"),p=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("SettingSidebar"),b=o("a-col"),v=o("PlusOutlined"),k=o("a-button"),C=o("DeleteOutlined"),S=o("a-space"),E=o("a-row"),A=o("admin-page-filters"),P=o("AddEdit"),U=o("EditOutlined"),D=o("a-table"),M=o("admin-page-table-content");return d(),T(L,null,[a(g,null,{header:n(()=>[a(r,{title:e.$t("menu.roles"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(p,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[c(u(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(p,null,{default:n(()=>[c(u(e.$t("menu.settings")),1)]),_:1}),a(p,null,{default:n(()=>[c(u(e.$t("menu.roles")),1)]),_:1})]),_:1})]),_:1}),a(E,null,{default:n(()=>[a(b,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:n(()=>[a(f)]),_:1}),a(b,{xs:24,sm:24,md:24,lg:20,xl:20},{default:n(()=>[a(A,null,{default:n(()=>[a(E,{gutter:[16,16]},{default:n(()=>[a(b,{xs:24,sm:24,md:12,lg:10,xl:10},{default:n(()=>[a(S,null,{default:n(()=>[l.permsArray.includes("roles_create")||l.permsArray.includes("admin")?(d(),w(k,{key:0,type:"primary",onClick:e.addItem},{default:n(()=>[a(v),c(" "+u(e.$t("role.add")),1)]),_:1},8,["onClick"])):$("",!0),e.table.selectedRowKeys.length>0&&(l.permsArray.includes("roles_delete")||l.permsArray.includes("admin"))?(d(),w(k,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:n(()=>[a(C)]),default:n(()=>[c(" "+u(e.$t("common.delete")),1)]),_:1},8,["onClick"])):$("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),a(M,null,{default:n(()=>[a(P,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),a(E,null,{default:n(()=>[a(b,{span:24},{default:n(()=>[O("div",op,[a(D,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:q=>({disabled:!((l.permsArray.includes("roles_delete")||l.permsArray.includes("admin"))&&q.name!="admin"),name:q.xid})},columns:l.columns,"row-key":q=>q.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:n(({column:q,record:B})=>[q.dataIndex==="action"?(d(),T(L,{key:0},[(l.permsArray.includes("roles_edit")||l.permsArray.includes("admin"))&&B.name!="admin"?(d(),w(k,{key:0,type:"primary",onClick:N=>e.editItem(B),style:{"margin-left":"4px"}},{icon:n(()=>[a(U)]),_:2},1032,["onClick"])):$("",!0),(l.permsArray.includes("roles_delete")||l.permsArray.includes("admin"))&&B.name!="admin"?(d(),w(k,{key:1,type:"primary",onClick:N=>e.showDeleteConfirm(B.xid),style:{"margin-left":"4px"}},{icon:n(()=>[a(C)]),_:2},1032,["onClick"])):$("",!0)],64)):$("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const dp=K(lp,[["render",sp]]),ip={props:{panelType:{type:String,default:"admin"}},components:{EditOutlined:ye,DeleteOutlined:pe,AddEdit:Ha},setup(e){const{permsArray:s,appSetting:m}=Q(),{url:l,addEditUrl:h,initData:y,columns:r,filterableColumns:i}=Va(e.panelType),p=Te();return ee(()=>{p.tableUrl.value={url:l},p.table.filterableColumns=i,p.fetch({page:1}),p.crudUrl.value=h,p.langKey.value="currency",p.initData.value={...y},p.formData.value={...y}}),{permsArray:s,appSetting:m,columns:r,...p,filterableColumns:i}}},rp={class:"table-responsive"};function up(e,s,m,l,h,y){const r=o("DeleteOutlined"),i=o("a-button"),p=o("a-space"),_=o("a-col"),g=o("a-select-option"),f=o("a-select"),b=o("a-input-search"),v=o("a-input-group"),k=o("a-row"),C=o("admin-page-filters"),S=o("AddEdit"),E=o("EditOutlined"),A=o("a-table"),P=o("admin-page-table-content");return d(),T(L,null,[a(C,null,{default:n(()=>[a(k,{gutter:[16,16]},{default:n(()=>[a(_,{xs:24,sm:24,md:12,lg:10,xl:10},{default:n(()=>[a(p,null,{default:n(()=>[oe(e.$slots,"actionButtons"),e.table.selectedRowKeys.length>0&&(l.permsArray.includes("currencies_delete")||l.permsArray.includes("admin"))?(d(),w(i,{key:0,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:n(()=>[a(r)]),default:n(()=>[c(" "+u(e.$t("common.delete")),1)]),_:1},8,["onClick"])):$("",!0)]),_:3})]),_:3}),a(_,{xs:24,sm:24,md:12,lg:14,xl:14},{default:n(()=>[a(k,{gutter:[16,16],justify:"end"},{default:n(()=>[a(_,{xs:24,sm:24,md:16,lg:12,xl:10},{default:n(()=>[a(v,{compact:""},{default:n(()=>[a(f,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=U=>e.table.searchColumn=U),placeholder:e.$t("common.select_default_text",[""])},{default:n(()=>[(d(!0),T(L,null,X(l.filterableColumns,U=>(d(),w(g,{key:U.key},{default:n(()=>[c(u(U.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),a(b,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=U=>e.table.searchString=U),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:3})]),_:3}),a(P,null,{default:n(()=>[a(S,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),a(k,null,{default:n(()=>[a(_,{span:24},{default:n(()=>[O("div",rp,[a(A,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:U=>({disabled:!((m.panelType=="admin"&&(l.permsArray.includes("currencies_delete")||l.permsArray.includes("admin"))||m.panelType=="superadmin")&&l.appSetting.x_currency_id!=U.xid),name:U.xid})},columns:l.columns,"row-key":U=>U.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:n(({column:U,record:D})=>[U.dataIndex==="action"?(d(),T(L,{key:0},[m.panelType=="admin"&&(l.permsArray.includes("currencies_edit")||l.permsArray.includes("admin"))||m.panelType=="superadmin"?(d(),w(i,{key:0,type:"primary",onClick:M=>e.editItem(D),style:{"margin-left":"4px"}},{icon:n(()=>[a(E)]),_:2},1032,["onClick"])):$("",!0),(m.panelType=="admin"&&(l.permsArray.includes("currencies_delete")||l.permsArray.includes("admin"))||m.panelType=="superadmin")&&l.appSetting.x_currency_id!=D.xid?(d(),w(i,{key:1,type:"primary",onClick:M=>e.showDeleteConfirm(D.xid),style:{"margin-left":"4px"}},{icon:n(()=>[a(r)]),_:2},1032,["onClick"])):$("",!0)],64)):$("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const mp=K(ip,[["render",up]]),cp={components:{PlusOutlined:ae,SettingSidebar:Pe,AdminPageHeader:me,CurrencySettings:mp},setup(){const{permsArray:e}=Q(),s=I(null);return{permsArray:e,currencySettingRef:s,addItem:()=>{s.value.addItem()}}}};function pp(e,s,m,l,h,y){const r=o("PlusOutlined"),i=o("a-button"),p=o("a-page-header"),_=o("router-link"),g=o("a-breadcrumb-item"),f=o("a-breadcrumb"),b=o("AdminPageHeader"),v=o("SettingSidebar"),k=o("a-col"),C=o("CurrencySettings"),S=o("a-row");return d(),T(L,null,[a(b,null,{header:n(()=>[a(p,{title:e.$t("menu.currencies"),class:"p-0"},ta({_:2},[l.permsArray.includes("currencies_create")||l.permsArray.includes("admin")?{name:"extra",fn:n(()=>[a(i,{type:"primary",onClick:l.addItem},{default:n(()=>[a(r),c(" "+u(e.$t("currency.add")),1)]),_:1},8,["onClick"])]),key:"0"}:void 0]),1032,["title"])]),breadcrumb:n(()=>[a(f,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(g,null,{default:n(()=>[a(_,{to:{name:"admin.dashboard.index"}},{default:n(()=>[c(u(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(g,null,{default:n(()=>[c(u(e.$t("menu.settings")),1)]),_:1}),a(g,null,{default:n(()=>[c(u(e.$t("menu.currencies")),1)]),_:1})]),_:1})]),_:1}),a(S,null,{default:n(()=>[a(k,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:n(()=>[a(v)]),_:1}),a(k,{xs:24,sm:24,md:24,lg:20,xl:20},{default:n(()=>[a(C,{ref:"currencySettingRef"},{actionButtons:n(()=>[l.permsArray.includes("currencies_create")||l.permsArray.includes("admin")?(d(),w(i,{key:0,type:"primary",onClick:l.addItem},{default:n(()=>[a(r),c(" "+u(e.$t("currency.add")),1)]),_:1},8,["onClick"])):$("",!0)]),_:1},512)]),_:1})]),_:1})],64)}const _p=K(cp,[["render",pp]]),fp=x({emits:["fetchTranslationsSuccesss"],components:{SyncOutlined:Je},setup(e,{emit:s}){const{addEditRequestAdmin:m,loading:l}=le(),{t:h}=J();return{loading:l,refetchTranslations:()=>{m({url:ge("translations/refetch"),data:{},successMessage:h("translations.fetched_successfully"),success:r=>{s("fetchTranslationsSuccesss")}})}}}});function gp(e,s,m,l,h,y){const r=o("SyncOutlined"),i=o("a-button");return d(),w(i,{onClick:e.refetchTranslations,loading:e.loading},{icon:n(()=>[a(r)]),default:n(()=>[c(" "+u(e.$t("translations.fetch_new_translations")),1)]),_:1},8,["onClick","loading"])}const hp=K(fp,[["render",gp]]);function bp(e={locale:"en",warnHtmlMessage:!1}){const s=il(e);return yp(s,e.locale),s}function yp(e,s){e.mode==="legacy"?e.global.locale=s:e.global.locale.value=s,document.querySelector("html").setAttribute("lang",s)}async function vp(e,s){const m=await axiosBase.get("lang-trans");yn(m,e,s)}function yn(e,s,m){const l={};return e.data.data.map(h=>{l[h.key]={},h.translations.map(y=>{l[h.key][y.group]==null&&(l[h.key][y.group]={}),l[h.key][y.group][y.key]=y.value})}),s.global.setLocaleMessage(m,l[m]),Mt()}const kp={components:{FetchNewTranslation:hp,LangAddButton:Da,EditOutlined:ye,CheckOutlined:pa},setup(){const{permsArray:e}=Q(),s=I([]),m=I([]),l=I([]),h=I(void 0),y=I([]),r=be(),i=ke(()=>r.state.auth.lang),p=qe({data:[]}),_=qe({}),g=I(0),f=(E,A)=>{_[E[`${A}_id`]]={id:E[`${A}_id`],value:E[A]}},b=E=>{axiosAdmin.post(ge(`translations/${E}`),{value:_[E].value,_method:"PUT"}).then(()=>{C(),delete _[E]})};var v={};const k=()=>{const E=[{title:"Group",key:"group",dataIndex:"group",fixed:"left"}],A=[];s.value.map(M=>{E.push({title:M.name,key:M.key,dataIndex:M.key}),A.push({key:M.key})}),l.value=A,m.value=E;const P=[];s.value.map(M=>{v[M.key]={},M.translations.map(q=>{v[M.key][q.group]==null&&(v[M.key][q.group]={},M.key=="en"&&P.push(q.group)),v[M.key][q.group][q.key]={id:q.xid,value:q.value}})}),h.value===void 0&&(h.value=P[0]);const U=v.en[h.value],D=[];Object.keys(U).forEach(M=>{const q={};E.map(B=>{B.key=="group"?q[B.key]=M:(q[B.key]=v[B.key][h.value][M]&&v[B.key][h.value][M].value?v[B.key][h.value][M].value:"",q[`${B.key}_id`]=v[B.key][h.value][M]&&v[B.key][h.value][M].id?v[B.key][h.value][M].id:"")}),D.push(q)}),y.value=P,p.data=D};ee(()=>{C()});const C=()=>{axiosAdmin.get("lang-trans").then(E=>{s.value=E.data.data,yn(E,i18n,i.value),k()})};return{columns:m,table:p,editableData:_,activeTab:g,langKeys:l,group:h,groupKeys:y,getData:C,edit:f,save:b,permsArray:e,langAdded:()=>{C()}}}},Cp={key:0,class:"editable-cell"},wp={key:0,class:"editable-cell-input-wrapper"},Sp={key:1,class:"editable-cell-text-wrapper"};function Dp(e,s,m,l,h,y){const r=o("a-col"),i=o("a-select-option"),p=o("a-select"),_=o("FetchNewTranslation"),g=o("a-row"),f=o("admin-page-filters"),b=o("a-input"),v=o("check-outlined"),k=o("edit-outlined"),C=o("a-table"),S=o("admin-page-table-content");return d(),T(L,null,[a(f,null,{default:n(()=>[a(g,{gutter:[16,16]},{default:n(()=>[a(r,{xs:24,sm:24,md:12,lg:10,xl:12},{default:n(()=>[oe(e.$slots,"actionButtons")]),_:3}),a(r,{xs:24,sm:24,md:12,lg:14,xl:12},{default:n(()=>[a(g,{gutter:[16,16],justify:"end"},{default:n(()=>[a(r,{xs:24,sm:24,md:12,lg:12,xl:8},{default:n(()=>[a(p,{value:l.group,"onUpdate:value":s[0]||(s[0]=E=>l.group=E),"show-search":"",placeholder:"Select group...",style:{width:"100%"},onChange:l.getData},{default:n(()=>[(d(!0),T(L,null,X(l.groupKeys,E=>(d(),w(i,{key:E,value:E},{default:n(()=>[c(u(E),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","onChange"])]),_:1}),a(r,{xs:24,sm:24,md:12,lg:12,xl:8},{default:n(()=>[a(_,{onFetchTranslationsSuccesss:l.getData},null,8,["onFetchTranslationsSuccesss"])]),_:1})]),_:1})]),_:1})]),_:3})]),_:3}),a(S,null,{default:n(()=>[a(C,{columns:l.columns,"row-key":E=>E.group,"data-source":l.table.data,pagination:!1,bordered:"",size:"middle"},{bodyCell:n(({column:E,text:A,record:P})=>[(d(!0),T(L,null,X(l.langKeys,U=>(d(),T(L,{key:U},[E.dataIndex===U.key?(d(),T("div",Cp,[l.editableData[P[`${U.key}_id`]]?(d(),T("div",wp,[a(b,{value:l.editableData[P[`${U.key}_id`]].value,"onUpdate:value":D=>l.editableData[P[`${U.key}_id`]].value=D,onPressEnter:D=>l.save(P[`${U.key}_id`])},null,8,["value","onUpdate:value","onPressEnter"]),a(v,{class:"editable-cell-icon-check",onClick:D=>l.save(P[`${U.key}_id`])},null,8,["onClick"])])):(d(),T("div",Sp,[c(u(A||" ")+" ",1),a(k,{class:"editable-cell-icon",onClick:D=>l.edit(P,U.key)},null,8,["onClick"])]))])):$("",!0)],64))),128))]),_:1},8,["columns","row-key","data-source"])]),_:1})],64)}const $p=K(kp,[["render",Dp]]),Ap={components:{EyeOutlined:Re,SettingSidebar:Pe,AdminPageHeader:me,TranslationsSettings:$p,LangAddButton:Da,ImportTranslation:Sa},setup(){const{permsArray:e,appType:s}=Q(),m=I(null),l=window.config.translatioins_sample_file;return{langAdded:()=>{m.value.getData()},permsArray:e,appType:s,transSettingRef:m,sampleFileUrl:l}}};function Tp(e,s,m,l,h,y){const r=o("a-page-header"),i=o("router-link"),p=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("SettingSidebar"),b=o("a-col"),v=o("LangAddButton"),k=o("ImportTranslation"),C=o("EyeOutlined"),S=o("a-button"),E=o("a-space"),A=o("TranslationsSettings"),P=o("a-row");return d(),T(L,null,[a(g,null,{header:n(()=>[a(r,{title:e.$t("menu.translations"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(p,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[c(u(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(p,null,{default:n(()=>[c(u(e.$t("menu.settings")),1)]),_:1}),a(p,null,{default:n(()=>[c(u(e.$t("menu.translations")),1)]),_:1})]),_:1})]),_:1}),a(P,null,{default:n(()=>[a(b,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:n(()=>[a(f)]),_:1}),a(b,{xs:24,sm:24,md:24,lg:20,xl:20},{default:n(()=>[a(A,{ref:"transSettingRef"},{actionButtons:n(()=>[a(E,null,{default:n(()=>[l.permsArray.includes("translations_create")||l.permsArray.includes("admin")?(d(),w(v,{key:0,onOnAddSuccess:l.langAdded,btnType:"primary",tooltip:!1},{default:n(()=>[c(u(e.$t("langs.add")),1)]),_:1},8,["onOnAddSuccess"])):$("",!0),l.appType=="non-saas"?(d(),w(k,{key:1,pageTitle:e.$t("translations.import_translations"),sampleFileUrl:l.sampleFileUrl,importUrl:"translations/import",onOnUploadSuccess:l.langAdded},null,8,["pageTitle","sampleFileUrl","onOnUploadSuccess"])):$("",!0),a(S,{type:"primary",onClick:s[0]||(s[0]=U=>e.$router.push({name:"admin.settings.langs.index"}))},{default:n(()=>[a(C),c(" "+u(e.$t("langs.view_all_langs")),1)]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})],64)}const Ep=K(Ap,[["render",Tp]]),Up=x({props:["module"],emits:["updateSuccess"],setup(e,{emit:s}){const m=I(!1),l=I(!1),h=be(),{t:y}=J();return ee(()=>{!e.module.verified||e.module.other_domain_verified?m.value=!1:m.value=e.module.status}),{checked:m,loading:l,updateStatus:(i,p)=>{axiosAdmin.post(ge("modules/update-status"),{verified_name:e.module.verified_name,checked:i}).then(_=>{$e.success({placement:"bottomRight",message:y("common.success"),description:y("module.module_status_updated")}),h.commit("auth/updateActiveModules",_.data.enabled_modules),window.config.modules=_.data.enabled_modules,s("updateSuccess")})}}}}),Op={key:0},Pp=["innerHTML"],Ip={key:1};function Fp(e,s,m,l,h,y){const r=o("a-switch"),i=o("a-tooltip");return e.module.verified&&e.module.installed?(d(),T("span",Op,[a(i,null,ta({default:n(()=>[a(r,{checked:e.checked,"onUpdate:checked":s[0]||(s[0]=p=>e.checked=p),loading:e.loading,onChange:e.updateStatus,disabled:!e.module.verified||e.module.other_domain_verified},null,8,["checked","loading","onChange","disabled"])]),_:2},[!e.module.verified||e.module.other_domain_verified?{name:"title",fn:n(()=>[O("span",{innerHTML:e.$t("messages.first_verify_module_message")},null,8,Pp)]),key:"0"}:void 0]),1024)])):(d(),T("span",Ip," - "))}const Mp=K(Up,[["render",Fp]]),Rp=x({props:["module"],emits:["verifySuccess"],components:{CheckOutlined:pa,InfoCircleOutlined:Qe},setup(e,{emit:s}){const m=I(!1),l=window.location.host,{rules:h,purchaseCode:y,errorMessage:r,successMessage:i,loading:p,verifyPurchase:_,productName:g,version:f}=qa();return ee(()=>{g.value=e.module.verified_name,f.value=e.module.current_version}),{visible:m,showModal:()=>{m.value=!0},handleCancel:()=>{y.value="",m.value=!1},domain:l,rules:h,purchaseCode:y,loading:p,verify:()=>_({success:C=>{s("verifySuccess"),y.value="",m.value=!1}}),errorMessage:r,successMessage:i}}}),Lp={key:0},qp=O("br",null,null,-1),Bp=["innerHTML"],zp=["innerHTML"];function Kp(e,s,m,l,h,y){const r=o("a-tag"),i=o("a-button"),p=o("a-typography-text"),_=o("a-alert"),g=o("a-col"),f=o("a-row"),b=o("InfoCircleOutlined"),v=o("a-typography-link"),k=o("a-typography-paragraph"),C=o("a-form-item"),S=o("a-input"),E=o("a-form"),A=o("CheckOutlined"),P=o("a-modal");return d(),T(L,null,[e.module.other_domain_verified?(d(),T("div",Lp,[a(r,{color:"red"},{default:n(()=>[c(u(e.$t("messages.other_domain_linked")),1)]),_:1}),qp,a(i,{type:"link",class:"p-0 mt-10",onClick:e.showModal},{default:n(()=>[c(u(e.$t("module.verify_purchase_code")),1)]),_:1},8,["onClick"])])):e.module.verified?(d(),w(p,{key:1,type:"success",strong:""},{default:n(()=>[c(u(e.$t("module.verified")),1)]),_:1})):e.module.is_free?(d(),w(p,{key:2,type:"success",strong:""},{default:n(()=>[c(" - ")]),_:1})):(d(),w(i,{key:3,type:"link",class:"p-0",onClick:e.showModal},{default:n(()=>[c(u(e.$t("module.verify_purchase_code")),1)]),_:1},8,["onClick"])),a(P,{open:e.visible,"onUpdate:open":s[1]||(s[1]=U=>e.visible=U),title:e.$t("module.verify_purchase_code"),maskClosable:!1,onCancel:e.handleCancel},{footer:n(()=>[a(i,{key:"submit",type:"primary",onClick:e.verify,loading:e.loading},{icon:n(()=>[a(A)]),default:n(()=>[c(" "+u(e.$t("common.verify")),1)]),_:1},8,["onClick","loading"]),a(i,{key:"back",onClick:e.handleCancel},{default:n(()=>[c(u(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[e.successMessage!=""?(d(),w(_,{key:0,class:"mb-10",type:"success","show-icon":"",banner:""},{message:n(()=>[O("span",{innerHTML:e.successMessage},null,8,Bp)]),_:1})):$("",!0),e.errorMessage!=""?(d(),w(_,{key:1,class:"mb-10",type:"error","show-icon":"",banner:""},{message:n(()=>[O("span",{innerHTML:e.errorMessage},null,8,zp)]),_:1})):$("",!0),e.module.other_domain_verified&&e.errorMessage==""?(d(),w(f,{key:2,class:"mb-10"},{default:n(()=>[a(g,{span:24},{default:n(()=>[a(_,{type:"error","show-icon":""},{message:n(()=>[c(u(e.$t("messages.other_domain_linked_with_purchase_code")),1)]),_:1})]),_:1})]),_:1})):$("",!0),a(f,{class:"mb-10"},{default:n(()=>[a(g,{span:24},{default:n(()=>[a(k,null,{default:n(()=>[O("blockquote",null,[a(v,{href:"https://help.market.envato.com/hc/en-us/articles/202822600-Where-Is-My-Purchase-Code-",target:"_blank"},{default:n(()=>[a(b),c(" "+u(e.$t("messages.click_here_to_find_purchase_code")),1)]),_:1})])]),_:1})]),_:1})]),_:1}),a(E,{layout:"vertical"},{default:n(()=>[a(C,{label:e.$t("common.domain"),name:"domain"},{default:n(()=>[a(p,{strong:""},{default:n(()=>[c(u(e.domain),1)]),_:1})]),_:1},8,["label"]),a(C,{label:e.$t("common.purchase_code"),name:"purchase_code",help:e.rules.purchase_code?e.rules.purchase_code.message:null,validateStatus:e.rules.purchase_code?"error":null,class:"required"},{default:n(()=>[a(S,{value:e.purchaseCode,"onUpdate:value":s[0]||(s[0]=U=>e.purchaseCode=U),placeholder:e.$t("common.placeholder_default_text",[e.$t("common.purchase_code")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1},8,["open","title","onCancel"])],64)}const Vp=K(Rp,[["render",Kp]]),Hp=x({props:["module","downloading","downloadPercentage","extracting"],emits:["install"],components:{DownloadOutlined:ba,ShoppingCartOutlined:va,ReloadOutlined:Bt,SyncOutlined:Je,CheckCircleOutlined:La,InfoOutlined:zt,CheckOutlined:pa},setup(e,{emit:s}){const{t:m}=J(),l=I(!1),h=I("");return Oe(),{install:()=>{he.confirm({title:m("common.install"),icon:a(ie),content:m("messages.are_you_sure_install_message"),okText:m("common.yes"),okType:"danger",cancelText:m("common.no"),onOk(){h.value=m("common.installing")+"...",s("install",e.module.verified_name),l.value=!0},onCancel(){}})},update:()=>{he.confirm({title:m("common.update"),icon:a(ie),content:m("messages.are_you_sure_update_message"),okText:m("common.yes"),okType:"danger",cancelText:m("common.no"),onOk(){h.value=m("common.updating")+"...",s("install",e.module.verified_name),l.value=!0},onCancel(){}})},installUpdateModalVisible:l,closeInstallUpdateModal:()=>{l.value=!1,window.location.reload()}}}});function Np(e,s,m,l,h,y){const r=o("DownloadOutlined"),i=o("a-button"),p=o("ReloadOutlined"),_=o("ShoppingCartOutlined"),g=o("a-typography-text"),f=o("SyncOutlined"),b=o("CheckCircleOutlined"),v=o("a-progress"),k=o("a-col"),C=o("a-row"),S=o("InfoOutlined"),E=o("CheckOutlined"),A=o("a-modal");return d(),T(L,null,[e.module.is_free&&!e.module.installed||e.module.verified&&!e.module.installed?(d(),w(i,{key:0,type:"link",class:"p-0",onClick:e.install},{icon:n(()=>[a(r)]),default:n(()=>[c(" "+u(e.$t("common.install")),1)]),_:1},8,["onClick"])):(e.module.is_free||e.module.verified)&&e.module.installed&&e.module.current_version!=e.module.version?(d(),w(i,{key:1,type:"link",class:"p-0",onClick:e.update},{icon:n(()=>[a(p)]),default:n(()=>[c(" "+u(e.$t("common.update")),1)]),_:1},8,["onClick"])):!e.module.is_free&&!e.module.verified?(d(),w(i,{key:2,type:"link",href:e.module.buy_now_url,class:"p-0",target:"_blank"},{icon:n(()=>[a(_)]),default:n(()=>[c(" "+u(e.$t("common.buy_now")),1)]),_:1},8,["href"])):(d(),w(g,{key:3,type:"success",strong:""},{default:n(()=>[c(" - ")]),_:1})),a(A,{open:e.installUpdateModalVisible,"onUpdate:open":s[0]||(s[0]=P=>e.installUpdateModalVisible=P),title:e.$t("common.installing"),maskClosable:!1,closable:!1,footer:null},{default:n(()=>[a(C,{class:"mb-10"},{default:n(()=>[a(k,{span:24},{default:n(()=>[e.downloadPercentage<100?(d(),w(g,{key:0},{default:n(()=>[a(f,{spin:""}),c(" "+u(e.$t("messages.downloading_started_message")),1)]),_:1})):(d(),w(g,{key:1,strong:"",type:"success"},{default:n(()=>[a(b),c(" "+u(e.$t("module.downloading_completed")),1)]),_:1})),e.downloadPercentage<100?(d(),w(v,{key:2,percent:e.downloadPercentage},null,8,["percent"])):$("",!0)]),_:1})]),_:1}),a(C,{class:"mb-10"},{default:n(()=>[a(k,{span:24},{default:n(()=>[e.extracting==""?(d(),w(g,{key:0,type:"secondary"},{default:n(()=>[a(S),c(" "+u(e.$t("module.extract_zip_file")),1)]),_:1})):$("",!0),e.extracting=="started"?(d(),w(g,{key:1},{default:n(()=>[a(f,{spin:""}),c(" "+u(e.$t("messages.file_extracting_message")),1)]),_:1})):$("",!0),e.extracting=="completed"?(d(),w(g,{key:2,strong:"",type:"success"},{default:n(()=>[a(b),c(" "+u(e.$t("module.file_extracted")),1)]),_:1})):$("",!0)]),_:1})]),_:1}),e.extracting=="completed"?(d(),w(C,{key:0,class:"mt-10 mb-10"},{default:n(()=>[a(k,{span:24},{default:n(()=>[a(i,{type:"primary",onClick:e.closeInstallUpdateModal,block:""},{default:n(()=>[a(E),c(" "+u(e.$t("messages.installation_success")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})):$("",!0)]),_:1},8,["open","title"])],64)}const jp=K(Hp,[["render",Np]]);const Wp=x({components:{ModuleStatus:Mp,VerifyModule:Vp,ModuleAction:jp,LeftCircleOutlined:Kt,RightCircleOutlined:Vt},setup(){const{t:e}=J();be();const s=window.config.app_env,{allModules:m,dataLoading:l,getModuleData:h,offers:y,settings:r,install:i,downloading:p,downloadPercentage:_,extracting:g}=qa(),f=[{title:e("module.name"),dataIndex:"name",width:"25%"},{title:e("module.verified"),dataIndex:"verified",width:"15%"},{title:e("module.current_version"),dataIndex:"current_version"},{title:e("module.latest_version"),dataIndex:"version"},{title:e("module.status"),dataIndex:"status"},{title:e("common.action"),dataIndex:"action"}];return ee(()=>{h()}),{modulesTableColumns:f,allModules:m,getModuleData:h,installModule:v=>{i(v)},dataLoading:l,offers:y,settings:r,downloading:p,downloadPercentage:_,extracting:g,appEnv:s}}}),Yp={class:"custom-slick-arrow",style:{left:"10px","z-index":"1"}},Gp={class:"custom-slick-arrow",style:{right:"10px"}},Xp=["src"],Jp={key:0,class:"table-responsive"},Qp={key:1};function Zp(e,s,m,l,h,y){const r=o("left-circle-outlined"),i=o("right-circle-outlined"),p=o("a-typography-link"),_=o("a-carousel"),g=o("a-col"),f=o("a-row"),b=o("a-avatar"),v=o("a-list-item-meta"),k=o("a-list-item"),C=o("a-list"),S=o("VerifyModule"),E=o("ModuleStatus"),A=o("ModuleAction"),P=o("a-table"),U=o("admin-page-table-content");return d(),T(L,null,[e.offers&&e.offers.length>0?(d(),w(f,{key:0},{default:n(()=>[a(g,{span:24},{default:n(()=>[a(_,{arrows:""},{prevArrow:n(()=>[O("div",Yp,[a(r)])]),nextArrow:n(()=>[O("div",Gp,[a(i)])]),default:n(()=>[(d(!0),T(L,null,X(e.offers,D=>(d(),T("div",{key:D.id},[a(p,{href:D.url,target:"_blank"},{default:n(()=>[O("img",{src:D.image_url,style:ga({width:e.settings.width,height:e.settings.height}),preview:!1},null,12,Xp)]),_:2},1032,["href"])]))),128))]),_:1})]),_:1})]),_:1})):$("",!0),a(U,null,{default:n(()=>[a(f,{class:"mt-20 mb-20"},{default:n(()=>[a(g,{span:24},{default:n(()=>[e.allModules?(d(),T("div",Jp,[a(P,{columns:e.modulesTableColumns,"row-key":D=>D.verified_name,"data-source":e.allModules,pagination:!1,bordered:"",size:"middle",loading:e.dataLoading},{bodyCell:n(({column:D,record:M})=>[D.dataIndex=="name"?(d(),w(C,{key:0},{default:n(()=>[a(k,null,{default:n(()=>[a(v,{description:M.description},{title:n(()=>[c(u(M.name),1)]),avatar:n(()=>[a(b,{src:M.image_url},null,8,["src"])]),_:2},1032,["description"])]),_:2},1024)]),_:2},1024)):$("",!0),D.dataIndex=="verified"?(d(),w(S,{key:1,module:M,onVerifySuccess:e.getModuleData},null,8,["module","onVerifySuccess"])):$("",!0),D.dataIndex=="status"?(d(),w(E,{key:2,module:M,status:M.status,moduleName:M.verified_name,onUpdateSuccess:e.getModuleData},null,8,["module","status","moduleName","onUpdateSuccess"])):$("",!0),D.dataIndex=="action"?(d(),T(L,{key:3},[e.appEnv=="envato"?(d(),w(A,{key:0,module:M,onInstall:e.installModule,downloadPercentage:e.downloadPercentage,downloading:e.downloading,extracting:e.extracting},null,8,["module","onInstall","downloadPercentage","downloading","extracting"])):(d(),T("span",Qp,"-"))],64)):$("",!0)]),_:1},8,["columns","row-key","data-source","loading"])])):$("",!0)]),_:1})]),_:1})]),_:1})],64)}const xp=K(Wp,[["render",Zp]]),e_=x({components:{LeftCircleOutlined:Kt,RightCircleOutlined:Vt,SettingSidebar:Pe,AdminPageHeader:me,ModuleSetting:xp},setup(){return{}}});function a_(e,s,m,l,h,y){const r=o("a-page-header"),i=o("router-link"),p=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("SettingSidebar"),b=o("a-col"),v=o("ModuleSetting"),k=o("a-row");return d(),T(L,null,[a(g,null,{header:n(()=>[a(r,{title:e.$t("menu.modules"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(p,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[c(u(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(p,null,{default:n(()=>[c(u(e.$t("menu.settings")),1)]),_:1}),a(p,null,{default:n(()=>[c(u(e.$t("menu.modules")),1)]),_:1})]),_:1})]),_:1}),a(k,null,{default:n(()=>[a(b,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:n(()=>[a(f)]),_:1}),a(b,{xs:24,sm:24,md:24,lg:20,xl:20},{default:n(()=>[a(v)]),_:1})]),_:1})],64)}const t_=K(e_,[["render",a_]]),n_={components:{SaveOutlined:_e},setup(){const{addEditRequestAdmin:e,loading:s,rules:m}=le(),{t:l}=J(),h=I({}),y=I([]);return ee(()=>{axiosAdmin.get(ge("settings/storage")).then(i=>{h.value=i.data.storage,y.value=i.data.regions})}),{loading:s,rules:m,awsRegions:y,formData:h,onSubmit:()=>{e({url:ge("settings/storage/update"),data:h.value,successMessage:l("storage_settings.updated"),success:i=>{}})}}}},l_={key:0};function o_(e,s,m,l,h,y){const r=o("a-select-option"),i=o("a-select"),p=o("a-form-item"),_=o("a-col"),g=o("a-row"),f=o("a-input"),b=o("a-input-password"),v=o("SaveOutlined"),k=o("a-button"),C=o("a-form");return d(),w(C,{layout:"vertical"},{default:n(()=>[a(g,{gutter:16},{default:n(()=>[a(_,{span:24},{default:n(()=>[a(p,{label:e.$t("storage_settings.storage"),name:"filesystem",help:l.rules.filesystem?l.rules.filesystem.message:null,validateStatus:l.rules.filesystem?"error":null},{default:n(()=>[a(i,{value:l.formData.filesystem,"onUpdate:value":s[0]||(s[0]=S=>l.formData.filesystem=S),placeholder:e.$t("common.select_default_text",[e.$t("storage_settings.storage")])},{default:n(()=>[a(r,{key:"local",value:"local"},{default:n(()=>[c(u(e.$t("storage_settings.local")),1)]),_:1}),a(r,{key:"aws",value:"aws"},{default:n(()=>[c(u(e.$t("storage_settings.aws")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l.formData.filesystem=="aws"?(d(),T("div",l_,[a(g,{gutter:16},{default:n(()=>[a(_,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(p,{label:e.$t("storage_settings.aws_key"),name:"key",help:l.rules.key?l.rules.key.message:null,validateStatus:l.rules.key?"error":null,class:"required"},{default:n(()=>[a(f,{value:l.formData.key,"onUpdate:value":s[1]||(s[1]=S=>l.formData.key=S),placeholder:e.$t("common.placeholder_default_text",[e.$t("storage_settings.aws_key")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(_,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(p,{label:e.$t("storage_settings.aws_secret"),name:"secret",help:l.rules.secret?l.rules.secret.message:null,validateStatus:l.rules.secret?"error":null,class:"required"},{default:n(()=>[a(b,{value:l.formData.secret,"onUpdate:value":s[2]||(s[2]=S=>l.formData.secret=S),placeholder:e.$t("common.placeholder_default_text",[e.$t("storage_settings.aws_secret")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(g,{gutter:16},{default:n(()=>[a(_,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(p,{label:e.$t("storage_settings.aws_region"),name:"region",help:l.rules.region?l.rules.region.message:null,validateStatus:l.rules.region?"error":null},{default:n(()=>[a(i,{value:l.formData.region,"onUpdate:value":s[3]||(s[3]=S=>l.formData.region=S),placeholder:e.$t("common.select_default_text",[e.$t("storage_settings.aws_region")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:n(()=>[(d(!0),T(L,null,X(l.awsRegions,(S,E)=>(d(),w(r,{key:E,value:E,label:S},{default:n(()=>[c(u(S),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(_,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(p,{label:e.$t("storage_settings.aws_bucket"),name:"bucket",help:l.rules.bucket?l.rules.bucket.message:null,validateStatus:l.rules.bucket?"error":null,class:"required"},{default:n(()=>[a(f,{value:l.formData.bucket,"onUpdate:value":s[4]||(s[4]=S=>l.formData.bucket=S),placeholder:e.$t("common.placeholder_default_text",[e.$t("storage_settings.aws_bucket")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})])):$("",!0),a(g,{gutter:16},{default:n(()=>[a(_,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(p,null,{default:n(()=>[a(k,{type:"primary",onClick:l.onSubmit,loading:l.loading},{icon:n(()=>[a(v)]),default:n(()=>[c(" "+u(e.$t("common.update")),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1})]),_:1})}const s_=K(n_,[["render",o_]]),d_={components:{SettingSidebar:Pe,AdminPageHeader:me,StorageSettings:s_,SaveOutlined:_e},setup(){const e=I(null);return{onSubmit:()=>{e.value.onSubmit()},settingRef:e}}};function i_(e,s,m,l,h,y){const r=o("SaveOutlined"),i=o("a-button"),p=o("a-page-header"),_=o("router-link"),g=o("a-breadcrumb-item"),f=o("a-breadcrumb"),b=o("AdminPageHeader"),v=o("SettingSidebar"),k=o("a-col"),C=o("StorageSettings"),S=o("a-card"),E=o("admin-page-table-content"),A=o("a-row");return d(),T(L,null,[a(b,null,{header:n(()=>[a(p,{title:e.$t("menu.storage_settings"),class:"p-0"},{extra:n(()=>[a(i,{type:"primary",onClick:l.onSubmit,loading:!!(l.settingRef&&l.settingRef.loading)},{icon:n(()=>[a(r)]),default:n(()=>[c(" "+u(e.$t("common.update")),1)]),_:1},8,["onClick","loading"])]),_:1},8,["title"])]),breadcrumb:n(()=>[a(f,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(g,null,{default:n(()=>[a(_,{to:{name:"admin.dashboard.index"}},{default:n(()=>[c(u(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(g,null,{default:n(()=>[c(u(e.$t("menu.settings")),1)]),_:1}),a(g,null,{default:n(()=>[c(u(e.$t("menu.storage_settings")),1)]),_:1})]),_:1})]),_:1}),a(A,null,{default:n(()=>[a(k,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:n(()=>[a(v)]),_:1}),a(k,{xs:24,sm:24,md:24,lg:20,xl:20},{default:n(()=>[a(E,null,{default:n(()=>[a(S,{class:"page-content-container mt-20 mb-20"},{default:n(()=>[a(C,{ref:"settingRef"},null,512)]),_:1})]),_:1})]),_:1})]),_:1})],64)}const r_=K(d_,[["render",i_]]),u_=x({props:["formData","verified"],components:{SendOutlined:Ot},setup(){const{addEditRequestAdmin:e,loading:s,rules:m}=le(),l=I(!1),h=I(""),y=I(""),{t:r}=J();return{loading:s,rules:m,email:h,visible:l,showModal:()=>{l.value=!0},sendMail:()=>{y.value="",e({url:ge("settings/email/send-test-mail"),data:{email:h.value},success:g=>{y.value="",g.status=="success"?$e.success({placement:"bottomRight",message:r("common.success"),description:r("mail_settings.test_mail_sent_successfully")}):y.value=g.message},error:g=>{y.value=""}})},handleCancel:()=>{l.value=!1,s.value=!1,h.value="",y.value="",m.value={}},errorMessage:y}}});function m_(e,s,m,l,h,y){const r=o("SendOutlined"),i=o("a-button"),p=o("a-alert"),_=o("a-col"),g=o("a-row"),f=o("a-input"),b=o("a-form-item"),v=o("a-form"),k=o("a-modal");return d(),T(L,null,[e.formData.mail_driver=="mail"||e.formData.mail_driver=="smtp"?(d(),w(i,{key:0,onClick:e.showModal,disabled:!e.verified},{icon:n(()=>[a(r)]),default:n(()=>[c(" "+u(e.$t("mail_settings.send_test_mail")),1)]),_:1},8,["onClick","disabled"])):$("",!0),a(k,{open:e.visible,"onUpdate:open":s[1]||(s[1]=C=>e.visible=C),maskClosable:!1,title:e.$t("mail_settings.send_test_mail"),onCancel:e.handleCancel},{footer:n(()=>[a(i,{key:"submit",type:"primary",loading:e.loading,onClick:e.sendMail},{icon:n(()=>[a(r)]),default:n(()=>[c(" "+u(e.$t("common.send")),1)]),_:1},8,["loading","onClick"]),a(i,{key:"back",onClick:e.handleCancel},{default:n(()=>[c(u(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[a(v,{layout:"vertical"},{default:n(()=>[e.errorMessage!=""?(d(),w(g,{key:0,gutter:16,class:"mb-20"},{default:n(()=>[a(_,{span:24},{default:n(()=>[a(p,{message:e.errorMessage,type:"error","show-icon":""},null,8,["message"])]),_:1})]),_:1})):$("",!0),a(g,{gutter:16},{default:n(()=>[a(_,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(b,{label:e.$t("mail_settings.email"),name:"email",help:e.rules.email?e.rules.email.message:null,validateStatus:e.rules.email?"error":null,class:"required"},{default:n(()=>[a(f,{value:e.email,"onUpdate:value":s[0]||(s[0]=C=>e.email=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("common.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onCancel"])],64)}const c_=K(u_,[["render",m_]]),p_={components:{InfoCircleOutlined:Qe}};function __(e,s,m,l,h,y){const r=o("InfoCircleOutlined"),i=o("a-tooltip");return d(),w(i,null,{title:n(()=>[c(u(e.$t("mail_settings.notificaiton_will_be_sent_to_company")),1)]),default:n(()=>[a(r)]),_:1})}const f_=K(p_,[["render",__]]);const g_={props:["sendMailSettings"],components:{TooltipCompany:f_},setup(e){const{addEditRequestAdmin:s}=le(),{t:m}=J(),l=I([]);return ee(()=>{l.value=e.sendMailSettings.credentials}),{settings:l,settingsChanged:y=>{s({url:ge("settings/email/send-mail-settings"),data:{name_key:"company",settings:y},success:r=>{Ue.success(m("mail_settings.send_mail_setting_saved"))}})}}}},h_={class:"notificaiton-setting-bar"},b_={style:{marginTop:"8px",paddingBottom:"14px"}};function y_(e,s,m,l,h,y){const r=o("TooltipCompany"),i=o("a-typography-title"),p=o("a-col"),_=o("a-checkbox"),g=o("a-divider"),f=o("a-row"),b=o("a-checkbox-group"),v=o("a-card"),k=o("perfect-scrollbar");return d(),T("div",h_,[a(k,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:n(()=>[a(v,{class:"page-content-container"},{title:n(()=>[O("div",b_,u(e.$t("mail_settings.send_mail_for")),1)]),default:n(()=>[a(b,{value:l.settings,"onUpdate:value":s[0]||(s[0]=C=>l.settings=C),style:{width:"100%"},onChange:l.settingsChanged},{default:n(()=>[a(f,null,{default:n(()=>[a(p,{span:24,class:"mb-5"},{default:n(()=>[a(i,{level:5},{default:n(()=>[c(u(e.$t("menu.staff_members"))+" ",1),a(r)]),_:1})]),_:1}),a(p,{span:24,class:"mb-5"},{default:n(()=>[a(_,{value:"staff_member_create"},{default:n(()=>[c(u(e.$t("common.on_create")),1)]),_:1})]),_:1}),a(p,{span:24,class:"mb-5"},{default:n(()=>[a(_,{value:"staff_member_update"},{default:n(()=>[c(u(e.$t("common.on_update")),1)]),_:1})]),_:1}),a(p,{span:24,class:"mb-5"},{default:n(()=>[a(_,{value:"staff_member_delete"},{default:n(()=>[c(u(e.$t("common.on_delete")),1)]),_:1})]),_:1}),a(g)]),_:1})]),_:1},8,["value","onChange"])]),_:1})]),_:1})])}const v_=K(g_,[["render",y_]]),k_={components:{SaveOutlined:_e,TestMail:c_,SendMailSetting:v_},setup(){const{addEditRequestAdmin:e,loading:s,rules:m}=le(),{appType:l}=Q();le();const{t:h}=J(),y=I({}),r=I(!1),i=I(""),p=I([]);return ee(()=>{axiosAdmin.get(ge("settings/email")).then(g=>{y.value=g.data.settings,p.value=g.data.sendMailSettings,r.value=g.data.verified,i.value=g.data.verified?h("messages.stmp_success_message"):h("messages.stmp_error_message")})}),{appType:l,formData:y,rules:m,loading:s,onSubmit:()=>{e({url:ge("settings/email/update"),data:y.value,successMessage:h("mail_settings.updated"),success:g=>{r.value=g.verified,i.value=g.verified?h("messages.stmp_success_message"):g.message}})},verified:r,verifiedMessage:i,sendMailSettings:p}}},C_={key:0},w_={key:0},S_={key:1};function D_(e,s,m,l,h,y){const r=o("a-alert"),i=o("a-select-option"),p=o("a-select"),_=o("a-form-item"),g=o("a-col"),f=o("a-row"),b=o("a-input"),v=o("a-input-password"),k=o("SaveOutlined"),C=o("a-button"),S=o("TestMail"),E=o("a-space"),A=o("a-form"),P=o("a-card"),U=o("SendMailSetting");return d(),w(f,null,{default:n(()=>[a(g,{class:"settings-sidebar-content-container mt-20 mb-20",xs:24,sm:24,md:24,lg:l.appType=="saas"?24:18,xl:l.appType=="saas"?24:18},{default:n(()=>[l.formData.mail_driver=="smtp"?(d(),T("div",C_,[l.verified?(d(),w(r,{key:0,description:l.verifiedMessage,type:"success","show-icon":""},null,8,["description"])):(d(),w(r,{key:1,description:l.verifiedMessage,type:"error","show-icon":""},null,8,["description"]))])):$("",!0),a(P,{class:"settings-sidebar-content-container"},{default:n(()=>[a(A,{layout:"vertical"},{default:n(()=>[a(f,{gutter:16},{default:n(()=>[a(g,{span:24},{default:n(()=>[a(_,{label:e.$t("mail_settings.mail_driver"),name:"mail_driver",help:l.rules.mail_driver?l.rules.mail_driver.message:null,validateStatus:l.rules.mail_driver?"error":null},{default:n(()=>[a(p,{value:l.formData.mail_driver,"onUpdate:value":s[0]||(s[0]=D=>l.formData.mail_driver=D),placeholder:e.$t("common.select_default_text",[e.$t("mail_settings.mail_driver")])},{default:n(()=>[a(i,{key:"none",value:"none"},{default:n(()=>[c(u(e.$t("mail_settings.none")),1)]),_:1}),a(i,{key:"smtp",value:"smtp"},{default:n(()=>[c(u(e.$t("mail_settings.smtp")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l.formData.mail_driver=="mail"||l.formData.mail_driver=="smtp"?(d(),T("div",w_,[a(f,{gutter:16},{default:n(()=>[a(g,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(_,{label:e.$t("mail_settings.from_name"),name:"from_name",help:l.rules.from_name?l.rules.from_name.message:null,validateStatus:l.rules.from_name?"error":null,class:"required"},{default:n(()=>[a(b,{value:l.formData.from_name,"onUpdate:value":s[1]||(s[1]=D=>l.formData.from_name=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("mail_settings.from_name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(g,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(_,{label:e.$t("mail_settings.from_email"),name:"from_email",help:l.rules.from_email?l.rules.from_email.message:null,validateStatus:l.rules.from_email?"error":null,class:"required"},{default:n(()=>[a(b,{value:l.formData.from_email,"onUpdate:value":s[2]||(s[2]=D=>l.formData.from_email=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("mail_settings.from_email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})])):$("",!0),l.formData.mail_driver=="smtp"?(d(),T("div",S_,[a(f,{gutter:16},{default:n(()=>[l.formData.mail_driver=="smtp"?(d(),w(g,{key:0,xs:24,sm:24,md:24,lg:l.formData.mail_driver=="smtp"?12:24},{default:n(()=>[a(_,{label:e.$t("mail_settings.enable_mail_queue"),name:"enable_mail_queue",help:l.rules.enable_mail_queue?l.rules.enable_mail_queue.message:null,validateStatus:l.rules.enable_mail_queue?"error":null,class:"required"},{default:n(()=>[a(p,{value:l.formData.enable_mail_queue,"onUpdate:value":s[3]||(s[3]=D=>l.formData.enable_mail_queue=D),placeholder:e.$t("common.select_default_text",[e.$t("mail_settings.enable_mail_queue")]),allowClear:!0},{default:n(()=>[a(i,{key:"yes",value:"yes"},{default:n(()=>[c(u(e.$t("common.yes")),1)]),_:1}),a(i,{key:"no",value:"no"},{default:n(()=>[c(u(e.$t("common.no")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1},8,["lg"])):$("",!0),l.formData.mail_driver=="smtp"?(d(),w(g,{key:1,xs:24,sm:24,md:24,lg:l.formData.mail_driver=="smtp"?12:24},{default:n(()=>[a(_,{label:e.$t("mail_settings.host"),name:"host",help:l.rules.host?l.rules.host.message:null,validateStatus:l.rules.host?"error":null,class:"required"},{default:n(()=>[a(b,{value:l.formData.host,"onUpdate:value":s[4]||(s[4]=D=>l.formData.host=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("mail_settings.host")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1},8,["lg"])):$("",!0)]),_:1}),a(f,{gutter:16},{default:n(()=>[a(g,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(_,{label:e.$t("mail_settings.port"),name:"port",help:l.rules.port?l.rules.port.message:null,validateStatus:l.rules.port?"error":null,class:"required"},{default:n(()=>[a(b,{value:l.formData.port,"onUpdate:value":s[5]||(s[5]=D=>l.formData.port=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("mail_settings.port")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(g,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(_,{label:e.$t("mail_settings.encryption"),name:"encryption",help:l.rules.encryption?l.rules.encryption.message:null,validateStatus:l.rules.encryption?"error":null},{default:n(()=>[a(p,{value:l.formData.encryption,"onUpdate:value":s[6]||(s[6]=D=>l.formData.encryption=D),placeholder:e.$t("common.select_default_text",[e.$t("mail_settings.encryption")]),allowClear:!0},{default:n(()=>[a(i,{key:"tls",value:"tls"},{default:n(()=>[c(" tls ")]),_:1}),a(i,{key:"ssl",value:"ssl"},{default:n(()=>[c(" ssl ")]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(f,{gutter:16},{default:n(()=>[a(g,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(_,{label:e.$t("mail_settings.username"),name:"username",help:l.rules.username?l.rules.username.message:null,validateStatus:l.rules.username?"error":null,class:"required"},{default:n(()=>[a(b,{value:l.formData.username,"onUpdate:value":s[7]||(s[7]=D=>l.formData.username=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("mail_settings.username")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(g,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(_,{label:e.$t("mail_settings.password"),name:"password",help:l.rules.password?l.rules.password.message:null,validateStatus:l.rules.password?"error":null,class:"required"},{default:n(()=>[a(v,{value:l.formData.password,"onUpdate:value":s[8]||(s[8]=D=>l.formData.password=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("mail_settings.password")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})])):$("",!0),a(f,{gutter:16},{default:n(()=>[a(g,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(_,null,{default:n(()=>[a(E,null,{default:n(()=>[a(C,{type:"primary",onClick:l.onSubmit,loading:l.loading},{icon:n(()=>[a(k)]),default:n(()=>[c(" "+u(e.$t("common.update")),1)]),_:1},8,["onClick","loading"]),a(S,{formData:l.formData,verified:l.verified},null,8,["formData","verified"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["lg","xl"]),l.appType=="non-saas"?(d(),w(g,{key:0,class:"settings-sidebar-content-container mt-20 mb-20",xs:24,sm:24,md:24,lg:6,xl:6},{default:n(()=>[l.sendMailSettings&&l.sendMailSettings.xid?(d(),w(U,{key:0,sendMailSettings:l.sendMailSettings},null,8,["sendMailSettings"])):$("",!0)]),_:1})):$("",!0)]),_:1})}const $_=K(k_,[["render",D_]]),A_={components:{SettingSidebar:Pe,AdminPageHeader:me,EmailSettings:$_,SaveOutlined:_e},setup(){const e=I(null);return{onSubmit:()=>{e.value.onSubmit()},settingRef:e}}};function T_(e,s,m,l,h,y){const r=o("SaveOutlined"),i=o("a-button"),p=o("a-page-header"),_=o("router-link"),g=o("a-breadcrumb-item"),f=o("a-breadcrumb"),b=o("AdminPageHeader"),v=o("SettingSidebar"),k=o("a-col"),C=o("EmailSettings"),S=o("admin-page-table-content"),E=o("a-row");return d(),T(L,null,[a(b,null,{header:n(()=>[a(p,{title:e.$t("menu.email_settings"),class:"p-0"},{extra:n(()=>[a(i,{type:"primary",onClick:l.onSubmit,loading:!!(l.settingRef&&l.settingRef.loading)},{icon:n(()=>[a(r)]),default:n(()=>[c(" "+u(e.$t("common.update")),1)]),_:1},8,["onClick","loading"])]),_:1},8,["title"])]),breadcrumb:n(()=>[a(f,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(g,null,{default:n(()=>[a(_,{to:{name:"admin.dashboard.index"}},{default:n(()=>[c(u(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(g,null,{default:n(()=>[c(u(e.$t("menu.settings")),1)]),_:1}),a(g,null,{default:n(()=>[c(u(e.$t("menu.email_settings")),1)]),_:1})]),_:1})]),_:1}),a(E,null,{default:n(()=>[a(k,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:n(()=>[a(v)]),_:1}),a(k,{xs:24,sm:24,md:24,lg:20,xl:20},{default:n(()=>[a(S,null,{default:n(()=>[a(C,{ref:"settingRef"},null,512)]),_:1})]),_:1})]),_:1})],64)}const E_=K(A_,[["render",T_]]),U_=()=>{const e=ge("database-backups"),{t:s}=J(),m=[{title:s("database_backup.file"),dataIndex:"name"},{title:s("database_backup.file_size"),dataIndex:"size"},{title:s("common.action"),dataIndex:"action"}];return{url:e,columns:m}},O_={components:{PlusOutlined:ae,EditOutlined:ye,DeleteOutlined:pe,ExclamationCircleOutlined:ie},setup(){const{t:e}=J(),{url:s,columns:m}=U_(),l=I([]);return ee(()=>{axiosAdmin.post(ge("database-backups")).then(r=>{l.value=r.data.data})}),{columns:m,results:l,deleteBackup:r=>{he.confirm({title:e("database_backup.delete_backup"),icon:a(ie),content:e("database_backup.are_you_sure_delete_backup"),okText:e("common.yes"),okType:"danger",cancelText:e("common.no"),onOk(){axiosAdmin.post(ge("delete-backup"),{file_name:r}).then(i=>{l.value=i.data.data})},onCancel(){}})},backupCreated:r=>{l.value=r.data}}}},P_={class:"table-responsive mt-20"};function I_(e,s,m,l,h,y){const r=o("a-col"),i=o("a-row"),p=o("admin-page-filters"),_=o("a-alert"),g=o("a-typography-link"),f=o("a-button"),b=o("a-space"),v=o("a-table"),k=o("admin-page-table-content");return d(),T(L,null,[a(p,null,{default:n(()=>[a(i,{gutter:[16,16]},{default:n(()=>[a(r,{span:24},{default:n(()=>[oe(e.$slots,"actionButtons")]),_:3})]),_:3})]),_:3}),a(k,null,{default:n(()=>[a(i,{class:"mt-20"},{default:n(()=>[a(r,{span:24},{default:n(()=>[a(_,{type:"warning",showIcon:"",message:e.$t("database_backup.backup_locaion_is")},null,8,["message"]),O("div",P_,[a(v,{columns:l.columns,"row-key":C=>C.id,"data-source":l.results,pagination:!1,bordered:"",size:"middle"},{bodyCell:n(({column:C,record:S})=>[C.dataIndex=="action"?(d(),w(b,{key:0},{default:n(()=>[a(g,{href:S.url,target:"_blank"},{default:n(()=>[c(u(e.$t("common.download")),1)]),_:2},1032,["href"]),a(f,{type:"link",onClick:E=>l.deleteBackup(S.name)},{default:n(()=>[c(u(e.$t("common.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)):$("",!0)]),_:1},8,["columns","row-key","data-source"])])]),_:1})]),_:1})]),_:1})],64)}const F_=K(O_,[["render",I_]]),M_=x({emits:["success"],components:{PlusOutlined:ae,ExclamationCircleOutlined:ie},setup(e,{emit:s}){const{t:m}=J(),{addEditRequestAdmin:l,loading:h}=le();return{generateBack:()=>{he.confirm({title:m("database_backup.generate_backup"),icon:a(ie),content:m("database_backup.are_you_sure_generate_backup"),okText:m("common.yes"),okType:"danger",cancelText:m("common.no"),onOk(){l({url:ge("generate-backups"),data:{},successMessage:m("database_backup.backup_generated_successfully"),success:r=>{s("success",r)}})},onCancel(){}})},loading:h}}});function R_(e,s,m,l,h,y){const r=o("PlusOutlined"),i=o("a-button");return d(),w(i,{type:"primary",onClick:e.generateBack,loading:e.loading},{default:n(()=>[a(r),c(" "+u(e.$t("database_backup.generate_backup")),1)]),_:1},8,["onClick","loading"])}const L_=K(M_,[["render",R_]]),q_=x({components:{SettingOutlined:Ca},setup(){const e=I(!1);return{visible:e,onClose:()=>{e.value=!1},openDrawer:()=>{e.value=!0},drawerWidth:window.innerWidth<=991?"90%":"35%"}}});function B_(e,s,m,l,h,y){const r=o("SettingOutlined"),i=o("a-button"),p=o("a-alert"),_=o("a-col"),g=o("a-row"),f=o("a-typography-text"),b=o("a-typography-paragraph"),v=o("a-form"),k=o("a-drawer");return d(),T(L,null,[a(i,{type:"primary",onClick:e.openDrawer},{icon:n(()=>[a(r)]),default:n(()=>[c(" "+u(e.$t("database_backup.settings")),1)]),_:1},8,["onClick"]),a(k,{title:e.$t("database_backup.backup_command_setting"),width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:n(()=>[a(i,{onClick:e.onClose},{default:n(()=>[c(u(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[a(v,{layout:"vertical"},{default:n(()=>[a(g,{gutter:16,class:"mb-10"},{default:n(()=>[a(_,{span:24},{default:n(()=>[a(p,{type:"warning",showIcon:"",message:e.$t("database_backup.put_dump_path_command_on_env_file")},null,8,["message"])]),_:1})]),_:1}),a(g,{gutter:16},{default:n(()=>[a(_,{span:24},{default:n(()=>[a(b,null,{default:n(()=>[O("blockquote",null,[a(f,{type:"warning"},{default:n(()=>[c(u(e.$t("database_backup.window_command_path")),1)]),_:1})]),O("blockquote",null,[a(f,{type:"warning"},{default:n(()=>[c(u(e.$t("database_backup.laragon_command_path")),1)]),_:1})]),O("blockquote",null,[a(f,{type:"warning"},{default:n(()=>[c(u(e.$t("database_backup.linux_command_path")),1)]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])],64)}const z_=K(q_,[["render",B_]]),K_={components:{SettingSidebar:Pe,AdminPageHeader:me,DatabaseSettings:F_,GenerateDbBackup:L_,BackupCommandSetting:z_},setup(){const e=I(null);return{backupCreated:m=>{e.value.backupCreated(m)},settingRef:e}}};function V_(e,s,m,l,h,y){const r=o("a-page-header"),i=o("router-link"),p=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("SettingSidebar"),b=o("a-col"),v=o("GenerateDbBackup"),k=o("BackupCommandSetting"),C=o("a-space"),S=o("DatabaseSettings"),E=o("a-row");return d(),T(L,null,[a(g,null,{header:n(()=>[a(r,{title:e.$t("menu.database_backup"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(p,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[c(u(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(p,null,{default:n(()=>[c(u(e.$t("menu.settings")),1)]),_:1}),a(p,null,{default:n(()=>[c(u(e.$t("menu.database_backup")),1)]),_:1})]),_:1})]),_:1}),a(E,null,{default:n(()=>[a(b,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:n(()=>[a(f)]),_:1}),a(b,{xs:24,sm:24,md:24,lg:20,xl:20},{default:n(()=>[a(S,{ref:"settingRef"},{actionButtons:n(()=>[a(C,null,{default:n(()=>[a(v,{onSuccess:l.backupCreated},null,8,["onSuccess"]),a(k)]),_:1})]),_:1},512)]),_:1})]),_:1})],64)}const H_=K(K_,[["render",V_]]),N_=x({components:{SyncOutlined:Je},setup(){const e=I([]),s=rl,{t:m}=J(),l=I("fetching"),h=I([]),y=be(),r=[{title:m("update_app.name"),dataIndex:"name",width:"40%"},{title:m("update_app.value"),dataIndex:"value"}];return ee(()=>{axiosAdmin(ge("update-app")).then(p=>{const _=p.data.app_version;e.value=p.data.app_details,Ke.post("https://envato.codeifly.com/product",{verified_name:window.config.product_name,domain:window.location.host}).then(g=>{h.value=g.data,h.value.product.other_domain_verified?he.confirm({title:m("update_app.verify_failed"),icon:a(ie),content:m("update_app.verified_with_other_domain"),okText:m("update_app.verify_again"),okType:"danger",cancelButtonProps:{disabled:!0},onOk(){y.dispatch("auth/logoutToRootUrl")}}):h.value.product.verified?h.value.product.version!=_?l.value="update_available":l.value="success":he.confirm({title:m("update_app.verify_failed"),icon:a(ie),content:m("update_app.verify_failed_message"),okText:m("update_app.verify_again"),okType:"danger",cancelButtonProps:{disabled:!0},onOk(){y.dispatch("auth/logoutToRootUrl")}})})})}),{tableColumns:r,appDetails:e,vueVersion:s,productStatus:l,product:h,updateApp:()=>{he.confirm({title:m("common.install"),icon:a(ie),content:m("messages.are_you_sure_install_message"),okText:m("common.yes"),okType:"danger",cancelText:m("common.no"),onOk(){installUpdateModalTitle.value=m("common.installing")+"...",emit("install",props.module.verified_name),installUpdateModalVisible.value=!0},onCancel(){}})}}}}),j_=["innerHTML"],W_={class:"table-responsive mt-10"},Y_={key:1},G_={key:0},X_={key:1};function J_(e,s,m,l,h,y){const r=o("SyncOutlined"),i=o("a-alert"),p=o("a-typography-title"),_=o("a-table"),g=o("a-col"),f=o("a-row"),b=o("a-card");return d(),w(b,{class:"page-content-container mt-20 mb-20"},{default:n(()=>[a(f,{class:"mt-20"},{default:n(()=>[a(g,{span:24},{default:n(()=>[e.productStatus=="fetching"?(d(),w(i,{key:0,type:"info",showIcon:"",message:e.$t("messages.fetching_product_details")},{icon:n(()=>[a(r,{spin:""})]),default:n(()=>[O("span",{innerHTML:e.$t("messages.fetching_product_details")},null,8,j_)]),_:1},8,["message"])):$("",!0),e.productStatus=="success"?(d(),w(i,{key:1,type:"success",showIcon:"",message:e.$t("messages.product_is_upto_date")},null,8,["message"])):$("",!0),e.productStatus=="update_available"?(d(),w(i,{key:2,type:"warning",showIcon:"",message:e.$t("messages.new_app_version_avaialbe",[e.product.product.version])},null,8,["message"])):$("",!0),O("div",W_,[a(_,{columns:e.tableColumns,"row-key":v=>v.id,"data-source":e.appDetails,pagination:!1,showHeader:!1},{bodyCell:n(({column:v,record:k})=>[v.dataIndex=="name"?(d(),T(L,{key:0},[k.name=="app_details"?(d(),w(p,{key:0,level:5,strong:""},{default:n(()=>[c(u(e.$t("update_app.app_details")),1)]),_:1})):(d(),T("span",Y_,u(e.$t(`update_app.${k.name}`)),1))],64)):$("",!0),v.dataIndex=="value"?(d(),T(L,{key:1},[k.name=="vue_version"?(d(),T("span",G_,u(e.vueVersion),1)):(d(),T("span",X_,u(k.value),1))],64)):$("",!0)]),_:1},8,["columns","row-key","data-source"])])]),_:1})]),_:1})]),_:1})}const Q_=K(N_,[["render",J_]]),Z_=x({props:["productStatus","product"],components:{DownloadOutlined:ba,ShoppingCartOutlined:va,ReloadOutlined:Bt,SyncOutlined:Je,CheckCircleOutlined:La,InfoOutlined:zt,CheckOutlined:pa},setup(e,{emit:s}){const m=window.config.app_env,{t:l}=J(),h=I(!1),y=I(""),r=I(!1),i=I(""),p=I(0),_=be();var g;const f=()=>{he.confirm({title:l("common.update"),icon:a(ie),content:a("div",{style:"color:red;"},l("messages.are_you_sure_update_message")),okText:l("common.yes"),okType:"danger",cancelText:l("common.no"),onOk(){y.value=l("common.updating")+"...",b(e.product.name),h.value=!0},onCancel(){}})},b=C=>{r.value=!0,p.value=0,i.value="";const S={verified_name:C,domain:window.location.host};g=window.setInterval(function(){v()},1500),axiosAdmin.post(ge("update-app/update"),S).then(E=>{r.value=!1,p.value=100,i.value="started";const A={...S,file_name:E.data.file_name};axiosAdmin.post(ge("update-app/extract"),A).then(P=>{i.value="completed",Ke.post("https://envato.codeifly.com/version-update",{verified_name:P.data.verified_name,version:P.data.version,domain:window.location.host}),_.commit("auth/updateActiveModules",P.data.enabled_modules),window.config.modules=P.data.enabled_modules,window.config.installed_modules=P.data.installed_modules}).catch(P=>{i.value="failed"})}).catch(E=>{r.value=!1,p.value=0,clearInterval(g)})},v=()=>{axiosAdmin(ge("update-app/download-percentage")).then(C=>{p.value=parseInt(C.data.percentage),p.value>=100&&clearInterval(g)})};return{appEnv:m,updateApp:f,installUpdateModalVisible:h,closeInstallUpdateModal:()=>{h.value=!1,_.dispatch("auth/logoutToRootUrl")},downloadPercentage:p,downloading:r,extracting:i}}});function x_(e,s,m,l,h,y){const r=o("SyncOutlined"),i=o("a-button"),p=o("a-typography-text"),_=o("CheckCircleOutlined"),g=o("a-progress"),f=o("a-col"),b=o("a-row"),v=o("InfoOutlined"),k=o("CheckOutlined"),C=o("a-modal");return d(),T(L,null,[e.productStatus=="update_available"&&e.appEnv=="envato"?(d(),w(i,{key:0,type:"primary",onClick:e.updateApp},{default:n(()=>[a(r),c(" "+u(e.$t("update_app.update_app")),1)]),_:1},8,["onClick"])):$("",!0),a(C,{open:e.installUpdateModalVisible,"onUpdate:open":s[0]||(s[0]=S=>e.installUpdateModalVisible=S),title:e.$t("common.installing"),maskClosable:!1,closable:!1,footer:null},{default:n(()=>[a(b,{class:"mb-10"},{default:n(()=>[a(f,{span:24},{default:n(()=>[e.downloadPercentage<100?(d(),w(p,{key:0},{default:n(()=>[a(r,{spin:""}),c(" "+u(e.$t("messages.downloading_started_message")),1)]),_:1})):(d(),w(p,{key:1,strong:"",type:"success"},{default:n(()=>[a(_),c(" "+u(e.$t("module.downloading_completed")),1)]),_:1})),e.downloadPercentage<100?(d(),w(g,{key:2,percent:e.downloadPercentage},null,8,["percent"])):$("",!0)]),_:1})]),_:1}),a(b,{class:"mb-10"},{default:n(()=>[a(f,{span:24},{default:n(()=>[e.extracting==""?(d(),w(p,{key:0,type:"secondary"},{default:n(()=>[a(v),c(" "+u(e.$t("module.extract_zip_file")),1)]),_:1})):$("",!0),e.extracting=="started"?(d(),w(p,{key:1},{default:n(()=>[a(r,{spin:""}),c(" "+u(e.$t("messages.file_extracting_message")),1)]),_:1})):$("",!0),e.extracting=="completed"?(d(),w(p,{key:2,strong:"",type:"success"},{default:n(()=>[a(_),c(" "+u(e.$t("module.file_extracted")),1)]),_:1})):$("",!0)]),_:1})]),_:1}),e.extracting=="completed"?(d(),w(b,{key:0,class:"mt-20 mb-10"},{default:n(()=>[a(f,{span:24},{default:n(()=>[a(i,{type:"primary",onClick:e.closeInstallUpdateModal,block:""},{default:n(()=>[a(k),c(" "+u(e.$t("messages.installation_success")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})):$("",!0)]),_:1},8,["open","title"])],64)}const ef=K(Z_,[["render",x_]]),af={components:{SettingSidebar:Pe,AdminPageHeader:me,UpdateAppSettings:Q_,InstallApp:ef},setup(){return{settingRef:I(null)}}};function tf(e,s,m,l,h,y){const r=o("InstallApp"),i=o("a-page-header"),p=o("router-link"),_=o("a-breadcrumb-item"),g=o("a-breadcrumb"),f=o("AdminPageHeader"),b=o("SettingSidebar"),v=o("a-col"),k=o("UpdateAppSettings"),C=o("admin-page-table-content"),S=o("a-row");return d(),T(L,null,[a(f,null,{header:n(()=>[a(i,{title:e.$t("menu.update_app"),class:"p-0"},{extra:n(()=>[l.settingRef?(d(),w(r,{key:0,productStatus:l.settingRef.productStatus,product:l.settingRef.product.product},null,8,["productStatus","product"])):$("",!0)]),_:1},8,["title"])]),breadcrumb:n(()=>[a(g,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(_,null,{default:n(()=>[a(p,{to:{name:"admin.dashboard.index"}},{default:n(()=>[c(u(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(_,null,{default:n(()=>[c(u(e.$t("menu.settings")),1)]),_:1}),a(_,null,{default:n(()=>[c(u(e.$t("menu.update_app")),1)]),_:1})]),_:1})]),_:1}),a(S,null,{default:n(()=>[a(v,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:n(()=>[a(b)]),_:1}),a(v,{xs:24,sm:24,md:24,lg:20,xl:20},{default:n(()=>[a(C,null,{default:n(()=>[a(k,{ref:"settingRef"},null,512)]),_:1})]),_:1})]),_:1})],64)}const nf=K(af,[["render",tf]]),Ge=window.config.app_type,da=Ge=="non-saas"?"admin":"superadmin",lf=[{path:"translations",component:Ep,name:`${da}.settings.translations.index`,meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"translations",permission:Ge=="non-saas"?"translations_view":"superadmin"}},{path:"modules",component:t_,name:`${da}.settings.modules.index`,meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"modules",permission:Ge=="non-saas"?"modules_view":"superadmin"}},{path:"storage",component:r_,name:`${da}.settings.storage.index`,meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"storage_settings",permission:Ge=="non-saas"?"storage_edit":"superadmin"}},{path:"email",component:E_,name:`${da}.settings.email.index`,meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"email_settings",permission:Ge=="non-saas"?"email_edit":"superadmin"}},{path:"database-backup",component:H_,name:"admin.settings.database_backup.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"database_backup",permission:Ge=="non-saas"?"database_backup":"superadmin"}},{path:"update-app",component:nf,name:`${da}.settings.update_app.index`,meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"update_app",permission:Ge=="non-saas"?"update_app":"superadmin"}}],of={components:{InfoCircleOutlined:Qe}};function sf(e,s,m,l,h,y){const r=o("InfoCircleOutlined"),i=o("a-tooltip");return d(),w(i,null,{title:n(()=>[c(u(e.$t("mail_settings.notificaiton_will_be_sent_to_company")),1)]),default:n(()=>[a(r)]),_:1})}const df=K(of,[["render",sf]]);const rf={props:["sendMailSettings"],components:{TooltipCompany:df},setup(e){const{addEditRequestAdmin:s}=le(),{t:m}=J(),l=I([]);return ee(()=>{l.value=e.sendMailSettings.credentials}),{settings:l,settingsChanged:y=>{s({url:"settings/email/send-mail-settings",data:{name_key:"company",settings:y},success:r=>{Ue.success(m("mail_settings.send_mail_setting_saved"))}})}}}},uf={class:"notificaiton-setting-bar"},mf={style:{marginTop:"8px",paddingBottom:"14px"}};function cf(e,s,m,l,h,y){const r=o("TooltipCompany"),i=o("a-typography-title"),p=o("a-col"),_=o("a-checkbox"),g=o("a-divider"),f=o("a-row"),b=o("a-checkbox-group"),v=o("a-card"),k=o("perfect-scrollbar");return d(),T("div",uf,[a(k,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:n(()=>[a(v,{class:"page-content-container"},{title:n(()=>[O("div",mf,u(e.$t("mail_settings.send_mail_for")),1)]),default:n(()=>[a(b,{value:l.settings,"onUpdate:value":s[0]||(s[0]=C=>l.settings=C),style:{width:"100%"},onChange:l.settingsChanged},{default:n(()=>[a(f,null,{default:n(()=>[a(p,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:n(()=>[a(i,{level:5},{default:n(()=>[c(u(e.$t("menu.staff_members"))+" ",1),a(r)]),_:1})]),_:1}),a(p,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:n(()=>[a(_,{value:"staff_member_create"},{default:n(()=>[c(u(e.$t("common.on_create")),1)]),_:1})]),_:1}),a(p,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:n(()=>[a(_,{value:"staff_member_update"},{default:n(()=>[c(u(e.$t("common.on_update")),1)]),_:1})]),_:1}),a(p,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:n(()=>[a(_,{value:"staff_member_delete"},{default:n(()=>[c(u(e.$t("common.on_delete")),1)]),_:1})]),_:1}),a(g)]),_:1})]),_:1},8,["value","onChange"])]),_:1})]),_:1})])}const pf=K(rf,[["render",cf]]),_f={components:{SaveOutlined:_e,SettingSidebar:Pe,AdminPageHeader:me,SendMailSetting:pf},setup(){const e=I([]);return ee(()=>{axiosAdmin.get("settings/email").then(s=>{e.value=s.data.sendMailSettings})}),{sendMailSettings:e}}};function ff(e,s,m,l,h,y){const r=o("a-page-header"),i=o("router-link"),p=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("SettingSidebar"),b=o("a-col"),v=o("SendMailSetting"),k=o("a-row");return d(),T(L,null,[a(g,null,{header:n(()=>[a(r,{title:e.$t("menu.email_settings"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(p,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[c(u(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(p,null,{default:n(()=>[c(u(e.$t("menu.settings")),1)]),_:1}),a(p,null,{default:n(()=>[c(u(e.$t("menu.email_settings")),1)]),_:1})]),_:1})]),_:1}),a(k,null,{default:n(()=>[a(b,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:n(()=>[a(f)]),_:1}),a(b,{xs:24,sm:24,md:24,lg:20,xl:20},{default:n(()=>[a(k,null,{default:n(()=>[a(b,{xs:24,sm:24,md:24,lg:24,xl:24},{default:n(()=>[l.sendMailSettings&&l.sendMailSettings.xid?(d(),w(v,{key:0,sendMailSettings:l.sendMailSettings},null,8,["sendMailSettings"])):$("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}const gf=K(_f,[["render",ff]]),hf=window.config.app_type,bf=hf=="saas"?[{path:"email",component:gf,name:"admin.settings.email.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"email_settings",permission:"email_edit"}}]:[...lf],yf=[{path:"/admin/settings/",component:()=>Le(()=>import("./Admin-ef1230f2.js"),["assets/Admin-ef1230f2.js","assets/vendor-7d287734.js","assets/vendor-ad46f743.css","assets/Admin-14aea5fe.css"]),children:[{path:"company",component:Hc,name:"admin.settings.company.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"company",permission:"companies_edit"}},{path:"profile",component:Yc,name:"admin.settings.profile.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"profile"}},{path:"Banner",component:Jc,name:"admin.settings.banner.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"Banner"}},{path:"langs",component:np,name:"admin.settings.langs.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"translations",permission:"translations_view"}},{path:"roles",component:dp,name:"admin.settings.roles.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"roles",permission:"roles_view"}},{path:"currencies",component:_p,name:"admin.settings.currencies.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"currencies",permission:"currencies_view"}},...bf]}],vf=()=>{const s="lead-follow-ups?fields=id,xid,reference_number,lead_data,started,campaign_id,x_campaign_id,campaign{id,xid,name,status},time_taken,first_action_by,x_first_action_by,firstActioner{id,xid,name},last_action_by,x_last_action_by,lastActioner{id,xid,name},lead_follow_up_id,x_lead_follow_up_id,leadFollowUp{id,xid,log_type,time_taken,date_time,lead_id,x_lead_id,user_id,x_user_id},leadFollowUp:user{id,xid,name,profile_image,profile_image_url}",m=["lead_id","campaign_id","user_id"],{t:l}=J(),h=[{title:l("lead.reference_number"),dataIndex:"reference_number"},{title:l("lead.campaign"),dataIndex:"campaign"},{title:l("lead_follow_up.follow_up_time"),dataIndex:"date_time"},{title:l("lead_follow_up.follow_up_by"),dataIndex:"actioner"},{title:l("common.action"),dataIndex:"action"}];return{url:s,columns:h,filterableColumns:[],hashableColumns:m}},kf={components:{DoubleRightOutlined:ma,DeleteOutlined:pe,AdminPageHeader:me,DateRangePicker:oa,DeleteBooking:Ba},setup(){const{permsArray:e,getCampaignUrl:s,user:m,formatDateTime:l}=Q(),{url:h,columns:y,hashableColumns:r}=vf(),{t:i}=J(),p=be(),_=Oe(),{addEditRequestAdmin:g,loading:f,rules:b}=le(),v=wa(),k=I({campaign_id:void 0,dates:[],user_id:void 0}),C=I([]),S=I([]),E=Ve();ee(()=>{const D=s(),M=axiosAdmin.get(D),q=axiosAdmin.get("all-users?log_type=lead_follow_up");Promise.all([M,q]).then(([B,N])=>{C.value=B.data,S.value=N.data.users,k.value={...k.value,user_id:m.value.xid},e.value.includes("leads_view_all")||e.value.includes("admin"),v.hashable.value=[...r],A()})});const A=()=>{v.tableUrl.value={url:h,extraFilters:k},v.hashable.value=[...r],v.table.pagination={...v.table.pagination,current:1},v.fetch({page:1})};return{...v,...E,url:h,columns:y,formatDateTime:l,hashableColumns:r,allCampaigns:C,allUsers:S,permsArray:e,extraFilters:k,user:m,startFollowUp:D=>{he.confirm({title:i("common.start")+"?",icon:a(ie),content:i("lead_follow_up.start_follow_up_message"),centered:!0,okText:i("common.yes"),okType:"danger",cancelText:i("common.no"),onOk(){g({url:"lead-follow-ups/take-action",data:{x_lead_id:D.xid,booking_type:"lead_follow_up"},success:M=>{M&&M.lead_id&&_.push({name:"admin.call_manager.take_action",params:{id:M.lead_id}})}})},onCancel(){}})},setUrlData:A,showSelectedDeleteConfirm:()=>{he.confirm({title:i("common.delete")+"?",icon:a(ie),content:i("lead_follow_up.selected_delete_message"),centered:!0,okText:i("common.yes"),okType:"danger",cancelText:i("common.no"),onOk(){const D=[];fe(v.table.selectedRowKeys,M=>{D.push(axiosAdmin.post("lead-follow-ups/delete",{x_lead_id:M,booking_type:"lead_follow_up"}))}),Promise.all(D).then(M=>{p.dispatch("auth/updateVisibleSubscriptionModules"),v.fetch({page:v.currentPage.value}),$e.success({message:i("common.success"),description:i("lead_follow_up.deleted"),placement:"bottomRight"})})},onCancel(){}})}}}},Cf={class:"table-responsive"};function wf(e,s,m,l,h,y){const r=o("a-page-header"),i=o("router-link"),p=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("DeleteOutlined"),b=o("a-button"),v=o("a-col"),k=o("a-select-option"),C=o("a-select"),S=o("DateRangePicker"),E=o("a-row"),A=o("admin-page-filters"),P=o("DoubleRightOutlined"),U=o("a-tooltip"),D=o("DeleteBooking"),M=o("a-space"),q=o("a-table"),B=o("admin-page-table-content"),N=o("view-lead-details");return d(),T(L,null,[a(g,null,{header:n(()=>[a(r,{title:e.$t("menu.lead_follow_up"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(p,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[c(u(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(p,null,{default:n(()=>[c(u(e.$t("menu.bookings")),1)]),_:1}),a(p,null,{default:n(()=>[c(u(e.$t("menu.lead_follow_up")),1)]),_:1})]),_:1})]),_:1}),a(A,null,{default:n(()=>[a(E,{gutter:[16,16]},{default:n(()=>[a(v,{xs:24,sm:24,md:12,lg:10,xl:10},{default:n(()=>[e.table.selectedRowKeys.length>0&&(l.permsArray.includes("leads_view_all")||l.permsArray.includes("admin"))?(d(),w(b,{key:0,type:"primary",onClick:l.showSelectedDeleteConfirm,danger:""},{icon:n(()=>[a(f)]),default:n(()=>[c(" "+u(e.$t("common.delete")),1)]),_:1},8,["onClick"])):$("",!0)]),_:1}),a(v,{xs:24,sm:24,md:12,lg:14,xl:14},{default:n(()=>[a(E,{gutter:[16,16],justify:"end"},{default:n(()=>[a(v,{xs:24,sm:24,md:12,lg:8,xl:6},{default:n(()=>[a(C,{value:l.extraFilters.campaign_id,"onUpdate:value":s[0]||(s[0]=R=>l.extraFilters.campaign_id=R),placeholder:e.$t("common.select_default_text",[e.$t("lead.campaign")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:l.setUrlData},{default:n(()=>[(d(!0),T(L,null,X(l.allCampaigns,R=>(d(),w(k,{key:R.xid,title:R.name,value:R.xid},{default:n(()=>[c(u(R.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1}),l.permsArray.includes("leads_view_all")||l.permsArray.includes("admin")?(d(),w(v,{key:0,xs:24,sm:24,md:12,lg:8,xl:6},{default:n(()=>[a(C,{value:l.extraFilters.user_id,"onUpdate:value":s[1]||(s[1]=R=>l.extraFilters.user_id=R),placeholder:e.$t("common.select_default_text",[e.$t("user.user")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:l.setUrlData},{default:n(()=>[(d(!0),T(L,null,X(l.allUsers,R=>(d(),w(k,{key:R.xid,title:R.name,value:R.xid},{default:n(()=>[c(u(R.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1})):$("",!0),a(v,{xs:24,sm:24,md:8,lg:8,xl:6},{default:n(()=>[a(S,{onDateTimeChanged:s[2]||(s[2]=R=>{l.extraFilters.dates=R,l.setUrlData()})})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(B,null,{default:n(()=>[a(E,null,{default:n(()=>[a(v,{span:24},{default:n(()=>[O("div",Cf,[a(q,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:R=>({disabled:!1,name:R.xid})},columns:l.columns,"row-key":R=>R.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:n(({column:R,record:F})=>[R.dataIndex==="reference_number"?(d(),w(b,{key:0,type:"link",class:"p-0",onClick:z=>e.showViewDrawer(F)},{default:n(()=>[c(u(F.reference_number!=""&&F.reference_number!=null?F.reference_number:"---"),1)]),_:2},1032,["onClick"])):$("",!0),R.dataIndex==="date_time"?(d(),T(L,{key:1},[c(u(l.formatDateTime(F.lead_follow_up.date_time)),1)],64)):$("",!0),R.dataIndex==="campaign"?(d(),T(L,{key:2},[c(u(F.campaign&&F.campaign.name?F.campaign.name:"-"),1)],64)):$("",!0),R.dataIndex==="actioner"?(d(),T(L,{key:3},[c(u(F.lead_follow_up&&F.lead_follow_up.user&&F.lead_follow_up.user.name?F.lead_follow_up.user.name:"-"),1)],64)):$("",!0),R.dataIndex==="action"?(d(),w(M,{key:4},{default:n(()=>[F.lead_follow_up.x_user_id==l.user.xid?(d(),w(U,{key:0,title:e.$t("lead_follow_up.start_follow_up")},{default:n(()=>[a(b,{type:"primary",onClick:z=>l.startFollowUp(F)},{icon:n(()=>[a(P)]),_:2},1032,["onClick"])]),_:2},1032,["title"])):$("",!0),l.permsArray.includes("leads_view_all")||l.permsArray.includes("admin")?(d(),w(D,{key:1,bookingType:"lead_follow_up",onSuccess:l.setUrlData,xLeadId:F.xid,showDeleteText:!1},null,8,["onSuccess","xLeadId"])):$("",!0)]),_:2},1024)):$("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1}),a(N,{visible:e.isViewDrawerVisible,lead:e.viewDrawerData,onClose:e.hideViewDrawer},null,8,["visible","lead","onClose"])],64)}const Sf=K(kf,[["render",wf]]),Df=()=>{const s="salesman-bookings?fields=id,xid,reference_number,lead_data,started,campaign_id,x_campaign_id,campaign{id,xid,name,status},time_taken,first_action_by,x_first_action_by,firstActioner{id,xid,name},last_action_by,x_last_action_by,lastActioner{id,xid,name},salesman_booking_id,x_salesman_booking_id,salesmanBooking{id,xid,log_type,time_taken,date_time,lead_id,x_lead_id,user_id,x_user_id,created_by_id,x_created_by_id},salesmanBooking:user{id,xid,name,profile_image,profile_image_url}",m=["lead_id","campaign_id","user_id"],{t:l}=J(),h=[{title:l("lead.reference_number"),dataIndex:"reference_number"},{title:l("lead.campaign"),dataIndex:"campaign"},{title:l("lead.booking_time"),dataIndex:"date_time"},{title:l("salesman.salesman"),dataIndex:"actioner"},{title:l("common.action"),dataIndex:"action"}];return{url:s,columns:h,filterableColumns:[],hashableColumns:m}},$f={components:{PlayCircleOutlined:Me,InfoCircleOutlined:Qe,DeleteOutlined:pe,PlusOutlined:ae,AdminPageHeader:me,DateRangePicker:oa,DeleteBooking:Ba},setup(){const{permsArray:e,getCampaignUrl:s,user:m,formatDateTime:l}=Q(),{url:h,columns:y,hashableColumns:r}=Df(),{t:i}=J(),p=be(),_=Oe();le();const g=wa(),f=I({campaign_id:void 0,dates:[],user_id:void 0}),b=I([]),v=I([]),k=Ve();ee(()=>{const A=s(),P=axiosAdmin.get(A),U=axiosAdmin.get("all-users?log_type=salesman_bookings");Promise.all([P,U]).then(([D,M])=>{b.value=D.data,v.value=M.data.users,e.value.includes("leads_view_all")||e.value.includes("admin"),g.hashable.value=[...r],C()})});const C=()=>{g.tableUrl.value={url:h,extraFilters:f},g.hashable.value=[...r],g.table.pagination={...g.table.pagination,current:1},g.fetch({page:1})};return{...g,...k,url:h,columns:y,formatDateTime:l,hashableColumns:r,allCampaigns:b,allUsers:v,permsArray:e,extraFilters:f,user:m,setUrlData:C,goAndResumeLead:A=>{he.confirm({title:i("common.are_you_sure")+"?",icon:a(ie),content:i("lead.are_you_want_to_resume_this_lead"),centered:!0,okText:i("common.yes"),okType:"danger",cancelText:i("common.no"),onOk(){_.push({name:"admin.call_manager.take_action",params:{id:A.xid}})},onCancel(){}})},showSelectedDeleteConfirm:()=>{he.confirm({title:i("common.delete")+"?",icon:a(ie),content:i("salesman_booking.selected_delete_message"),centered:!0,okText:i("common.yes"),okType:"danger",cancelText:i("common.no"),onOk(){const A=[];fe(g.table.selectedRowKeys,P=>{A.push(axiosAdmin.post("salesman-bookings",{x_lead_id:P,booking_type:"salesman_bookings"}))}),Promise.all(A).then(P=>{p.dispatch("auth/updateVisibleSubscriptionModules"),g.fetch({page:g.currentPage.value}),$e.success({message:i("common.success"),description:i("salesman_booking.deleted"),placement:"bottomRight"})})},onCancel(){}})}}}},Af={class:"table-responsive"},Tf={key:1};function Ef(e,s,m,l,h,y){const r=o("a-page-header"),i=o("router-link"),p=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("DeleteOutlined"),b=o("a-button"),v=o("a-space"),k=o("a-col"),C=o("a-select-option"),S=o("a-select"),E=o("DateRangePicker"),A=o("a-row"),P=o("admin-page-filters"),U=o("PlayCircleOutlined"),D=o("a-tooltip"),M=o("DeleteBooking"),q=o("InfoCircleOutlined"),B=o("a-table"),N=o("admin-page-table-content"),R=o("view-lead-details");return d(),T(L,null,[a(g,null,{header:n(()=>[a(r,{title:e.$t("menu.salesman_bookings"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(p,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[c(u(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(p,null,{default:n(()=>[c(u(e.$t("menu.bookings")),1)]),_:1}),a(p,null,{default:n(()=>[c(u(e.$t("menu.salesman_bookings")),1)]),_:1})]),_:1})]),_:1}),a(P,null,{default:n(()=>[a(A,{gutter:[16,16]},{default:n(()=>[a(k,{xs:24,sm:24,md:12,lg:10,xl:10},{default:n(()=>[a(v,null,{default:n(()=>[e.table.selectedRowKeys.length>0&&(l.permsArray.includes("salesman_bookings_delete")||l.permsArray.includes("admin"))?(d(),w(b,{key:0,type:"primary",onClick:l.showSelectedDeleteConfirm,danger:""},{icon:n(()=>[a(f)]),default:n(()=>[c(" "+u(e.$t("common.delete")),1)]),_:1},8,["onClick"])):$("",!0)]),_:1})]),_:1}),a(k,{xs:24,sm:24,md:12,lg:14,xl:14},{default:n(()=>[a(A,{gutter:[16,16],justify:"end"},{default:n(()=>[a(k,{xs:24,sm:24,md:12,lg:8,xl:6},{default:n(()=>[a(S,{value:l.extraFilters.campaign_id,"onUpdate:value":s[0]||(s[0]=F=>l.extraFilters.campaign_id=F),placeholder:e.$t("common.select_default_text",[e.$t("lead.campaign")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:l.setUrlData},{default:n(()=>[(d(!0),T(L,null,X(l.allCampaigns,F=>(d(),w(C,{key:F.xid,title:F.name,value:F.xid},{default:n(()=>[c(u(F.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1}),a(k,{xs:24,sm:24,md:12,lg:8,xl:6},{default:n(()=>[a(S,{value:l.extraFilters.user_id,"onUpdate:value":s[1]||(s[1]=F=>l.extraFilters.user_id=F),placeholder:e.$t("common.select_default_text",[e.$t("salesman.salesman")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:l.setUrlData},{default:n(()=>[(d(!0),T(L,null,X(l.allUsers,F=>(d(),w(C,{key:F.xid,title:F.name,value:F.xid},{default:n(()=>[c(u(F.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1}),a(k,{xs:24,sm:24,md:8,lg:8,xl:6},{default:n(()=>[a(E,{onDateTimeChanged:s[2]||(s[2]=F=>{l.extraFilters.dates=F,l.setUrlData()})})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(N,null,{default:n(()=>[a(A,{class:"mt-20"},{default:n(()=>[a(k,{span:24},{default:n(()=>[O("div",Af,[a(B,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:F=>({disabled:!1,name:F.xid})},columns:l.columns,"row-key":F=>F.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:n(({column:F,record:z})=>[F.dataIndex==="reference_number"?(d(),w(b,{key:0,type:"link",class:"p-0",onClick:Z=>e.showViewDrawer(z)},{default:n(()=>[c(u(z.reference_number!=""&&z.reference_number!=null?z.reference_number:"---"),1)]),_:2},1032,["onClick"])):$("",!0),F.dataIndex==="date_time"?(d(),T(L,{key:1},[c(u(l.formatDateTime(z.salesman_booking.date_time)),1)],64)):$("",!0),F.dataIndex==="campaign"?(d(),T(L,{key:2},[c(u(z.campaign&&z.campaign.name?z.campaign.name:"-"),1)],64)):$("",!0),F.dataIndex==="actioner"?(d(),T(L,{key:3},[c(u(z.salesman_booking&&z.salesman_booking.user&&z.salesman_booking.user.name?z.salesman_booking.user.name:"-"),1)],64)):$("",!0),F.dataIndex==="action"?(d(),T(L,{key:4},[z.x_last_action_by==l.user.xid?(d(),w(v,{key:0},{default:n(()=>[a(D,{title:e.$t("lead.go_resume_call")},{default:n(()=>[a(b,{type:"primary",onClick:Z=>l.goAndResumeLead(z)},{icon:n(()=>[a(U)]),_:2},1032,["onClick"])]),_:2},1032,["title"]),a(M,{bookingType:"salesman_bookings",onSuccess:l.setUrlData,xLeadId:z.xid,showDeleteText:!1},null,8,["onSuccess","xLeadId"])]),_:2},1024)):(d(),T("span",Tf,[a(D,null,{title:n(()=>[c(u(e.$t("salesman_booking.you_are_not_last_actioner")),1)]),default:n(()=>[a(q)]),_:1})]))],64)):$("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1}),a(R,{visible:e.isViewDrawerVisible,lead:e.viewDrawerData,onClose:e.hideViewDrawer},null,8,["visible","lead","onClose"])],64)}const Uf=K($f,[["render",Ef]]),Of=[{path:"/",component:()=>Le(()=>import("./Admin-ef1230f2.js"),["assets/Admin-ef1230f2.js","assets/vendor-7d287734.js","assets/vendor-ad46f743.css","assets/Admin-14aea5fe.css"]),children:[{path:"/admin/bookings/lead-follow-up",component:Sf,name:"admin.bookings.lead_follow_up.index",meta:{requireAuth:!0,menuParent:"lead_follow_up",menuKey:"lead_follow_up"}},{path:"/admin/bookings/salesman-bookings",component:Uf,name:"admin.bookings.salesman_bookings.index",meta:{requireAuth:!0,menuParent:"salesmans",menuKey:"salesman_bookings"}}]}],Pf={props:{showFilter:{default:!0},panelType:{type:String,default:"admin"}},emits:["addOrEditSuccess"],components:{PlusOutlined:ae,EditOutlined:ye,DeleteOutlined:pe,AddEdit:Ha},setup(e,{emit:s}){const{permsArray:m,appSetting:l}=Q(),{url:h,addEditUrl:y,initData:r,columns:i,filterableColumns:p}=Va(e.panelType),_=Te();return ee(()=>{_.tableUrl.value={url:h},_.table.filterableColumns=p,_.fetch({page:1}),_.crudUrl.value=y,_.langKey.value="currency",_.initData.value={...r},_.formData.value={...r}}),{appSetting:l,permsArray:m,columns:i,..._,filterableColumns:p,addOrEditSuccess:f=>{_.addEditSuccess(f),s("addOrEditSuccess",{action_type:_.addEditType.value,xid:f})}}}},If={class:"table-responsive"};function Ff(e,s,m,l,h,y){const r=o("AddEdit"),i=o("a-select-option"),p=o("a-select"),_=o("a-input-search"),g=o("a-input-group"),f=o("a-col"),b=o("a-row"),v=o("EditOutlined"),k=o("a-button"),C=o("DeleteOutlined"),S=o("a-table");return d(),T("div",null,[a(r,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:l.addOrEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),m.showFilter?(d(),w(b,{key:0,gutter:[15,15],class:"mb-20"},{default:n(()=>[a(f,{xs:24,sm:24,md:12,lg:8,xl:8},{default:n(()=>[a(g,{compact:""},{default:n(()=>[a(p,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=E=>e.table.searchColumn=E),placeholder:e.$t("common.select_default_text",[""])},{default:n(()=>[(d(!0),T(L,null,X(l.filterableColumns,E=>(d(),w(i,{key:E.key},{default:n(()=>[c(u(E.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),a(_,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=E=>e.table.searchString=E),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})):$("",!0),a(b,{class:"mt-20"},{default:n(()=>[a(f,{span:24},{default:n(()=>[O("div",If,[a(S,{columns:l.columns,"row-key":E=>E.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange},{bodyCell:n(({column:E,record:A})=>[E.dataIndex==="action"?(d(),T(L,{key:0},[m.panelType=="admin"&&(l.permsArray.includes("currencies_edit")||l.permsArray.includes("admin"))||m.panelType=="superadmin"?(d(),w(k,{key:0,type:"primary",onClick:P=>e.editItem(A),style:{"margin-left":"4px"}},{icon:n(()=>[a(v)]),_:2},1032,["onClick"])):$("",!0),(m.panelType=="admin"&&(l.permsArray.includes("currencies_delete")||l.permsArray.includes("admin"))||m.panelType=="superadmin")&&l.appSetting.x_currency_id!=A.xid?(d(),w(k,{key:1,type:"primary",onClick:P=>e.showDeleteConfirm(A.xid),style:{"margin-left":"4px"}},{icon:n(()=>[a(C)]),_:2},1032,["onClick"])):$("",!0)],64)):$("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})])}const Mf=K(Pf,[["render",Ff]]),Rf={props:{showSubmitButton:{default:!0}},emits:["updateSuccess"],components:{EyeOutlined:Re,PlusOutlined:ae,EditOutlined:ye,DeleteOutlined:pe,ExclamationCircleOutlined:ie,SaveOutlined:_e,SettingOutlined:Ca,ColorPicker:qt,Upload:We,CurrencyAddButton:fn,CreateMenuSetting:bn,FormItemHeading:tn,LanguageAddButton:Da},setup(e,{emit:s}){const{addEditRequestAdmin:m,loading:l,rules:h}=le(),{permsArray:y,appSetting:r,dayjsObject:i,appType:p}=Q(),{t:_}=J(),g=be(),f=I({}),b=I([]),v=I([]),k=I([]),C=I([]),S=r.value,E="currencies?limit=10000",A="timezones",P=I("linear-gradient(0deg, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 1) 100%)"),U=window.config.theme_mode,D=I([]),M="all-langs";ee(()=>{const z=axiosAdmin.get(E),Z=axiosAdmin.get(A),ne=axiosAdmin.get(M);Promise.all([z,Z,ne]).then(([V,W,H])=>{b.value=V.data,v.value=W.data.timezones,k.value=W.data.date_formates,C.value=W.data.time_formates,D.value=H.data.langs,q()})});const q=()=>{f.value={name:S.name,short_name:S.short_name,email:S.email,phone:S.phone,address:S.address,left_sidebar_theme:S.left_sidebar_theme,dark_logo:S.dark_logo,dark_logo_url:S.dark_logo_url,light_logo:S.light_logo,light_logo_url:S.light_logo_url,small_dark_logo:S.small_dark_logo,small_light_logo:S.small_light_logo,small_dark_logo_url:S.small_dark_logo_url,small_light_logo_url:S.small_light_logo_url,login_image:S.login_image,login_image_url:S.login_image_url,shortcut_menus:S.shortcut_menus,rtl:S.rtl,currency_id:S.x_currency_id,lang_id:S.x_lang_id,primary_color:S.primary_color,timezone:S.timezone,date_format:S.date_format,time_format:S.time_format,auto_detect_timezone:S.auto_detect_timezone,app_debug:S.app_debug,update_app_notification:S.update_app_notification,_method:"PUT"}};return{appType:p,permsArray:y,formData:f,loading:l,rules:h,currencies:b,onSubmit:()=>{m({url:`companies/${S.xid}`,data:f.value,successMessage:_("company.updated"),success:z=>{g.dispatch("auth/updateApp"),s("updateSuccess")}})},currencyAdded:()=>{axiosAdmin.get(E).then(z=>{b.value=z.data})},gradientColor:P,timezones:v,dateFormats:k,timeFormats:C,dayjsObject:i,appThemeMode:U,addMenuSettingUpdated:z=>{f.value.shortcut_menus=z},allLangs:D,languageAdded:()=>{axiosAdmin.get(M).then(z=>{D.value=z.data.langs})}}}},Lf={class:"mt-40"},qf={style:{display:"flex"}},Bf={style:{display:"flex"}},zf={class:"mt-30"},Kf={class:"mt-30"};function Vf(e,s,m,l,h,y){const r=o("FormItemHeading"),i=o("a-input"),p=o("a-form-item"),_=o("a-col"),g=o("a-row"),f=o("a-select-option"),b=o("a-select"),v=o("CurrencyAddButton"),k=o("LanguageAddButton"),C=o("a-switch"),S=o("color-picker"),E=o("Upload"),A=o("SaveOutlined"),P=o("a-button"),U=o("a-form");return d(),w(U,{layout:"vertical"},{default:n(()=>[O("div",Lf,[a(r,null,{default:n(()=>[c(u(e.$t("setup_company.basic_settings")),1)]),_:1})]),a(g,{gutter:16},{default:n(()=>[a(_,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(p,{label:e.$t("company.name"),name:"name",help:l.rules.name?l.rules.name.message:null,validateStatus:l.rules.name?"error":null,class:"required"},{default:n(()=>[a(i,{value:l.formData.name,"onUpdate:value":s[0]||(s[0]=D=>l.formData.name=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(_,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(p,{label:e.$t("company.short_name"),name:"short_name",help:l.rules.short_name?l.rules.short_name.message:null,validateStatus:l.rules.short_name?"error":null,class:"required"},{default:n(()=>[a(i,{value:l.formData.short_name,"onUpdate:value":s[1]||(s[1]=D=>l.formData.short_name=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.short_name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(g,{gutter:16},{default:n(()=>[a(_,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(p,{label:e.$t("company.email"),name:"email",help:l.rules.email?l.rules.email.message:null,validateStatus:l.rules.email?"error":null,class:"required"},{default:n(()=>[a(i,{value:l.formData.email,"onUpdate:value":s[2]||(s[2]=D=>l.formData.email=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(_,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(p,{label:e.$t("company.phone"),name:"phone",help:l.rules.phone?l.rules.phone.message:null,validateStatus:l.rules.phone?"error":null,class:"required"},{default:n(()=>[a(i,{value:l.formData.phone,"onUpdate:value":s[3]||(s[3]=D=>l.formData.phone=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.phone")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(g,{gutter:16},{default:n(()=>[a(_,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(p,{label:e.$t("company.date_format"),name:"date_format",help:l.rules.date_format?l.rules.date_format.message:null,validateStatus:l.rules.date_format?"error":null,class:"required"},{default:n(()=>[a(b,{value:l.formData.date_format,"onUpdate:value":s[4]||(s[4]=D=>l.formData.date_format=D),placeholder:e.$t("common.select_default_text",[e.$t("company.date_format")]),allowClear:!0,optionFilterProp:"value","show-search":""},{default:n(()=>[(d(!0),T(L,null,X(l.dateFormats,(D,M)=>(d(),w(f,{key:M,value:D},{default:n(()=>[c(u(`(${M}) => `+l.dayjsObject().format(D)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(_,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(p,{label:e.$t("company.time_format"),name:"time_format",help:l.rules.time_format?l.rules.time_format.message:null,validateStatus:l.rules.time_format?"error":null,class:"required"},{default:n(()=>[a(b,{value:l.formData.time_format,"onUpdate:value":s[5]||(s[5]=D=>l.formData.time_format=D),placeholder:e.$t("common.select_default_text",[e.$t("company.time_format")]),allowClear:!0,optionFilterProp:"value","show-search":""},{default:n(()=>[(d(!0),T(L,null,X(l.timeFormats,(D,M)=>(d(),w(f,{key:M,value:M},{default:n(()=>[c(u(`(${D}) => `+l.dayjsObject().format(M)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(g,{gutter:16},{default:n(()=>[a(_,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(p,{label:e.$t("company.currency"),name:"currency_id",help:l.rules.currency_id?l.rules.currency_id.message:null,validateStatus:l.rules.currency_id?"error":null,class:"required"},{default:n(()=>[O("span",qf,[a(b,{value:l.formData.currency_id,"onUpdate:value":s[6]||(s[6]=D=>l.formData.currency_id=D),placeholder:e.$t("common.select_default_text",[e.$t("company.currency")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:n(()=>[(d(!0),T(L,null,X(l.currencies,D=>(d(),w(f,{key:D.xid,value:D.xid},{default:n(()=>[c(u(`${D.name} (${D.symbol})`),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),a(v,{onOnAddSuccess:l.currencyAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(_,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(p,{label:e.$t("company.language"),name:"lang_id",help:l.rules.lang_id?l.rules.lang_id.message:null,validateStatus:l.rules.lang_id?"error":null,class:"required"},{default:n(()=>[O("span",Bf,[a(b,{value:l.formData.lang_id,"onUpdate:value":s[7]||(s[7]=D=>l.formData.lang_id=D),placeholder:e.$t("common.select_default_text",[e.$t("company.language")]),optionFilterProp:"label","show-search":""},{default:n(()=>[(d(!0),T(L,null,X(l.allLangs,D=>(d(),w(f,{key:D.xid,value:D.xid},{default:n(()=>[c(u(D.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),a(k,{onOnAddSuccess:l.languageAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(g,{gutter:16},{default:n(()=>[a(_,{xs:24,sm:24,md:4,lg:4},{default:n(()=>[a(p,{label:e.$t("company.auto_detect_timezone"),name:"auto_detect_timezone",help:l.rules.auto_detect_timezone?l.rules.auto_detect_timezone.message:null,validateStatus:l.rules.auto_detect_timezone?"error":null},{default:n(()=>[a(C,{checked:l.formData.auto_detect_timezone,"onUpdate:checked":s[8]||(s[8]=D=>l.formData.auto_detect_timezone=D),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(_,{xs:24,sm:24,md:8,lg:8},{default:n(()=>[a(p,{label:e.$t("company.default_timezone"),name:"timezone",help:l.rules.timezone?l.rules.timezone.message:null,validateStatus:l.rules.timezone?"error":null,class:"required"},{default:n(()=>[a(b,{value:l.formData.timezone,"onUpdate:value":s[9]||(s[9]=D=>l.formData.timezone=D),placeholder:e.$t("common.select_default_text",[e.$t("company.default_timezone")]),allowClear:!0,optionFilterProp:"value","show-search":""},{default:n(()=>[(d(!0),T(L,null,X(l.timezones,(D,M)=>(d(),w(f,{key:M,value:D},{default:n(()=>[c(u(D),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l.appType=="non-saas"?(d(),w(_,{key:0,xs:24,sm:24,md:4,lg:4},{default:n(()=>[a(p,{label:e.$t("company.app_debug"),name:"app_debug",help:l.rules.app_debug?l.rules.app_debug.message:null,validateStatus:l.rules.app_debug?"error":null},{default:n(()=>[a(C,{checked:l.formData.app_debug,"onUpdate:checked":s[10]||(s[10]=D=>l.formData.app_debug=D),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1})):$("",!0),l.appType=="non-saas"?(d(),w(_,{key:1,xs:24,sm:24,md:4,lg:4},{default:n(()=>[a(p,{label:e.$t("company.update_app_notification"),name:"update_app_notification",help:l.rules.update_app_notification?l.rules.update_app_notification.message:null,validateStatus:l.rules.update_app_notification?"error":null},{default:n(()=>[a(C,{checked:l.formData.update_app_notification,"onUpdate:checked":s[11]||(s[11]=D=>l.formData.update_app_notification=D),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1})):$("",!0)]),_:1}),O("div",zf,[a(r,null,{default:n(()=>[c(u(e.$t("setup_company.theme_settings")),1)]),_:1})]),a(g,{gutter:16},{default:n(()=>[a(_,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(p,{label:e.$t("company.left_sidebar_theme"),name:"left_sidebar_theme",help:l.rules.left_sidebar_theme?l.rules.left_sidebar_theme.message:null,validateStatus:l.rules.left_sidebar_theme?"error":null},{default:n(()=>[a(b,{value:l.formData.left_sidebar_theme,"onUpdate:value":s[12]||(s[12]=D=>l.formData.left_sidebar_theme=D),placeholder:e.$t("common.select_default_text",[e.$t("company.left_sidebar_theme")])},{default:n(()=>[a(f,{key:"dark",value:"dark"},{default:n(()=>[c(u(e.$t("company.dark")),1)]),_:1}),l.appThemeMode!="dark"?(d(),w(f,{key:"light",value:"light"},{default:n(()=>[c(u(e.$t("company.light")),1)]),_:1})):$("",!0)]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(_,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(p,{label:e.$t("company.primary_color"),name:"primary_color",help:l.rules.primary_color?l.rules.primary_color.message:null,validateStatus:l.rules.primary_color?"error":null},{default:n(()=>[a(S,{pureColor:l.formData.primary_color,"onUpdate:pureColor":s[13]||(s[13]=D=>l.formData.primary_color=D),format:"hex",useType:"pure",gradientColor:l.gradientColor,"onUpdate:gradientColor":s[14]||(s[14]=D=>l.gradientColor=D)},null,8,["pureColor","gradientColor"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(g,{gutter:16},{default:n(()=>[a(_,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(p,{label:e.$t("company.layout"),name:"rtl",help:l.rules.rtl?l.rules.rtl.message:null,validateStatus:l.rules.rtl?"error":null,class:"required"},{default:n(()=>[a(b,{value:l.formData.rtl,"onUpdate:value":s[15]||(s[15]=D=>l.formData.rtl=D),placeholder:e.$t("common.select_default_text",[e.$t("company.layout")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:n(()=>[a(f,{key:"rtl",value:1},{default:n(()=>[c(u(e.$t("company.rtl")),1)]),_:1}),a(f,{key:"ltr",value:0},{default:n(()=>[c(u(e.$t("company.ltr")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(_,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(p,{label:e.$t("company.shortcut_menu_Placement"),name:"shortcut_menus",help:l.rules.shortcut_menus?l.rules.shortcut_menus.message:null,validateStatus:l.rules.shortcut_menus?"error":null,class:"required"},{default:n(()=>[a(b,{value:l.formData.shortcut_menus,"onUpdate:value":s[16]||(s[16]=D=>l.formData.shortcut_menus=D),placeholder:e.$t("common.select_default_text",[e.$t("company.shortcut_menu_Placement")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:n(()=>[a(f,{key:"top_bottom",value:"top_bottom"},{default:n(()=>[c(u(e.$t("company.top_and_bottom")),1)]),_:1}),a(f,{key:"top",value:"top"},{default:n(()=>[c(u(e.$t("company.top_header")),1)]),_:1}),a(f,{key:"bottom",value:"bottom"},{default:n(()=>[c(u(e.$t("company.bottom_corner")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),O("div",Kf,[a(r,null,{default:n(()=>[c(u(e.$t("setup_company.logo_settings")),1)]),_:1})]),a(g,{gutter:16},{default:n(()=>[a(_,{xs:24,sm:24,md:6,lg:6},{default:n(()=>[a(p,{label:e.$t("company.dark_logo"),name:"dark_logo",help:l.rules.dark_logo?l.rules.dark_logo.message:null,validateStatus:l.rules.dark_logo?"error":null},{default:n(()=>[a(E,{formData:l.formData,folder:"company",imageField:"dark_logo",onOnFileUploaded:s[17]||(s[17]=D=>{l.formData.dark_logo=D.file,l.formData.dark_logo_url=D.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(_,{xs:24,sm:24,md:6,lg:6},{default:n(()=>[a(p,{label:e.$t("company.light_logo"),name:"light_logo",help:l.rules.light_logo?l.rules.light_logo.message:null,validateStatus:l.rules.light_logo?"error":null},{default:n(()=>[a(E,{formData:l.formData,folder:"company",imageField:"light_logo",onOnFileUploaded:s[18]||(s[18]=D=>{l.formData.light_logo=D.file,l.formData.light_logo_url=D.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(_,{xs:24,sm:24,md:6,lg:6},{default:n(()=>[a(p,{label:e.$t("company.small_dark_logo"),name:"small_dark_logo",help:l.rules.small_dark_logo?l.rules.small_dark_logo.message:null,validateStatus:l.rules.small_dark_logo?"error":null},{default:n(()=>[a(E,{formData:l.formData,folder:"company",imageField:"small_dark_logo",onOnFileUploaded:s[19]||(s[19]=D=>{l.formData.small_dark_logo=D.file,l.formData.small_dark_logo_url=D.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(_,{xs:24,sm:24,md:6,lg:6},{default:n(()=>[a(p,{label:e.$t("company.small_light_logo"),name:"small_light_logo",help:l.rules.small_light_logo?l.rules.small_light_logo.message:null,validateStatus:l.rules.small_light_logo?"error":null},{default:n(()=>[a(E,{formData:l.formData,folder:"company",imageField:"small_light_logo",onOnFileUploaded:s[20]||(s[20]=D=>{l.formData.small_light_logo=D.file,l.formData.small_light_logo_url=D.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l.appType=="non-saas"?(d(),w(g,{key:0,gutter:16},{default:n(()=>[a(_,{xs:24,sm:24,md:6,lg:6},{default:n(()=>[a(p,{label:e.$t("company.login_image"),name:"login_image",help:l.rules.login_image?l.rules.login_image.message:null,validateStatus:l.rules.login_image?"error":null},{default:n(()=>[a(E,{formData:l.formData,folder:"company",imageField:"login_image",onOnFileUploaded:s[21]||(s[21]=D=>{l.formData.login_image=D.file,l.formData.login_image_url=D.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})):$("",!0),m.showSubmitButton?(d(),w(g,{key:1,gutter:16},{default:n(()=>[a(_,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(p,null,{default:n(()=>[a(P,{type:"primary",onClick:l.onSubmit,loading:l.loading},{icon:n(()=>[a(A)]),default:n(()=>[c(" "+u(e.$t("common.update")),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1})):$("",!0)]),_:1})}const Hf=K(Rf,[["render",Vf]]),Nf=x({components:{PlusOutlined:ae,EditOutlined:ye,DeleteOutlined:pe,DoubleRightOutlined:ma,DoubleLeftOutlined:Et,SaveOutlined:_e,SyncOutlined:Je,CheckCircleOutlined:La,HomeOutlined:ul,InfoCircleOutlined:Qe,CurrencyTable:Mf,EditSetupSetting:Hf},setup(){Q();const e=Oe(),s=be(),m=I(null),l=I(null),h=I(null),y=I([]),r=I(0),i=I(0),p=qe({currencyStepStatus:"wait",companySettingStepStatus:"wait"}),_=I(!1),g=I(!1);ee(()=>{f()});const f=()=>{axiosAdmin.get("app").then(D=>{y.value=D.data,p.currencyStepStatus=y.value.total_currencies>0?"finish":"wait",p.companySettingStepStatus=b()==!1?"finish":"wait",y.value.total_currencies==0?(r.value=0,i.value=0,p.currencyStepStatus="error"):b()?(r.value=1,i.value=1,p.companySettingStepStatus="error"):(r.value=1,i.value=1,g.value=!0,_.value=!0)})},b=()=>y.value.app.x_currency_id==null,v=()=>{l.value.addItem()},k=D=>{f()},C=()=>{h.value.onSubmit()},S=()=>{_.value=!0,axiosAdmin.post("/user").then(function(D){s.commit("auth/updateUser",D.data.user),g.value=!0}).catch(function(D){})},E=()=>{_.value=!1,e.push({name:"admin.dashboard.index"})},A=()=>{r.value=r.value==0?0:r.value-1},P=()=>{r.value=r.value>=1?1:r.value+1},U=()=>{s.dispatch("auth/logout")};return{appDetails:y,currentStep:r,correctStep:i,...Ft(p),warhouseTableRef:m,currencyTableRef:l,addCurrency:v,currencyAddSuccess:k,companySettingRef:h,submitCompanySetting:C,companySettingUpdated:S,showFinalModal:_,setupCompleted:g,goToDashboard:E,goBack:A,goNext:P,logout:U}}}),jf=["src"],Wf={style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"left",zIndex:1,marginBottom:"10px"}},Yf={key:0,style:{color:"#7676e3"}},Gf={key:1,style:{color:"#7676e3"}};function Xf(e,s,m,l,h,y){const r=o("a-col"),i=o("a-button"),p=o("a-row"),_=o("a-layout-header"),g=o("a-alert"),f=o("a-step"),b=o("a-steps"),v=o("a-divider"),k=o("PlusOutlined"),C=o("CurrencyTable"),S=o("EditSetupSetting"),E=o("DoubleLeftOutlined"),A=o("DoubleRightOutlined"),P=o("SaveOutlined"),U=o("a-space"),D=o("a-card"),M=o("CheckCircleOutlined"),q=o("InfoCircleOutlined"),B=o("HomeOutlined"),N=o("SyncOutlined"),R=o("a-result"),F=o("a-modal"),z=o("a-layout-content"),Z=o("a-layout");return d(),w(Z,{class:"layout"},{default:n(()=>[a(_,null,{default:n(()=>[a(p,null,{default:n(()=>[a(r,{span:4},{default:n(()=>[e.appDetails&&e.appDetails.app?(d(),T("img",{key:0,style:{height:"32px"},src:e.appDetails.app.left_sidebar_theme=="dark"?e.appDetails.app.dark_logo_url:e.appDetails.app.light_logo_url},null,8,jf)):$("",!0)]),_:1}),a(r,{span:20,style:{textAlign:"right"}},{default:n(()=>[a(i,{type:"link",onClick:e.logout,class:"p-0",style:{color:"white"}},{default:n(()=>[c(u(e.$t("menu.logout")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),a(z,{style:{padding:"0 50px"}},{default:n(()=>[a(D,{class:"setup-page-content-container",bodyStyle:{padding:"0px"},style:{height:"100vh",marginTop:"20px",background:"white"}},{default:n(()=>[a(p,null,{default:n(()=>[a(r,{span:21,offset:1},{default:n(()=>[a(g,{message:e.$t("setup_company.setup_not_completed"),description:e.$t("setup_company.setup_not_completed_description"),type:"error","show-icon":"",style:{marginTop:"40px"}},null,8,["message","description"])]),_:1})]),_:1}),a(p,{style:{marginTop:"80px",background:"white"}},{default:n(()=>[a(r,{span:21,offset:1},{default:n(()=>[a(b,{current:e.currentStep},{default:n(()=>[a(f,{status:e.currencyStepStatus},{title:n(()=>[c(u(e.$t("setup_company.currency")),1)]),description:n(()=>[O("span",null,u(e.$t("setup_company.add_first_currency")),1)]),_:1},8,["status"]),a(f,{status:e.companySettingStepStatus},{title:n(()=>[c(u(e.$t("setup_company.company_settings")),1)]),description:n(()=>[O("span",null,u(e.$t("setup_company.set_company_basic_settings")),1)]),_:1},8,["status"])]),_:1},8,["current"]),a(v),e.appDetails&&e.appDetails.app&&e.appDetails.app.name?(d(),T(L,{key:0},[e.currentStep==0?(d(),T(L,{key:0},[a(i,{type:"primary",onClick:e.addCurrency},{default:n(()=>[a(k),c(" "+u(e.$t("currency.add")),1)]),_:1},8,["onClick"]),a(C,{class:"mb-40",ref:"currencyTableRef",showFilter:!1,onAddOrEditSuccess:e.currencyAddSuccess},null,8,["onAddOrEditSuccess"])],64)):$("",!0),e.currentStep==1?(d(),w(S,{key:1,class:"mb-40",ref:"companySettingRef",showSubmitButton:!1,onUpdateSuccess:e.companySettingUpdated},null,8,["onUpdateSuccess"])):$("",!0)],64)):$("",!0)]),_:1})]),_:1}),a(p,{class:"mt-10"},{default:n(()=>[a(r,{span:20,offset:1},{default:n(()=>[O("div",Wf,[a(U,null,{default:n(()=>[e.currentStep>=0&&e.currentStep!=0?(d(),w(i,{key:0,type:"primary",style:{backgroundColor:"#faad14",border:"#faad14"},onClick:e.goBack},{default:n(()=>[a(E),c(" "+u(e.$t("setup_company.previous_step")),1)]),_:1},8,["onClick"])):$("",!0),e.currentStep<1?(d(),w(i,{key:1,type:"primary",onClick:e.goNext,disabled:e.currentStep>=e.correctStep},{default:n(()=>[c(u(e.$t("setup_company.next_step"))+" ",1),a(A)]),_:1},8,["onClick","disabled"])):$("",!0),e.currentStep==1&&e.companySettingRef?(d(),w(i,{key:2,type:"primary",style:{backgroundColor:"#52c41a",border:"#52c41a"},onClick:e.submitCompanySetting,loading:e.companySettingRef.loading},{default:n(()=>[a(P),c(" "+u(e.$t("setup_company.save_finish_setup")),1)]),_:1},8,["onClick","loading"])):$("",!0)]),_:1})])]),_:1})]),_:1})]),_:1}),a(F,{open:e.showFinalModal,"onUpdate:open":s[0]||(s[0]=ne=>e.showFinalModal=ne),maskClosable:!1,closable:!1,footer:null,centered:""},{default:n(()=>[a(R,null,{title:n(()=>[e.setupCompleted?(d(),T("span",Yf,u(e.$t("setup_company.setup_complete_message")),1)):(d(),T("span",Gf,u(e.$t("setup_company.setup_running_message")),1))]),icon:n(()=>[e.setupCompleted?(d(),w(M,{key:0})):(d(),w(q,{key:1}))]),extra:n(()=>[e.setupCompleted?(d(),w(i,{key:0,type:"primary",style:{backgroundColor:"#52c41a",border:"#52c41a"},onClick:e.goToDashboard},{default:n(()=>[a(B),c(" "+u(e.$t("setup_company.go_to_dashboard")),1)]),_:1},8,["onClick"])):(d(),w(N,{key:1,style:{fontSize:"38px",color:"#5254cf"},spin:""}))]),_:1})]),_:1},8,["open"])]),_:1})]),_:1})}const Jf=K(Nf,[["render",Xf]]),gt=[{path:"/admin/setup",component:Jf,name:"admin.setup_app.index",meta:{requireAuth:!0,menuParent:"",menuKey:"setup_company"}}],Qf=x({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{SaveOutlined:_e},setup(e,{emit:s}){const{appSetting:m}=Q(),{addEditRequestAdmin:l,loading:h,rules:y}=le();return{appSetting:m,loading:h,rules:y,onClose:()=>{y.value={},s("closed")},onSubmit:()=>{const p=e.addEditType==="add"?"branches":e.url;console.log(p),l({url:p,method:e.addEditType==="add"?"POST":"PUT",data:e.formData,successMessage:e.successMessage,success:_=>{s("addEditSuccess",_.xid)}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function Zf(e,s,m,l,h,y){const r=o("a-input"),i=o("a-form-item"),p=o("a-col"),_=o("a-row"),g=o("a-form"),f=o("SaveOutlined"),b=o("a-button"),v=o("a-space"),k=o("a-drawer");return d(),w(k,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:n(()=>[a(v,null,{default:n(()=>[a(b,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:n(()=>[a(f)]),default:n(()=>[c(" "+u(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),a(b,{key:"back",onClick:e.onClose},{default:n(()=>[c(u(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),default:n(()=>[a(g,{layout:"vertical"},{default:n(()=>[a(_,{gutter:16},{default:n(()=>[a(p,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(i,{label:"Branch Name",name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:n(()=>[a(r,{value:e.formData.name,"onUpdate:value":s[0]||(s[0]=C=>e.formData.name=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("branch.name")])},null,8,["value","placeholder"])]),_:1},8,["help","validateStatus"])]),_:1}),a(p,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(i,{label:"Branch Address",name:"address",help:e.rules.address?e.rules.address.message:null,validateStatus:e.rules.address?"error":null,class:"required"},{default:n(()=>[a(r,{value:e.formData.address,"onUpdate:value":s[1]||(s[1]=C=>e.formData.address=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("branch.address")])},null,8,["value","placeholder"])]),_:1},8,["help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])}const xf=K(Qf,[["render",Zf]]),eg=()=>{const e="branches?fields=id,xid,name,address",s="branches",{t:m}=J(),l={name:"",address:""},h=[{title:"Branch Name",dataIndex:"name"},{title:"Branch Address",dataIndex:"address"},{title:m("common.action"),dataIndex:"action"}],y=[{key:"name",value:m("branch.name")},{key:"address",value:m("branch.address")}];return{url:e,addEditUrl:s,initData:l,columns:h,filterableColumns:y}},ag={components:{PlusOutlined:ae,EditOutlined:ye,DeleteOutlined:pe,AddEdit:xf,AdminPageHeader:me},setup(){const{permsArray:e,appSetting:s,formatAmountCurrency:m}=Q(),{url:l,addEditUrl:h,initData:y,columns:r,filterableColumns:i}=eg(),p=Te();return ee(async()=>{const _=new URLSearchParams({order:"id desc",offset:0,limit:10}).toString(),g=`${l}?${_}`;p.tableUrl.value={url:g};try{await p.fetch({page:1}),console.log("Table Data After Fetch:"),console.log(h,"addEditUrl"),p.crudUrl.value=h,p.langKey.value="branch",p.initData.value={...y},p.formData.value={...y}}catch(f){console.error("Error fetching data:",f)}}),{columns:r,permsArray:e,...p}}},tg={class:"table-responsive"};function ng(e,s,m,l,h,y){const r=o("a-page-header"),i=o("router-link"),p=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("PlusOutlined"),b=o("a-button"),v=o("a-space"),k=o("a-col"),C=o("a-row"),S=o("admin-page-filters"),E=o("AddEdit"),A=o("DeleteOutlined"),P=o("a-table"),U=o("admin-page-table-content");return d(),T(L,null,[a(g,null,{header:n(()=>[a(r,{title:"Branches",class:"p-0"})]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(p,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[c(" Branches ")]),_:1},8,["to"])]),_:1}),a(p,null,{default:n(()=>[c(" Branches ")]),_:1})]),_:1})]),_:1}),a(S,null,{default:n(()=>[a(C,{gutter:[16,16]},{default:n(()=>[a(k,{xs:24,sm:24,md:12,lg:10,xl:10},{default:n(()=>[a(v,null,{default:n(()=>[a(b,{type:"primary",onClick:e.addItem},{default:n(()=>[a(f),c(" Add ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1}),a(U,null,{default:n(()=>[a(E,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),a(C,null,{default:n(()=>[a(k,{span:24},{default:n(()=>[O("div",tg,[a(P,{columns:l.columns,"row-key":D=>D.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:n(({column:D,record:M})=>[D.dataIndex==="action"?(d(),w(v,{key:0},{default:n(()=>[(l.permsArray.includes("products_delete")||l.permsArray.includes("admin"))&&(!M.children||M.children.length==0)?(d(),w(b,{key:0,type:"secondary",onClick:q=>e.showDeleteConfirm(M.id)},{default:n(()=>[a(A),c(" Delete ")]),_:2},1032,["onClick"])):$("",!0)]),_:2},1024)):$("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const lg=K(ag,[["render",ng]]),og=[{path:"/",component:()=>Le(()=>import("./Admin-ef1230f2.js"),["assets/Admin-ef1230f2.js","assets/vendor-7d287734.js","assets/vendor-ad46f743.css","assets/Admin-14aea5fe.css"]),children:[{path:"/admin/branch",component:lg,name:"admin.branch.index",meta:{requireAuth:!0,menuParent:"branch",menuKey:e=>"branch"}}]}],Na=window.config.app_type,vn=window.config.modules,sg=()=>{var e=ue.state.auth.appSetting;return e.x_currency_id!=null},dg=()=>{var e=ue.state.auth.appSetting;return!(e.x_currency_id==null||e.white_label_completed==!1)},ea=ml({history:cl(),routes:[{path:"",redirect:"/admin/login"},...$o,...Fs,...og,...or,...yf,...Qu,...Mm,...sc,...wc,...Of,...bm,...Am],scrollBehavior:()=>({left:0,top:0})}),ht=Na=="saas"?"superadmin":"";if(Na=="saas"){const e=Ea(Object.assign({}),`../../${ht}/router/index.js`),s=Ea(Object.assign({}),`../../${ht}/router/admin/index.js`);Promise.all([e,s]).then(([m,l])=>{m.default.forEach(h=>ea.addRoute(h)),l.default.forEach(h=>ea.addRoute(h)),gt.forEach(h=>ea.addRoute(h))})}else gt.forEach(e=>ea.addRoute(e));function fa(){var e=["Error","Error!","error","front/logout","3726fBkwPg","Don't try to null it... otherwise it may cause error on your server.","front/isLoggedIn","superadmin.setup_app.index","name","16UdzoTV","beforeEach","non-saas","charAt","98892TmXabr","front.homepage","2991940NwEOsn","host","modules","commit","permission","post","superadmin","state","getters","admin","3170fbcWrv","push","auth/logout","check","auth/updateActiveModules","appModule","url","auth/updateAppChecking","bottomRight","1KRzCTa","is_main_product_valid","module","1120136xZeABk","verify.main",".settings.modules.index","app_type","auth","2406348cnLgms","setup_app","then","798610CrmFAn","verified_name","6026548jVzBWK","dispatch","is_superadmin","requireAuth","requireUnauth","catch","Modules Not Verified","value","21OEOJJd","Saas","forEach","meta","admin.dashboard.index","config","envato","saas","location","auth/isLoggedIn","admin.login","multiple_registration","superadmin.dashboard.index","user","split","stock",".com/","admin.setup_app.index","length","codeifly","https://"];return fa=function(){return e},fa()}var je=ua;(function(e,s){for(var m=ua,l=e();[];)try{var h=parseInt(m(391))/1*(parseInt(m(402))/2)+parseInt(m(370))/3*(parseInt(m(366))/4)+parseInt(m(382))/5*(-parseInt(m(361))/6)+parseInt(m(412))/7*(-parseInt(m(394))/8)+-parseInt(m(399))/9+parseInt(m(372))/10+parseInt(m(404))/11;if(h===s)break;l.push(l.shift())}catch{l.push(l.shift())}})(fa,297086);function ua(e,s){var m=fa();return ua=function(l,h){l=l-349;var y=m[l];return y},ua(e,s)}const bt=(e,s,m)=>{var l=ua,h=window[l(417)].app_type=="non-saas"?l(381):l(378);const y=e[l(365)][l(350)](".");if(y[l(354)]>0&&y[0]==l(378))e[l(415)][l(407)]&&ue[l(380)][l(421)]&&ue.state.auth[l(349)]&&!ue[l(379)][l(398)][l(349)].is_superadmin?(ue[l(405)](l(384)),m({name:l(422)})):e[l(415)].requireAuth&&dg()==![]&&y[1]!=l(400)?m({name:l(364)}):e[l(415)][l(407)]&&!ue[l(380)][l(421)]?m({name:"admin.login"}):e.meta[l(408)]&&ue.getters[l(421)]?m({name:l(424)}):m();else if(y[l(354)]>0&&y[0]==l(381)&&ue[l(379)][l(398)]&&ue[l(379)][l(398)][l(349)]&&ue[l(379)][l(398)][l(349)][l(406)])m({name:l(424)});else if(y[l(354)]>0&&y[0]==l(381))if(e.meta[l(407)]&&!ue[l(380)]["auth/isLoggedIn"])ue[l(405)](l(384)),m({name:l(422)});else if(e[l(415)][l(407)]&&sg()==![]&&y[1]!=l(400))m({name:l(353)});else if(e[l(415)].requireUnauth&&ue.getters[l(421)])m({name:l(416)});else if(e[l(365)]==h+l(396))ue.commit(l(389),![]),m();else{var r=e[l(415)].permission;y[1]==l(351)&&(r=Pt(e[l(415)][l(376)](e),"-","_")),!e[l(415)][l(376)]||Nt(r,ue[l(379)][l(398)][l(349)])?m():m({name:l(416)})}else y[l(354)]>0&&y[0]=="front"&&e.meta[l(407)]&&!ue[l(380)][l(363)]?(ue[l(405)](l(360)),m({name:l(371)})):m()};var Ye=["e","L","a","r","d","P","o"],ra=""+Ye[1]+Ye[0]+Ye[2]+Ye[4]+Ye[5]+Ye[3]+Ye[6];window.config[je(397)]=="saas"&&(ra+=je(413));var aa=[{verified_name:ra,value:![]}];vn[je(414)](e=>{var s=je;aa[s(383)]({verified_name:e,value:![]})});const ig=()=>Ne(aa,["value",![]]),rg=(e,s,m)=>{var l=je;return e[l(354)]!=5||s[l(354)]!=8||m.length!=6?![]:e[l(369)](3)!="c"||e[l(369)](4)!="k"||e[l(369)](0)!="c"||e[l(369)](1)!="h"||e[l(369)](2)!="e"?![]:s[l(369)](2)!="d"||s[l(369)](3)!="e"||s[l(369)](4)!="i"||s[l(369)](0)!="c"||s[l(369)](1)!="o"||s.charAt(5)!="f"||s.charAt(6)!="l"||s[l(369)](7)!="y"?![]:m.charAt(2)!="v"||m[l(369)](3)!="a"||m.charAt(0)!="e"||m.charAt(1)!="n"||m[l(369)](4)!="t"||m[l(369)](5)!="o"?![]:!![]},yt=e=>{var s=je;return e.charAt(19)!="i"||e.charAt(13)!="o"||e[s(369)](9)!="n"||e.charAt(16)!="o"||e[s(369)](22)!="y"||e[s(369)](11)!="a"||e[s(369)](18)!="e"||e[s(369)](21)!="l"||e[s(369)](10)!="v"||e.charAt(20)!="f"||e[s(369)](12)!="t"||e[s(369)](17)!="d"||e.charAt(8)!="e"||e[s(369)](15)!="c"||e[s(369)](26)!="m"||e.charAt(24)!="c"||e.charAt(25)!="o"?![]:!![]};ea[je(367)]((e,s,m)=>{var l=je,h=l(418),y=l(355),r=l(385),i={modules:window.config[l(374)]};if(e[l(415)]&&e[l(415)][l(387)]&&(i[l(393)]=e.meta[l(387)],!Fe(vn,e[l(415)].appModule)&&m({name:"admin.login"})),!rg(r,y,h))Modal.error({title:l(358),content:"Don't try to null it... otherwise it may cause error on your server."});else{var p=window[l(417)][l(397)]==l(368)?l(381):l(378);if(ig()!==void 0&&e[l(365)]&&e.name!="verify.main"&&e[l(365)]!=p+l(396)){var _=l(356)+h+"."+y+l(352)+r;Ke({method:l(377),url:_,data:{verified_name:ra,...i,domain:window[l(420)][l(373)]},timeout:4e3})[l(401)](g=>{var f=l;if(!yt(g.config[f(388)]))Modal.error({title:f(358),content:f(362)});else{ue[f(375)](f(389),![]);const b=g.data;if(b.main_product_registered&&(aa[f(414)](v=>{var k=f;v[k(403)]==ra&&(v[k(411)]=!![])}),aa[f(414)](v=>{var k=f;if(Fe(b.modules_not_registered,v[k(403)])||Fe(b.multiple_registration_modules,v.verified_name)){if(v[k(403)]!=ra){var C=[...window[k(417)][k(374)]],S=vt(C,function(E){return E!=v.verified_name});ue[k(375)](k(386),S),window.config[k(374)]=S}v[k(411)]=![]}else v[k(411)]=!![]})),b[f(392)])if(!b.main_product_registered||b[f(423)])m({name:f(395)});else if(e[f(415)]&&e[f(415)][f(387)]&&Ne(aa,{verified_name:e[f(415)][f(387)],value:![]})!==void 0){$e[f(359)]({placement:f(390),message:f(357),description:f(410)});const v=Na==f(419)?"superadmin":f(381);m({name:v+".settings.modules.index"})}else bt(e,s,m)}})[l(409)](g=>{var f=l;yt(g.toJSON().config[f(388)])?(aa[f(414)](b=>{var v=f;b[v(411)]=!![]}),ue.commit(f(389),![]),m()):Modal.error({title:f(358),content:"Don't try to null it... otherwise it may cause error on your server."})})}else bt(e,s,m)}});const ia=ea;const ug=x({props:{visible:{default:!1},title:{default:""},lead:{default:{}}},emits:["close"],components:{UnorderedListOutlined:pl,PhoneOutlined:Ma,FileTextOutlined:ya,LeadLogTable:za,LeadNotesTable:Ka},setup(e,{emit:s}){const{formatTimeDuration:m}=Q(),{t:l}=J(),h=I(l("lead.lead_details")),y=I("lead_data");return{drawerTitle:h,formatTimeDuration:m,activeTabKey:y,onClose:()=>{y.value="lead_data",s("close")},drawerWidth:window.innerWidth<=991?"90%":"60%"}}});function mg(e,s,m,l,h,y){const r=o("a-descriptions-item"),i=o("a-descriptions"),p=o("UnorderedListOutlined"),_=o("a-tab-pane"),g=o("PhoneOutlined"),f=o("LeadLogTable"),b=o("FileTextOutlined"),v=o("LeadNotesTable"),k=o("a-tabs"),C=o("a-drawer");return d(),w(C,{title:e.drawerTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},maskClosable:!1,onClose:e.onClose,destroyOnClose:!0},{default:n(()=>[a(i,{title:e.$t("common.basic_details")},{default:n(()=>[a(r,{label:e.$t("lead.reference_number")},{default:n(()=>[c(u(e.lead&&e.lead.reference_number?e.lead.reference_number:"-"),1)]),_:1},8,["label"]),a(r,{label:e.$t("lead.campaign")},{default:n(()=>[c(u(e.lead&&e.lead.campaign?e.lead.campaign.name:"-"),1)]),_:1},8,["label"]),a(r,{label:e.test},{default:n(()=>[c(" test ")]),_:1},8,["label"]),a(r,{label:e.$t("lead.campaign")},{default:n(()=>[c(u(e.lead&&e.lead.campaign?e.lead.campaign.name:"-"),1)]),_:1},8,["label"]),a(r,{label:e.$t("lead.campaign")},{default:n(()=>[c(u(e.lead&&e.lead.campaign?e.lead.campaign.name:"-"),1)]),_:1},8,["label"]),a(r,{label:e.$t("lead.campaign")},{default:n(()=>[c(u(e.lead&&e.lead.campaign?e.lead.campaign.name:"-"),1)]),_:1},8,["label"]),a(r,{label:e.$t("campaign.first_actioner")},{default:n(()=>[c(u(e.lead&&e.lead.first_actioner&&e.lead.first_actioner.name?e.lead.first_actioner.name:"-"),1)]),_:1},8,["label"]),a(r,{label:e.$t("campaign.last_actioner")},{default:n(()=>[c(u(e.lead&&e.lead.last_actioner&&e.lead.last_actioner.name?e.lead.last_actioner.name:"-"),1)]),_:1},8,["label"]),a(r,{label:e.$t("lead.call_duration")},{default:n(()=>[c(u(e.lead&&e.lead.time_taken?e.formatTimeDuration(e.lead.time_taken):"-"),1)]),_:1},8,["label"])]),_:1},8,["title"]),a(k,{activeKey:e.activeTabKey,"onUpdate:activeKey":s[0]||(s[0]=S=>e.activeTabKey=S),class:"mt-20"},{default:n(()=>[a(_,{key:"lead_data"},{tab:n(()=>[O("span",null,[a(p),c(" "+u(e.$t("lead.lead_data")),1)])]),default:n(()=>[e.lead&&e.lead.lead_data&&e.lead.lead_data.length>0?(d(),w(i,{key:0,class:"mt-10"},{default:n(()=>[(d(!0),T(L,null,X(e.lead.lead_data,S=>(d(),w(r,{key:S.id},{label:n(()=>[c(u(S.field_name),1)]),default:n(()=>[c(" "+u(S.field_value?S.field_value:"-"),1)]),_:2},1024))),128))]),_:1})):$("",!0)]),_:1}),a(_,{key:"call_logs"},{tab:n(()=>[O("span",null,[a(g),c(" "+u(e.$t("menu.call_logs")),1)])]),default:n(()=>[a(f,{leadId:e.lead.x_lead_id,showLeadDetails:!1,showTableSearch:!1,showAction:!1},null,8,["leadId"])]),_:1}),a(_,{key:"notes"},{tab:n(()=>[O("span",null,[a(b),c(" "+u(e.$t("menu.lead_notes")),1)])]),default:n(()=>[a(v,{leadId:e.lead.xid,showAddButton:!!(e.lead&&e.lead.campaign&&e.lead.campaign.status!="completed")},null,8,["leadId","showAddButton"])]),_:1})]),_:1},8,["activeKey"])]),_:1},8,["title","width","open","onClose"])}const cg=K(ug,[["render",mg]]),pg=x({setup(){return{}}}),_g={style:{padding:"10px 16px",background:"white"},class:"mb-20"};function fg(e,s,m,l,h,y){return d(),T("div",_g,[oe(e.$slots,"default")])}const gg=K(pg,[["render",fg]]),hg=x({setup(){return{}}}),bg={class:"dashboard-page-content-container"};function yg(e,s,m,l,h,y){return d(),T("div",bg,[oe(e.$slots,"default")])}const vg=K(hg,[["render",yg]]);async function kg(){ue.getters["auth/isLoggedIn"]&&ue.dispatch("auth/updateUser"),ue.dispatch("auth/updateGlobalSetting"),ue.dispatch("auth/updateApp"),ue.dispatch("auth/updateAllLangs"),ue.commit("auth/updateActiveModules",window.config.modules),ue.dispatch("auth/updateVisibleSubscriptionModules");const e=_l(to),s=bp({legacy:!1,globalInjection:!0,locale:ue.state.auth.lang,warnHtmlMessage:!1});await vp(s,ue.state.auth.lang),e.use(s),e.use(fl),e.use(gl),e.use(ue),e.use(hl),e.component("ViewLeadDetails",cg);const m=window.config.installed_modules,l=[];m.forEach(h=>{const y=h.verified_name,r=Ea(Object.assign({}),`../../Modules/${y}/Resources/assets/js/${y}.js`);l.push(r)}),Promise.all(l).then(h=>{h.forEach(y=>{e.use(y.default,{routes:ia,store:ue})}),ia.addRoute({path:"/:catchAll(.*)",redirect:"/"}),e.use(ia)}),e.component("admin-page-filters",gg),e.component("admin-page-table-content",vg),window.i18n=s,ia.isReady().then(()=>{e.mount("#app")})}kg();export{fn as C,Da as L,Xt as R,en as S,K as _,Zl as a,Q as c,vp as l};
