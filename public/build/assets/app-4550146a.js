import{a as qe,m as Ae,h as Ne,f as ce,d as Le,u as vn,t as kn,b as he,c as Q,e as ve,i as Ee,g as x,S as We,r as o,o as d,j as E,k as a,w as n,l as P,n as r,T as wn,p as Ta,q as Oe,s as ee,v as we,x as Cn,y as w,z as Sn,A as $n,B as p,C as Se,D as Dn,E as I,F as An,G as R,H as A,I as Ie,J as Ke,K as ht,L as ca,M as oe,N as bt,O as yt,P as vt,Q as kt,R as Me,U as Be,V as ge,W as ue,X as Ea,Y as wt,Z as Oa,_ as pa,$ as sa,a0 as Tn,a1 as Ct,a2 as Va,a3 as En,a4 as On,a5 as De,a6 as ae,a7 as _e,a8 as X,a9 as Ua,aa as _a,ab as pe,ac as Un,ad as ke,ae as St,af as $a,ag as Ge,ah as $t,ai as Pn,aj as In,ak as Mn,al as Fn,am as Rn,an as fa,ao as Ln,ap as Dt,aq as At,ar as da,as as qn,at as Ze,au as Pa,av as ga,aw as ha,ax as Bn,ay as Kn,az as Tt,aA as Et,aB as zn,aC as Vn,aD as ia,aE as Hn,aF as Ot,aG as jn,aH as Ut,aI as Pt,aJ as Nn,aK as Wn,aL as Ia,aM as Gn,aN as It,aO as Mt,aP as Yn,aQ as Xn,aR as Jn,aS as Qn,aT as Zn,aU as xn,aV as el,aW as al,aX as tl,aY as nl,aZ as ll,a_ as ba,a$ as Ft,b0 as ol,b1 as Rt,b2 as Ma,b3 as Lt,b4 as qt,b5 as Bt,b6 as sl,b7 as dl,b8 as il,b9 as rl,ba as ul,bb as ml,bc as cl,bd as pl,be as _l}from"./vendor-a91b8582.js";const Da=(e,s)=>{const u=e[s];return u?typeof u=="function"?u():Promise.resolve(u):new Promise((l,h)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(h.bind(null,new Error("Unknown variable dynamic import: "+s)))})};var ra=qe.create({baseURL:window.config.path+"/api/v1"});ra.defaults.headers.Accept="application/json";ra.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";ra.defaults.headers.common["X-CSRF-TOKEN"]=document.head.querySelector('meta[name="csrf-token"]').content;ra.interceptors.response.use(function(e){return e.data},function(e){if(e.response.status===401)window.location.href=window.config.path;else return Promise.reject(e.response)});window.axiosBase=ra;var xe=qe.create({baseURL:window.config.path+"/api/v1"});xe.defaults.headers.Accept="application/json";xe.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";xe.defaults.headers.common["X-CSRF-TOKEN"]=document.head.querySelector('meta[name="csrf-token"]').content;localStorage.getItem("auth_token")&&(xe.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("auth_token"));xe.interceptors.response.use(function(e){return e.data},function(e){const s=e.response.status;if(s===401)window.location.href=window.config.path+"/admin/login",delete window.axiosAdmin.defaults.headers.common.Authorization,localStorage.removeItem("auth_token"),localStorage.setItem("auth_user",null);else if(s===400){var u=e.response.data.error.message;Ae.error(u)}else if(s===403){var u=e.response.data.error.message;Ae.error(u)}else if(s===404){var u=e.response.data.error.message;Ae.error(u)}return Promise.reject(e.response)});window.axiosAdmin=xe;var ea=qe.create({baseURL:window.config.path+"/api/v1"});ea.defaults.headers.Accept="application/json";ea.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";ea.defaults.headers.common["X-CSRF-TOKEN"]=document.head.querySelector('meta[name="csrf-token"]').content;localStorage.getItem("front_auth_token")&&(ea.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("front_auth_token"));ea.interceptors.response.use(function(e){return e.data},function(e){const s=e.response.status;if(s===401)window.location.href=window.config.path,delete window.axiosFront.defaults.headers.common.Authorization,localStorage.removeItem("front_auth_token"),localStorage.setItem("front_auth_user",null);else if(s===400){var u=e.response.data.error.message;Ae.error(u)}else if(s===403){var u=e.response.data.error.message;Ae.error(u)}else if(s===404){var u=e.response.data.error.message;Ae.error(u)}return Promise.reject(e.response)});window.axiosFront=ea;const fl=window.config.modules;fl.forEach(e=>{require(`../../../../Modules/${e}/Resources/assets/js/plugins`)});Ne.suppressDeprecationWarnings=!0;window.moment=Ne;const aa="#5F63F2",gl="#4347D9",hl="#FF69A5",bl="#E34A87",yl="#1890ff",vl="#0D79DF",kl="rgba(0, 0, 0, 0.85)",Ca="#20C997",wl="#0CAB7C",Sa="#FA8B0C",Cl="#D47407",Ha="#f5222d",Sl="#E30D0F",ja="#2C99FF",$l="#0D79DF",Xe="#272B41",Dl="#131623",Na="#5A5F7D",Wa="#363A51",Al="#9299B8",Tl="#e2e6ea",Ga="#ffffff",El="#5A5F7D",Ol="#5A5F7D",Ul="#ADB4D2",Pl="#FF4D4F",Il="#E30D0F",Ya="#F1F2F6",Xa="#E3E6EF",Ml="#C6D0DC",Fl="#EFF0F3",Rl="#F8F9FB",Ll="#F4F5F7",ql="#868EAE",Ja="rgba(95,99,242,0.2)",Bl="#9299b8",Kl="#F63178",zl="48px",Vl="36px",Hl="29px",Kt={"primary-color":aa,"primary-hover":gl,"secondary-color":hl,"secondary-hover":bl,"link-color":yl,"link-hover":vl,"success-color":Ca,"success-hover":wl,"warning-color":Sa,"warning-hover":Cl,"error-color":Ha,"error-hover":Sl,"info-color":ja,"info-hover":$l,"dark-color":Xe,"dark-hover":Dl,"gray-color":Na,"gray-hover":Wa,"light-color":Al,"light-hover":Tl,"white-color":Ga,"white-hover":Ol,white:Ga,black:"#000",pink:Kl,"dash-color":El,"dash-hover":Wa,"extra-light-color":Ul,"danger-color":Pl,"danger-hover":Il,"font-family":"'Inter', sans-serif","font-size-base":"14px","heading-color":kl,"text-color":Xe,"text-color-secondary":Na,"disabled-color":"rgba(0, 0, 0, 0.25)","border-radius-base":"4px","border-color-base":"#d9d9d9","box-shadow-base":"0 2px 8px rgba(0, 0, 0, 0.15)","border-color-light":Ya,"border-color-normal":Xa,"border-color-deep":Ml,"bg-color-light":Rl,"bg-color-normal":Ll,"bg-color-deep":Fl,"light-gray-color":ql,"gray-solid":Bl,"btn-height-large":zl,"btn-height-small":Vl,"btn-height-extra-small":Hl,"btn-default-color":Xe,"card-head-background":"#ffffff","card-head-color":Xe,"card-background":"#ffffff","card-head-padding":"16px","card-padding-base":"12px","card-radius":"10px","card-shadow":"0 5px 20px rgba(146,153,184,0.03)","layout-body-background":"#F4F5F7","layout-header-background":"#ffffff","layout-footer-background":"#fafafa","layout-header-height":"64px","layout-header-padding":"0 15px","layout-footer-padding":"24px 15px","layout-sider-background":"#ffffff","layout-trigger-height":"48px","layout-trigger-background":"#002140","layout-trigger-color":"#fff","layout-zero-trigger-width":"36px","layout-zero-trigger-height":"42px","layout-sider-background-light":"#fff","layout-trigger-background-light":"#fff","layout-trigger-color-light":"rgba(0, 0, 0, 0.65)","page-header-padding":"24px","page-header-padding-vertical":"16px","page-header-padding-breadcrumb":"12px","page-header-back-color":"#000","page-header-ghost-bg":"inherit","popover-color":Xe,"alert-success-border-color":Ca,"alert-success-bg-color":Ca+15,"alert-error-bg-color":Ha+15,"alert-warning-bg-color":Sa+15,"alert-info-bg-color":ja+15,"radio-button-checked-bg":aa,"grid-gutter-width":25,"skeleton-color":Ya,"slider-rail-background-color":Ja,"slider-rail-background-color-hover":Ja,"slider-track-background-color":aa,"slider-track-background-color-hover":aa,"slider-handle-color":aa,"slider-handle-size":"16px","input-height-base":"48px","input-border-color":Xa,"input-height-sm":"30px","input-height-lg":"50px","rate-star-color":Sa,"rate-star-size":"13px","switch-min-width":"30px","switch-sm-min-width":"30px","switch-height":"18px","switch-sm-height":"15px","result-title-font-size":"20px","result-subtitle-font-size":"12px","result-icon-font-size":"50px","tabs-horizontal-padding":"12px 15px","tabs-horizontal-margin":"0","list-item-padding":"10px 24px","tag-default-bg":"#EFF0F3","tag-default-color":Xe,"tag-font-size":"11px"};({...Kt});const zt=(e,s)=>{var u=s.role.name=="admin";return ce(s.role.perms,l=>{l.name==e&&(u=!0)}),u},fe=e=>window.config.app_type=="non-saas"?e:`superadmin/${e}`;Ne.suppressDeprecationWarnings=!0;Le.extend(vn);Le.extend(kn);const Z=()=>{const e=he(),{t:s}=Q(),u=window.config.app_type,l=window.config.download_lang_csv_url,h=ve(()=>e.state.auth.menuCollapsed),b=ve(()=>e.state.auth.cssSettings),m=ve(()=>e.state.auth.activeModules),i=ve(()=>e.state.auth.visibleSubscriptionModules),c=ve(()=>e.state.auth.globalSetting),_=ve(()=>e.state.auth.appSetting),g=ve(()=>e.state.auth.addMenus),f=ve(()=>e.state.auth.lang),y=ve(()=>e.state.auth.user),k={enabled:"success",disabled:"error"},v=[{key:"enabled",value:s("common.enabled")},{key:"disabled",value:s("common.disabled")}],C=G=>G&&G>Ne().endOf("day"),S=G=>G==null?Le().tz(_.value.timezone):Le(G).tz(_.value.timezone),U=G=>G==null?Le().tz(_.value.timezone).format(`${_.value.date_format}`):Le(G).tz(_.value.timezone).format(`${_.value.date_format}`),$=G=>G==null?Le().tz(_.value.timezone).format(`${_.value.date_format} ${_.value.time_format}`):Le(G).tz(_.value.timezone).format(`${_.value.date_format} ${_.value.time_format}`),O=G=>{if(G==0)return 0;var H=parseInt(G),N=Math.floor(H/3600);H%=3600;var te=Math.floor(H/60),Ce=H%60,le="";return N>0&&(le+=`${N} H,`),te>0&&(le+=` ${te} M,`),Ce>0&&(le=le.trim()+` ${Ce} S`),le.trim()},T=G=>parseFloat(parseFloat(G).toFixed(2)),D=G=>{const H=parseFloat(Math.abs(G)).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(_.value.currency.position=="front")var N=`${_.value.currency.symbol}${H}`;else var N=`${H}${_.value.currency.symbol}`;return G<0?`- ${N}`:N},L=(G,H)=>{const N=parseFloat(Math.abs(G)).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(H.position=="front")var te=`${H.symbol}${N}`;else var te=`${N}${H.symbol}`;return G<0?`- ${te}`:te},q=G=>{var H="";return ce(G,(N,te)=>{N!=null&&(H+=`${te} eq "${N}" and `)}),H.length>0&&(H=H.substring(0,H.length-4)),H},K=G=>zt(G,y.value),j=G=>{e.commit("auth/updatePageTitle",s(`menu.${G}`))},F=ve(()=>{const G=y&&y.value&&y.value.role?[y.value.role.name]:[];return y&&y.value&&y.value.role&&ce(y.value.role.perms,H=>{G.push(H.name)}),G});return{menuCollapsed:h,appSetting:_,appType:u,addMenus:g,selectedLang:f,user:y,checkPermission:K,permsArray:F,statusColors:k,userStatus:v,disabledDate:C,formatAmount:T,formatAmountCurrency:D,formatAmountUsingCurrencyObject:L,convertToPositive:G=>G<0?G*-1:G,calculateFilterString:q,updatePageTitle:j,downloadLangCsvUrl:l,appModules:m,dayjs:Le,formatDate:U,formatDateTime:$,dayjsObject:S,slugify:G=>G.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,""),convertStringToKey:G=>G.toString().toLowerCase().replace(/\s+/g,"_").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"_").replace(/^-+/,"").replace(/-+$/,""),cssSettings:b,globalSetting:c,willSubscriptionModuleVisible:G=>u=="non-saas"?!0:_.value.subscription_plan&&_.value.subscription_plan.modules?Ee(_.value.subscription_plan.modules,G):!1,visibleSubscriptionModules:i,formatTimeDuration:O,getCampaignUrl:(G="active",H="self")=>{var N=`call-managers?fields=id,xid,name,status,form_id,x_form_id,form{id,xid,name,form_fields}&campaign_status=${G}&view_type=${H}&limit=10000`;return N},getCampaignStatsUrl:(G="active",H=void 0)=>{var N=`leads/campaign-stats?campaign_status=${G}`;return H!=null&&(N+=`&campaign_id=${H}`),N}}};const z=(e,s)=>{const u=e.__vccOpts||e;for(const[l,h]of s)u[l]=h;return u},jl=x({components:{SyncOutlined:We},setup(){const{appSetting:e}=Z();return{appSetting:e}}}),Nl={class:"loading-app-container"},Wl={style:{color:"#7676e3"}},Gl=["src"];function Yl(e,s,u,l,h,b){const m=o("SyncOutlined"),i=o("a-result");return d(),E("div",Nl,[a(i,null,{title:n(()=>[P("span",Wl,r(e.$t("messages.loading_app_message")),1)]),icon:n(()=>[P("img",{style:{width:"150px"},src:e.appSetting.light_logo_url},null,8,Gl)]),extra:n(()=>[a(m,{style:{fontSize:"38px",color:"#5254cf"},spin:""})]),_:1})])}const Xl=z(jl,[["render",Yl],["__scopeId","data-v-f4c8b84b"]]);const Jl={name:"App",components:{ThemeProvider:wn,LoadingApp:Xl},setup(){const e=Ta(),s=Oe(),u=he(),l="dark",{updatePageTitle:h,appSetting:b,appType:m}=Z(),i=ve(()=>u.state.auth.appChecking);return ee(()=>{}),we(e,(c,_)=>{const g=typeof c.meta.menuKey=="function"?c.meta.menuKey(c):c.meta.menuKey;h(g.replace("-","_")),m=="saas"&&b.value.is_global==0&&b.value.status=="license_expired"&&c&&c.meta&&!(c.meta.menuParent=="subscription"||c.name=="admin.login"||c.name=="verify.main")&&s.push({name:"admin.subscription.current_plan"})}),{theme:Cn,themeVars:Kt,darkTheme:l,appChecking:i,appSetting:b}}},Ql={class:"theme-container"};function Zl(e,s,u,l,h,b){const m=o("LoadingApp"),i=o("ThemeProvider"),c=o("a-config-provider"),_=o("router-view");return d(),w(_,null,{default:n(({Component:g,route:f})=>[(d(),w(Sn,null,{default:n(()=>[a(c,{theme:{token:{colorPrimary:l.appSetting.primary_color,fontFamily:"Nunito,sans-serif",borderRadius:4}},direction:l.appSetting.rtl?"rtl":"ltr"},{default:n(()=>[P("div",Ql,[a(i,{theme:{...l.themeVars}},{default:n(()=>[l.appChecking?(d(),w(m,{key:0})):(d(),w($n(g),{key:1}))]),_:2},1032,["theme"])])]),_:2},1032,["theme","direction"])]),fallback:n(()=>[p(" Loading... ")]),_:2},1024))]),_:1})}const xl=z(Jl,[["render",Zl]]),Qa="auth_user",Za="auth_token",xa="expire_key",et="app_settings",at="global_settings",tt="per_page_item",nt="all_langs",lt="selected_lang",ot="page_title",st="dark_theme",dt="active_modules",it="css_settings",rt="add_menus",ut="email_setting_verified",mt="visible_subscription_modules";Ne.suppressDeprecationWarnings=!0;const Re=e=>{const s=window.localStorage.getItem(e);return s==="undefined"||s==="null"||s===void 0||s===null?null:JSON.parse(s)},eo={namespaced:!0,state(){return{user:Re(Qa),allLangs:Re(nt)||[],lang:window.localStorage.getItem(lt)||"en",token:window.localStorage.getItem(Za)||null,expires:window.localStorage.getItem(xa)||null,globalSetting:Re(at),appSetting:Re(et),addMenus:Re(rt)||[],visibleSubscriptionModules:Re(mt)||[],perPage:window.localStorage.getItem(tt)||window.config.path,pageTitle:window.localStorage.getItem(ot)||"",darkTheme:Re(st),activeModules:Re(dt),cssSettings:Re(it)||{leftRightPadding:"50px",headerMenuMode:"vertical"},appChecking:!0,emailSettingVerified:window.localStorage.getItem(ut)||!1,menuCollapsed:window.innerWidth<=991}},mutations:{updateUser(e,s){e.user=s,window.localStorage.setItem(Qa,JSON.stringify(s))},updateAppChecking(e,s){e.appChecking=s},updateToken(e,s){e.token=s,window.localStorage.setItem(Za,s),axiosAdmin.defaults.headers.common.Authorization=`Bearer ${s}`},updateExpires(e,s){e.expires=new Date(s),window.localStorage.setItem(xa,s)},updateApp(e,s){e.appSetting=s,window.localStorage.setItem(et,JSON.stringify(s));var u=document.querySelector("link[rel~='icon']");u.href=s.small_light_logo_url},updateGlobalSetting(e,s){e.globalSetting=s,window.localStorage.setItem(at,JSON.stringify(s));var u=document.querySelector("link[rel~='icon']");u.href=s.small_light_logo_url},updateAddMenus(e,s){e.addMenus=s,window.localStorage.setItem(rt,JSON.stringify(s))},updatePerPage(e,s){e.perPage=s,window.localStorage.setItem(tt,s)},updateLang(e,s){e.lang=s,window.localStorage.setItem(lt,s)},updatePageTitle(e,s){e.pageTitle=s,window.localStorage.setItem(ot,s),e.appSetting!==null&&e.appSetting!==void 0?document.title=`${s} - ${e.appSetting.name}`:document.title=`${s} - Stockify`},updateDarkTheme(e,s){e.darkTheme=s,window.localStorage.setItem(st,s)},updateActiveModules(e,s){e.activeModules=s,window.localStorage.setItem(dt,JSON.stringify(s))},updateCssSettings(e,s){e.cssSettings=s,window.localStorage.setItem(it,JSON.stringify(s))},updateAllLangs(e,s){e.allLangs=s,window.localStorage.setItem(nt,JSON.stringify(s))},updateMenuCollapsed(e,s){e.menuCollapsed=s},updateEmailVerifiedSetting(e,s){e.emailSettingVerified=s,window.localStorage.setItem(ut,s)},updateVisibleSubscriptionModules(e,s){e.visibleSubscriptionModules=s,window.localStorage.setItem(mt,JSON.stringify(s))}},actions:{updateUser(e){axiosAdmin.post("/user").then(function(s){e.commit("updateUser",s.data.user)}).catch(function(s){})},updateGlobalSetting(e){axiosAdmin.get("/global-setting").then(function(s){e.commit("updateGlobalSetting",s.data.global_setting);var u=document.querySelector("link[rel~='icon']");u.href=globalSetting.small_light_logo_url}).catch(function(s){})},updateApp(e){axiosAdmin.get("/app").then(function(s){e.commit("updateApp",s.data.app),e.commit("updateAddMenus",s.data.shortcut_menus.credentials),e.commit("updateEmailVerifiedSetting",s.data.email_setting_verified);var u=document.querySelector("link[rel~='icon']");u.href=s.data.app.small_light_logo_url}).catch(function(s){})},updateAllLangs(e){axiosAdmin.get("/all-langs").then(function(s){e.commit("updateAllLangs",s.data.langs)}).catch(function(s){})},refreshToken(e){const s=e.state.token;s!==""&&s!=="undefined"&&s!="null"&&s!=null&&axiosAdmin.post("/auth/refresh-token").then(function(u){e.commit("updateUser",u.data.user),e.commit("updateToken",u.data.token),e.commit("updateExpires",u.data.expires_in)}).catch(function(u){})},logout(e){axiosAdmin.post("/auth/logout").then(function(s){window.sessionStorage.clear(),e.commit("updateUser",[]),e.commit("updateToken",null),e.commit("updateExpires",null),e.commit("updateEmailVerifiedSetting",0),na.push({name:"admin.login"})}).catch(function(s){})},logoutToRootUrl(e){axiosAdmin.post("/auth/logout").then(function(s){e.commit("updateUser",[]),e.commit("updateToken",null),e.commit("updateExpires",null),window.location.href=window.config.path}).catch(function(s){})},updateVisibleSubscriptionModules(e){axiosAdmin.post("/visible-subscription-modules").then(function(s){e.commit("updateVisibleSubscriptionModules",s.data)}).catch(function(s){})},showNotificaiton(e,s){Se.success({message:"Success",description:"Hello",placement:"bottomRight"})}},getters:{isLoggedIn:e=>e.token===null||e.token===""?!1:Ne(e.expires).isAfter(Ne())}},ao=window.config.modules;var Aa={};ao.forEach(e=>{if(e){const s=require(`../../../../Modules/${e}/Resources/assets/js/store/index`).default;Aa={...Aa,...s}}});const re=Dn({modules:{auth:eo,...Aa}}),se=()=>{const e=I(!1),s=I({}),{t:u}=Q(),{appSetting:l}=Z();return{loading:e,rules:s,addEditRequestAdmin:m=>{e.value=!0;const{url:i,data:c,success:_}=m;var g={};ce(c,function(f,y){f==null?g[y]=null:g[y]=f}),axiosAdmin.post(i,g).then(f=>{if(f&&f.is_error&&f.is_error=="yes"&&f.error&&typeof f.error.details<"u"){var y=f,k={};if(y.error&&typeof y.error.details<"u")for(var v=Object.keys(y.error.details),C=0;C<v.length;C++){var S=v[C].replace(".","\\.");k[S]={required:!0,message:y.error.details[v[C]][0]}}s.value=k,Ae.error(u("common.fix_errors")),y&&y.message&&(Ae.error(y.message),y={error:{...y}}),m.error&&m.error(y),e.value=!1}else m.successMessage&&Se.success({placement:l.value.rtl?"bottomLeft":"bottomRight",message:u("common.success"),description:m.successMessage}),_(f.data),e.value=!1,s.value={}}).catch(f=>{e.value=!1})},addEditFileRequestAdmin:m=>{e.value=!0;const{url:i,data:c,success:_}=m,g=new FormData;ce(c,function(f,y){f==null?g.append(y,""):m.fieldTypes&&m.fieldTypes.json&&Ee(m.fieldTypes.json,y)?g.append(y,JSON.stringify(f)):(m.fieldTypes&&m.fieldTypes.file&&Ee(m.fieldTypes.file,y),g.append(y,f))}),axiosAdmin.post(i,g,{headers:{"Content-Type":"multipart/form-data"}}).then(f=>{if(f&&f.is_error&&f.is_error=="yes"&&f.error&&typeof f.error.details<"u"){var y=f,k={};if(y.error&&typeof y.error.details<"u")for(var v=Object.keys(y.error.details),C=0;C<v.length;C++){var S=v[C].replace(".","\\.");k[S]={required:!0,message:y.error.details[v[C]][0]}}s.value=k,Ae.error(u("common.fix_errors")),y&&y.message&&(Ae.error(y.message),y={error:{...y}}),m.error&&m.error(y),e.value=!1}else m.successMessage&&Se.success({placement:l.value.rtl?"bottomLeft":"bottomRight",message:u("common.success"),description:m.successMessage}),_(f.data),e.value=!1,s.value={}}).catch(f=>{e.value=!1})}}},to=x({props:["credentials"],components:{SnippetsOutlined:An},setup(){const e=window.config.app_env,s=window.config.app_type,u=I([{title:"Details",dataIndex:"details"},{title:"action",dataIndex:"action"}]),l=I([{name:"Admin",email:"admin@example.com",password:12345678},{name:"Manager",email:"manager@example.com",password:12345678},{name:"Member",email:"member@example.com",password:12345678}]);return ee(()=>{s=="saas"&&(l.value=[{name:"SuperAdmin",email:"superadmin@example.com",password:12345678},...l.value])}),{appEnv:e,demoCredentials:l,demoCredentialsColumns:u}}}),no={key:0},lo=P("br",null,null,-1),oo=P("br",null,null,-1);function so(e,s,u,l,h,b){const m=o("a-divider"),i=o("SnippetsOutlined"),c=o("a-tooltip"),_=o("a-table");return e.appEnv!="envato"?(d(),E("div",no,[a(m,null,{default:n(()=>[p(r(e.$t("common.demo_account_credentials")),1)]),_:1}),a(_,{pagination:!1,dataSource:e.demoCredentials,columns:e.demoCredentialsColumns},{bodyCell:n(({column:g,record:f})=>[g.dataIndex==="details"?(d(),E(R,{key:0},[P("b",null,r(f.name),1),p(),lo,p(" Email : "+r(f.email)+" ",1),oo,p(" Password : "+r(f.password),1)],64)):A("",!0),g.dataIndex==="action"?(d(),w(c,{key:1,onClick:()=>{e.credentials.email=f.email,e.credentials.password=f.password}},{title:n(()=>[p(r(e.$t("popover.click_here_to_copy_credentials",[f.name])),1)]),default:n(()=>[a(i)]),_:2},1032,["onClick"])):A("",!0)]),_:1},8,["dataSource","columns"])])):A("",!0)}const io=z(to,[["render",so]]);const ro=x({components:{DemoCredentials:io},setup(){const{addEditRequestAdmin:e,loading:s,rules:u}=se(),{globalSetting:l,appType:h}=Z(),b=l.value.login_image_url,m=he(),i=Oe(),c=Ie({email:null,password:null}),_=I({error:"",success:""});return{loading:s,rules:u,credentials:c,onSubmit:()=>{_.value={error:"",success:!1},e({url:"auth/login",data:c,success:f=>{if(f&&f.status=="success"){const y=f.user;m.commit("auth/updateUser",y),m.commit("auth/updateToken",f.token),m.commit("auth/updateExpires",f.expires_in),m.commit("auth/updateVisibleSubscriptionModules",f.visible_subscription_modules),h=="non-saas"?i.push({name:"admin.dashboard.index",params:{success:!0}}):y.is_superadmin&&y.user_type=="super_admins"?(m.commit("auth/updateApp",f.app),m.commit("auth/updateEmailVerifiedSetting",f.email_setting_verified),i.push({name:"superadmin.dashboard.index",params:{success:!0}})):(m.commit("auth/updateApp",f.app),m.commit("auth/updateEmailVerifiedSetting",f.email_setting_verified),m.commit("auth/updateAddMenus",f.shortcut_menus.credentials),i.push({name:"admin.dashboard.index",params:{success:!0}}))}else _.value={error:f.message?f.message:"",success:!1}},error:f=>{}})},onRequestSend:_,globalSetting:l,loginBackground:b,innerWidth:window.innerWidth}}}),uo={class:"login-main-container"},mo={class:"login-logo mb-30"},co=["src"],po={class:"right-login-div"},_o=["src"];function fo(e,s,u,l,h,b){const m=o("a-alert"),i=o("a-input"),c=o("a-form-item"),_=o("a-input-password"),g=o("a-button"),f=o("a-form"),y=o("DemoCredentials"),k=o("a-card"),v=o("a-col"),C=o("a-row");return d(),E("div",uo,[a(C,{class:"main-container-div"},{default:n(()=>[a(v,{xs:24,sm:24,md:24,lg:8},{default:n(()=>[a(C,{class:"login-left-div"},{default:n(()=>[a(v,{xs:{span:20,offset:2},sm:{span:20,offset:2},md:{span:16,offset:4},lg:{span:16,offset:4}},{default:n(()=>[a(k,{title:null,class:"login-div",bordered:e.innerWidth<=768},{default:n(()=>[a(f,{layout:"vertical"},{default:n(()=>[P("div",mo,[P("img",{class:"login-img-logo",src:e.globalSetting.light_logo_url},null,8,co)]),e.onRequestSend.error!=""?(d(),w(m,{key:0,message:e.onRequestSend.error,type:"error","show-icon":"",class:"mb-20 mt-10"},null,8,["message"])):A("",!0),e.onRequestSend.success?(d(),w(m,{key:1,message:e.$t("messages.login_success"),type:"success","show-icon":"",class:"mb-20 mt-10"},null,8,["message"])):A("",!0),a(c,{label:e.$t("user.email_phone"),name:"email",help:e.rules.email?e.rules.email.message:null,validateStatus:e.rules.email?"error":null},{default:n(()=>[a(i,{value:e.credentials.email,"onUpdate:value":s[0]||(s[0]=S=>e.credentials.email=S),onPressEnter:e.onSubmit,placeholder:e.$t("common.placeholder_default_text",[e.$t("user.email_phone")])},null,8,["value","onPressEnter","placeholder"])]),_:1},8,["label","help","validateStatus"]),a(c,{label:e.$t("user.password"),name:"password",help:e.rules.password?e.rules.password.message:null,validateStatus:e.rules.password?"error":null},{default:n(()=>[a(_,{value:e.credentials.password,"onUpdate:value":s[1]||(s[1]=S=>e.credentials.password=S),onPressEnter:e.onSubmit,placeholder:e.$t("common.placeholder_default_text",[e.$t("user.password")])},null,8,["value","onPressEnter","placeholder"])]),_:1},8,["label","help","validateStatus"]),a(c,{class:"mt-30"},{default:n(()=>[a(g,{loading:e.loading,onClick:e.onSubmit,class:"login-btn",block:""},{default:n(()=>[p(r(e.$t("menu.login")),1)]),_:1},8,["loading","onClick"])]),_:1})]),_:1}),a(y,{credentials:e.credentials},null,8,["credentials"])]),_:1},8,["bordered"])]),_:1})]),_:1})]),_:1}),a(v,{xs:0,sm:0,md:24,lg:16},{default:n(()=>[P("div",po,[P("img",{class:"right-image",src:e.loginBackground},null,8,_o)])]),_:1})]),_:1})])}const go=z(ro,[["render",fo]]),Fa=()=>{const e=I([]),s=I({}),u=I(""),l=I(""),h=I(""),b=I(!1),{t:m}=Q(),i=I(window.config.product_name),c=I(window.config.product_version),_=he(),g=I([]),f=I([]),y=I(!1),k=I(""),v=I(0);var C;const S=()=>{const T=window.config.product_name,D=axiosAdmin.get(fe("modules")),L=qe.post("https://envato.codeifly.com/product",{verified_name:T,domain:window.location.host});var q=[];Promise.all([D,L]).then(([K,j])=>{const F=j.data.product,M=window.config.installed_modules,B=window.config.modules;g.value=j.data.offers,f.value=j.data.settings,ce(F.modules,J=>{const Y=Ke(M,["verified_name",J.verified_name]);if(q.push({...J,current_version:Y?Y.current_version:"-",status:Ee(B,J.verified_name),installed:Y!=null}),!J.verified||J.other_domain_verified){var V=[...window.config.modules],W=ht(V,function(G){return G!=J.verified_name});_.commit("auth/updateActiveModules",W),window.config.modules=W}}),e.value=q})},U=T=>{const{success:D}=T;b.value=!0,s.value={},l.value="",qe.post("https://envato.codeifly.com/verify",{verified_name:i.value,purchase_code:u.value,domain:window.location.host,app_url:window.location.href,version:c.value}).then(L=>{b.value=!1,L.data.status=="success"?(b.value=!1,Se.success({message:m("common.success")}),h.value=m("messages.verify_success"),D(L.data)):(Se.error({message:m("common.error")}),l.value=L.data.message)}).catch(L=>{b.value=!1;const q=L.response.data,K=L.response.status;var j={};if(K==422){if(q.errors&&typeof q.errors<"u")for(var F=Object.keys(q.errors),M=0;M<F.length;M++){var B=F[M].replace(".","\\.");j[B]={required:!0,message:q.errors[F[M]][0]}}s.value=j,Ae.error(m("common.fix_errors"))}else l.value=q.message?q.message:m("messages.somehing_went_wrong")})},$=T=>{y.value=!0,v.value=0,k.value="";const D={verified_name:T,domain:window.location.host};C=window.setInterval(function(){O()},1500),axiosAdmin.post(fe("modules/install"),D).then(L=>{y.value=!1,v.value=100,k.value="started",axiosAdmin.post(fe("modules/extract"),D).then(q=>{k.value="completed",qe.post("https://envato.codeifly.com/version-update",{verified_name:q.data.verified_name,version:q.data.version,domain:window.location.host}),_.commit("auth/updateActiveModules",q.data.enabled_modules),window.config.modules=q.data.enabled_modules,window.config.installed_modules=q.data.installed_modules}).catch(q=>{k.value="failed"})}).catch(L=>{y.value=!1,v.value=0,clearInterval(C)})},O=()=>{axiosAdmin(fe("modules/download-percentage")).then(T=>{v.value=parseInt(T.data.percentage),v.value>=100&&clearInterval(C)})};return{allModules:e,getModuleData:S,install:$,verifyPurchase:U,rules:s,purchaseCode:u,errorMessage:l,successMessage:h,loading:b,productName:i,version:c,offers:g,settings:f,downloading:y,downloadPercentage:v,extracting:k}};const ho=x({setup(){const e=window.config.verify_purchase_background,s=Oe(),{rules:u,purchaseCode:l,errorMessage:h,successMessage:b,loading:m,verifyPurchase:i}=Fa();return{rules:u,purchaseCode:l,loading:m,verify:()=>i({success:_=>{s.push({name:"admin.login"})}}),errorMessage:h,successMessage:b,verifyPurchaseBackground:e}}}),bo={class:"container-content"},yo={class:"text-center"},vo=["innerHTML"],ko=["innerHTML"];function wo(e,s,u,l,h,b){const m=o("a-typography-title"),i=o("a-divider"),c=o("a-alert"),_=o("a-input"),g=o("a-form-item"),f=o("a-button"),y=o("a-form"),k=o("a-col"),v=o("a-row");return d(),E("div",{class:"main-container",style:ca({backgroundImage:`url(${e.verifyPurchaseBackground})`})},[P("div",bo,[a(v,{type:"flex",justify:"center"},{default:n(()=>[a(k,{span:8},{default:n(()=>[P("div",yo,[a(m,{level:4},{default:n(()=>[p(r(e.$t("common.verify_purchase")),1)]),_:1})]),a(i),e.successMessage!=""?(d(),w(c,{key:0,type:"success","show-icon":"",banner:""},{message:n(()=>[P("span",{innerHTML:e.successMessage},null,8,vo)]),_:1})):A("",!0),e.errorMessage!=""?(d(),w(c,{key:1,type:"error","show-icon":"",banner:""},{message:n(()=>[P("span",{innerHTML:e.errorMessage},null,8,ko)]),_:1})):A("",!0),a(y,{layout:"vertical",class:"mt-20"},{default:n(()=>[a(g,{label:e.$t("common.purchase_code"),name:"purchase_code",help:e.rules.purchase_code?e.rules.purchase_code.message:null,validateStatus:e.rules.purchase_code?"error":null,class:"required"},{default:n(()=>[a(_,{value:e.purchaseCode,"onUpdate:value":s[0]||(s[0]=C=>e.purchaseCode=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"]),a(g,null,{default:n(()=>[a(f,{type:"primary",onClick:e.verify,loading:e.loading},{default:n(()=>[p(r(e.$t("common.verify_purchase")),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1})]),_:1})])],4)}const Co=z(ho,[["render",wo]]),So=[{path:"/admin/login",component:go,name:"admin.login",meta:{requireUnauth:!0,menuKey:e=>"login"}},{path:"/admin/verify",component:Co,name:"verify.main",meta:{requireUnauth:!0,menuKey:e=>"verify_product"}}],$o="modulepreload",Do=function(e){return"/build/"+e},ct={},Fe=function(s,u,l){if(!u||u.length===0)return s();const h=document.getElementsByTagName("link");return Promise.all(u.map(b=>{if(b=Do(b),b in ct)return;ct[b]=!0;const m=b.endsWith(".css"),i=m?'[rel="stylesheet"]':"";if(!!l)for(let g=h.length-1;g>=0;g--){const f=h[g];if(f.href===b&&(!m||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${b}"]${i}`))return;const _=document.createElement("link");if(_.rel=m?"stylesheet":$o,m||(_.as="script",_.crossOrigin=""),_.href=b,document.head.appendChild(_),m)return new Promise((g,f)=>{_.addEventListener("load",g),_.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${b}`)))})})).then(()=>s()).catch(b=>{const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=b,window.dispatchEvent(m),!m.defaultPrevented)throw b})},Ao=x({setup(){return{}}}),To={class:"breadcrumb-header"};function Eo(e,s,u,l,h,b){const m=o("a-col"),i=o("a-row"),c=o("a-card");return d(),E("div",To,[a(c,{class:"page-content-sub-header breadcrumb-left-border"},{default:n(()=>[a(i,null,{default:n(()=>[a(m,{span:24},{default:n(()=>[oe(e.$slots,"header",{key:"header"})]),_:3}),a(m,{span:24},{default:n(()=>[oe(e.$slots,"breadcrumb",{key:"breadcrumb"})]),_:3})]),_:3})]),_:3})])}const me=z(Ao,[["render",Eo]]),Oo=[],Uo=["bgColor"],Po=bt("figure",Oo)`
display: flex;
margin: 0;
position: relative;
h2,
p {
  margin: 0;
}
figcaption {
  .more {
	position: absolute;
	top: 0px;
	left: 0;
	a {
	  color: #888;
	}
  }
  h2 {
	font-size: 20px;
	font-weight: 600;
  }
  p {
	font-size: 14px;
	color: #9299B8;
  }
}
`,Io=bt("div",Uo)`
  width: 60px;
  height: 60px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: ${e=>e.bgColor?e.bgColor:"#5F63F2"};
margin - right: 20px;
`,Mo={props:{bgColor:{default:"#5F63F2"},bodyStyle:{default:{}}},components:{CardWidget:Po,CardWidgetIcon:Io}};function Fo(e,s,u,l,h,b){const m=o("CardWidgetIcon"),i=o("a-space"),c=o("CardWidget"),_=o("a-card");return d(),w(_,{bordered:!1,bodyStyle:u.bodyStyle},{default:n(()=>[a(c,null,{default:n(()=>[a(i,null,{default:n(()=>[a(m,{bgColor:u.bgColor},{default:n(()=>[oe(e.$slots,"image")]),_:3},8,["bgColor"]),P("figcaption",null,[oe(e.$slots,"description")])]),_:3})]),_:3})]),_:3},8,["bodyStyle"])}const Vt=z(Mo,[["render",Fo]]);yt.register(...vt);const Ro={props:["data"],components:{DoughnutChart:kt.DoughnutChart},setup(e){const s=I(),u=I({responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!1,text:"Chart.js Doughnut Chart"}}}),l=I({});return we(e,(h,b)=>{l.value={labels:h.data.actionedCampaigns?h.data.actionedCampaigns.labels:[],datasets:[{data:h.data.actionedCampaigns?h.data.actionedCampaigns.values:[],backgroundColor:h.data.actionedCampaigns?h.data.actionedCampaigns.colors:[]}]}}),{chartRef:s,testData:l,options:u}}};function Lo(e,s,u,l,h,b){const m=o("DoughnutChart");return d(),w(m,{ref:"chartRef",chartData:l.testData,options:l.options},null,8,["chartData","options"])}const qo=z(Ro,[["render",Lo]]);yt.register(...vt);const Bo={props:["data"],components:{BarChart:kt.BarChart},setup(e){const s=I(),{t:u}=Q(),l=I({responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!1,text:"Chart.js Doughnut Chart"}}}),h=I({});return we(e,(b,m)=>{h.value={labels:b.data.callMade.dates?b.data.callMade.dates:[],datasets:[{label:u("dashboard.call_made"),data:b.data.callMade.calls?b.data.callMade.calls:[],backgroundColor:"#20C997"}]}}),{chartRef:s,testData:h,options:l}}};function Ko(e,s,u,l,h,b){const m=o("BarChart");return d(),w(m,{ref:"chartRef",chartData:l.testData,options:l.options},null,8,["chartData","options"])}const zo=z(Bo,[["render",Ko]]),Ve=()=>{const e=I({}),s=I(!1);return{viewDrawerData:e,isViewDrawerVisible:s,showViewDrawer:h=>{e.value=h,s.value=!0},hideViewDrawer:()=>{e.value={},s.value=!1}}},Vo={props:["responseData"],components:{PlayCircleOutlined:Me,EyeOutlined:Be},setup(){const e=Oe(),{formatDateTime:s}=Z(),u=Ve(),{t:l}=Q(),h=I([{title:l("lead.campaign"),dataIndex:"campaign"},{title:l("salesman.salesman"),dataIndex:"salesman"},{title:l("lead.booking_time"),dataIndex:"booking_time"},{title:l("common.action"),dataIndex:"action"}]);return{formatDateTime:s,...u,appointmentColumns:h,goAndResumeLead:m=>{ge.confirm({title:l("common.are_you_sure")+"?",icon:a(ue),content:l("lead.are_you_want_to_resume_this_lead"),centered:!0,okText:l("common.yes"),okType:"danger",cancelText:l("common.no"),onOk(){e.push({name:"admin.call_manager.take_action",params:{id:m.xid}})},onCancel(){}})}}}};function Ho(e,s,u,l,h,b){const m=o("PlayCircleOutlined"),i=o("a-button"),c=o("EyeOutlined"),_=o("a-space"),g=o("a-tooltip"),f=o("a-table"),y=o("view-lead-details");return d(),E(R,null,[a(f,{columns:l.appointmentColumns,"row-key":k=>k.xid,"data-source":u.responseData.allAppointments,pagination:!1},{bodyCell:n(({column:k,record:v})=>[k.dataIndex==="campaign"?(d(),E(R,{key:0},[p(r(v.campaign.name),1)],64)):A("",!0),k.dataIndex==="salesman"?(d(),E(R,{key:1},[p(r(v.salesman_booking&&v.salesman_booking.user&&v.salesman_booking.user.name?v.salesman_booking.user.name:""),1)],64)):A("",!0),k.dataIndex==="booking_time"?(d(),E(R,{key:2},[p(r(v.salesman_booking&&v.salesman_booking.date_time?l.formatDateTime(v.salesman_booking.date_time):""),1)],64)):A("",!0),k.dataIndex==="action"?(d(),w(g,{key:3,title:e.$t("lead.go_resume_call")},{default:n(()=>[a(_,null,{default:n(()=>[a(i,{type:"primary",style:{backgroundColor:"#1ec997",borderColor:"#1ec997"},onClick:C=>l.goAndResumeLead(v)},{icon:n(()=>[a(m)]),_:2},1032,["onClick"]),a(i,{type:"primary",onClick:C=>e.showViewDrawer(v)},{icon:n(()=>[a(c)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["title"])):A("",!0)]),_:1},8,["columns","row-key","data-source"]),a(y,{visible:e.isViewDrawerVisible,lead:e.viewDrawerData,onClose:e.hideViewDrawer},null,8,["visible","lead","onClose"])],64)}const jo=z(Vo,[["render",Ho]]),No={props:["responseData"],components:{PlayCircleOutlined:Me,EyeOutlined:Be},setup(){const e=Oe(),{formatDateTime:s}=Z(),u=Ve(),{t:l}=Q(),h=I([{title:l("lead.campaign"),dataIndex:"campaign"},{title:l("common.action"),dataIndex:"action"}]);return{formatDateTime:s,...u,appointmentColumns:h,goAndResumeLead:m=>{ge.confirm({title:l("common.are_you_sure")+"?",icon:a(ue),content:l("lead.are_you_want_to_resume_this_lead"),centered:!0,okText:l("common.yes"),okType:"danger",cancelText:l("common.no"),onOk(){e.push({name:"admin.call_manager.take_action",params:{id:m.xid}})},onCancel(){}})}}}},Wo=P("br",null,null,-1);function Go(e,s,u,l,h,b){const m=o("PlayCircleOutlined"),i=o("a-button"),c=o("EyeOutlined"),_=o("a-space"),g=o("a-tooltip"),f=o("a-table"),y=o("view-lead-details");return d(),E(R,null,[a(f,{columns:l.appointmentColumns,"row-key":k=>k.xid,"data-source":u.responseData.allFollowUps,pagination:!1},{bodyCell:n(({column:k,record:v})=>[k.dataIndex==="campaign"?(d(),E(R,{key:0},[p(r(v.campaign.name)+" ",1),Wo,P("small",null,r(v.lead_follow_up&&v.lead_follow_up.date_time?l.formatDateTime(v.lead_follow_up.date_time):""),1)],64)):A("",!0),k.dataIndex==="action"?(d(),w(g,{key:1,title:e.$t("lead.go_resume_call")},{default:n(()=>[a(_,null,{default:n(()=>[a(i,{type:"primary",style:{backgroundColor:"#1ec997",borderColor:"#1ec997"},onClick:C=>l.goAndResumeLead(v)},{icon:n(()=>[a(m)]),_:2},1032,["onClick"]),a(i,{type:"primary",onClick:C=>e.showViewDrawer(v)},{icon:n(()=>[a(c)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["title"])):A("",!0)]),_:1},8,["columns","row-key","data-source"]),a(y,{visible:e.isViewDrawerVisible,lead:e.viewDrawerData,onClose:e.hideViewDrawer},null,8,["visible","lead","onClose"])],64)}const Yo=z(No,[["render",Go]]),Xo=x({props:{dateRange:{default:[]}},emits:["dateTimeChanged"],setup(e,{emit:s}){const u=I([]),{appSetting:l,dayjs:h}=Z();return ee(()=>{e.dateRange&&e.dateRange.length>0&&(u.value=[h(e.dateRange[0]),h(e.dateRange[1])])}),{appSetting:l,dateRangeValue:u,dateTimeChanged:i=>{i?s("dateTimeChanged",[i[0].tz(l.value.timezone).startOf("day").utc().format("YYYY-MM-DD HH:mm:ss"),i[1].tz(l.value.timezone).endOf("day").utc().format("YYYY-MM-DD HH:mm:ss")]):s("dateTimeChanged",[])},resetPicker:()=>{u.value=[]}}}});function Jo(e,s,u,l,h,b){const m=o("a-range-picker");return d(),w(m,{value:e.dateRangeValue,"onUpdate:value":s[0]||(s[0]=i=>e.dateRangeValue=i),format:e.appSetting.date_format,placeholder:[e.$t("common.start_date"),e.$t("common.end_date")],style:{width:"100%"},onChange:e.dateTimeChanged},null,8,["value","format","placeholder","onChange"])}const ua=z(Xo,[["render",Jo]]);const Qo={components:{AdminPageHeader:me,StateWidget:Vt,ActionedCampaigns:qo,CallMade:zo,SalesmanBooking:jo,Followups:Yo,DateRangePicker:ua,MobileOutlined:Ea,CopyrightCircleOutlined:wt,ClockCircleOutlined:Oa,ScheduleOutlined:pa,DoubleRightOutlined:sa},setup(){const{formatTimeDuration:e}=Z();Q();const s=I([]),u=Ie({dates:[]});ee(()=>{l()});const l=()=>{const h=axiosAdmin.post("dashboard",u);Promise.all([h]).then(([b])=>{s.value=b.data})};return we([u],(h,b)=>{l()}),{formatTimeDuration:e,filters:u,responseData:s}}},Zo={class:"dashboard-page-content-container"},xo={class:"mt-30 mb-20"},es={key:0},as={key:0},ts={key:0},ns={key:0};function ls(e,s,u,l,h,b){const m=o("a-page-header"),i=o("AdminPageHeader"),c=o("DateRangePicker"),_=o("a-col"),g=o("a-row"),f=o("CopyrightCircleOutlined"),y=o("StateWidget"),k=o("ScheduleOutlined"),v=o("MobileOutlined"),C=o("ClockCircleOutlined"),S=o("ActionedCampaigns"),U=o("a-card"),$=o("CallMade"),O=o("DoubleRightOutlined"),T=o("a-button"),D=o("SalesmanBooking"),L=o("Followups");return d(),E(R,null,[a(i,null,{header:n(()=>[a(m,{title:e.$t("menu.dashboard"),style:{padding:"0px"}},null,8,["title"])]),_:1}),P("div",Zo,[a(g,{gutter:[8,8],class:"mt-30 mb-10"},{default:n(()=>[a(_,{xs:24,sm:24,md:12,lg:6,xl:6},{default:n(()=>[a(c,{ref:"serachDateRangePicker",onDateTimeChanged:s[0]||(s[0]=q=>l.filters.dates=q)},null,512)]),_:1})]),_:1}),P("div",xo,[a(g,{gutter:[15,15]},{default:n(()=>[a(_,{xs:24,sm:24,md:6,lg:6,xl:6},{default:n(()=>[a(y,{bgColor:"#08979c"},{image:n(()=>[a(f,{style:{color:"#fff","font-size":"24px"}})]),description:n(()=>[l.responseData.stateData?(d(),E("h2",es,r(l.responseData.stateData.campaign_count),1)):A("",!0),P("p",null,r(e.$t("dashboard.active_campaigns")),1)]),_:1})]),_:1}),a(_,{xs:24,sm:24,md:6,lg:6,xl:6},{default:n(()=>[a(y,{bgColor:"#389e0d"},{image:n(()=>[a(k,{style:{color:"#fff","font-size":"24px"}})]),description:n(()=>[l.responseData.stateData?(d(),E("h2",as,r(l.responseData.stateData.total_follow_ups),1)):A("",!0),P("p",null,r(e.$t("dashboard.total_follow_up")),1)]),_:1})]),_:1}),a(_,{xs:24,sm:24,md:6,lg:6,xl:6},{default:n(()=>[a(y,{bgColor:"#d46b08"},{image:n(()=>[a(v,{style:{color:"#fff","font-size":"24px"}})]),description:n(()=>[l.responseData.stateData?(d(),E("h2",ts,r(l.responseData.stateData.lead_count),1)):A("",!0),P("p",null,r(e.$t("dashboard.call_made")),1)]),_:1})]),_:1}),a(_,{xs:24,sm:24,md:6,lg:6,xl:6},{default:n(()=>[a(y,{bgColor:"#ffa39e"},{image:n(()=>[a(C,{style:{color:"#fff","font-size":"24px"}})]),description:n(()=>[l.responseData.stateData?(d(),E("h2",ns,[P("small",null,r(l.formatTimeDuration(l.responseData.stateData.total_times)),1)])):A("",!0),P("p",null,r(e.$t("dashboard.total_duration")),1)]),_:1})]),_:1})]),_:1})]),a(g,{gutter:[18,18],class:"mt-30 mb-20"},{default:n(()=>[a(_,{xs:24,sm:24,md:12,lg:6,xl:6},{default:n(()=>[a(U,{title:e.$t("dashboard.active_actioned_campaigns")},{default:n(()=>[a(S,{data:l.responseData},null,8,["data"])]),_:1},8,["title"])]),_:1}),a(_,{xs:24,sm:24,md:12,lg:18,xl:18},{default:n(()=>[a(U,{title:e.$t("dashboard.call_made")},{extra:n(()=>[a(T,{class:"mt-10",type:"link",onClick:s[1]||(s[1]=q=>e.$router.push({name:"admin.leads.index"}))},{default:n(()=>[p(r(e.$t("common.view_all"))+" ",1),a(O)]),_:1})]),default:n(()=>[a($,{data:l.responseData},null,8,["data"])]),_:1},8,["title"])]),_:1})]),_:1}),a(g,{gutter:[18,18],class:"mt-30 mb-20"},{default:n(()=>[a(_,{xs:24,sm:24,md:12,lg:16,xl:16},{default:n(()=>[l.responseData&&l.responseData.allAppointments?(d(),w(U,{key:0,title:e.$t("salesman_booking.salesman_booking"),bodyStyle:{padding:"0px"}},{extra:n(()=>[a(T,{class:"mt-10",type:"link",onClick:s[2]||(s[2]=q=>e.$router.push({name:"admin.bookings.salesman_bookings.index"}))},{default:n(()=>[p(r(e.$t("common.view_all"))+" ",1),a(O)]),_:1})]),default:n(()=>[a(D,{responseData:l.responseData},null,8,["responseData"])]),_:1},8,["title"])):A("",!0)]),_:1}),a(_,{xs:24,sm:24,md:12,lg:8,xl:8},{default:n(()=>[l.responseData&&l.responseData.allFollowUps?(d(),w(U,{key:0,title:e.$t("lead_follow_up.follow_up"),bodyStyle:{padding:"0px"}},{extra:n(()=>[a(T,{class:"mt-10",type:"link",onClick:s[3]||(s[3]=q=>e.$router.push({name:"admin.bookings.lead_follow_up.index"}))},{default:n(()=>[p(r(e.$t("common.view_all"))+" ",1),a(O)]),_:1})]),default:n(()=>[a(L,{responseData:l.responseData},null,8,["responseData"])]),_:1},8,["title"])):A("",!0)]),_:1})]),_:1})])],64)}const os=z(Qo,[["render",ls]]),ss=[{path:"/",component:()=>Fe(()=>import("./Admin-bb3356a6.js"),["assets/Admin-bb3356a6.js","assets/vendor-a91b8582.js","assets/vendor-ad46f743.css","assets/Admin-14aea5fe.css"]),children:[{path:"/admin/dashboard",component:os,name:"admin.dashboard.index",meta:{requireAuth:!0,menuParent:"dashboard",menuKey:e=>"dashboard"}}]}],Ht=()=>{const{t:e}=Q(),s="users?fields=id,xid,user_type,name,email,profile_image,profile_image_url,phone,address,status,created_at,role_id,x_role_id,role{id,xid,name,display_name}",u="users",l=["role_id"],h={name:"",email:"",password:"",profile_image:void 0,profile_image_url:void 0,phone:"",address:"",status:"enabled",user_type:"staff_members",role_id:void 0},b=[{title:e("user.name"),dataIndex:"name",key:"name"},{title:e("user.email"),dataIndex:"email"},{title:e("user.created_at"),dataIndex:"created_at"},{title:e("user.status"),dataIndex:"status",key:"status"},{title:e("common.action"),dataIndex:"action"}],m=[{key:"name",value:e("user.name")},{key:"email",value:e("user.email")},{key:"phone",value:e("user.phone")}];return{url:s,initData:h,columns:b,filterableColumns:m,addEditUrl:u,hashableColumns:l}},ya=()=>{const e=he(),s=Ie({data:[],pagination:{pageSize:10,showSizeChanger:!0},loading:!1,sorter:{},searchColumn:void 0,searchString:"",searchStatus:void 0,filterLoading:!1,filterableColumns:[],selectedRowKeys:[],tableColumns:[]}),u=I(1),l=I({}),h=I([]),b=I(""),m=I({allowExport:!1,exportType:""}),i=k=>{const v=k.limit,C=(k.page-1)*v,S=c(v,C);return b.value=S,axiosAdmin.get(S)},c=(k,v)=>{var C=l.value.url,S="",U="",$=!1,O=!1;if("filterString"in l.value&&l.value.filterString!=""&&typeof l.value.filterString=="string"&&(S+=`${l.value.filterString} and `,$=!0),typeof l.value.filters=="object"&&Va(l.value.filters,(D,L)=>{D!=null&&D!=""&&(S+=`${L} eq "${D}" and `,$=!0,Ee(h.value,L)&&(U+=`${D},`,O=!0))}),s.searchColumn!=null&&s.searchString!="")S+=`${s.searchColumn} lk "%${s.searchString}%" and `,$=!0,s.filterLoading=!0;else if(s.searchString!=""&&s.filterableColumns.length>0){var T="";ce(s.filterableColumns,D=>{T+=`${D.key} lk "%${s.searchString}%" or `}),T.length>0&&(S+=`(${T.substring(0,T.length-3)})`,$=!1),s.filterLoading=!0}if(S.length>0&&$==!0?C+=`&filters=${encodeURIComponent(S.substring(0,S.length-5))}`:S.length>0&&$==!1&&(C+=`&filters=${encodeURIComponent(S)}`),l.value.extraFilters&&typeof l.value.extraFilters=="object"&&Va(l.value.extraFilters,(D,L)=>{D!=null&&D!=""&&(C+=`&${L}=${D}`,Ee(h.value,L)&&(U+=`${D},`,O=!0))}),s.sorter&&s.sorter.field){const D=s.sorter.order=="ascend"||s.sorter.order=="asc"?"asc":"desc";C+=`&order=${s.sorter.field} ${D}`}else C+="&order=id desc";return C+=`&offset=${v}&limit=${k}`,O&&(U=U.substring(0,U.length-1),C+=`&hashable=${U}`),C},_=(k,v,C)=>{const S={...s.pagination};S.current=k.current,S.pageSize=k.pageSize,s.pagination=S,u.value=k.current,C=s.sorter,g({limit:k.pageSize,page:k.current,sortField:C.field,sortOrder:C.order,...v})},g=(k={})=>{s.loading=!0,i({limit:s.pagination.pageSize,page:u.value,...k}).then(v=>{const C=v.data,S={...s.pagination};if(S.total=v.meta.paging.total,s.loading=!1,s.data=C,s.pagination=S,s.filterLoading=!1,s.selectedRowKeys=[],m.value.allowExport){var U=m.value.exportType;if(U!=""){var $=e.state.auth.allExportData,O=Ct($,T=>T.export_type!=U);e.commit("auth/updatAllExportData",[...O,{export_type:U,data:C,url:b.value}])}}k.success!=null&&k.success(C)})},f=Tn(()=>{g({page:1})},400);return{table:s,tableUrl:l,exportDetails:m,currentPage:u,hashable:h,handleTableChange:_,fetch:g,onTableSearch:f,onRowSelectChange:k=>{s.selectedRowKeys=k}}},Te=()=>{const{table:e,tableUrl:s,hashable:u,currentPage:l,handleTableChange:h,fetch:b,onTableSearch:m,onRowSelectChange:i,exportDetails:c}=ya(),_=I(!1),g=I({}),f=I(""),y=I(""),k=I({}),v=I([]),C=I({}),S=I(!1),U=I("add"),$=I(""),O=I({}),{t:T}=Q(),D=he(),L=le=>{_.value=!0,g.value=le},q=()=>{$.value=f.value,U.value="add",S.value=!0,g.value={}},K=()=>{H(),S.value=!1},j=()=>{_.value=!1,g.value={}},F=le=>{const be={};var $e=C.value;Object.keys(k.value).forEach(de=>{if(En($e,de)){const ne=$e[de];be[de]=On(le,ne)}else Ee(v.value,de)?be[de]=le[`x_${de}`]:be[de]=le[de]}),be._method="PUT",O.value=be,g.value=le,$.value=`${f.value}/${le.xid}`,U.value="edit",S.value=!0},M=()=>{D.dispatch("auth/updateVisibleSubscriptionModules")},B=le=>{V(le,"add-edit")},J=le=>{V(le,"add-new")},Y=le=>{V(le,"add-continue")},V=(le,be="add-edit")=>{if(U.value=="add"){const $e={...e.pagination};$e.current=1,l.value=1,e.pagination=$e}M(),(be=="add-edit"||be=="add-new")&&H(),b({page:U.value=="add"?1:l.value,limit:10}),be=="add-edit"&&(S.value=!1)},W=le=>{ge.confirm({title:T("common.delete")+"?",icon:a(ue),content:T(`${y.value}.delete_message`),centered:!0,okText:T("common.yes"),okType:"danger",cancelText:T("common.no"),onOk(){return axiosAdmin.delete(`${f.value}/${le}`).then(be=>{M(),b({page:l.value}),Se.success({message:T("common.success"),description:T(`${y.value}.deleted`),placement:"bottomRight"})}).catch(()=>{})},onCancel(){}})},G=()=>{ge.confirm({title:T("common.delete")+"?",icon:a(ue),content:T(`${y.value}.selected_delete_message`),centered:!0,okText:T("common.yes"),okType:"danger",cancelText:T("common.no"),onOk(){const le=[];ce(e.selectedRowKeys,be=>{le.push(axiosAdmin.delete(`${f.value}/${be}`))}),Promise.all(le).then(be=>{M(),b({page:l.value}),Se.success({message:T("common.success"),description:T(`${y.value}.deleted`),placement:"bottomRight"})})},onCancel(){}})},H=()=>{O.value={...k.value}},N=le=>{O.value={...O.value,...le}},te=ve(()=>y.value!=""?U.value=="add"?T(`${y.value}.add`):T(`${y.value}.edit`):""),Ce=ve(()=>y.value!=""?U.value=="add"?T(`${y.value}.created`):T(`${y.value}.updated`):"");return we(v,(le,be)=>{u.value=le}),{detailsVisible:_,viewData:g,onCloseDetails:j,addEditVisible:S,addEditType:U,addEditUrl:$,currentPage:l,formData:O,initData:k,crudUrl:f,langKey:y,hashableColumns:v,multiDimensalObjectColumns:C,pageTitle:te,successMessage:Ce,viewItem:L,addItem:q,editItem:F,onCloseAddEdit:K,showDeleteConfirm:W,addEditSuccess:B,addAndNewSuccess:J,addAndContinueSuccess:Y,restFormData:H,assignNewFormData:N,showSelectedDeleteConfirm:G,table:e,tableUrl:s,hashable:u,handleTableChange:h,fetch:b,onTableSearch:m,onRowSelectChange:i,exportDetails:c}};const ds=x({props:{formData:null,folder:String,imageField:{default:"image",type:String},url:{default:"upload-file",type:String}},components:{LoadingOutlined:De,PlusOutlined:ae},setup(e,{emit:s}){const u=I([]),l=I(!1),{t:h}=Q();return{fileList:u,loading:l,customRequest:m=>{const i=new FormData;i.append("image",m.file),i.append("folder",e.folder),l.value=!0,axiosAdmin.post(e.url,i,{headers:{"Content-Type":"multipart/form-data"}}).then(c=>{u.value=[],l.value=!1,s("onFileUploaded",{file:c.data.file,file_url:c.data.file_url})}).catch(()=>{l.value=!1,Ae.error(h("messages.uploading_failed"))})}}}}),is={key:0},rs=["src"],us={key:1},ms={class:"ant-upload-text"};function cs(e,s,u,l,h,b){const m=o("loading-outlined"),i=o("plus-outlined"),c=o("a-upload");return d(),w(c,{accept:"image/*","file-list":e.fileList,"onUpdate:fileList":s[0]||(s[0]=_=>e.fileList=_),name:"image","list-type":"picture-card",class:"avatar-uploader","show-upload-list":!1,customRequest:e.customRequest},{default:n(()=>[e.formData[e.imageField]!=null?(d(),E("div",is,[P("img",{style:{width:"128px"},src:e.formData[`${e.imageField}_url`],alt:"avatar"},null,8,rs)])):(d(),E("div",us,[e.loading?(d(),w(m,{key:0})):(d(),w(i,{key:1})),P("div",ms,r(e.$t("common.upload")),1)]))]),_:1},8,["file-list","customRequest"])}const Ye=z(ds,[["render",cs]]),jt=()=>{const e="roles?fields=id,xid,name,display_name,description,perms.limit(10000)",s="roles",{t:u}=Q(),l=Ie({permissions:[]}),h={name:"",display_name:"",description:"",permissions:[]},b=[{title:u("role.role_name"),dataIndex:"display_name",sorter:!0},{title:u("role.description"),dataIndex:"description"},{title:u("common.action"),dataIndex:"action"}],m=[{key:"name",value:u("role.role_name")}];return{url:e,addEditUrl:s,initData:h,columns:b,filterableColumns:m,preFetchData:l,getPreFetchData:()=>{axiosAdmin.get("permissions?fields=id,xid,name,display_name&limit=10000").then(c=>{l.permissions=c.data})}}};const ps=x({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ae,LoadingOutlined:De,SaveOutlined:_e},setup(e,{emit:s}){const{addEditRequestAdmin:u,loading:l,rules:h}=se(),b=I([]);Q();const m=I([]),i=I([]),{slugify:c}=Z();ee(()=>{axiosAdmin.get("permissions?fields=id,xid,name,display_name&limit=10000").then(f=>{const y=[];f.data.map(k=>{y[k.name]=k.xid}),m.value=y})});const _=()=>{const f={...e.formData,permissions:i.value};u({url:e.url,data:f,successMessage:e.successMessage,success:y=>{s("addEditSuccess",y.xid)}})},g=()=>{h.value={},s("closed")};return we(()=>e.visible,(f,y)=>{f&&e.addEditType=="edit"?e.data.perms.forEach(k=>{i.value.push(k.xid)}):i.value=[]}),{loading:l,rules:h,onClose:g,onSubmit:_,roles:b,permissions:m,drawerWidth:window.innerWidth<=991?"90%":"45%",checkedPermissions:i,slugify:c}}}),_s={class:"d-flex flex-column scroll-y"},fs={class:"tbl-responsive"},gs={class:"table align-middle table-row-dashed row-gap"},hs={class:"text-gray-600 fw-bold"},bs={class:"text-gray-800"},ys={class:"d-flex"},vs={class:"form-check form-check-custom me-5 me-lg-20"},ks={class:"form-check form-check-custom me-5 me-lg-20"},ws={class:"form-check form-check-custom me-5 me-lg-20"},Cs={class:"form-check form-check-custom me-5 me-lg-20"},Ss={class:"text-gray-800"},$s={class:"d-flex"},Ds={class:"form-check form-check-custom me-5 me-lg-20"},As={class:"form-check form-check-custom me-5 me-lg-20"},Ts={class:"form-check form-check-custom me-5 me-lg-20"},Es={class:"form-check form-check-custom me-5 me-lg-20"},Os={class:"text-gray-800"},Us={class:"d-flex"},Ps={class:"form-check form-check-custom me-5 me-lg-20"},Is={class:"form-check form-check-custom me-5 me-lg-20"},Ms={class:"form-check form-check-custom me-5 me-lg-20"},Fs={class:"form-check form-check-custom me-5 me-lg-20"},Rs={class:"text-gray-800"},Ls={class:"d-flex"},qs={class:"form-check form-check-custom me-5 me-lg-20"},Bs={class:"form-check form-check-custom me-5 me-lg-20"},Ks={class:"text-gray-800"},zs={class:"d-flex"},Vs={class:"form-check form-check-custom me-5 me-lg-20"},Hs={class:"form-check form-check-custom me-5 me-lg-20"},js={class:"form-check form-check-custom me-5 me-lg-20"},Ns={class:"text-gray-800"},Ws={class:"d-flex"},Gs={class:"form-check form-check-custom me-5 me-lg-20"},Ys={class:"form-check form-check-custom me-5 me-lg-20"},Xs={class:"form-check form-check-custom me-5 me-lg-20"},Js={class:"form-check form-check-custom me-5 me-lg-20"},Qs={class:"form-check form-check-custom me-5 me-lg-20"},Zs={class:"text-gray-800"},xs={class:"d-flex"},ed={class:"form-check form-check-custom me-5 me-lg-20"},ad={class:"form-check form-check-custom me-5 me-lg-20"},td={class:"form-check form-check-custom me-5 me-lg-20"},nd={class:"form-check form-check-custom"},ld={class:"text-gray-800"},od={class:"d-flex"},sd={class:"form-check form-check-custom me-5 me-lg-20"},dd={class:"form-check form-check-custom me-5 me-lg-20"},id={class:"form-check form-check-custom me-5 me-lg-20"},rd={class:"form-check form-check-custom"},ud={class:"text-gray-800"},md={class:"d-flex"},cd={class:"form-check form-check-custom me-5 me-lg-20"},pd={class:"form-check form-check-custom me-5 me-lg-20"},_d={class:"form-check form-check-custom me-5 me-lg-20"},fd={class:"form-check form-check-custom"},gd={class:"text-gray-800"},hd={class:"d-flex"},bd={class:"form-check form-check-custom me-5 me-lg-20"},yd={class:"form-check form-check-custom me-5 me-lg-20"},vd={class:"form-check form-check-custom me-5 me-lg-20"},kd={class:"form-check form-check-custom me-5 me-lg-20"},wd={class:"form-check form-check-custom me-5 me-lg-20"},Cd={class:"text-gray-800"},Sd={class:"d-flex"},$d={class:"form-check form-check-custom me-5 me-lg-20"},Dd={class:"form-check form-check-custom me-5 me-lg-20"},Ad={class:"form-check form-check-custom me-5 me-lg-20"},Td={class:"form-check form-check-custom me-5 me-lg-20"},Ed={class:"text-gray-800"},Od={class:"d-flex"},Ud={class:"form-check form-check-custom me-5 me-lg-20"},Pd={class:"form-check form-check-custom me-5 me-lg-20"},Id={class:"form-check form-check-custom me-5 me-lg-20"},Md={class:"form-check form-check-custom"},Fd={class:"text-gray-800"},Rd={class:"d-flex"},Ld={class:"form-check form-check-custom me-5 me-lg-20"},qd={class:"form-check form-check-custom me-5 me-lg-20"},Bd={class:"form-check form-check-custom me-5 me-lg-20"},Kd={class:"form-check form-check-custom"},zd={class:"text-gray-800"},Vd={class:"d-flex"},Hd={class:"form-check form-check-custom me-5 me-lg-20"},jd={class:"form-check form-check-custom me-5 me-lg-20"},Nd={class:"form-check form-check-custom me-5 me-lg-20"},Wd={class:"form-check form-check-custom"},Gd={class:"text-gray-800"},Yd={class:"d-flex"},Xd={class:"form-check form-check-custom me-5 me-lg-20"},Jd={class:"text-gray-800"},Qd={class:"d-flex"},Zd={class:"form-check form-check-custom me-5 me-lg-20"},xd={class:"text-gray-800"},ei={class:"d-flex"},ai={class:"form-check form-check-custom me-5 me-lg-20"};function ti(e,s,u,l,h,b){const m=o("a-input"),i=o("a-form-item"),c=o("a-col"),_=o("a-row"),g=o("a-textarea"),f=o("a-checkbox"),y=o("a-checkbox-group"),k=o("a-form"),v=o("SaveOutlined"),C=o("a-button"),S=o("a-drawer");return d(),w(S,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:n(()=>[a(C,{type:"primary",onClick:e.onSubmit,style:{"margin-right":"8px"},loading:e.loading},{icon:n(()=>[a(v)]),default:n(()=>[p(" "+r(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["onClick","loading"]),a(C,{onClick:e.onClose},{default:n(()=>[p(r(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[a(k,{layout:"vertical"},{default:n(()=>[a(_,{gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(i,{label:e.$t("role.display_name"),name:"display_name",help:e.rules.display_name?e.rules.display_name.message:null,validateStatus:e.rules.display_name?"error":null,class:"required"},{default:n(()=>[a(m,{value:e.formData.display_name,"onUpdate:value":s[0]||(s[0]=U=>e.formData.display_name=U),placeholder:e.$t("common.placeholder_default_text",[e.$t("role.display_name")]),onKeyup:s[1]||(s[1]=U=>e.formData.name=e.slugify(U.target.value))},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(c,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(i,{label:e.$t("role.role_name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:n(()=>[a(m,{value:e.formData.name,"onUpdate:value":s[2]||(s[2]=U=>e.formData.name=U),placeholder:e.$t("common.placeholder_default_text",[e.$t("role.role_name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(_,{gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("role.description"),name:"description",help:e.rules.description?e.rules.description.message:null,validateStatus:e.rules.description?"error":null},{default:n(()=>[a(g,{value:e.formData.description,"onUpdate:value":s[3]||(s[3]=U=>e.formData.description=U),placeholder:e.$t("common.placeholder_default_text",[e.$t("role.description")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(_,{gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("role.permissions"),name:"permissions",help:e.rules.permissions?e.rules.permissions.message:null,validateStatus:e.rules.permissions?"error":null},{default:n(()=>[P("div",_s,[P("div",fs,[a(y,{value:e.checkedPermissions,"onUpdate:value":s[4]||(s[4]=U=>e.checkedPermissions=U)},{default:n(()=>[P("table",gs,[P("tbody",hs,[P("tr",null,[P("td",bs,r(e.$t("menu.staff_members")),1),P("td",null,[P("div",ys,[P("label",vs,[a(f,{value:e.permissions.users_view},{default:n(()=>[p(r(e.$t("common.view")),1)]),_:1},8,["value"])]),P("label",ks,[a(f,{value:e.permissions.users_create},{default:n(()=>[p(r(e.$t("common.add")),1)]),_:1},8,["value"])]),P("label",ws,[a(f,{value:e.permissions.users_edit},{default:n(()=>[p(r(e.$t("common.edit")),1)]),_:1},8,["value"])]),P("label",Cs,[a(f,{value:e.permissions.users_delete},{default:n(()=>[p(r(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),P("tr",null,[P("td",Ss,r(e.$t("menu.salesmans")),1),P("td",null,[P("div",$s,[P("label",Ds,[a(f,{value:e.permissions.salesmans_view},{default:n(()=>[p(r(e.$t("common.view")),1)]),_:1},8,["value"])]),P("label",As,[a(f,{value:e.permissions.salesmans_create},{default:n(()=>[p(r(e.$t("common.add")),1)]),_:1},8,["value"])]),P("label",Ts,[a(f,{value:e.permissions.salesmans_edit},{default:n(()=>[p(r(e.$t("common.edit")),1)]),_:1},8,["value"])]),P("label",Es,[a(f,{value:e.permissions.salesmans_delete},{default:n(()=>[p(r(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),P("tr",null,[P("td",Os,r(e.$t("menu.campaigns")),1),P("td",null,[P("div",Us,[P("label",Ps,[a(f,{value:e.permissions.campaigns_view},{default:n(()=>[p(r(e.$t("common.view")),1)]),_:1},8,["value"])]),P("label",Is,[a(f,{value:e.permissions.campaigns_create},{default:n(()=>[p(r(e.$t("common.add")),1)]),_:1},8,["value"])]),P("label",Ms,[a(f,{value:e.permissions.campaigns_edit},{default:n(()=>[p(r(e.$t("common.edit")),1)]),_:1},8,["value"])]),P("label",Fs,[a(f,{value:e.permissions.campaigns_delete},{default:n(()=>[p(r(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),P("tr",null,[P("td",Rs,r(e.$t("campaign.campaign_view")),1),P("td",null,[P("div",Ls,[P("label",qs,[a(f,{value:e.permissions.campaigns_view_all},{default:n(()=>[p(r(e.$t("common.view_all")),1)]),_:1},8,["value"])]),P("label",Bs,[a(f,{value:e.permissions.view_completed_campaigns},{default:n(()=>[p(r(e.$t("campaign.view_completed_campaigns")),1)]),_:1},8,["value"])])])])]),P("tr",null,[P("td",Ks,r(e.$t("menu.leads")),1),P("td",null,[P("div",zs,[P("label",Vs,[a(f,{value:e.permissions.leads_view_all},{default:n(()=>[p(r(e.$t("common.view_all")),1)]),_:1},8,["value"])]),P("label",Hs,[a(f,{value:e.permissions.leads_create},{default:n(()=>[p(r(e.$t("common.add")),1)]),_:1},8,["value"])]),P("label",js,[a(f,{value:e.permissions.leads_delete},{default:n(()=>[p(r(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),P("tr",null,[P("td",Ns,r(e.$t("menu.email_templates")),1),P("td",null,[P("div",Ws,[P("label",Gs,[a(f,{value:e.permissions.email_templates_view},{default:n(()=>[p(r(e.$t("common.view")),1)]),_:1},8,["value"])]),P("label",Ys,[a(f,{value:e.permissions.email_templates_view_all},{default:n(()=>[p(r(e.$t("common.view_all")),1)]),_:1},8,["value"])]),P("label",Xs,[a(f,{value:e.permissions.email_templates_create},{default:n(()=>[p(r(e.$t("common.add")),1)]),_:1},8,["value"])]),P("label",Js,[a(f,{value:e.permissions.email_templates_edit},{default:n(()=>[p(r(e.$t("common.edit")),1)]),_:1},8,["value"])]),P("label",Qs,[a(f,{value:e.permissions.email_templates_delete},{default:n(()=>[p(r(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),P("tr",null,[P("td",Zs,r(e.$t("menu.expense_categories")),1),P("td",null,[P("div",xs,[P("label",ed,[a(f,{value:e.permissions.expense_categories_view},{default:n(()=>[p(r(e.$t("common.view")),1)]),_:1},8,["value"])]),P("label",ad,[a(f,{value:e.permissions.expense_categories_create},{default:n(()=>[p(r(e.$t("common.add")),1)]),_:1},8,["value"])]),P("label",td,[a(f,{value:e.permissions.expense_categories_edit},{default:n(()=>[p(r(e.$t("common.edit")),1)]),_:1},8,["value"])]),P("label",nd,[a(f,{value:e.permissions.expense_categories_delete},{default:n(()=>[p(r(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),P("tr",null,[P("td",ld,r(e.$t("menu.expenses")),1),P("td",null,[P("div",od,[P("label",sd,[a(f,{value:e.permissions.expenses_view},{default:n(()=>[p(r(e.$t("common.view")),1)]),_:1},8,["value"])]),P("label",dd,[a(f,{value:e.permissions.expenses_create},{default:n(()=>[p(r(e.$t("common.add")),1)]),_:1},8,["value"])]),P("label",id,[a(f,{value:e.permissions.expenses_edit},{default:n(()=>[p(r(e.$t("common.edit")),1)]),_:1},8,["value"])]),P("label",rd,[a(f,{value:e.permissions.expenses_delete},{default:n(()=>[p(r(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),P("tr",null,[P("td",ud,r(e.$t("menu.products")),1),P("td",null,[P("div",md,[P("label",cd,[a(f,{value:e.permissions.products_view},{default:n(()=>[p(r(e.$t("common.view")),1)]),_:1},8,["value"])]),P("label",pd,[a(f,{value:e.permissions.products_create},{default:n(()=>[p(r(e.$t("common.add")),1)]),_:1},8,["value"])]),P("label",_d,[a(f,{value:e.permissions.products_edit},{default:n(()=>[p(r(e.$t("common.edit")),1)]),_:1},8,["value"])]),P("label",fd,[a(f,{value:e.permissions.products_delete},{default:n(()=>[p(r(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),P("tr",null,[P("td",gd,r(e.$t("menu.forms")),1),P("td",null,[P("div",hd,[P("label",bd,[a(f,{value:e.permissions.forms_view},{default:n(()=>[p(r(e.$t("common.view")),1)]),_:1},8,["value"])]),P("label",yd,[a(f,{value:e.permissions.forms_view_all},{default:n(()=>[p(r(e.$t("common.view_all")),1)]),_:1},8,["value"])]),P("label",vd,[a(f,{value:e.permissions.forms_create},{default:n(()=>[p(r(e.$t("common.add")),1)]),_:1},8,["value"])]),P("label",kd,[a(f,{value:e.permissions.forms_edit},{default:n(()=>[p(r(e.$t("common.edit")),1)]),_:1},8,["value"])]),P("label",wd,[a(f,{value:e.permissions.forms_delete},{default:n(()=>[p(r(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),P("tr",null,[P("td",Cd,r(e.$t("menu.form_field_names")),1),P("td",null,[P("div",Sd,[P("label",$d,[a(f,{value:e.permissions.form_field_names_view},{default:n(()=>[p(r(e.$t("common.view")),1)]),_:1},8,["value"])]),P("label",Dd,[a(f,{value:e.permissions.form_field_names_create},{default:n(()=>[p(r(e.$t("common.add")),1)]),_:1},8,["value"])]),P("label",Ad,[a(f,{value:e.permissions.form_field_names_edit},{default:n(()=>[p(r(e.$t("common.edit")),1)]),_:1},8,["value"])]),P("label",Td,[a(f,{value:e.permissions.form_field_names_delete},{default:n(()=>[p(r(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),P("tr",null,[P("td",Ed,r(e.$t("menu.translations")),1),P("td",null,[P("div",Od,[P("label",Ud,[a(f,{value:e.permissions.translations_view},{default:n(()=>[p(r(e.$t("common.view")),1)]),_:1},8,["value"])]),P("label",Pd,[a(f,{value:e.permissions.translations_create},{default:n(()=>[p(r(e.$t("common.add")),1)]),_:1},8,["value"])]),P("label",Id,[a(f,{value:e.permissions.translations_edit},{default:n(()=>[p(r(e.$t("common.edit")),1)]),_:1},8,["value"])]),P("label",Md,[a(f,{value:e.permissions.translations_delete},{default:n(()=>[p(r(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),P("tr",null,[P("td",Fd,r(e.$t("menu.roles")),1),P("td",null,[P("div",Rd,[P("label",Ld,[a(f,{value:e.permissions.roles_view},{default:n(()=>[p(r(e.$t("common.view")),1)]),_:1},8,["value"])]),P("label",qd,[a(f,{value:e.permissions.roles_create},{default:n(()=>[p(r(e.$t("common.add")),1)]),_:1},8,["value"])]),P("label",Bd,[a(f,{value:e.permissions.roles_edit},{default:n(()=>[p(r(e.$t("common.edit")),1)]),_:1},8,["value"])]),P("label",Kd,[a(f,{value:e.permissions.roles_delete},{default:n(()=>[p(r(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),P("tr",null,[P("td",zd,r(e.$t("menu.currencies")),1),P("td",null,[P("div",Vd,[P("label",Hd,[a(f,{value:e.permissions.currencies_view},{default:n(()=>[p(r(e.$t("common.view")),1)]),_:1},8,["value"])]),P("label",jd,[a(f,{value:e.permissions.currencies_create},{default:n(()=>[p(r(e.$t("common.add")),1)]),_:1},8,["value"])]),P("label",Nd,[a(f,{value:e.permissions.currencies_edit},{default:n(()=>[p(r(e.$t("common.edit")),1)]),_:1},8,["value"])]),P("label",Wd,[a(f,{value:e.permissions.currencies_delete},{default:n(()=>[p(r(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),P("tr",null,[P("td",Gd,r(e.$t("menu.company")),1),P("td",null,[P("div",Yd,[P("label",Xd,[a(f,{value:e.permissions.companies_edit},{default:n(()=>[p(r(e.$t("common.edit")),1)]),_:1},8,["value"])])])])]),P("tr",null,[P("td",Jd,r(e.$t("menu.storage_settings")),1),P("td",null,[P("div",Qd,[P("label",Zd,[a(f,{value:e.permissions.storage_edit},{default:n(()=>[p(r(e.$t("common.edit")),1)]),_:1},8,["value"])])])])]),P("tr",null,[P("td",xd,r(e.$t("menu.email_settings")),1),P("td",null,[P("div",ei,[P("label",ai,[a(f,{value:e.permissions.email_edit},{default:n(()=>[p(r(e.$t("common.edit")),1)]),_:1},8,["value"])])])])])])])]),_:1},8,["value"])])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])}const Nt=z(ps,[["render",ti]]),ni=x({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:ae,AddEdit:Nt},setup(e,{emit:s}){const{permsArray:u}=Z(),{initData:l,addEditUrl:h}=jt(),b=I(!1),m=I("add"),i=I({...l});return{permsArray:u,visible:b,addEditType:m,addEditUrl:h,formData:i,addEditSuccess:()=>{b.value=!1,i.value={...l},s("onAddSuccess")},onClose:()=>{b.value=!1},showAdd:()=>{b.value=!0}}}}),li={key:0};function oi(e,s,u,l,h,b){const m=o("a-menu-item"),i=o("PlusOutlined"),c=o("a-button"),_=o("a-tooltip"),g=o("AddEdit");return e.permsArray.includes("roles_create")||e.permsArray.includes("admin")?(d(),E("div",li,[e.customType=="menu"?(d(),w(m,{onClick:e.showAdd,key:"categories"},{icon:n(()=>[oe(e.$slots,"icon")]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick"])):(d(),E(R,{key:1},[e.tooltip?(d(),w(_,{key:0,placement:"topLeft",title:e.$t("role.add"),"arrow-point-at-center":""},{default:n(()=>[a(c,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:n(()=>[a(i)]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(d(),w(c,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:n(()=>[a(i)]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),a(g,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("role.add"),successMessage:e.$t("role.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):A("",!0)}const Wt=z(ni,[["render",oi]]),si=x({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ae,LoadingOutlined:De,SaveOutlined:_e,Upload:Ye,RoleAddButton:Wt},setup(e,{emit:s}){const{permsArray:u,user:l,appSetting:h}=Z(),{addEditRequestAdmin:b,loading:m,rules:i}=se(),c=I([]),_="roles?limit=10000",g=he();return ee(()=>{const v=axiosAdmin.get(_);Promise.all([v]).then(([C])=>{c.value=C.data})}),{loading:m,rules:i,onClose:()=>{i.value={},s("closed")},onSubmit:()=>{b({url:e.url,data:e.formData,successMessage:e.successMessage,success:v=>{s("addEditSuccess",v.xid),l.value.xid==v.xid&&g.dispatch("auth/updateUser")}})},roles:c,roleAdded:()=>{axiosAdmin.get(_).then(v=>{c.value=v.data})},permsArray:u,appSetting:h,drawerWidth:window.innerWidth<=991?"90%":"45%"}}}),di={style:{display:"flex"}};function ii(e,s,u,l,h,b){const m=o("Upload"),i=o("a-form-item"),c=o("a-col"),_=o("a-select-option"),g=o("a-select"),f=o("RoleAddButton"),y=o("a-row"),k=o("a-input"),v=o("a-input-password"),C=o("a-textarea"),S=o("a-form"),U=o("SaveOutlined"),$=o("a-button"),O=o("a-drawer");return d(),w(O,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:n(()=>[a($,{type:"primary",onClick:e.onSubmit,style:{"margin-right":"8px"},loading:e.loading},{icon:n(()=>[a(U)]),default:n(()=>[p(" "+r(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["onClick","loading"]),a($,{onClick:e.onClose},{default:n(()=>[p(r(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[a(S,{layout:"vertical"},{default:n(()=>[a(y,null,{default:n(()=>[a(c,{xs:24,sm:24,md:6,lg:6},{default:n(()=>[a(i,{label:e.$t("user.profile_image"),name:"profile_image",help:e.rules.profile_image?e.rules.profile_image.message:null,validateStatus:e.rules.profile_image?"error":null},{default:n(()=>[a(m,{formData:e.formData,folder:"user",imageField:"profile_image",onOnFileUploaded:s[0]||(s[0]=T=>{e.formData.profile_image=T.file,e.formData.profile_image_url=T.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(c,{xs:24,sm:24,md:18,lg:18},{default:n(()=>[e.permsArray.includes("admin")?(d(),w(y,{key:0,gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("user.role"),name:"role_id",help:e.rules.role_id?e.rules.role_id.message:null,validateStatus:e.rules.role_id?"error":null,class:"required"},{default:n(()=>[P("span",di,[a(g,{value:e.formData.role_id,"onUpdate:value":s[1]||(s[1]=T=>e.formData.role_id=T),placeholder:e.$t("common.select_default_text",[e.$t("user.role")]),allowClear:!0},{default:n(()=>[(d(!0),E(R,null,X(e.roles,T=>(d(),w(_,{key:T.xid,value:T.xid},{default:n(()=>[p(r(T.display_name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),a(f,{onOnAddSuccess:e.roleAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})):A("",!0),a(y,{gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(i,{label:e.$t("user.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:n(()=>[a(k,{value:e.formData.name,"onUpdate:value":s[2]||(s[2]=T=>e.formData.name=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(c,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(i,{label:e.$t("user.phone"),name:"phone",help:e.rules.phone?e.rules.phone.message:null,validateStatus:e.rules.phone?"error":null,class:"required"},{default:n(()=>[a(k,{value:e.formData.phone,"onUpdate:value":s[3]||(s[3]=T=>e.formData.phone=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.phone")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(y,null,{default:n(()=>[a(c,{span:24},{default:n(()=>[a(i,{label:e.$t("user.password"),name:"password",help:e.rules.password?e.rules.password.message:null,validateStatus:e.rules.password?"error":null,class:"required"},{default:n(()=>[a(v,{value:e.formData.password,"onUpdate:value":s[4]||(s[4]=T=>e.formData.password=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.password")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(y,{gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(i,{label:e.$t("user.email"),name:"email",help:e.rules.email?e.rules.email.message:null,validateStatus:e.rules.email?"error":null,class:"required"},{default:n(()=>[a(k,{value:e.formData.email,"onUpdate:value":s[5]||(s[5]=T=>e.formData.email=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(c,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(i,{label:e.$t("user.status"),name:"status",help:e.rules.status?e.rules.status.message:null,validateStatus:e.rules.status?"error":null,class:"required"},{default:n(()=>[a(g,{value:e.formData.status,"onUpdate:value":s[6]||(s[6]=T=>e.formData.status=T),placeholder:e.$t("common.select_default_text",[e.$t("user.status")]),allowClear:!0},{default:n(()=>[a(_,{value:"enabled"},{default:n(()=>[p("Enabled")]),_:1}),a(_,{value:"disabled"},{default:n(()=>[p("Disabled")]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1}),a(y,{gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("user.address"),name:"address",help:e.rules.address?e.rules.address.message:null,validateStatus:e.rules.address?"error":null},{default:n(()=>[a(C,{value:e.formData.address,"onUpdate:value":s[7]||(s[7]=T=>e.formData.address=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.address")]),"auto-size":{minRows:2,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])}const Gt=z(si,[["render",ii]]),ri=x({props:{acceptFormat:{default:"image/*,.pdf",type:String},formData:null,folder:String,uploadField:{default:"file",type:String}},components:{UploadOutlined:Ua,DownloadOutlined:_a,DeleteOutlined:pe},setup(e,{emit:s}){const u=I([]),l=I(!1),{t:h}=Q();return{fileList:u,loading:l,customRequest:m=>{const i=new FormData;i.append("file",m.file),i.append("folder",e.folder),l.value=!0,axiosAdmin.post("upload-file",i,{headers:{"Content-Type":"multipart/form-data"}}).then(c=>{u.value=[],l.value=!1,s("onFileUploaded",{file:c.data.file,file_url:c.data.file_url})}).catch(()=>{l.value=!1,Ae.error(h("messages.uploading_failed"))})}}}}),ui={key:0},mi={key:1};function ci(e,s,u,l,h,b){const m=o("UploadOutlined"),i=o("a-button"),c=o("a-upload"),_=o("DownloadOutlined"),g=o("a-tag"),f=o("a-typography-link"),y=o("DeleteOutlined");return e.formData[e.uploadField]==null?(d(),E("div",ui,[a(c,{accept:e.acceptFormat,"file-list":e.fileList,"onUpdate:fileList":s[0]||(s[0]=k=>e.fileList=k),name:"file",customRequest:e.customRequest},{default:n(()=>[a(i,{loading:e.loading},{icon:n(()=>[a(m)]),default:n(()=>[p(" "+r(e.$t("common.upload")),1)]),_:1},8,["loading"])]),_:1},8,["accept","file-list","customRequest"])])):(d(),E("div",mi,[a(f,{href:e.formData[`${e.uploadField}_url`],target:"_blank"},{default:n(()=>[a(g,{color:"success"},{icon:n(()=>[a(_)]),default:n(()=>[p(" "+r(e.$t("common.download")),1)]),_:1})]),_:1},8,["href"]),a(f,{onClick:s[1]||(s[1]=()=>{e.formData[e.uploadField]=void 0,e.formData[`${e.uploadField}_url`]=void 0})},{default:n(()=>[a(g,{color:"error"},{icon:n(()=>[a(y)]),default:n(()=>[p(" "+r(e.$t("common.delete")),1)]),_:1})]),_:1})]))}const Yt=z(ri,[["render",ci]]),pi=x({props:["pageTitle","sampleFileUrl","importUrl"],emits:["onUploadSuccess"],components:{CloudDownloadOutlined:Un,UploadFile:Yt,UploadOutlined:Ua},setup(e,{emit:s}){const{addEditFileRequestAdmin:u,loading:l,rules:h}=se(),{t:b}=Q(),m=I([]),i=I(!1),c=y=>(m.value=[...m.value,y],!1),_=()=>{const y={};m&&m.value&&m.value[0]!=null&&(y.file=m.value[0]),l.value=!0,u({url:e.importUrl,data:y,successMessage:b("messages.imported_successfully"),success:k=>{f(),s("onUploadSuccess")}})},g=()=>{i.value=!0},f=y=>{m.value=[],i.value=!1};return{fileList:m,rules:h,loading:l,visible:i,showModal:g,handleCancel:f,importItems:_,beforeUpload:c}}});function _i(e,s,u,l,h,b){const m=o("CloudDownloadOutlined"),i=o("a-button"),c=o("a-typography-link"),_=o("a-typography-paragraph"),g=o("a-col"),f=o("a-row"),y=o("UploadOutlined"),k=o("a-upload"),v=o("a-form-item"),C=o("a-form"),S=o("a-modal");return d(),E("div",null,[a(i,{type:"primary",onClick:e.showModal},{default:n(()=>[a(m),p(" "+r(e.pageTitle),1)]),_:1},8,["onClick"]),a(S,{open:e.visible,"onUpdate:open":s[1]||(s[1]=U=>e.visible=U),title:e.pageTitle},{footer:n(()=>[a(i,{type:"primary",loading:e.loading,onClick:e.importItems},{default:n(()=>[p(r(e.$t("common.import")),1)]),_:1},8,["loading","onClick"]),a(i,{key:"back",onClick:e.handleCancel},{default:n(()=>[p(r(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[a(f,{gutter:16,class:"mb-10"},{default:n(()=>[a(g,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(_,null,{default:n(()=>[P("ul",null,[P("li",null,[a(c,{href:e.sampleFileUrl,target:"_blank"},{default:n(()=>[p(r(e.$t("messages.click_here_to_download_sample_file")),1)]),_:1},8,["href"])])])]),_:1})]),_:1})]),_:1}),a(f,{gutter:16},{default:n(()=>[a(g,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(C,{layout:"vertical"},{default:n(()=>[a(v,{label:e.$t("common.file"),name:"file",help:e.rules.file?e.rules.file.message:null,validateStatus:e.rules.file?"error":null},{default:n(()=>[a(k,{accept:".xlsx,.csv","file-list":e.fileList,"onUpdate:fileList":s[0]||(s[0]=U=>e.fileList=U),name:"file","before-upload":e.beforeUpload,maxCount:1},{default:n(()=>[a(i,{loading:e.loading},{icon:n(()=>[a(y)]),default:n(()=>[p(" "+r(e.$t("common.upload")),1)]),_:1},8,["loading"])]),_:1},8,["accept","file-list","before-upload"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title"])])}const va=z(pi,[["render",_i]]),fi={props:["user","size"]},gi={key:0},hi={key:1};function bi(e,s,u,l,h,b){const m=o("a-avatar"),i=o("a-space");return d(),w(i,null,{default:n(()=>[a(m,{size:30,src:u.user.profile_image_url},null,8,["src"]),P("span",null,[p(r(u.user.name)+" ",1),u.user&&u.user.role&&u.user.role.name?(d(),E("br",gi)):A("",!0),u.user&&u.user.role&&u.user.role.display_name?(d(),E("small",hi,r(u.user&&u.user.role.display_name),1)):A("",!0)])]),_:1})}const Xt=z(fi,[["render",bi]]),yi={components:{PlusOutlined:ae,EditOutlined:ke,DeleteOutlined:pe,AddEdit:Gt,AdminPageHeader:me,ImportUsers:va,UserInfo:Xt},setup(){const{url:e,addEditUrl:s,initData:u,columns:l,filterableColumns:h,hashableColumns:b}=Ht(),m=Te(),{permsArray:i,statusColors:c,formatDateTime:_,user:g}=Z(),f=window.config.staff_member_sample_file;ee(()=>{y()});const y=()=>{m.tableUrl.value={url:e},m.table.filterableColumns=h,m.fetch({page:1}),m.crudUrl.value=s,m.langKey.value="user",m.initData.value={...u},m.formData.value={...u},m.hashableColumns.value=[...b]};return{user:g,columns:l,filterableColumns:h,permsArray:i,statusColors:c,formatDateTime:_,...m,sampleFileUrl:f,setUrlData:y}}},vi={class:"table-responsive"};function ki(e,s,u,l,h,b){const m=o("a-page-header"),i=o("router-link"),c=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("PlusOutlined"),y=o("a-button"),k=o("DeleteOutlined"),v=o("a-space"),C=o("a-col"),S=o("a-select-option"),U=o("a-select"),$=o("a-input-search"),O=o("a-input-group"),T=o("a-row"),D=o("admin-page-filters"),L=o("AddEdit"),q=o("user-info"),K=o("a-tag"),j=o("EditOutlined"),F=o("a-table"),M=o("admin-page-table-content");return d(),E(R,null,[a(g,null,{header:n(()=>[a(m,{title:e.$t("menu.users"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(c,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[p(r(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(c,null,{default:n(()=>[p(r(e.$t("menu.users")),1)]),_:1})]),_:1})]),_:1}),a(D,null,{default:n(()=>[a(T,{gutter:[16,16]},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:n(()=>[a(v,null,{default:n(()=>[l.permsArray.includes("staff_members_create")||l.permsArray.includes("admin")?(d(),w(y,{key:0,type:"primary",onClick:e.addItem},{default:n(()=>[a(f),p(" "+r(e.$t("staff_member.add")),1)]),_:1},8,["onClick"])):A("",!0),e.table.selectedRowKeys.length>0&&(l.permsArray.includes("staff_members_delete")||l.permsArray.includes("admin"))?(d(),w(y,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:n(()=>[a(k)]),default:n(()=>[p(" "+r(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),a(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:n(()=>[a(T,{gutter:[16,16],justify:"end"},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:12,xl:8},{default:n(()=>[a(O,{compact:""},{default:n(()=>[a(U,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=B=>e.table.searchColumn=B),placeholder:e.$t("common.select_default_text",[""])},{default:n(()=>[(d(!0),E(R,null,X(l.filterableColumns,B=>(d(),w(S,{key:B.key},{default:n(()=>[p(r(B.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),a($,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=B=>e.table.searchString=B),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(M,null,{default:n(()=>[a(L,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),a(T,null,{default:n(()=>[a(C,{span:24},{default:n(()=>[P("div",vi,[a(F,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:B=>({disabled:!((l.permsArray.includes("users_delete")||l.permsArray.includes("admin"))&&B.xid!=l.user.xid),name:B.xid})},columns:l.columns,"row-key":B=>B.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:n(({column:B,text:J,record:Y})=>[B.dataIndex==="name"?(d(),w(q,{key:0,user:Y},null,8,["user"])):A("",!0),B.dataIndex==="status"?(d(),w(K,{key:1,color:l.statusColors[J]},{default:n(()=>[p(r(e.$t(`common.${J}`)),1)]),_:2},1032,["color"])):A("",!0),B.dataIndex==="created_at"?(d(),E(R,{key:2},[p(r(l.formatDateTime(Y.created_at)),1)],64)):A("",!0),B.dataIndex==="action"?(d(),E(R,{key:3},[l.permsArray.includes("users_edit")||l.permsArray.includes("admin")?(d(),w(y,{key:0,type:"primary",onClick:V=>e.editItem(Y),style:{"margin-left":"4px"}},{icon:n(()=>[a(j)]),_:2},1032,["onClick"])):A("",!0),(l.permsArray.includes("users_delete")||l.permsArray.includes("admin"))&&Y.xid!=l.user.xid?(d(),w(y,{key:1,type:"primary",onClick:V=>e.showDeleteConfirm(Y.xid),style:{"margin-left":"4px"}},{icon:n(()=>[a(k)]),_:2},1032,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const wi=z(yi,[["render",ki]]),Ci=()=>{const{t:e}=Q(),s="salesmans?fields=id,xid,name,email,profile_image,profile_image_url,phone,address,status,created_at",u="salesmans",l={name:"",email:"",password:"12345678",profile_image:void 0,profile_image_url:void 0,phone:"",address:"",status:"enabled"},h=[{title:e("salesman.name"),dataIndex:"name",key:"name"},{title:e("salesman.email"),dataIndex:"email"},{title:e("salesman.created_at"),dataIndex:"created_at"},{title:e("salesman.status"),dataIndex:"status",key:"status"},{title:e("common.action"),dataIndex:"action"}],b=[{key:"name",value:e("salesman.name")},{key:"email",value:e("salesman.email")},{key:"phone",value:e("salesman.phone")}];return{url:s,initData:l,columns:h,filterableColumns:b,addEditUrl:u}},Si=x({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ae,LoadingOutlined:De,SaveOutlined:_e,Upload:Ye,RoleAddButton:Wt},setup(e,{emit:s}){const{permsArray:u,appSetting:l}=Z(),{addEditRequestAdmin:h,loading:b,rules:m}=se();return{loading:b,rules:m,onClose:()=>{m.value={},s("closed")},onSubmit:()=>{h({url:e.url,data:e.formData,successMessage:e.successMessage,success:_=>{s("addEditSuccess",_.xid)}})},permsArray:u,appSetting:l,drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function $i(e,s,u,l,h,b){const m=o("Upload"),i=o("a-form-item"),c=o("a-col"),_=o("a-input"),g=o("a-select-option"),f=o("a-select"),y=o("a-row"),k=o("a-textarea"),v=o("a-form"),C=o("SaveOutlined"),S=o("a-button"),U=o("a-drawer");return d(),w(U,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:n(()=>[a(S,{type:"primary",onClick:e.onSubmit,style:{"margin-right":"8px"},loading:e.loading},{icon:n(()=>[a(C)]),default:n(()=>[p(" "+r(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["onClick","loading"]),a(S,{onClick:e.onClose},{default:n(()=>[p(r(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[a(v,{layout:"vertical"},{default:n(()=>[a(y,null,{default:n(()=>[a(c,{xs:24,sm:24,md:6,lg:6},{default:n(()=>[a(i,{label:e.$t("salesman.profile_image"),name:"profile_image",help:e.rules.profile_image?e.rules.profile_image.message:null,validateStatus:e.rules.profile_image?"error":null},{default:n(()=>[a(m,{formData:e.formData,folder:"user",imageField:"profile_image",onOnFileUploaded:s[0]||(s[0]=$=>{e.formData.profile_image=$.file,e.formData.profile_image_url=$.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(c,{xs:24,sm:24,md:18,lg:18},{default:n(()=>[a(y,{gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(i,{label:e.$t("salesman.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:n(()=>[a(_,{value:e.formData.name,"onUpdate:value":s[1]||(s[1]=$=>e.formData.name=$),placeholder:e.$t("common.placeholder_default_text",[e.$t("salesman.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(c,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(i,{label:e.$t("salesman.status"),name:"status",help:e.rules.status?e.rules.status.message:null,validateStatus:e.rules.status?"error":null,class:"required"},{default:n(()=>[a(f,{value:e.formData.status,"onUpdate:value":s[2]||(s[2]=$=>e.formData.status=$),placeholder:e.$t("common.select_default_text",[e.$t("salesman.status")]),allowClear:!0},{default:n(()=>[a(g,{value:"enabled"},{default:n(()=>[p("Enabled")]),_:1}),a(g,{value:"disabled"},{default:n(()=>[p("Disabled")]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(y,{gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(i,{label:e.$t("salesman.email"),name:"email",help:e.rules.email?e.rules.email.message:null,validateStatus:e.rules.email?"error":null,class:"required"},{default:n(()=>[a(_,{value:e.formData.email,"onUpdate:value":s[3]||(s[3]=$=>e.formData.email=$),placeholder:e.$t("common.placeholder_default_text",[e.$t("salesman.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(c,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(i,{label:e.$t("salesman.phone"),name:"phone",help:e.rules.phone?e.rules.phone.message:null,validateStatus:e.rules.phone?"error":null,class:"required"},{default:n(()=>[a(_,{value:e.formData.phone,"onUpdate:value":s[4]||(s[4]=$=>e.formData.phone=$),placeholder:e.$t("common.placeholder_default_text",[e.$t("salesman.phone")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1}),a(y,{gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("salesman.address"),name:"address",help:e.rules.address?e.rules.address.message:null,validateStatus:e.rules.address?"error":null},{default:n(()=>[a(k,{value:e.formData.address,"onUpdate:value":s[5]||(s[5]=$=>e.formData.address=$),placeholder:e.$t("common.placeholder_default_text",[e.$t("salesman.address")]),"auto-size":{minRows:2,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])}const Di=z(Si,[["render",$i]]),Ai={components:{PlusOutlined:ae,EditOutlined:ke,DeleteOutlined:pe,AddEdit:Di,AdminPageHeader:me,ImportSalesman:va},setup(){const{url:e,addEditUrl:s,initData:u,columns:l,filterableColumns:h}=Ci(),b=Te(),{permsArray:m,statusColors:i,formatDateTime:c}=Z(),_=window.config.staff_member_sample_file;ee(()=>{g()});const g=()=>{b.tableUrl.value={url:e},b.table.filterableColumns=h,b.fetch({page:1}),b.crudUrl.value=s,b.langKey.value="salesman",b.initData.value={...u},b.formData.value={...u}};return{columns:l,filterableColumns:h,permsArray:m,statusColors:i,formatDateTime:c,...b,sampleFileUrl:_,setUrlData:g}}},Ti={class:"table-responsive"};function Ei(e,s,u,l,h,b){const m=o("a-page-header"),i=o("router-link"),c=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("PlusOutlined"),y=o("a-button"),k=o("DeleteOutlined"),v=o("a-space"),C=o("a-col"),S=o("a-select-option"),U=o("a-select"),$=o("a-input-search"),O=o("a-input-group"),T=o("a-row"),D=o("admin-page-filters"),L=o("AddEdit"),q=o("a-tag"),K=o("EditOutlined"),j=o("a-table"),F=o("admin-page-table-content");return d(),E(R,null,[a(g,null,{header:n(()=>[a(m,{title:e.$t("menu.salesmans"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(c,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[p(r(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(c,null,{default:n(()=>[p(r(e.$t("menu.salesmans")),1)]),_:1})]),_:1})]),_:1}),a(D,null,{default:n(()=>[a(T,{gutter:[16,16]},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:n(()=>[a(v,null,{default:n(()=>[l.permsArray.includes("salesmans_create")||l.permsArray.includes("admin")?(d(),w(y,{key:0,type:"primary",onClick:e.addItem},{default:n(()=>[a(f),p(" "+r(e.$t("salesman.add")),1)]),_:1},8,["onClick"])):A("",!0),e.table.selectedRowKeys.length>0&&(l.permsArray.includes("salesmans_delete")||l.permsArray.includes("admin"))?(d(),w(y,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:n(()=>[a(k)]),default:n(()=>[p(" "+r(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),a(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:n(()=>[a(T,{gutter:[16,16],justify:"end"},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:12,xl:8},{default:n(()=>[a(O,{compact:""},{default:n(()=>[a(U,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=M=>e.table.searchColumn=M),placeholder:e.$t("common.select_default_text",[""])},{default:n(()=>[(d(!0),E(R,null,X(l.filterableColumns,M=>(d(),w(S,{key:M.key},{default:n(()=>[p(r(M.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),a($,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=M=>e.table.searchString=M),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(F,null,{default:n(()=>[a(L,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),a(T,null,{default:n(()=>[a(C,{span:24},{default:n(()=>[P("div",Ti,[a(j,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:M=>({disabled:!1,name:M.xid})},columns:l.columns,"row-key":M=>M.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:n(({column:M,text:B,record:J})=>[M.dataIndex==="status"?(d(),w(q,{key:0,color:l.statusColors[B]},{default:n(()=>[p(r(e.$t(`common.${B}`)),1)]),_:2},1032,["color"])):A("",!0),M.dataIndex==="created_at"?(d(),E(R,{key:1},[p(r(l.formatDateTime(J.created_at)),1)],64)):A("",!0),M.dataIndex==="action"?(d(),E(R,{key:2},[l.permsArray.includes("salesmans_edit")||l.permsArray.includes("admin")?(d(),w(y,{key:0,type:"primary",onClick:Y=>e.editItem(J),style:{"margin-left":"4px"}},{icon:n(()=>[a(K)]),_:2},1032,["onClick"])):A("",!0),l.permsArray.includes("salesmans_delete")||l.permsArray.includes("admin")?(d(),w(y,{key:1,type:"primary",onClick:Y=>e.showDeleteConfirm(J.xid),style:{"margin-left":"4px"}},{icon:n(()=>[a(k)]),_:2},1032,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const Oi=z(Ai,[["render",Ei]]),Ui=[{path:"/",component:()=>Fe(()=>import("./Admin-bb3356a6.js"),["assets/Admin-bb3356a6.js","assets/vendor-a91b8582.js","assets/vendor-ad46f743.css","assets/Admin-14aea5fe.css"]),children:[{path:"/admin/users",component:wi,name:"admin.users.index",meta:{requireAuth:!0,menuParent:"users",menuKey:"users",permission:"users_view"}},{path:"/admin/salesman",component:Oi,name:"admin.salesman.index",meta:{requireAuth:!0,menuParent:"salesmans",menuKey:"salesmans",permission:"salesmans_view"}}]}],Jt=()=>{const e="campaigns?fields=id,xid,name,reference_prefix,allow_reference_prefix,remaining_leads,total_leads,campaignUsers{id,xid,user_id,x_user_id,campaign_id,x_campaign_id},campaignUsers:user{id,xid,name,profile_image,profile_image_url},email_template_id,x_email_template_id,emailTemplate{id,xid,name},form_id,x_form_id,form{id,xid,name,form_fields},detail_fields,last_action_by,x_last_action_by,lastActioner{id,xid,name},completed_by,x_completed_by,completedBy{id,xid,name},started_on,completed_on,upcoming_lead_action",s="campaigns",u=["form_id","email_template_id"],{t:l}=Q(),h=I({campaign_status:"active"}),b={name:"",user_id:void 0,form_id:void 0,email_template_id:void 0,allow_reference_prefix:0,reference_prefix:"",current_step:0,detail_fields:[],import_lead_fields:[]},m=ve(()=>h.value.campaign_status=="active"?[{title:l("campaign.name"),dataIndex:"name"},{title:l("campaign.progress"),dataIndex:"progress"},{title:l("campaign.members"),dataIndex:"members"},{title:l("campaign.form"),dataIndex:"form"},{title:l("campaign.started_on"),dataIndex:"started_on"},{title:l("campaign.last_actioner"),dataIndex:"last_actioner"},{title:l("common.action"),dataIndex:"action"}]:[{title:l("campaign.name"),dataIndex:"name"},{title:l("campaign.total_leads"),dataIndex:"total_leads"},{title:l("campaign.started_on"),dataIndex:"started_on"},{title:l("campaign.completed_on"),dataIndex:"completed_on"},{title:l("campaign.completed_by"),dataIndex:"completed_by"}]),i=[{key:"name",value:l("common.name")}];return{url:e,addEditUrl:s,initData:b,columns:m,filterableColumns:i,hashableColumns:u,extraFilters:h}},Pi=x({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:ae,AddEdit:Gt},setup(e,{emit:s}){const{permsArray:u}=Z(),{initData:l,addEditUrl:h}=Ht(),b=I(!1),m=I("add"),i=I({...l});return{permsArray:u,visible:b,addEditType:m,addEditUrl:h,formData:i,addEditSuccess:()=>{b.value=!1,i.value={...l},s("onAddSuccess")},onClose:()=>{b.value=!1},showAdd:()=>{b.value=!0}}}}),Ii={key:0};function Mi(e,s,u,l,h,b){const m=o("a-menu-item"),i=o("PlusOutlined"),c=o("a-button"),_=o("a-tooltip"),g=o("AddEdit");return e.permsArray.includes("users_create")||e.permsArray.includes("admin")?(d(),E("div",Ii,[e.customType=="menu"?(d(),w(m,{onClick:e.showAdd,key:"staff_members"},{icon:n(()=>[oe(e.$slots,"icon")]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick"])):(d(),E(R,{key:1},[e.tooltip?(d(),w(_,{key:0,placement:"topLeft",title:e.$t("user.add"),"arrow-point-at-center":""},{default:n(()=>[a(c,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:n(()=>[a(i)]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(d(),w(c,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:n(()=>[a(i)]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),a(g,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("staff_member.add"),successMessage:e.$t("staff_member.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):A("",!0)}const Qt=z(Pi,[["render",Mi]]),Zt=()=>{const e="forms?fields=id,xid,name,status,form_fields",s="forms",u=[],{t:l}=Q(),h={name:"",form_fields:[],status:1},b=[{title:l("form.name"),dataIndex:"name"},{title:l("form.form_fields"),dataIndex:"form_fields"},{title:l("form.status"),dataIndex:"status"},{title:l("common.action"),dataIndex:"action"}],m=[{key:"name",value:l("form.name")}];return{url:e,addEditUrl:s,initData:h,columns:b,filterableColumns:m,hashableColumns:u}},Fi={};function Ri(e,s,u,l,h,b){const m=o("a-typography-title"),i=o("a-divider");return d(),E(R,null,[a(m,{level:5},{default:n(()=>[oe(e.$slots,"default")]),_:3}),a(i,{style:{height:"2px","background-color":"#f0f2f5","margin-top":"5px","margin-bottom":"20px"}})],64)}const xt=z(Fi,[["render",Ri]]),Li=x({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ae,MinusCircleOutlined:St,LoadingOutlined:De,SaveOutlined:_e,FormItemHeading:xt},setup(e,{emit:s}){const u=I({name:"",form_fields:[],status:1}),l=I([]),{addEditRequestAdmin:h,loading:b,rules:m}=se(),i=y=>{let k=l.value.indexOf(y);k!==-1&&l.value.splice(k,1)},c=()=>{l.value.push({name:"",type:"text",required:0,id:Math.random().toString(36).slice(2)})},_=()=>{const y=Ct(l.value,k=>k.name!="");h({url:e.url,data:{...u.value,form_fields:y},successMessage:e.successMessage,success:k=>{s("addEditSuccess",k.xid)}})},g=()=>{m.value={},s("closed")},f=ve(()=>l.value.length==0?!1:$a(l.value,{name:""}));return we(()=>e.visible,(y,k)=>{e.addEditType=="edit"&&y?(u.value={name:e.data.name,status:e.data.status,_method:"PUT"},l.value=e.data.form_fields):(u.value={name:"",status:1},l.value=[])}),{loading:b,rules:m,onClose:g,onSubmit:_,newFormData:u,formFields:l,removeFormField:i,addFormField:c,addFormButtonStatus:f,drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function qi(e,s,u,l,h,b){const m=o("a-input"),i=o("a-form-item"),c=o("a-col"),_=o("a-row"),g=o("a-radio-button"),f=o("a-radio-group"),y=o("FormItemHeading"),k=o("a-select-option"),v=o("a-select"),C=o("MinusCircleOutlined"),S=o("PlusOutlined"),U=o("a-button"),$=o("a-form"),O=o("SaveOutlined"),T=o("a-space"),D=o("a-drawer");return d(),w(D,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:n(()=>[a(T,null,{default:n(()=>[a(U,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:n(()=>[a(O)]),default:n(()=>[p(" "+r(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),a(U,{key:"back",onClick:e.onClose},{default:n(()=>[p(r(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),default:n(()=>[a($,{layout:"vertical"},{default:n(()=>[a(_,{gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("form.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:n(()=>[a(m,{value:e.newFormData.name,"onUpdate:value":s[0]||(s[0]=L=>e.newFormData.name=L),placeholder:e.$t("common.placeholder_default_text",[e.$t("form.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(_,{gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("form.status"),name:"status",help:e.rules.status?e.rules.status.message:null,validateStatus:e.rules.status?"error":null},{default:n(()=>[a(f,{value:e.newFormData.status,"onUpdate:value":s[1]||(s[1]=L=>e.newFormData.status=L),"button-style":"solid",size:"small"},{default:n(()=>[a(g,{value:1},{default:n(()=>[p(r(e.$t("common.active")),1)]),_:1}),a(g,{value:0},{default:n(()=>[p(r(e.$t("common.inactive")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(y,null,{default:n(()=>[p(r(e.$t("form.form_fields")),1)]),_:1}),e.formFields.length>0?(d(!0),E(R,{key:0},X(e.formFields,(L,q)=>(d(),w(_,{gutter:16,key:L.id},{default:n(()=>[a(c,{span:16},{default:n(()=>[a(i,{name:["form_fields",q,"name"]},{default:n(()=>[a(m,{value:L.name,"onUpdate:value":K=>L.name=K,placeholder:e.$t("form.field_name")},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["name"])]),_:2},1024),a(c,{span:6},{default:n(()=>[a(i,{name:["form_fields",q,"name"]},{default:n(()=>[a(v,{value:L.type,"onUpdate:value":K=>L.type=K,placeholder:e.$t("common.select_default_text",[e.$t("campaign.field_type")])},{default:n(()=>[a(k,{value:"text"},{default:n(()=>[p(r(e.$t("common.text")),1)]),_:1}),a(k,{value:"email"},{default:n(()=>[p(r(e.$t("common.email")),1)]),_:1}),a(k,{value:"phone"},{default:n(()=>[p(r(e.$t("common.phone")),1)]),_:1})]),_:2},1032,["value","onUpdate:value","placeholder"])]),_:2},1032,["name"])]),_:2},1024),a(c,{span:2},{default:n(()=>[a(C,{onClick:K=>e.removeFormField(L)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)):A("",!0),a(_,{gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,null,{default:n(()=>[a(U,{type:"dashed",block:"",onClick:e.addFormField,disabled:e.addFormButtonStatus},{default:n(()=>[a(S),p(" "+r(e.$t("form.add_form_field")),1)]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])}const en=z(Li,[["render",qi]]),Bi=x({props:{btnType:{default:"default"},tooltip:{default:!0}},emits:["onAddSuccess"],components:{PlusOutlined:ae,AddEdit:en},setup(e,{emit:s}){const{permsArray:u}=Z(),{initData:l,addEditUrl:h}=Zt(),b=I(!1),m=I("add"),i=I({...l});return{permsArray:u,visible:b,addEditType:m,addEditUrl:h,formData:i,addEditSuccess:()=>{b.value=!1,i.value={...l},s("onAddSuccess")},onClose:()=>{b.value=!1},showAdd:()=>{b.value=!0}}}}),Ki={key:0};function zi(e,s,u,l,h,b){const m=o("PlusOutlined"),i=o("a-button"),c=o("a-tooltip"),_=o("AddEdit");return e.permsArray.includes("forms_create")||e.permsArray.includes("admin")?(d(),E("div",Ki,[e.tooltip?(d(),w(c,{key:0,placement:"topLeft",title:e.$t("form.add"),"arrow-point-at-center":""},{default:n(()=>[a(i,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:n(()=>[a(m)]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(d(),w(i,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:n(()=>[a(m)]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick","type"])),a(_,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("form.add"),successMessage:e.$t("form.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):A("",!0)}const an=z(Bi,[["render",zi]]),tn=()=>{const e="email-templates?fields=id,xid,name,subject,body,status,sharable",s="email-templates",u=[],{t:l}=Q(),h={name:"",subject:"",body:"",status:1,sharable:0},b=[{title:l("email_template.name"),dataIndex:"name"},{title:l("email_template.subject"),dataIndex:"subject"},{title:l("email_template.status"),dataIndex:"status"},{title:l("common.action"),dataIndex:"action"}],m=[{key:"name",value:l("email_template.name")},{key:"subject",value:l("email_template.subject")},{key:"body",value:l("email_template.body")}];return{url:e,addEditUrl:s,initData:h,columns:b,filterableColumns:m,hashableColumns:u}};const Vi=x({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ae,LoadingOutlined:De,SaveOutlined:_e,InfoCircleOutlined:Ge,QuillEditor:$t,FormAddButton:an},setup(e,{emit:s}){const{addEditRequestAdmin:u,loading:l,rules:h}=se(),b="forms/all",m=I(null),i=I([]),c=I(void 0),_=I({});ee(()=>{const S=axiosAdmin.get(b);Promise.all([S]).then(([U])=>{i.value=U.data.data})});const g=()=>{u({url:e.url,data:e.formData,successMessage:e.successMessage,success:S=>{s("addEditSuccess",S.xid)}})},f=S=>{const U=k.value.getSelection(!0);var $=U.length>0?`##${S}##`:` ##${S}## `;k.value.deleteText(U.index,U.length),k.value.insertText(U.index,$)},y=()=>{h.value={},s("closed")},k=ve(()=>m.value.getQuill()),v=()=>{axiosAdmin.get(b).then(S=>{i.value=S.data.data})},C=(S,U)=>{_.value=U.form};return we(()=>e.visible,(S,U)=>{S==!0&&m.value&&(e.addEditType=="edit"?m.value.setHTML(e.formData.body):m.value.setHTML("")),c.value=void 0,_.value={}}),{loading:l,rules:h,onClose:y,onSubmit:g,insertFormText:f,textEditor:m,allForms:i,selectedFormId:c,formAdded:v,formSelected:C,selectedForm:_,drawerWidth:window.innerWidth<=991?"90%":"45%"}}}),Hi={style:{display:"flex"}};function ji(e,s,u,l,h,b){const m=o("a-input"),i=o("a-form-item"),c=o("a-col"),_=o("InfoCircleOutlined"),g=o("a-tooltip"),f=o("a-space"),y=o("a-radio-button"),k=o("a-radio-group"),v=o("a-row"),C=o("QuillEditor"),S=o("a-select-option"),U=o("a-select"),$=o("FormAddButton"),O=o("a-button"),T=o("a-form"),D=o("SaveOutlined"),L=o("a-drawer");return d(),w(L,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:n(()=>[a(f,null,{default:n(()=>[a(O,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:n(()=>[a(D)]),default:n(()=>[p(" "+r(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),a(O,{key:"back",onClick:e.onClose},{default:n(()=>[p(r(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),default:n(()=>[a(T,{layout:"vertical"},{default:n(()=>[a(v,{gutter:16},{default:n(()=>[a(c,{xs:24,sm:12,md:16,lg:16},{default:n(()=>[a(i,{label:e.$t("email_template.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:n(()=>[a(m,{value:e.formData.name,"onUpdate:value":s[0]||(s[0]=q=>e.formData.name=q),placeholder:e.$t("common.placeholder_default_text",[e.$t("email_template.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(c,{xs:24,sm:12,md:8,lg:8},{default:n(()=>[a(i,{name:"sharable",help:e.rules.sharable?e.rules.sharable.message:null,validateStatus:e.rules.sharable?"error":null},{label:n(()=>[a(f,null,{default:n(()=>[p(r(e.$t("email_template.sharable"))+" ",1),a(g,null,{title:n(()=>[p(r(e.$t("email_template.sharable_message")),1)]),default:n(()=>[a(_)]),_:1})]),_:1})]),default:n(()=>[a(k,{value:e.formData.sharable,"onUpdate:value":s[1]||(s[1]=q=>e.formData.sharable=q),"button-style":"solid",size:"small"},{default:n(()=>[a(y,{value:1},{default:n(()=>[p(r(e.$t("common.yes")),1)]),_:1}),a(y,{value:0},{default:n(()=>[p(r(e.$t("common.no")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["help","validateStatus"])]),_:1})]),_:1}),a(v,{gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("email_template.subject"),name:"subject",help:e.rules.subject?e.rules.subject.message:null,validateStatus:e.rules.subject?"error":null,class:"required"},{default:n(()=>[a(m,{value:e.formData.subject,"onUpdate:value":s[2]||(s[2]=q=>e.formData.subject=q),placeholder:e.$t("common.placeholder_default_text",[e.$t("email_template.subject")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(v,{gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("email_template.body"),name:"body",help:e.rules.body?e.rules.body.message:null,validateStatus:e.rules.body?"error":null},{default:n(()=>[a(C,{ref:"textEditor",content:e.formData.body,"onUpdate:content":s[3]||(s[3]=q=>e.formData.body=q),contentType:"html",placeholder:e.$t("common.placeholder_default_text",[e.$t("email_template.body")]),style:{height:"200px"}},null,8,["content","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(v,{gutter:16},{default:n(()=>[a(c,{span:24},{default:n(()=>[a(i,{label:e.$t("form.form"),name:"form_id"},{default:n(()=>[P("span",Hi,[a(U,{value:e.selectedFormId,"onUpdate:value":s[4]||(s[4]=q=>e.selectedFormId=q),placeholder:e.$t("common.select_default_text",[e.$t("form.form")]),allowClear:!0,optionFilterProp:"label","show-search":"",onChange:e.formSelected},{default:n(()=>[(d(!0),E(R,null,X(e.allForms,q=>(d(),w(S,{key:q.xid,value:q.xid,label:q.name,form:q},{default:n(()=>[p(r(q.name),1)]),_:2},1032,["value","label","form"]))),128))]),_:1},8,["value","placeholder","onChange"]),a($,{onOnAddSuccess:e.formAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label"])]),_:1})]),_:1}),e.selectedForm&&e.selectedForm.form_fields&&e.selectedForm.form_fields.length>0?(d(),w(v,{key:0,gutter:16,class:"mb-20"},{default:n(()=>[(d(!0),E(R,null,X(e.selectedForm.form_fields,q=>(d(),w(c,{xs:8,sm:8,md:6,lg:4,key:q.id},{default:n(()=>[a(O,{onClick:K=>e.insertFormText(q.name),type:"link",style:{padding:"0px"}},{default:n(()=>[p(r(q.name),1)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})):A("",!0),a(v,{gutter:16,class:"mt-10"},{default:n(()=>[a(c,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("email_template.status"),name:"status",help:e.rules.status?e.rules.status.message:null,validateStatus:e.rules.status?"error":null},{default:n(()=>[a(k,{value:e.formData.status,"onUpdate:value":s[5]||(s[5]=q=>e.formData.status=q),"button-style":"solid",size:"small"},{default:n(()=>[a(y,{value:1},{default:n(()=>[p(r(e.$t("common.active")),1)]),_:1}),a(y,{value:0},{default:n(()=>[p(r(e.$t("common.inactive")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])}const nn=z(Vi,[["render",ji]]),Ni=x({props:{btnType:{default:"default"},tooltip:{default:!0}},emits:["onAddSuccess"],components:{PlusOutlined:ae,AddEdit:nn},setup(e,{emit:s}){const{permsArray:u}=Z(),{initData:l,addEditUrl:h}=tn(),b=I(!1),m=I("add"),i=I({...l});return{permsArray:u,visible:b,addEditType:m,addEditUrl:h,formData:i,addEditSuccess:()=>{b.value=!1,i.value={...l},s("onAddSuccess")},onClose:()=>{b.value=!1},showAdd:()=>{b.value=!0}}}}),Wi={key:0};function Gi(e,s,u,l,h,b){const m=o("PlusOutlined"),i=o("a-button"),c=o("a-tooltip"),_=o("AddEdit");return e.permsArray.includes("email_templates_create")||e.permsArray.includes("admin")?(d(),E("div",Wi,[e.tooltip?(d(),w(c,{key:0,placement:"topLeft",title:e.$t("email_template.add"),"arrow-point-at-center":""},{default:n(()=>[a(i,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:n(()=>[a(m)]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(d(),w(i,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:n(()=>[a(m)]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick","type"])),a(_,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("email_template.add"),successMessage:e.$t("email_template.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):A("",!0)}const ln=z(Ni,[["render",Gi]]),Yi=x({props:{acceptFormat:{default:"image/*,.pdf",type:String},allFields:null},emits:["fileUploaded","leadColumnChanged"],components:{UploadOutlined:Ua,FileOutlined:Pn},setup(e,{emit:s}){const u=I([]),l=I(!1),{t:h}=Q(),b=I(void 0),m=I([]),i=I([]),c=I([]),_=I({}),g=I([...e.allFields]),f=I("all"),y=[{title:h("campaign.csv_header_field"),dataIndex:"csv_header_field"},{title:h("campaign.csv_field_data"),dataIndex:"csv_field_data"},{title:h("campaign.column_status"),dataIndex:"column_status"}],k=$=>{const O=new FormData;O.append("file",$.file),O.append("folder",e.folder),l.value=!0;let T=new FileReader;T.readAsText($.file,"UTF-8"),T.onload=function(D){const L=Mn.parse(D.target.result,{preview:3,header:!0,skipEmptyLines:!0});m.value=L.data,c.value=L.meta.fields,b.value=$.file;var q={};ce(c.value,(K,j)=>{const F=Ee(e.allFields,K);q[K]=F?K:void 0}),_.value=q,C()},s("fileUploaded",$.file)},v=$=>{var O="";return ce(m.value,(T,D)=>{O+=`${T[$]}<br />`}),O},C=()=>{var $=[];ce(e.allFields,(O,T)=>{Ee(_.value,O)||$.push(O)}),g.value=$,U(f.value),s("leadColumnChanged",_.value)},S=ve(()=>{var $=0;return ce(_.value,(O,T)=>{O==null&&($=$+1)}),$}),U=$=>{if($=="matched"){var O=[];ce(c.value,(T,D)=>{_.value[T]!=null&&O.push(T)}),i.value=O}else if($=="un_matched"){var O=[];ce(c.value,(D,L)=>{_.value[D]==null&&O.push(D)}),i.value=O}else i.value=c.value};return we(()=>e.allFields,($,O)=>{C()}),{fileList:u,loading:l,customRequest:k,columns:y,currentUploadedFile:b,parsedFileData:m,parsedHeader:c,getPreviewData:v,formProperties:_,currentFormFields:g,reAssignCurrentFormFields:C,unMatchedColumnsCount:S,activeTabKey:f,tabChanged:U,tableRecords:i,size:In}}}),Xi={class:"ant-upload-drag-icon"},Ji=P("p",{class:"ant-upload-text"},"Click or drag file to this area to upload",-1),Qi=P("p",{class:"ant-upload-hint"}," Support for a single or bulk upload. Strictly prohibit from uploading company data or other band files ",-1),Zi=["innerHTML"];function xi(e,s,u,l,h,b){const m=o("UploadOutlined"),i=o("a-upload-dragger"),c=o("a-col"),_=o("a-row"),g=o("a-badge"),f=o("a-space"),y=o("a-tab-pane"),k=o("a-tabs"),v=o("a-select-option"),C=o("a-select"),S=o("a-table");return e.parsedFileData.length==0?(d(),w(_,{key:0,gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{fileList:e.fileList,"onUpdate:fileList":s[0]||(s[0]=U=>e.fileList=U),name:"file",accept:e.acceptFormat,customRequest:e.customRequest,onDrop:e.customRequest},{default:n(()=>[P("p",Xi,[a(m)]),Ji,Qi]),_:1},8,["fileList","accept","customRequest","onDrop"])]),_:1})]),_:1})):(d(),w(_,{key:1,gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(_,{gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(k,{activeKey:e.activeTabKey,"onUpdate:activeKey":s[1]||(s[1]=U=>e.activeTabKey=U),onChange:e.tabChanged},{default:n(()=>[a(y,{key:"all"},{tab:n(()=>[a(f,null,{default:n(()=>[a(g,{count:e.size(e.formProperties),"number-style":{backgroundColor:"#fff",color:"#999",boxShadow:"0 0 0 1px #d9d9d9 inset"},overflowCount:2e3},null,8,["count"]),p(" "+r(e.$t("campaign.all_columns")),1)]),_:1})]),_:1}),a(y,{key:"matched"},{tab:n(()=>[a(f,null,{default:n(()=>[a(g,{count:e.size(e.formProperties)-e.unMatchedColumnsCount,"number-style":{backgroundColor:"#52c41a"},overflowCount:2e3},null,8,["count"]),p(" "+r(e.$t("campaign.matched_columns")),1)]),_:1})]),_:1}),a(y,{key:"un_matched"},{tab:n(()=>[a(f,null,{default:n(()=>[a(g,{count:e.unMatchedColumnsCount,overflowCount:2e3},null,8,["count"]),p(" "+r(e.$t("campaign.unmatched_columns")),1)]),_:1})]),_:1})]),_:1},8,["activeKey","onChange"])]),_:1})]),_:1}),a(S,{columns:e.columns,"row-key":U=>U,"data-source":e.tableRecords,pagination:!1},{bodyCell:n(({column:U,record:$})=>[U.dataIndex==="csv_header_field"?(d(),E(R,{key:0},[p(r($),1)],64)):A("",!0),U.dataIndex==="csv_field_data"?(d(),E("span",{key:1,innerHTML:e.getPreviewData($)},null,8,Zi)):A("",!0),U.dataIndex==="column_status"?(d(),E(R,{key:2},[a(C,{value:e.formProperties[$],"onUpdate:value":O=>e.formProperties[$]=O,placeholder:e.$t("common.select_default_text",[e.$t("lead.campaign")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:e.reAssignCurrentFormFields,open:e.formProperties[$]!=null?!1:void 0},{default:n(()=>[(d(!0),E(R,null,X(e.currentFormFields,O=>(d(),w(v,{key:O,title:$,value:O},{default:n(()=>[p(r(O),1)]),_:2},1032,["title","value"]))),128))]),_:2},1032,["value","onUpdate:value","placeholder","onChange","open"]),Fn(P("div",{class:"ant-form-item-explain-error",style:{}},r(e.$t("campaign.column_will_not_imported")),513),[[Rn,e.formProperties[$]==null]])],64)):A("",!0)]),_:1},8,["columns","row-key","data-source"])]),_:1})]),_:1}))}const er=z(Yi,[["render",xi]]),ar=x({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ae,LoadingOutlined:De,SaveOutlined:_e,FileTextOutlined:fa,OrderedListOutlined:Ln,DoubleRightOutlined:sa,DoubleLeftOutlined:Dt,MinusCircleOutlined:St,ImportLeads:er,StaffMemberAddButton:Qt,FormAddButton:an,EmailTemplateAddButton:ln},setup(e,{emit:s}){const u=I(0),{addEditFileRequestAdmin:l,addEditRequestAdmin:h,loading:b,rules:m}=se(),i="forms?fields=xid,name,form_fields&limit=10000",c="email-templates/all",_=I([]),g=I([]),f=I([]),y="users?limit=10000",k=I(void 0),v=I(void 0),C=I([]);ee(()=>{const Y=axiosAdmin.get(y),V=axiosAdmin.get(i),W=axiosAdmin.get(c);Promise.all([Y,V,W]).then(([G,H,N])=>{g.value=G.data,_.value=H.data,f.value=N.data.email_templates})});const S=Y=>{let V=e.formData.detail_fields.indexOf(Y);V!==-1&&e.formData.detail_fields.splice(V,1)},U=()=>{e.formData.detail_fields.push({field_name:"",field_value:"",field_type:"text",id:Math.random().toString(36).slice(2)})},$=()=>{u.value==0?e.formData.name==""||e.formData.user_id.length==0||e.formData.form_id==null||e.formData.email_template_id==null||e.formData.allow_reference_prefix&&e.formData.reference_prefix==""?O():(m.value={},j(1)):j(u.value+1)},O=()=>{var Y={...e.formData};(Y.user_id==null||Y.user_id!=null&&typeof Y.user_id=="object"&&Y.user_id.length==0)&&(Y={...e.formData,user_id:void 0}),k.value!=null&&(Y.file=k.value),Y.import_lead_fields=v.value,l({url:e.url,fieldTypes:{json:["detail_fields","user_id","import_lead_fields"],file:["file"]},data:Y,successMessage:e.successMessage,success:V=>{s("addEditSuccess",V.xid)}})},T=()=>{u.value=u.value-1,e.formData.current_step=u.value},D=()=>{m.value={},s("closed")},L=()=>{axiosAdmin.get(y).then(Y=>{g.value=Y.data})},q=()=>{axiosAdmin.get(i).then(Y=>{_.value=Y.data})},K=()=>{axiosAdmin.get(c).then(Y=>{f.value=Y.data.email_templates})},j=Y=>{u.value=Y,e.formData.current_step=Y},F=ve(()=>e.formData.detail_fields&&e.formData.detail_fields.length==0?!1:$a(e.formData.detail_fields,{field_name:""})||$a(e.formData.detail_fields,{field_value:""})),M=Y=>{k.value=Y},B=Y=>{v.value=Y},J=(Y,V)=>{if(V&&V.form&&V.form.form_fields){var W=[];ce(V.form.form_fields,(G,H)=>{W.push(G.name)}),C.value=W}else C.value=[]};return we(()=>e.visible,(Y,V)=>{Y&&e.addEditType=="edit"&&e.data&&e.data.campaign_users&&e.data.campaign_users.length>0?e.formData.user_id=e.data.campaign_users.map(function(W){return W.x_user_id}):e.formData.user_id=void 0,J("",e.data),j(0)}),{currentStep:u,loading:b,rules:m,allStaffMembers:g,allForms:_,allEmailTemplates:f,onClose:D,onSubmit:$,staffMemberAdded:L,formAdded:q,emailTemplateAdded:K,goBack:T,submitForm:O,removeDetailField:S,addDetailField:U,addFieldsButtonStatus:F,leadFileUploaded:M,leadColumnChanged:B,selectedFormFields:C,formSelected:J,drawerWidth:window.innerWidth<=991?"90%":"60%"}}}),tr={style:{display:"flex"}},nr={style:{display:"flex"}},lr={style:{display:"flex"}},or={class:"mt-20"};function sr(e,s,u,l,h,b){const m=o("FileTextOutlined"),i=o("a-step"),c=o("OrderedListOutlined"),_=o("a-steps"),g=o("a-divider"),f=o("a-input"),y=o("a-form-item"),k=o("a-col"),v=o("a-row"),C=o("a-select-option"),S=o("a-select"),U=o("StaffMemberAddButton"),$=o("FormAddButton"),O=o("EmailTemplateAddButton"),T=o("a-switch"),D=o("a-alert"),L=o("MinusCircleOutlined"),q=o("PlusOutlined"),K=o("a-button"),j=o("ImportLeads"),F=o("a-form"),M=o("DoubleLeftOutlined"),B=o("DoubleRightOutlined"),J=o("SaveOutlined"),Y=o("a-space"),V=o("a-drawer");return d(),w(V,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:n(()=>[a(Y,null,{default:n(()=>[e.currentStep!=0?(d(),w(K,{key:"submit",type:"primary",loading:e.loading,onClick:e.goBack},{default:n(()=>[a(M),p(" "+r(e.$t("campaign.previous_step")),1)]),_:1},8,["loading","onClick"])):A("",!0),e.currentStep!=2?(d(),w(K,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit,disabled:e.currentStep==1&&e.addFieldsButtonStatus},{default:n(()=>[p(r(e.$t("campaign.next_step"))+" ",1),a(B)]),_:1},8,["loading","onClick","disabled"])):A("",!0),e.currentStep==2?(d(),w(K,{key:"submit",type:"primary",loading:e.loading,onClick:e.submitForm},{icon:n(()=>[a(J)]),default:n(()=>[p(" "+r(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"])):A("",!0),a(K,{key:"back",onClick:e.onClose},{default:n(()=>[p(r(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),default:n(()=>[a(F,{layout:"vertical"},{default:n(()=>[a(_,{current:e.currentStep,type:"navigation"},{default:n(()=>[a(i,{title:e.$t("campaign.basic_settings"),description:e.$t("campaign.basic_settings_description")},{icon:n(()=>[a(m)]),_:1},8,["title","description"]),a(i,{title:e.$t("campaign.about_campaign"),description:e.$t("campaign.about_campaign_description")},{icon:n(()=>[a(c)]),_:1},8,["title","description"]),a(i,{title:e.$t("campaign.import_leads"),description:e.$t("campaign.import_leads_description")},null,8,["title","description"])]),_:1},8,["current"]),a(g),e.currentStep==0?(d(),E(R,{key:0},[a(v,{gutter:16,class:"mt-20"},{default:n(()=>[a(k,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(y,{label:e.$t("campaign.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:n(()=>[a(f,{value:e.formData.name,"onUpdate:value":s[0]||(s[0]=W=>e.formData.name=W),placeholder:e.$t("common.placeholder_default_text",[e.$t("campaign.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(v,{gutter:16},{default:n(()=>[a(k,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(y,{label:e.$t("campaign.members"),name:"user_id",help:e.rules.user_id?e.rules.user_id.message:null,validateStatus:e.rules.user_id?"error":null,class:"required"},{default:n(()=>[P("span",tr,[a(S,{value:e.formData.user_id,"onUpdate:value":s[1]||(s[1]=W=>e.formData.user_id=W),mode:"multiple",placeholder:e.$t("common.select_default_text",[e.$t("campaign.members")]),allowClear:!0},{default:n(()=>[(d(!0),E(R,null,X(e.allStaffMembers,W=>(d(),w(C,{key:W.xid,value:W.xid},{default:n(()=>[p(r(W.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),a(U,{onOnAddSuccess:e.staffMemberAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(v,{gutter:16},{default:n(()=>[a(k,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(y,{label:e.$t("campaign.form"),name:"form_id",help:e.rules.form_id?e.rules.form_id.message:null,validateStatus:e.rules.form_id?"error":null,class:"required"},{default:n(()=>[P("span",nr,[a(S,{value:e.formData.form_id,"onUpdate:value":s[2]||(s[2]=W=>e.formData.form_id=W),placeholder:e.$t("common.select_default_text",[e.$t("campaign.form")]),allowClear:!0,onChange:e.formSelected},{default:n(()=>[(d(!0),E(R,null,X(e.allForms,W=>(d(),w(C,{key:W.xid,value:W.xid,form:W},{default:n(()=>[p(r(W.name),1)]),_:2},1032,["value","form"]))),128))]),_:1},8,["value","placeholder","onChange"]),a($,{onOnAddSuccess:e.formAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(k,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(y,{label:e.$t("campaign.email_template"),name:"email_template_id",help:e.rules.email_template_id?e.rules.email_template_id.message:null,validateStatus:e.rules.email_template_id?"error":null,class:"required"},{default:n(()=>[P("span",lr,[a(S,{value:e.formData.email_template_id,"onUpdate:value":s[3]||(s[3]=W=>e.formData.email_template_id=W),placeholder:e.$t("common.select_default_text",[e.$t("campaign.email_template")]),allowClear:!0},{default:n(()=>[(d(!0),E(R,null,X(e.allEmailTemplates,W=>(d(),w(C,{key:W.xid,value:W.xid},{default:n(()=>[p(r(W.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),a(O,{onOnAddSuccess:e.emailTemplateAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(v,{gutter:16,class:"mt-20"},{default:n(()=>[a(k,{xs:24,sm:24,md:8,lg:8},{default:n(()=>[a(y,{label:e.$t("campaign.allow_reference_prefix"),name:"allow_reference_prefix",help:e.rules.allow_reference_prefix?e.rules.allow_reference_prefix.message:null,validateStatus:e.rules.allow_reference_prefix?"error":null,class:"required"},{default:n(()=>[a(T,{checked:e.formData.allow_reference_prefix,"onUpdate:checked":s[4]||(s[4]=W=>e.formData.allow_reference_prefix=W),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1}),e.formData.allow_reference_prefix?(d(),w(k,{key:0,xs:24,sm:24,md:16,lg:16},{default:n(()=>[a(y,{label:e.$t("campaign.reference_prefix"),name:"reference_prefix",help:e.rules.reference_prefix?e.rules.reference_prefix.message:null,validateStatus:e.rules.reference_prefix?"error":null,class:"required"},{default:n(()=>[a(f,{value:e.formData.reference_prefix,"onUpdate:value":s[5]||(s[5]=W=>e.formData.reference_prefix=W),placeholder:e.$t("common.placeholder_default_text",[e.$t("campaign.reference_prefix")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})):A("",!0)]),_:1})],64)):A("",!0),e.currentStep==1?(d(),E(R,{key:1},[!e.formData.detail_fields||e.formData.detail_fields&&e.formData.detail_fields.length==0?(d(),w(D,{key:0,class:"mt-20",description:e.$t("campaign.add_detail_field_description"),type:"info","show-icon":""},null,8,["description"])):A("",!0),e.formData.detail_fields&&e.formData.detail_fields.length>0&&e.addFieldsButtonStatus?(d(),w(D,{key:1,class:"mt-20",description:e.$t("campaign.add_detail_field_error"),type:"error","show-icon":""},null,8,["description"])):A("",!0),P("div",or,[(d(!0),E(R,null,X(e.formData.detail_fields,(W,G)=>(d(),w(v,{gutter:16,key:W.id},{default:n(()=>[a(k,{span:7},{default:n(()=>[a(y,{name:["detail_fields",G,"field_name"]},{default:n(()=>[a(f,{value:W.field_name,"onUpdate:value":H=>W.field_name=H,placeholder:e.$t("campaign.field_name")},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["name"])]),_:2},1024),a(k,{span:7},{default:n(()=>[a(y,{name:["detail_fields",G,"field_value"]},{default:n(()=>[a(f,{value:W.field_value,"onUpdate:value":H=>W.field_value=H,placeholder:e.$t("campaign.field_value")},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["name"])]),_:2},1024),a(k,{span:7},{default:n(()=>[a(y,{name:["detail_fields",G,"field_type"]},{default:n(()=>[a(S,{value:W.field_type,"onUpdate:value":H=>W.field_type=H,placeholder:e.$t("common.select_default_text",[e.$t("campaign.field_type")]),allowClear:!0},{default:n(()=>[a(C,{value:"text"},{default:n(()=>[p(r(e.$t("common.text")),1)]),_:1}),a(C,{value:"link"},{default:n(()=>[p(r(e.$t("common.link")),1)]),_:1})]),_:2},1032,["value","onUpdate:value","placeholder"])]),_:2},1032,["name"])]),_:2},1024),a(k,{span:3},{default:n(()=>[a(L,{onClick:H=>e.removeDetailField(W)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),a(v,{gutter:16},{default:n(()=>[a(k,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(y,null,{default:n(()=>[a(K,{type:"dashed",block:"",onClick:e.addDetailField,disabled:e.addFieldsButtonStatus},{default:n(()=>[a(q),p(" "+r(e.$t("campaign.add_detail_field")),1)]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})]),_:1})],64)):A("",!0),e.currentStep==2?(d(),w(j,{key:2,acceptFormat:".csv",allFields:e.selectedFormFields,onFileUploaded:e.leadFileUploaded,onLeadColumnChanged:e.leadColumnChanged},null,8,["allFields","onFileUploaded","onLeadColumnChanged"])):A("",!0)]),_:1})]),_:1},8,["title","width","open","onClose"])}const on=z(ar,[["render",sr]]),dr=x({props:{btnType:{default:"default"},btnClass:{default:""},tooltip:{default:!0},campaign:{default:{}}},emits:["success"],components:{SaveOutlined:_e},setup(e,{emit:s}){const{permsArray:u}=Z(),{addEditRequestAdmin:l,loading:h,rules:b}=se(),m=I(!1),i=I({}),{t:c}=Q();ee(()=>{_()});const _=()=>{var k=[];e.campaign&&e.campaign.form&&e.campaign.form.form_fields&&ce(e.campaign.form.form_fields,v=>{k.push({id:Math.random().toString(36).slice(2),field_name:v.name,field_value:""})}),i.value={campaign_id:e.campaign.xid,lead_data:k}},g=()=>{m.value=!0},f=()=>{l({url:"leads/create-lead",data:i.value,successMessage:c("lead.created"),success:k=>{s("success"),y()}})},y=()=>{_(),m.value=!1};return{permsArray:u,visible:m,formData:i,loading:h,rules:b,onSubmit:f,onClose:y,showAdd:g,drawerWidth:window.innerWidth<=991?"90%":"45%"}}}),ir={key:0};function rr(e,s,u,l,h,b){const m=o("a-button"),i=o("a-tooltip"),c=o("a-input"),_=o("a-form-item"),g=o("a-col"),f=o("a-row"),y=o("a-form"),k=o("SaveOutlined"),v=o("a-space"),C=o("a-drawer");return e.permsArray.includes("leads_create")||e.permsArray.includes("admin")?(d(),E("div",ir,[a(i,{title:e.$t("lead.add")},{default:n(()=>[a(m,{type:e.btnType,class:At(e.btnClass),onClick:e.showAdd},{icon:n(()=>[oe(e.$slots,"icon")]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["type","class","onClick"])]),_:3},8,["title"]),a(C,{title:e.$t("lead.add"),width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:n(()=>[a(v,null,{default:n(()=>[a(m,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:n(()=>[a(k)]),default:n(()=>[p(" "+r(e.$t("common.create")),1)]),_:1},8,["loading","onClick"]),a(m,{key:"back",onClick:e.onClose},{default:n(()=>[p(r(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),default:n(()=>[a(y,{layout:"vertical"},{default:n(()=>[a(f,{gutter:16},{default:n(()=>[(d(!0),E(R,null,X(e.formData.lead_data,S=>(d(),w(g,{key:S.id,xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(_,{label:S.field_name,name:S.field_name,help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null},{default:n(()=>[a(c,{value:S.field_value,"onUpdate:value":U=>S.field_value=U,placeholder:e.$t("common.placeholder_default_text",[S.field_name])},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["label","name","help","validateStatus"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])])):A("",!0)}const sn=z(dr,[["render",rr]]),ur=x({props:["members"],setup(e,{emit:s}){return{}}});function mr(e,s,u,l,h,b){const m=o("a-avatar"),i=o("a-tooltip"),c=o("a-avatar-group");return d(),w(c,{"max-count":4,"max-style":{color:"#f56a00",backgroundColor:"#fde3cf"}},{default:n(()=>[(d(!0),E(R,null,X(e.members,_=>(d(),w(i,{key:_.x_user_id,title:_.user.name,placement:"top"},{default:n(()=>[a(m,{src:_.user.profile_image_url},null,8,["src"])]),_:2},1032,["title"]))),128))]),_:1})}const dn=z(ur,[["render",mr]]),cr=x({props:["campaign"],emits:["success"],components:{PlusOutlined:ae,AddLead:sn},setup(e,{emit:s}){const{permsArray:u}=Z();return{leadAdded:()=>{s("success")},permsArray:u}}}),pr={key:1},_r=P("br",null,null,-1);function fr(e,s,u,l,h,b){const m=o("PlusOutlined"),i=o("AddLead"),c=o("a-progress"),_=o("a-typography-text"),g=o("a-typography-paragraph");return e.campaign.remaining_leads==0?(d(),E(R,{key:0},[e.permsArray.includes("leads_create")||e.permsArray.includes("admin")?(d(),w(i,{key:0,campaign:e.campaign,btnClass:"p-0",btnType:"link",onSuccess:e.leadAdded},{icon:n(()=>[a(m)]),default:n(()=>[p(" "+r(e.$t("lead.add")),1)]),_:1},8,["campaign","onSuccess"])):(d(),E("span",pr,"-"))],64)):(d(),E(R,{key:1},[a(c,{percent:parseInt((e.campaign.total_leads-e.campaign.remaining_leads)/e.campaign.total_leads*100),size:"small"},null,8,["percent"]),_r,a(g,{class:"mt-5"},{default:n(()=>[p(r(e.$t("campaign.remaining_leads"))+": ",1),a(_,{strong:""},{default:n(()=>[p(r(e.campaign.total_leads-e.campaign.remaining_leads)+"/"+r(e.campaign.total_leads),1)]),_:1})]),_:1})],64))}const rn=z(cr,[["render",fr]]),gr={components:{PlusOutlined:ae,EditOutlined:ke,DeleteOutlined:pe,PlayCircleOutlined:Me,StopOutlined:da,AddEdit:on,AdminPageHeader:me,AddLead:sn,CampaignMembers:dn,CampaignProgress:rn},setup(){const{permsArray:e,appSetting:s,formatDateTime:u}=Z(),{url:l,addEditUrl:h,initData:b,columns:m,filterableColumns:i,hashableColumns:c,extraFilters:_}=Jt(),g=Te();ee(()=>{f(),g.crudUrl.value=h,g.langKey.value="campaign",g.initData.value={...b},g.formData.value={...b},g.hashableColumns.value=[...c]});const f=()=>{g.tableUrl.value={url:l,extraFilters:_},g.table.filterableColumns=i,g.fetch({page:1})};return{permsArray:e,formatDateTime:u,appSetting:s,columns:m,...g,filterableColumns:i,extraFilters:_,setUrlData:f}}},hr={class:"table-responsive"};function br(e,s,u,l,h,b){const m=o("a-page-header"),i=o("router-link"),c=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("PlusOutlined"),y=o("a-button"),k=o("DeleteOutlined"),v=o("a-space"),C=o("a-col"),S=o("a-select-option"),U=o("a-select"),$=o("a-input-search"),O=o("a-input-group"),T=o("a-row"),D=o("admin-page-filters"),L=o("AddEdit"),q=o("PlayCircleOutlined"),K=o("a-tab-pane"),j=o("StopOutlined"),F=o("a-tabs"),M=o("CampaignProgress"),B=o("CampaignMembers"),J=o("AddLead"),Y=o("EditOutlined"),V=o("a-tooltip"),W=o("a-table"),G=o("admin-page-table-content");return d(),E(R,null,[a(g,null,{header:n(()=>[a(m,{title:e.$t("menu.campaigns"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(c,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[p(r(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(c,null,{default:n(()=>[p(r(e.$t("menu.campaigns")),1)]),_:1})]),_:1})]),_:1}),a(D,null,{default:n(()=>[a(T,{gutter:[16,16]},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:n(()=>[a(v,null,{default:n(()=>[l.permsArray.includes("campaigns_create")||l.permsArray.includes("admin")?(d(),w(y,{key:0,type:"primary",onClick:e.addItem},{default:n(()=>[a(f),p(" "+r(e.$t("campaign.add")),1)]),_:1},8,["onClick"])):A("",!0),e.table.selectedRowKeys.length>0&&(l.permsArray.includes("campaigns_delete")||l.permsArray.includes("admin"))?(d(),w(y,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:n(()=>[a(k)]),default:n(()=>[p(" "+r(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),a(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:n(()=>[a(T,{gutter:[16,16],justify:"end"},{default:n(()=>[a(C,{xs:24,sm:24,md:24,lg:24,xl:12},{default:n(()=>[a(O,{compact:""},{default:n(()=>[a(U,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=H=>e.table.searchColumn=H),placeholder:e.$t("common.select_default_text",[""])},{default:n(()=>[(d(!0),E(R,null,X(l.filterableColumns,H=>(d(),w(S,{key:H.key},{default:n(()=>[p(r(H.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),a($,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=H=>e.table.searchString=H),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(G,null,{default:n(()=>[a(L,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),l.permsArray.includes("view_completed_campaigns")||l.permsArray.includes("admin")?(d(),w(T,{key:0},{default:n(()=>[a(C,{span:24},{default:n(()=>[a(F,{activeKey:l.extraFilters.campaign_status,"onUpdate:activeKey":s[2]||(s[2]=H=>l.extraFilters.campaign_status=H),onChange:l.setUrlData},{default:n(()=>[a(K,{key:"active"},{tab:n(()=>[P("span",null,[a(q),p(" "+r(e.$t("campaign.active_campaign")),1)])]),_:1}),a(K,{key:"completed"},{tab:n(()=>[P("span",null,[a(j),p(" "+r(e.$t("campaign.completed_campaign")),1)])]),_:1})]),_:1},8,["activeKey","onChange"])]),_:1})]),_:1})):A("",!0),a(T,null,{default:n(()=>[a(C,{span:24},{default:n(()=>[P("div",hr,[a(W,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:H=>({disabled:!1,name:H.xid})},columns:l.columns,"row-key":H=>H.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:n(({column:H,record:N})=>[H.dataIndex==="progress"?(d(),w(M,{key:0,campaign:N,onSuccess:e.fetch},null,8,["campaign","onSuccess"])):A("",!0),H.dataIndex==="form"?(d(),E(R,{key:1},[p(r(N.x_form_id!=""&&N.form&&N.form.xid?N.form.name:"-"),1)],64)):A("",!0),H.dataIndex==="members"?(d(),w(B,{key:2,members:N.campaign_users},null,8,["members"])):A("",!0),H.dataIndex==="started_on"?(d(),E(R,{key:3},[p(r(N.started_on&&N.started_on!=""?l.formatDateTime(N.started_on):"-"),1)],64)):A("",!0),H.dataIndex==="completed_on"?(d(),E(R,{key:4},[p(r(N.completed_on&&N.completed_on!=""?l.formatDateTime(N.completed_on):"-"),1)],64)):A("",!0),H.dataIndex==="completed_by"?(d(),E(R,{key:5},[p(r(N.x_completed_by&&N.completed_by&&N.completed_by.name?N.completed_by.name:"-"),1)],64)):A("",!0),H.dataIndex==="last_actioner"?(d(),E(R,{key:6},[p(r(N.last_actioner&&N.last_actioner.name?N.last_actioner.name:"-"),1)],64)):A("",!0),H.dataIndex==="action"?(d(),w(v,{key:7},{default:n(()=>[a(J,{campaign:N,btnType:"primary",onSuccess:l.setUrlData},{icon:n(()=>[a(f)]),_:2},1032,["campaign","onSuccess"]),a(V,{title:e.$t("common.edit")},{default:n(()=>[l.permsArray.includes("campaigns_edit")||l.permsArray.includes("admin")?(d(),w(y,{key:0,type:"primary",onClick:te=>e.editItem(N)},{icon:n(()=>[a(Y)]),_:2},1032,["onClick"])):A("",!0)]),_:2},1032,["title"]),a(V,{title:e.$t("common.delete")},{default:n(()=>[(l.permsArray.includes("campaigns_delete")||l.permsArray.includes("admin"))&&(!N.children||N.children.length==0)?(d(),w(y,{key:0,type:"primary",onClick:te=>e.showDeleteConfirm(N.xid)},{icon:n(()=>[a(k)]),_:2},1032,["onClick"])):A("",!0)]),_:2},1032,["title"])]),_:2},1024)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const yr=z(gr,[["render",br]]),vr=x({props:{btnType:{default:"default"},tooltip:{default:!0}},emits:["onAddSuccess"],components:{PlusOutlined:ae,AddEdit:on},setup(e,{emit:s}){const{permsArray:u}=Z(),{initData:l,addEditUrl:h}=Jt(),b=I(!1),m=I("add"),i=I({...l});return{permsArray:u,visible:b,addEditType:m,addEditUrl:h,formData:i,addEditSuccess:()=>{b.value=!1,i.value={...l},s("onAddSuccess")},onClose:()=>{b.value=!1},showAdd:()=>{b.value=!0}}}}),kr={key:0};function wr(e,s,u,l,h,b){const m=o("PlusOutlined"),i=o("a-button"),c=o("a-tooltip"),_=o("AddEdit");return e.permsArray.includes("campaigns_create")||e.permsArray.includes("admin")?(d(),E("div",kr,[e.tooltip?(d(),w(c,{key:0,placement:"topLeft",title:e.$t("campaign.add"),"arrow-point-at-center":""},{default:n(()=>[a(i,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:n(()=>[a(m)]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(d(),w(i,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:n(()=>[a(m)]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick","type"])),a(_,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("campaign.add"),successMessage:e.$t("campaign.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):A("",!0)}const Cr=z(vr,[["render",wr]]),Sr={components:{AdminPageHeader:me,CampaignMembers:dn,CampaignProgress:rn,CampaignAddButton:Cr,PlusCircleOutlined:qn,StopOutlined:da,PlayCircleOutlined:Me,SyncOutlined:We},setup(){const{formatDateTime:e,permsArray:s}=Z(),{addEditRequestAdmin:u,loading:l,rules:h}=se(),b=I(void 0),{t:m}=Q(),i="call-managers?fields=id,xid,name,reference_prefix,allow_reference_prefix,remaining_leads,total_leads,campaignUsers{id,xid,user_id,x_user_id,campaign_id,x_campaign_id},campaignUsers:user{id,xid,name,profile_image,profile_image_url},form_id,x_form_id,form{id,xid,name,form_fields},detail_fields,last_action_by,x_last_action_by,lastActioner{id,xid,name},completed_by,x_completed_by,completedBy{id,xid,name},started_on,completed_on,upcoming_lead_action",c=Oe();ee(()=>{_()});const _=()=>{const v=axiosAdmin.get(i);Promise.all([v]).then(([C])=>{b.value=C.data})};return{permsArray:s,formatDateTime:e,allCampaigns:b,fetchCampaigns:_,campaignAdded:()=>{axiosAdmin.get(i).then(v=>{b.value=v.data})},stopCampaign:v=>{ge.confirm({title:m("campaign.stop_campaign")+"?",icon:a(ue),content:m("campaign.are_you_want_to_stop_campaign"),centered:!0,okText:m("common.yes"),okType:"danger",cancelText:m("common.no"),onOk(){u({url:"campaigns/stop",data:{x_campaign_id:v},successMessage:m("campaign.campaign_stopped_successfully"),success:C=>{_()}})},onCancel(){}})},getLeaActionColor:v=>v=="start_and_new_lead"?"#faad14":v=="resume"?"#52c41a":"",takeAction:v=>{ge.confirm({title:m("common.are_you_sure")+"?",icon:a(ue),content:m("campaign.are_you_want_to_create_new_lead"),centered:!0,okText:m("common.yes"),okType:"danger",cancelText:m("common.no"),onOk(){u({url:"campaigns/take-action",data:{x_campaign_id:v.xid},successMessage:m("campaign.new_lead_added"),success:C=>{c.push({name:"admin.call_manager.take_action",params:{id:C.x_lead_id}})}})},onCancel(){}})}}}},$r={class:"dashboard-page-content-container"},Dr={key:0},Ar={key:1};function Tr(e,s,u,l,h,b){const m=o("a-page-header"),i=o("router-link"),c=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("a-typography-text"),y=o("CampaignAddButton"),k=o("a-empty"),v=o("a-col"),C=o("a-row"),S=o("CampaignMembers"),U=o("CampaignProgress"),$=o("a-card-meta"),O=o("PlayCircleOutlined"),T=o("PlusCircleOutlined"),D=o("SyncOutlined"),L=o("a-button"),q=o("StopOutlined"),K=o("a-card"),j=o("a-skeleton");return d(),E(R,null,[a(g,null,{header:n(()=>[a(m,{title:e.$t("menu.call_manager"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(c,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[p(r(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(c,null,{default:n(()=>[p(r(e.$t("menu.call_manager")),1)]),_:1})]),_:1})]),_:1}),P("div",$r,[l.allCampaigns!=null?(d(),E("div",Dr,[l.allCampaigns.length==0?(d(),w(C,{key:0,gutter:[15,15],class:"mt-30 mb-20"},{default:n(()=>[a(v,{span:24},{default:n(()=>[a(k,{"image-style":{height:"250px"}},{description:n(()=>[a(f,{type:"warning",strong:""},{default:n(()=>[p(r(e.$t("campaign.no_call_manager_data")),1)]),_:1})]),default:n(()=>[a(y,{btnType:"primary",onOnAddSuccess:l.campaignAdded,tooltip:!1},{default:n(()=>[p(r(e.$t("campaign.add")),1)]),_:1},8,["onOnAddSuccess"])]),_:1})]),_:1})]),_:1})):(d(),w(C,{key:1,gutter:[15,15],class:"mt-30 mb-20"},{default:n(()=>[(d(!0),E(R,null,X(l.allCampaigns,F=>(d(),w(v,{key:F.xid,xs:24,sm:24,md:12,lg:8,xl:8},{default:n(()=>[a(K,{title:F.name,hoverable:""},{actions:n(()=>[a(L,{type:"link",style:ca({color:l.getLeaActionColor(F.upcoming_lead_action)}),onClick:M=>l.takeAction(F)},{icon:n(()=>[F.upcoming_lead_action=="start_and_new_lead"?(d(),w(O,{key:0})):F.upcoming_lead_action=="new_lead"?(d(),w(T,{key:1})):F.upcoming_lead_action=="start"?(d(),w(O,{key:2})):(d(),w(D,{key:3}))]),default:n(()=>[p(" "+r(e.$t(`campaign.${F.upcoming_lead_action}`)),1)]),_:2},1032,["style","onClick"]),a(L,{type:"link",onClick:M=>l.stopCampaign(F.xid),danger:""},{icon:n(()=>[a(q)]),default:n(()=>[p(" "+r(e.$t("common.stop")),1)]),_:2},1032,["onClick"])]),default:n(()=>[a($,null,{description:n(()=>[a(C,{gutter:16,class:"mt-10"},{default:n(()=>[a(v,{span:8},{default:n(()=>[p(r(e.$t("campaign.members")),1)]),_:1}),a(v,{span:16},{default:n(()=>[a(S,{members:F.campaign_users},null,8,["members"])]),_:2},1024)]),_:2},1024),a(C,{gutter:16,class:"mt-10"},{default:n(()=>[a(v,{span:8},{default:n(()=>[p(r(e.$t("campaign.progress")),1)]),_:1}),a(v,{span:16},{default:n(()=>[a(U,{campaign:F,onSuccess:l.fetchCampaigns},null,8,["campaign","onSuccess"])]),_:2},1024)]),_:2},1024),a(C,{gutter:16,class:"mt-20"},{default:n(()=>[a(v,{span:8},{default:n(()=>[p(r(e.$t("campaign.last_actioner")),1)]),_:1}),a(v,{span:16},{default:n(()=>[p(r(F.last_actioner&&F.last_actioner.name?F.last_actioner.name:"-"),1)]),_:2},1024)]),_:2},1024),a(C,{gutter:16,class:"mt-25"},{default:n(()=>[a(v,{span:8},{default:n(()=>[p(r(e.$t("campaign.started_on")),1)]),_:1}),a(v,{span:16},{default:n(()=>[p(r(F.started_on!=null?l.formatDateTime(F.started_on):"-"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["title"])]),_:2},1024))),128))]),_:1}))])):(d(),E("div",Ar,[a(j,{active:""})]))])],64)}const Er=z(Sr,[["render",Tr]]),Or=x({props:{dateTime:{default:void 0},disabled:{default:!1},isFutureDateDisabled:{default:!0}},emits:["dateTimeChanged"],setup(e,{emit:s}){const u=I(void 0),{disabledDate:l,formatDateTime:h,dayjs:b}=Z();return ee(()=>{e.dateTime&&(u.value=b(e.dateTime))}),{dateTimeValue:u,disabledDate:l,formatOrderDate:c=>c?h(c.format()):void 0,dateTimeChanged:c=>{const _=c?c.utc().format("YYYY-MM-DDTHH:mm:ssZ"):void 0;s("dateTimeChanged",_)}}}});function Ur(e,s,u,l,h,b){const m=o("a-date-picker");return d(),w(m,{value:e.dateTimeValue,"onUpdate:value":s[0]||(s[0]=i=>e.dateTimeValue=i),format:e.formatOrderDate,"disabled-date":e.isFutureDateDisabled?e.disabledDate:void 0,"show-time":"",placeholder:e.$t("common.date_time"),style:{width:"100%"},onChange:e.dateTimeChanged,disabled:e.disabled},null,8,["value","format","disabled-date","placeholder","onChange","disabled"])}const Pr=z(Or,[["render",Ur]]),Ir=x({props:{bookingType:{default:null},xLeadId:{default:null},showDeleteIcon:{default:!0},showDeleteText:{default:!0}},emits:["success"],components:{DeleteOutlined:pe,ExclamationCircleOutlined:ue},setup(e,{emit:s}){const{t:u}=Q(),l=I(""),{addEditRequestAdmin:h,loading:b}=se();return ee(()=>{l.value=e.bookingType=="salesman_bookings"?u("salesman_booking.delete_salesman_booking"):u("lead_follow_up.delete_follow_up")}),{pageTitle:l,loading:b,deleteModal:()=>{const i=e.bookingType=="salesman_bookings"?"salesman-bookings":"lead-follow-ups/delete",c=e.bookingType=="salesman_bookings"?"salesman_booking":"lead_follow_up";ge.confirm({title:u("common.delete")+"?",icon:a(ue),content:u(`${c}.delete_message`),centered:!0,okText:u("common.yes"),okType:"danger",cancelText:u("common.no"),onOk(){h({url:i,data:{x_lead_id:e.xLeadId,booking_type:e.bookingType},success:_=>{s("success"),Se.success({message:u("common.success"),description:u(`${c}.deleted`),placement:"bottomRight"})}})},onCancel(){}})}}}});function Mr(e,s,u,l,h,b){const m=o("DeleteOutlined"),i=o("a-button"),c=o("a-tooltip");return d(),w(c,{title:e.pageTitle},{default:n(()=>[a(i,{style:{background:"#ff4d4f",borderColor:"#ff4d4f"},type:"primary",onClick:e.deleteModal,loading:e.loading},Ze({default:n(()=>[e.showDeleteText?(d(),E(R,{key:0},[p(r(e.$t("common.delete")),1)],64)):A("",!0)]),_:2},[e.showDeleteIcon?{name:"icon",fn:n(()=>[a(m)]),key:"0"}:void 0]),1032,["onClick","loading"])]),_:1},8,["title"])}const Ra=z(Ir,[["render",Mr]]),Fr=x({props:{leadId:{default:null},bookingType:{default:null},btnType:{default:"primary"},btnShape:{default:"rectangle"}},emits:["success"],components:{PlusOutlined:ae,LoadingOutlined:De,SaveOutlined:_e,DeleteOutlined:pe,DateTimePicker:Pr,DeleteBooking:Ra},setup(e,{emit:s}){const{t:u}=Q(),l=I("add"),h=I({lead_id:e.leadId,booking_type:e.bookingType,date_time:void 0,user_id:void 0,notes:""}),b=I(!1),m=I(""),i=I({}),c=I([]),_=e.bookingType=="salesman_bookings"?`leads/${e.leadId}?fields=id,xid,salesman_booking_id,x_salesman_booking_id,salesmanBooking{id,xid,log_type,user_id,x_user_id,date_time,notes},salesmanBooking:user{id,xid,name}`:`leads/${e.leadId}?fields=id,xid,lead_follow_up_id,x_lead_follow_up_id,leadFollowUp{id,xid,log_type,user_id,x_user_id,date_time,notes},leadFollowUp:user{id,xid,name}`,{addEditRequestAdmin:g,loading:f,rules:y}=se(),{appSetting:k}=Z(),v=ve(()=>e.bookingType=="salesman_bookings"?"salesman_booking":"lead_follow_up");ee(()=>{m.value=e.bookingType=="salesman_bookings"?u("menu.salesman_bookings"):u("menu.lead_follow_up"),C()});const C=()=>{const O=axiosAdmin.get(_),T=axiosAdmin.get(`leads/campaign-members?lead_id=${e.leadId}&booking_type=${e.bookingType}`);Promise.all([O,T]).then(([D,L])=>{var q=D.data;e.bookingType=="salesman_bookings"&&q.salesman_booking&&q.salesman_booking.xid?(h.value={...h.value,date_time:q.salesman_booking.date_time,user_id:q.salesman_booking.x_user_id,notes:q.salesman_booking.notes},l.value="edit"):e.bookingType=="lead_follow_up"&&q.lead_follow_up&&q.lead_follow_up.xid?(h.value={...h.value,date_time:q.lead_follow_up.date_time,user_id:q.lead_follow_up.x_user_id,notes:q.lead_follow_up.notes},l.value="edit"):h.value={...h.value,date_time:void 0,user_id:void 0,notes:""},i.value=q,c.value=L.data.users})},S=()=>{const O=l.value=="add"?"created":"updated";g({url:"leads/create-booking",data:h.value,successMessage:u(`${v.value}.${O}`),success:T=>{s("success",T.booking),$(),C()}})},U=()=>{b.value=!0},$=()=>{b.value=!1};return{loading:f,rules:y,onSubmit:S,appSetting:k,formData:h,addEditType:l,pageTitle:m,hideModal:$,showModal:U,visible:b,users:c,leadDetails:i,getInitData:C,drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function Rr(e,s,u,l,h,b){const m=o("a-button"),i=o("a-tooltip"),c=o("a-select-option"),_=o("a-select"),g=o("a-form-item"),f=o("a-col"),y=o("a-row"),k=o("DateTimePicker"),v=o("a-textarea"),C=o("a-form"),S=o("SaveOutlined"),U=o("DeleteBooking"),$=o("a-modal");return d(),E(R,null,[a(i,{title:e.pageTitle},{default:n(()=>[a(m,{type:e.btnType,shape:e.btnShape,size:"small",onClick:e.showModal},{default:n(()=>[oe(e.$slots,"default")]),_:3},8,["type","shape","onClick"])]),_:3},8,["title"]),a($,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit,destroyOnClose:!0},{footer:n(()=>[a(m,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:n(()=>[a(S)]),default:n(()=>[p(" "+r(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),e.leadDetails&&e.leadDetails.xid&&e.bookingType=="salesman_bookings"&&e.leadDetails.x_salesman_booking_id!=null||e.leadDetails&&e.leadDetails.xid&&e.bookingType=="lead_follow_up"&&e.leadDetails.x_lead_follow_up_id!=null?(d(),w(U,{key:0,bookingType:e.bookingType,onSuccess:s[3]||(s[3]=()=>{e.visible=!1,e.getInitData()}),xLeadId:e.leadDetails.xid},null,8,["bookingType","xLeadId"])):A("",!0),a(m,{key:"back",onClick:e.hideModal},{default:n(()=>[p(r(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[a(C,{layout:"vertical"},{default:n(()=>[a(y,{gutter:16},{default:n(()=>[a(f,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(g,{label:e.bookingType=="salesman_bookings"?e.$t("salesman.salesman"):e.$t("user.staff_member"),name:"user_id",help:e.rules.user_id?e.rules.user_id.message:null,validateStatus:e.rules.user_id?"error":null,class:"required"},{default:n(()=>[a(_,{value:e.formData.user_id,"onUpdate:value":s[0]||(s[0]=O=>e.formData.user_id=O),placeholder:e.$t("common.select_default_text",[e.bookingType=="salesman_bookings"?e.$t("salesman.salesman"):e.$t("user.staff_member")]),allowClear:!0,optionFilterProp:"title","show-search":""},{default:n(()=>[(d(!0),E(R,null,X(e.users,O=>(d(),w(c,{key:O.xid,value:O.xid,title:O.name},{default:n(()=>[p(r(O.name),1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(y,{gutter:16},{default:n(()=>[a(f,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(g,{label:e.bookingType=="salesman_bookings"?e.$t("lead.booking_time"):e.$t("lead_follow_up.follow_up_time"),name:"date_time",help:e.rules.date_time?e.rules.date_time.message:null,validateStatus:e.rules.date_time?"error":null,class:"required"},{default:n(()=>[a(k,{dateTime:e.formData.date_time,isFutureDateDisabled:!1,onDateTimeChanged:s[1]||(s[1]=O=>e.formData.date_time=O)},null,8,["dateTime"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(y,{gutter:16},{default:n(()=>[a(f,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(g,{label:e.$t("common.notes"),name:"notes",help:e.rules.notes?e.rules.notes.message:null,validateStatus:e.rules.notes?"error":null,class:"required"},{default:n(()=>[a(v,{value:e.formData.notes,"onUpdate:value":s[2]||(s[2]=O=>e.formData.notes=O),placeholder:e.$t("common.placeholder_default_text",[e.$t("common.notes")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])],64)}const Lr=z(Fr,[["render",Rr]]),qr=e=>{const{convertStringToKey:s,getCampaignUrl:u,user:l}=Z(),h="lead{id,xid,reference_number,lead_data,started,campaign_id,x_campaign_id,time_taken,first_action_by,x_first_action_by,last_action_by,x_last_action_by},lead:campaign{id,xid,name,status},lead:firstActioner{id,xid,name},lead:lastActioner{id,xid,name}",b="form-field-names/all",m=`lead-logs?fields=id,xid,log_type,time_taken,date_time,user_id,x_user_id,user{id,xid,name,profile_image,profile_image_url},lead_id,x_lead_id,${h}`,i=I([]),c=["lead_id","campaign_id","user_id"],{t:_}=Q(),g=I([]),f=I([]),y=I([]);return{url:m,columns:g,filterableColumns:[],hashableColumns:c,allFormFieldNames:i,allCampaigns:f,allUsers:y,getPrefetchData:()=>{const C=u(),S=axiosAdmin.get(C),U=axiosAdmin.get(b),$=axiosAdmin.get(`all-users?log_type=${e.logType}`);return Promise.all([U,S,$]).then(([O,T,D])=>{i.value=O.data.data,f.value=T.data,y.value=D.data.users;var L=[];if(e.showLeadDetails){var L=[{title:_("lead.reference_number"),dataIndex:"reference_number"},{title:_("lead.campaign"),dataIndex:"campaign"}];e.showFormFields&&ce(O.data.data,F=>{L.push({title:F.field_name,dataIndex:s(F.field_name)})})}e.logType=="call_log"&&L.push({title:_("lead.call_duration"),dataIndex:"time_taken"});var q=_("lead.called_on"),K=_("lead.call_by");e.logType=="lead_follow_up"?q=_("lead.follow_up_time"):e.logType=="salesman_booking"?(q=_("lead.booking_time"),K=_("menu.salesman")):e.logType=="notes"&&(q=_("lead.added_on"),K=_("lead.added_by")),e.logType=="notes"&&L.push({title:_("common.notes"),dataIndex:"notes"}),L=[...L,{title:q,dataIndex:"date_time"},{title:K,dataIndex:"actioner"}],e.showAction&&L.push({title:_("common.action"),dataIndex:"action"}),g.value=L})}}},Br={props:{pageName:{default:"index"},leadId:{default:void 0},showCampaignStatus:{default:!1},showTableSearch:{default:!0},showUserFilter:{default:!1},showDateFilter:{default:!0},showLeadDetails:{default:!0},showFormFields:{default:!0},showAction:{default:!0},logType:{default:"call_log"},scrollStyle:{default:{}}},components:{PlayCircleOutlined:Me,StopOutlined:da,DateRangePicker:ua},setup(e){const{permsArray:s,appSetting:u,formatDateTime:l,convertStringToKey:h,getCampaignUrl:b,user:m,formatTimeDuration:i}=Z(),c=Ve(),_=ya(),{url:g,columns:f,filterableColumns:y,allFormFieldNames:k,hashableColumns:v,allCampaigns:C,allUsers:S,getPrefetchData:U}=qr(e),$=I({campaign_id:void 0,page_name:e.pageName,campaign_status:"active",lead_id:e.leadId!=null?e.leadId:void 0,log_type:e.logType,dates:[]}),O=I({log_type:e.logType,user_id:void 0});ee(()=>{U().then(q=>{e.logType!="salesman_bookings"&&e.pageName!="lead_action"&&(O.value={...O.value,user_id:m.value.xid}),_.hashable.value=[...v],T()})});const T=()=>{_.tableUrl.value={url:g,filters:O,extraFilters:$},_.table.filterableColumns=y,_.hashable.value=[...v],_.table.pagination={..._.table.pagination,current:1},_.fetch({page:1})};return{..._,...c,permsArray:s,appSetting:u,formatDateTime:l,formatTimeDuration:i,columns:f,filterableColumns:y,allFormFieldNames:k,convertStringToKey:h,findFieldValue:(q,K)=>{var j="-";return ce(K,F=>{q.includes(F.field_name)&&(j=F.field_value)}),j},allCampaigns:C,allUsers:S,filters:O,extraFilters:$,setUrlData:T,campaignTypeChanged:q=>{$.value={...$.value,campaign_id:void 0};const K=b($.value.campaign_status),j=axiosAdmin.get(K);Promise.all([j]).then(([F])=>{C.value=F.data,T()})}}}},Kr={key:0,class:"table-responsive"},zr={key:1};function Vr(e,s,u,l,h,b){const m=o("PlayCircleOutlined"),i=o("a-tab-pane"),c=o("StopOutlined"),_=o("a-tabs"),g=o("a-col"),f=o("a-row"),y=o("a-select-option"),k=o("a-select"),v=o("DateRangePicker"),C=o("a-button"),S=o("a-table"),U=o("view-lead-details");return d(),E(R,null,[u.showCampaignStatus?(d(),w(f,{key:0},{default:n(()=>[a(g,{span:24},{default:n(()=>[a(_,{activeKey:l.extraFilters.campaign_status,"onUpdate:activeKey":s[0]||(s[0]=$=>l.extraFilters.campaign_status=$),onChange:l.campaignTypeChanged},{default:n(()=>[a(i,{key:"active"},{tab:n(()=>[P("span",null,[a(m),p(" "+r(e.$t("campaign.active_campaign")),1)])]),_:1}),l.permsArray.includes("view_completed_campaigns")||l.permsArray.includes("admin")?(d(),w(i,{key:"completed"},{tab:n(()=>[P("span",null,[a(c),p(" "+r(e.$t("campaign.completed_campaign")),1)])]),_:1})):A("",!0)]),_:1},8,["activeKey","onChange"])]),_:1})]),_:1})):A("",!0),u.showTableSearch||u.showDateFilter||u.showUserFilter||l.permsArray.includes("leads_view_all")||l.permsArray.includes("admin")?(d(),w(f,{key:1,gutter:[15,15],class:"mb-20"},{default:n(()=>[u.showTableSearch?(d(),w(g,{key:0,xs:24,sm:24,md:12,lg:6,xl:6},{default:n(()=>[a(k,{value:l.extraFilters.campaign_id,"onUpdate:value":s[1]||(s[1]=$=>l.extraFilters.campaign_id=$),placeholder:e.$t("common.select_default_text",[e.$t("lead.campaign")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:l.setUrlData},{default:n(()=>[(d(!0),E(R,null,X(l.allCampaigns,$=>(d(),w(y,{key:$.xid,title:$.name,value:$.xid},{default:n(()=>[p(r($.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1})):A("",!0),u.showUserFilter||l.permsArray.includes("leads_view_all")||l.permsArray.includes("admin")?(d(),w(g,{key:1,xs:24,sm:24,md:12,lg:6,xl:6},{default:n(()=>[a(k,{value:l.filters.user_id,"onUpdate:value":s[2]||(s[2]=$=>l.filters.user_id=$),placeholder:e.$t("common.select_default_text",[e.$t("user.user")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:l.setUrlData},{default:n(()=>[(d(!0),E(R,null,X(l.allUsers,$=>(d(),w(y,{key:$.xid,title:$.name,value:$.xid},{default:n(()=>[p(r($.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1})):A("",!0),u.showDateFilter||l.permsArray.includes("leads_view_all")||l.permsArray.includes("admin")?(d(),w(g,{key:2,xs:24,sm:24,md:8,lg:8,xl:8},{default:n(()=>[a(v,{onDateTimeChanged:s[3]||(s[3]=$=>{l.extraFilters.dates=$,l.setUrlData()})})]),_:1})):A("",!0)]),_:1})):A("",!0),a(f,{class:"mt-20"},{default:n(()=>[a(g,{span:24},{default:n(()=>[l.columns&&l.columns.length>0?(d(),E("div",Kr,[a(S,{columns:l.columns,"row-key":$=>$.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,scroll:u.scrollStyle},{bodyCell:n(({column:$,record:O})=>[(d(!0),E(R,null,X(l.allFormFieldNames,T=>(d(),E(R,{key:T.xid},[$.dataIndex===l.convertStringToKey(T.field_name)?(d(),E(R,{key:0},[p(r(l.findFieldValue(T.similar_field_names,O.lead.lead_data)),1)],64)):A("",!0)],64))),128)),$.dataIndex==="time_taken"?(d(),E(R,{key:0},[p(r(l.formatTimeDuration(O.time_taken)),1)],64)):A("",!0),$.dataIndex==="date_time"?(d(),E(R,{key:1},[p(r(l.formatDateTime(O.date_time)),1)],64)):A("",!0),$.dataIndex==="reference_number"?(d(),E(R,{key:2},[u.showLeadDetails?(d(),w(C,{key:0,type:"link",class:"p-0",onClick:T=>e.showViewDrawer(O.lead)},{default:n(()=>[p(r(O.lead.reference_number!=""&&O.lead.reference_number!=null?O.lead.reference_number:"---"),1)]),_:2},1032,["onClick"])):(d(),E("span",zr,r(O.lead.reference_number),1))],64)):A("",!0),$.dataIndex==="campaign"?(d(),E(R,{key:3},[p(r(O.lead&&O.lead.campaign&&O.lead.campaign.name?O.lead.campaign.name:"-"),1)],64)):A("",!0),$.dataIndex==="actioner"?(d(),E(R,{key:4},[p(r(O.user&&O.user.name?O.user.name:"-"),1)],64)):A("",!0),$.dataIndex=="action"?oe(e.$slots,"action",{key:5,record:O}):A("",!0)]),_:3},8,["columns","row-key","data-source","pagination","loading","onChange","scroll"])])):A("",!0)]),_:3})]),_:3}),a(U,{visible:e.isViewDrawerVisible,lead:e.viewDrawerData,onClose:e.hideViewDrawer},null,8,["visible","lead","onClose"])],64)}const La=z(Br,[["render",Vr]]);const Hr={props:{leadId:{default:void 0},refresh:{default:void 0}},emits:["dataFetched"],components:{FileTextOutlined:fa,PhoneOutlined:Pa,ShoppingCartOutlined:ga,ScheduleOutlined:pa,MailOutlined:ha},setup(e,{emit:s}){const{formatDateTime:u}=Z(),l=`lead-logs?fields=id,xid,log_type,time_taken,date_time,user_id,x_user_id,user{id,xid,name},created_by_id,x_created_by_id,creator{id,xid,name},lead_id,x_lead_id,lead{id,xid,reference_number,lead_data,campaign_id,x_campaign_id},lead:campaign{id,xid,name}&log_type=all&page_name=lead_action&lead_id=${e.leadId}&order=id desc`,h=I([]),b=I(1),m=I(0),i=I(10);ee(()=>{c(1)});const c=_=>{const g=(_-1)*i.value;var f=`${l}&offset=${g}&limit=${i.value}`;axiosAdmin.get(f).then(y=>{h.value=y.data,m.value=y.meta.paging.total,s("dataFetched")})};return we(b,(_,g)=>{c(_)}),we(()=>e.refresh,(_,g)=>{_==!0&&c(1)}),{allLeadLogs:h,formatDateTime:u,totalRecords:m,currentPage:b,perPageRecords:i}}},jr={class:"right-timeline-div"},Nr={key:0},Wr={key:1},Gr={key:2},Yr={key:3},Xr={key:4},Jr={style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",zIndex:1,textAlign:"center"}};function Qr(e,s,u,l,h,b){const m=o("PhoneOutlined"),i=o("MailOutlined"),c=o("FileTextOutlined"),_=o("ScheduleOutlined"),g=o("ShoppingCartOutlined"),f=o("a-timeline-item"),y=o("a-timeline"),k=o("perfect-scrollbar"),v=o("a-pagination");return d(),E(R,null,[P("div",jr,[a(k,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:n(()=>[a(y,null,{default:n(()=>[(d(!0),E(R,null,X(l.allLeadLogs,C=>(d(),w(f,{key:C.xid},{dot:n(()=>[C.log_type=="call_log"?(d(),w(m,{key:0})):A("",!0),C.log_type=="email"?(d(),w(i,{key:1})):C.log_type=="notes"?(d(),w(c,{key:2})):C.log_type=="lead_follow_up"?(d(),w(_,{key:3})):C.log_type=="salesman_bookings"?(d(),w(g,{key:4})):A("",!0)]),default:n(()=>[C.log_type=="call_log"?(d(),E("span",Nr,r(e.$t("lead.call_log_timeline_message",[C.user.name,l.formatDateTime(C.date_time)])),1)):C.log_type=="email"?(d(),E("span",Wr,r(e.$t("lead.email_timeline_message",[C.user.name,l.formatDateTime(C.date_time)])),1)):C.log_type=="notes"?(d(),E("span",Gr,r(e.$t("lead.notes_timeline_message",[C.user.name,l.formatDateTime(C.date_time)])),1)):C.log_type=="lead_follow_up"?(d(),E("span",Yr,r(e.$t("lead_follow_up.follow_up_timeline_message",[C.creator.name,C.user.name,l.formatDateTime(C.date_time)])),1)):C.log_type=="salesman_bookings"?(d(),E("span",Xr,r(e.$t("salesman_booking.salesman_bookings_timeline_message",[C.creator.name,C.user.name,l.formatDateTime(C.date_time)])),1)):A("",!0)]),_:2},1024))),128))]),_:1})]),_:1})]),P("div",Jr,[a(v,{current:l.currentPage,"onUpdate:current":s[0]||(s[0]=C=>l.currentPage=C),simple:"",total:l.totalRecords},null,8,["current","total"])])],64)}const Zr=z(Hr,[["render",Qr]]),xr=e=>{const{convertStringToKey:s,getCampaignUrl:u,user:l}=Z(),h="lead{id,xid,reference_number,lead_data,started,campaign_id,x_campaign_id,time_taken,first_action_by,x_first_action_by,last_action_by,x_last_action_by},lead:campaign{id,xid,name,status},lead:firstActioner{id,xid,name},lead:lastActioner{id,xid,name}",b="form-field-names/all",m=`lead-logs?fields=id,xid,log_type,time_taken,date_time,user_id,x_user_id,notes,user{id,xid,name,profile_image,profile_image_url},lead_id,x_lead_id,${h}`,i=I([]),c="lead-logs",_=["lead_id","campaign_id","user_id"],{t:g}=Q(),f={notes:"",log_type:"notes"},y=I([]),k=I([]),v=I([]);return{url:m,addEditUrl:c,initData:f,columns:y,filterableColumns:[],hashableColumns:_,allFormFieldNames:i,allCampaigns:k,allUsers:v,getPrefetchData:()=>{const U=u(),$=axiosAdmin.get(U),O=axiosAdmin.get(b),T=axiosAdmin.get(`all-users?log_type=${e.logType}`);return Promise.all([O,$,T]).then(([D,L,q])=>{i.value=D.data.data,k.value=L.data,v.value=q.data.users;var K=[];if(e.showLeadDetails){var K=[{title:g("lead.reference_number"),dataIndex:"reference_number"},{title:g("lead.campaign"),dataIndex:"campaign"}];e.showFormFields&&ce(D.data.data,F=>{K.push({title:F.field_name,dataIndex:s(F.field_name)})})}K.push({title:g("common.notes"),dataIndex:"notes",width:e.showLeadDetails&&e.showFormFields?"40%":"80%"}),e.showActionButton&&K.push({title:g("common.action"),dataIndex:"action"}),y.value=K})}}},eu=x({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ae,LoadingOutlined:De,SaveOutlined:_e},setup(e,{emit:s}){const{addEditRequestAdmin:u,loading:l,rules:h}=se();return{loading:l,rules:h,onClose:()=>{h.value={},s("closed")},onSubmit:()=>{u({url:e.url,data:e.formData,successMessage:e.successMessage,success:i=>{s("addEditSuccess",i.xid)}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function au(e,s,u,l,h,b){const m=o("a-textarea"),i=o("a-form-item"),c=o("a-col"),_=o("a-row"),g=o("a-form"),f=o("SaveOutlined"),y=o("a-button"),k=o("a-modal");return d(),w(k,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:n(()=>[a(y,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:n(()=>[a(f)]),default:n(()=>[p(" "+r(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),a(y,{key:"back",onClick:e.onClose},{default:n(()=>[p(r(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[a(g,{layout:"vertical"},{default:n(()=>[a(_,{gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("common.notes"),name:"notes",help:e.rules.notes?e.rules.notes.message:null,validateStatus:e.rules.notes?"error":null,class:"required"},{default:n(()=>[a(m,{value:e.formData.notes,"onUpdate:value":s[0]||(s[0]=v=>e.formData.notes=v),placeholder:e.$t("common.placeholder_default_text",[e.$t("common.notes")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const tu=z(eu,[["render",au]]),nu={props:{pageName:{default:"index"},leadId:{default:void 0},logType:{default:"notes"},scrollStyle:{default:{}},showCampaignStatus:{default:!1},showTableSearch:{default:!1},showUserFilter:{default:!1},showDateFilter:{default:!0},showAddButton:{default:!1},showActionButton:{default:!0},showFormFields:{default:!1},showLeadDetails:{default:!1}},emits:["success"],components:{PlusOutlined:ae,EditOutlined:ke,DeleteOutlined:pe,PlayCircleOutlined:Me,StopOutlined:da,AddEdit:tu,DateRangePicker:ua},setup(e,{emit:s}){const{permsArray:u,appSetting:l,user:h,formatDateTime:b,convertStringToKey:m,getCampaignUrl:i}=Z(),{url:c,addEditUrl:_,initData:g,columns:f,filterableColumns:y,allFormFieldNames:k,hashableColumns:v,allCampaigns:C,allUsers:S,getPrefetchData:U}=xr(e),$=Te(),O=Ve(),T=I({page_name:e.pageName,log_type:e.logType,campaign_id:void 0,campaign_status:"active",lead_id:e.leadId,dates:[]}),D=I({log_type:e.logType,user_id:void 0});ee(()=>{U().then(F=>{e.logType!="salesman_bookings"&&e.pageName!="lead_action"&&(D.value={...D.value,user_id:h.value.xid}),$.crudUrl.value=_,$.langKey.value="notes",$.initData.value={...g,lead_id:e.leadId},$.formData.value={...g,lead_id:e.leadId},$.hashableColumns.value=[...v],$.hashable.value=[...v],L()})});const L=()=>{$.hashableColumns.value=[...v],$.tableUrl.value={url:c,filters:D,extraFilters:T},$.table.filterableColumns=y,$.table.pagination={...$.table.pagination,current:1},$.fetch({page:1})};return{permsArray:u,appSetting:l,columns:f,...$,...O,filterableColumns:y,user:h,formatDateTime:b,allFormFieldNames:k,findFieldValue:(F,M)=>{var B="-";return ce(M,J=>{F.includes(J.field_name)&&(B=J.field_value)}),B},convertStringToKey:m,onAddEditSuccess:F=>{$.addEditSuccess(F),s("success")},allCampaigns:C,allUsers:S,filters:D,extraFilters:T,setUrlData:L,campaignTypeChanged:F=>{T.value={...T.value,campaign_id:void 0};const M=i(T.value.campaign_status),B=axiosAdmin.get(M);Promise.all([B]).then(([J])=>{C.value=J.data,L()})}}}},lu={class:"table-responsive lead-notes-table"},ou={key:1},su={style:{"text-align":"justify"}};function du(e,s,u,l,h,b){const m=o("AddEdit"),i=o("PlayCircleOutlined"),c=o("a-tab-pane"),_=o("StopOutlined"),g=o("a-tabs"),f=o("a-col"),y=o("a-row"),k=o("PlusOutlined"),v=o("a-button"),C=o("a-select-option"),S=o("a-select"),U=o("DateRangePicker"),$=o("a-avatar"),O=o("a-typography-paragraph"),T=o("a-comment"),D=o("EditOutlined"),L=o("DeleteOutlined"),q=o("a-space"),K=o("a-table"),j=o("view-lead-details");return d(),E(R,null,[a(m,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:l.onAddEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),u.showCampaignStatus?(d(),w(y,{key:0},{default:n(()=>[a(f,{span:24},{default:n(()=>[a(g,{activeKey:l.extraFilters.campaign_status,"onUpdate:activeKey":s[0]||(s[0]=F=>l.extraFilters.campaign_status=F),onChange:l.campaignTypeChanged},{default:n(()=>[a(c,{key:"active"},{tab:n(()=>[P("span",null,[a(i),p(" "+r(e.$t("campaign.active_campaign")),1)])]),_:1}),l.permsArray.includes("view_completed_campaigns")||l.permsArray.includes("admin")?(d(),w(c,{key:"completed"},{tab:n(()=>[P("span",null,[a(_),p(" "+r(e.$t("campaign.completed_campaign")),1)])]),_:1})):A("",!0)]),_:1},8,["activeKey","onChange"])]),_:1})]),_:1})):A("",!0),u.showAddButton||u.showTableSearch||u.showDateFilter||u.showUserFilter||l.permsArray.includes("leads_view_all")||l.permsArray.includes("admin")?(d(),w(y,{key:1,gutter:[15,15],class:"mb-20"},{default:n(()=>[u.showAddButton?(d(),w(f,{key:0,xs:24,sm:24,md:12,lg:6,xl:6},{default:n(()=>[a(v,{type:"primary",onClick:e.addItem,block:""},{default:n(()=>[a(k),p(" "+r(e.$t("notes.add")),1)]),_:1},8,["onClick"])]),_:1})):A("",!0),u.showTableSearch?(d(),w(f,{key:1,xs:24,sm:24,md:12,lg:6,xl:6},{default:n(()=>[a(S,{value:l.extraFilters.campaign_id,"onUpdate:value":s[1]||(s[1]=F=>l.extraFilters.campaign_id=F),placeholder:e.$t("common.select_default_text",[e.$t("lead.campaign")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:l.setUrlData},{default:n(()=>[(d(!0),E(R,null,X(l.allCampaigns,F=>(d(),w(C,{key:F.xid,title:F.name,value:F.xid},{default:n(()=>[p(r(F.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1})):A("",!0),u.showUserFilter||l.permsArray.includes("leads_view_all")||l.permsArray.includes("admin")?(d(),w(f,{key:2,xs:24,sm:24,md:12,lg:6,xl:6},{default:n(()=>[a(S,{value:l.filters.user_id,"onUpdate:value":s[2]||(s[2]=F=>l.filters.user_id=F),placeholder:e.$t("common.select_default_text",[e.$t("user.user")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:l.setUrlData},{default:n(()=>[(d(!0),E(R,null,X(l.allUsers,F=>(d(),w(C,{key:F.xid,title:F.name,value:F.xid},{default:n(()=>[p(r(F.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1})):A("",!0),u.showDateFilter||l.permsArray.includes("leads_view_all")||l.permsArray.includes("admin")?(d(),w(f,{key:3,xs:24,sm:24,md:8,lg:8,xl:8},{default:n(()=>[a(U,{onDateTimeChanged:s[3]||(s[3]=F=>{l.extraFilters.dates=F,l.setUrlData()})})]),_:1})):A("",!0)]),_:1})):A("",!0),a(y,{class:"mt-20"},{default:n(()=>[a(f,{span:24},{default:n(()=>[P("div",lu,[a(K,{columns:l.columns,"row-key":F=>F.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,scroll:u.scrollStyle},{bodyCell:n(({column:F,record:M})=>[F.dataIndex==="reference_number"?(d(),E(R,{key:0},[u.showLeadDetails?(d(),w(v,{key:0,type:"link",class:"p-0",onClick:B=>e.showViewDrawer(M.lead)},{default:n(()=>[p(r(M.lead&&M.lead.reference_number!=""&&M.lead.reference_number!=null?M.lead.reference_number:"---"),1)]),_:2},1032,["onClick"])):(d(),E("span",ou,r(M.lead.reference_number),1))],64)):A("",!0),F.dataIndex==="campaign"?(d(),E(R,{key:1},[p(r(M.lead&&M.lead.campaign&&M.lead.campaign.name?M.lead.campaign.name:"-"),1)],64)):A("",!0),(d(!0),E(R,null,X(l.allFormFieldNames,B=>(d(),E(R,{key:B.xid},[M&&M.lead&&M.lead.lead_data&&F.dataIndex===l.convertStringToKey(B.field_name)?(d(),E(R,{key:0},[p(r(l.findFieldValue(B.similar_field_names,M.lead.lead_data)),1)],64)):A("",!0)],64))),128)),F.dataIndex==="notes"?(d(),w(T,{key:2},{author:n(()=>[p(r(M.user.name),1)]),avatar:n(()=>[a($,{src:M.user.profile_image_url,alt:M.user.name},null,8,["src","alt"])]),content:n(()=>[P("p",su,[a(O,{ellipsis:{rows:2,expandable:!0,symbol:e.$t("common.more")},content:M.notes},null,8,["ellipsis","content"])])]),datetime:n(()=>[p(r(l.formatDateTime(M.date_time)),1)]),_:2},1024)):A("",!0),F.dataIndex==="action"?(d(),E(R,{key:3},[l.permsArray.includes("admin")||M.x_user_id==l.user.xid?(d(),w(q,{key:0},{default:n(()=>[a(v,{type:"primary",onClick:B=>e.editItem(M)},{icon:n(()=>[a(D)]),_:2},1032,["onClick"]),a(v,{type:"primary",onClick:B=>e.showDeleteConfirm(M.xid)},{icon:n(()=>[a(L)]),_:2},1032,["onClick"])]),_:2},1024)):A("",!0)],64)):A("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange","scroll"])])]),_:1})]),_:1}),a(j,{visible:e.isViewDrawerVisible,lead:e.viewDrawerData,onClose:e.hideViewDrawer},null,8,["visible","lead","onClose"])],64)}const qa=z(nu,[["render",du]]),iu={props:["visible","leadId"],emits:["close","onSkipDelete","onSkip"],components:{InfoCircleOutlined:Ge,DeleteOutlined:pe,LogoutOutlined:Bn,CloseOutlined:Kn},setup(e,{emit:s}){const{addEditRequestAdmin:u,loading:l,rules:h}=se();return{loading:l,closeModal:()=>{s("close")},skipAndDelete:()=>{u({url:"campaigns/skip-delete-lead",data:{lead_id:e.leadId},success:c=>{s("onSkipDelete",c.lead),Se.success({message:t("common.success"),description:t("lead.skip_delete_success_message"),placement:"bottomRight"})}})},onSkip:()=>{s("onSkip")}}}},ru={style:{color:"#7676e3"}};function uu(e,s,u,l,h,b){const m=o("InfoCircleOutlined"),i=o("LogoutOutlined"),c=o("a-button"),_=o("a-popconfirm"),g=o("a-col"),f=o("DeleteOutlined"),y=o("a-row"),k=o("CloseOutlined"),v=o("a-result"),C=o("a-modal");return d(),w(C,{open:u.visible,maskClosable:!1,closable:!1,footer:null,centered:""},{default:n(()=>[a(v,null,{title:n(()=>[P("span",ru,r(e.$t("lead.skip_or_delete")),1)]),subTitle:n(()=>[p(r(e.$t("lead.skip_delete_message")),1)]),icon:n(()=>[a(m)]),extra:n(()=>[a(y,{gutter:[10,10]},{default:n(()=>[a(g,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(_,{title:e.$t("lead.come_back_confirm_message"),okText:e.$t("common.yes"),cancelText:e.$t("common.no"),onConfirm:l.onSkip},{default:n(()=>[a(c,{type:"primary",style:{backgroundColor:"#52c41a",border:"#52c41a"},block:""},{default:n(()=>[a(i),p(" "+r(e.$t("lead.combe_back_later")),1)]),_:1})]),_:1},8,["title","okText","cancelText","onConfirm"])]),_:1}),a(g,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(_,{title:e.$t("lead.skip_delete_message"),okText:e.$t("common.yes"),cancelText:e.$t("common.no"),onConfirm:l.skipAndDelete},{default:n(()=>[a(c,{type:"primary",style:{backgroundColor:"#ff4d4f",border:"#ff4d4f"},loading:l.loading,block:""},{icon:n(()=>[a(f)]),default:n(()=>[p(" "+r(e.$t("lead.skip_and_delete")),1)]),_:1},8,["loading"])]),_:1},8,["title","okText","cancelText","onConfirm"])]),_:1})]),_:1}),a(y,{class:"mt-10"},{default:n(()=>[a(g,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(c,{onClick:l.closeModal,type:"primary",style:{backgroundColor:"#faad14",border:"#faad14"},block:""},{default:n(()=>[a(k),p(" "+r(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}const mu=z(iu,[["render",uu]]),cu=x({props:{lead:{default:{}},leadFormData:{default:{}},email:{default:null}},emits:["success"],components:{SendOutlined:Tt,MailOutlined:ha,EmailTemplateAddButton:ln,QuillEditor:$t},setup(e,{emit:s}){const{t:u}=Q(),{addEditRequestAdmin:l,loading:h,rules:b}=se(),m=I(!1),i=I({lead_id:e.lead.xid,email_template_id:void 0,email:e.email,subject:"",message:""}),c="email-templates/all",_=I([]),g=I(null);ee(()=>{const O=axiosAdmin.get(c);Promise.all([O]).then(([T])=>{_.value=T.data.email_templates,k(),v()})});const f=ve(()=>g.value.getQuill()),y=O=>{const T=f.value.getSelection(!0);var D=Ke(e.leadFormData.lead_data,["field_name",O]);if(D!=null&&D.field_value!=null&&D.field_value!="")var L=T.length>0?`${D.field_value}`:`${D.field_value}`;else var L=T.length>0?`##${insertedTextField}##`:`##${insertedTextField}##`;f.value.deleteText(T.index,T.length),f.value.insertText(T.index,L)},k=()=>{e.lead&&e.lead.campaign&&e.lead.campaign.email_template&&e.lead.campaign.email_template.xid&&(i.value={...i.value,email_template_id:e.lead.campaign.email_template.xid})},v=()=>{const O=Ke(_.value,["xid",i.value.email_template_id]);if(O&&O.body){var T=O.body;ce(e.leadFormData.lead_data,(D,L)=>{D.field_value!=null&&D.field_value!=""&&(T=Et(T,`##${D.field_name}##`,D.field_value))}),i.value={...i.value,message:T,subject:O.subject},g.value!=null&&g.value.setHTML(T)}};return{loading:h,visible:m,rules:b,formData:i,sendEmail:()=>{i.value={...i.value,email:e.email},v(),m.value=!0},onSubmit:()=>{l({url:"leads/send-email",data:i.value,success:O=>{O&&O.success?(m.value=!1,Se.success({message:u("common.success"),description:u("email_template.mail_send_successfully"),placement:"bottomRight"}),s("success")):Se.error({message:u("common.error"),description:u("email_template.mail_send_error_message"),placement:"bottomRight"})}})},hideModal:()=>{m.value=!1,h.value=!1,b.value={},k()},textEditor:g,allEmailTemplates:_,emailTemplateAdded:()=>{axiosAdmin.get(c).then(O=>{_.value=O.data.email_templates})},emailTemplateChanged:v,insertFormText:y,drawerWidth:window.innerWidth<=991?"90%":"45%"}}}),pu={style:{display:"flex"}};function _u(e,s,u,l,h,b){const m=o("MailOutlined"),i=o("a-button"),c=o("a-tooltip"),_=o("a-select-option"),g=o("a-select"),f=o("EmailTemplateAddButton"),y=o("a-form-item"),k=o("a-col"),v=o("a-row"),C=o("a-input"),S=o("QuillEditor"),U=o("a-form"),$=o("SendOutlined"),O=o("a-space"),T=o("a-drawer");return d(),E(R,null,[a(c,{title:e.$t("lead.send_email")},{default:n(()=>[a(i,{type:"primary",onClick:e.sendEmail},{icon:n(()=>[a(m)]),_:1},8,["onClick"])]),_:1},8,["title"]),a(T,{title:e.$t("lead.send_email"),width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.hideModal},{footer:n(()=>[a(O,null,{default:n(()=>[a(i,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:n(()=>[a($)]),default:n(()=>[p(" "+r(e.$t("common.send")),1)]),_:1},8,["loading","onClick"]),a(i,{key:"back",onClick:e.hideModal},{default:n(()=>[p(r(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),default:n(()=>[a(U,{layout:"vertical"},{default:n(()=>[a(v,{gutter:16},{default:n(()=>[a(k,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(y,{label:e.$t("campaign.email_template"),name:"email_template_id",help:e.rules.email_template_id?e.rules.email_template_id.message:null,validateStatus:e.rules.email_template_id?"error":null,class:"required"},{default:n(()=>[P("span",pu,[a(g,{value:e.formData.email_template_id,"onUpdate:value":s[0]||(s[0]=D=>e.formData.email_template_id=D),placeholder:e.$t("common.select_default_text",[e.$t("campaign.email_template")]),onChange:e.emailTemplateChanged},{default:n(()=>[(d(!0),E(R,null,X(e.allEmailTemplates,D=>(d(),w(_,{key:D.xid,value:D.xid},{default:n(()=>[p(r(D.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder","onChange"]),a(f,{onOnAddSuccess:e.emailTemplateAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(v,{gutter:16},{default:n(()=>[a(k,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(y,{label:e.$t("common.email"),name:"email",help:e.rules.email?e.rules.email.message:null,validateStatus:e.rules.email?"error":null,class:"required"},{default:n(()=>[a(C,{value:e.formData.email,"onUpdate:value":s[1]||(s[1]=D=>e.formData.email=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("common.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(v,{gutter:16},{default:n(()=>[a(k,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(y,{label:e.$t("email_template.subject"),name:"subject",help:e.rules.subject?e.rules.subject.message:null,validateStatus:e.rules.subject?"error":null,class:"required"},{default:n(()=>[a(C,{value:e.formData.subject,"onUpdate:value":s[2]||(s[2]=D=>e.formData.subject=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("email_template.subject")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(v,{gutter:16},{default:n(()=>[a(k,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(y,{label:e.$t("email_template.message"),name:"message",help:e.rules.message?e.rules.message.message:null,validateStatus:e.rules.message?"error":null,class:"required"},{default:n(()=>[a(S,{ref:"textEditor",content:e.formData.message,"onUpdate:content":s[3]||(s[3]=D=>e.formData.message=D),contentType:"html",placeholder:e.$t("common.placeholder_default_text",[e.$t("email_template.message")]),style:{height:"200px"}},null,8,["content","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),e.lead&&e.lead.campaign&&e.lead.campaign.form&&e.lead.campaign.form.form_fields&&e.lead.campaign.form.form_fields.length>0?(d(),w(v,{key:0,gutter:16,class:"mb-20"},{default:n(()=>[(d(!0),E(R,null,X(e.lead.campaign.form.form_fields,D=>(d(),w(k,{xs:8,sm:8,md:6,lg:4,key:D.id},{default:n(()=>[a(i,{onClick:L=>e.insertFormText(D.name),type:"link",style:{padding:"0px"}},{default:n(()=>[p(r(D.name),1)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})):A("",!0)]),_:1})]),_:1},8,["title","width","open","onClose"])],64)}const fu=z(cu,[["render",_u]]);const gu={components:{SaveOutlined:_e,DoubleRightOutlined:sa,ArrowRightOutlined:zn,ArrowLeftOutlined:Vn,ScheduleOutlined:pa,FileTextOutlined:fa,PhoneOutlined:Pa,ShoppingCartOutlined:ga,ExclamationCircleOutlined:ue,CheckOutlined:ia,DeliveredProcedureOutlined:Hn,MailOutlined:ha,MobileOutlined:Ea,ClockCircleOutlined:Oa,SearchOutlined:Ot,BookingModal:Lr,LeadLogTable:La,LeadNotesTable:qa,LogTimeline:Zr,SkipLeadModal:mu,SendMail:fu},setup(){const{formatDateTime:e}=Z(),{addEditRequestAdmin:s,loading:u,rules:l}=se(),h=Ta(),b=Oe();he();const m=I({}),i=I({}),c=I("lead_details"),_=I("lead_details"),g=I({}),f=jn(0,!0),{t:y}=Q(),k=I(""),v=I({}),C=I({}),S=I(void 0),U=I(0),$=I(!0),O=I(!1),T=I(!1),D=I(!1),L=I(!1),q=I(!1);ee(()=>{K()});const K=()=>{const H=h.params.id,te=`leads/${H}?fields=id,xid,reference_number,lead_data,started,lead_status,time_taken,last_action_by,x_last_action_by,lastActioner{id,xid,name},campaign_id,x_campaign_id,campaign{id,xid,name,status,remaining_leads,total_leads,form_id,x_form_id,email_template_id,x_email_template_id,detail_fields,last_action_by,x_last_action_by,completed_by,x_completed_by,started_on,completed_on,upcoming_lead_action},campaign:campaignUsers{id,xid,user_id,x_user_id,campaign_id,x_campaign_id},campaign:campaignUsers:user{id,xid,name,profile_image,profile_image_url},campaign:emailTemplate{id,xid,name},campaign:form{id,xid,name,form_fields},campaign:lastActioner{id,xid,name},campaign:completedBy{id,xid,name},leadFollowUp{id,xid,log_type,user_id,x_user_id,date_time,notes},leadFollowUp:user{id,xid,name},salesmanBooking{id,xid,log_type,user_id,x_user_id,date_time,notes},salesmanBooking:user{id,xid,name}`;m.value={},i.value={},c.value="lead_details",_.value="lead_details",g.value={},v.value={},C.value={},k.value="",S.value=void 0,U.value=0,$.value=!0;const Ce=axiosAdmin.get(te),le=axiosAdmin.get(`leads/create-call-log/${H}`);Promise.all([Ce,le]).then(([be,$e])=>{var de=be.data;U.value=$e.data.lead_number,i.value=$e.data.call_log,m.value=de;var ne=[];de.lead_data&&de.lead_data.length>0&&ce(de.lead_data,ye=>{ne.push({id:ye.id,field_name:ye.field_name,field_value:ye.field_value})}),de.campaign&&de.campaign.form&&de.campaign.form.form_fields&&de.campaign.form.form_fields.length>0&&ce(de.campaign.form.form_fields,ye=>{var Pe=Ke(ne,{field_name:ye.name});Pe==null&&ne.push({id:Math.random().toString(36).slice(2),field_name:ye.name,field_value:""})}),g.value={campaign_id:de.x_campaign_id,lead_data:ne},k.value=de.reference_number,v.value=de.lead_follow_up?de.lead_follow_up:[],C.value=de.salesman_booking?de.salesman_booking:[],S.value=de.lead_status,f.reset(de.time_taken,!0),$.value=!1})},j=()=>{var H=f.minutes.value*60,N=f.hours.value*60*60,te=f.days.value*24*60*60;return f.seconds.value+H+N+te},F=()=>{L.value=!0,ge.confirm({title:y("common.are_you_sure")+"?",icon:a(ue),content:y("lead.are_you_want_go_to_save_exit"),centered:!0,okText:y("common.yes"),okType:"danger",cancelText:y("common.no"),onOk(){M("save_exit")},onCancel(){L.value=!1}})},M=(H="auto")=>{H=="save"?D.value=!0:H=="save_exit"&&(L.value=!0),s({url:"campaigns/update-actioned-lead",data:{...g.value,reference_number:k.value,lead_status:S.value,call_log_id:i.value.xid,call_time:j(),x_lead_id:h.params.id},success:N=>{T.value=!0,D.value=!1,H=="save_exit"&&(L.value=!1,b.push({name:"admin.call_manager.index"}))}})},B=H=>{var N="";H=="next"?N=y("lead.are_you_want_go_to_next_lead"):H=="previous"&&(N=y("lead.are_you_want_go_to_previous_lead")),ge.confirm({title:y("common.are_you_sure")+"?",icon:a(ue),content:N,centered:!0,okText:y("common.yes"),okType:"danger",cancelText:y("common.no"),onOk(){Y(H)},onCancel(){}})},J=()=>{q.value=!1,Y("skip-next")},Y=H=>{var N=H=="skip-next"?"next":H;s({url:"campaigns/take-lead-action",data:{...g.value,reference_number:k.value,call_log_id:i.value.xid,call_time:j(),action_type:N,x_lead_id:h.params.id},success:te=>{te&&te.lead&&te.lead.xid?(Se.success({message:y("common.success"),description:y(`lead.you_are_on_${N}_lead`),placement:"bottomRight"}),b.push({name:"admin.call_manager.take_action",params:{id:te.lead.xid}})):ge.confirm({title:y("lead.no_lead_exists")+"?",icon:a(ue),content:y("lead.no_lead_exist_message"),centered:!0,okText:y("campaign.save_exit"),okType:"danger",cancelText:y("common.continue"),onOk(){M("save_exit")},onCancel(){M("save")}})}})},V=H=>{q.value=!1,H&&H.xid?b.push({name:"admin.call_manager.take_action",params:{id:H.xid}}):b.push({name:"admin.call_manager.index"})},W=H=>{var N="text";if(m.value.campaign&&m.value.campaign.form&&m.value.campaign.form.form_fields&&m.value.campaign.form.form_fields.length>0){var te=Ke(m.value.campaign.form.form_fields,{name:H});te&&te.type&&(N=te.type)}return N},G=()=>{q.value=!0};return we(f.seconds,(H,N)=>{f.seconds.value%5==0&&M()}),we(h,(H,N)=>{H.params.id!=null&&K()}),we(T,(H,N)=>{H&&setTimeout(()=>T.value=!1,3e3)}),{activeLeftPanelKey:_,leadDetails:m,activeKey:c,leadFormData:g,referenceNumber:k,leadFollowUp:v,salesmanBooking:C,loading:u,rules:l,formatDateTime:e,timer:f,leadStatus:S,leadNumber:U,newPageLoad:$,takeLeadAction:B,refreshTimeLine:O,saveAndExit:F,saveLead:M,saveExitLoading:L,saveLoading:D,autoSaved:T,skipLead:G,showSkipModal:q,skipDeleteSuccess:V,skipSuccess:J,getLeadDataFieldType:W}}},hu={class:"callmanager-left-sidebar"},bu={key:1},yu={key:1},vu={style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",zIndex:1}};function ku(e,s,u,l,h,b){const m=o("ArrowLeftOutlined"),i=o("a-button"),c=o("ArrowRightOutlined"),_=o("a-page-header"),g=o("a-col"),f=o("router-link"),y=o("a-breadcrumb-item"),k=o("a-breadcrumb"),v=o("a-row"),C=o("a-card"),S=o("ClockCircleOutlined"),U=o("a-typography-title"),$=o("ScheduleOutlined"),O=o("BookingModal"),T=o("ShoppingCartOutlined"),D=o("a-space"),L=o("a-divider"),q=o("a-skeleton"),K=o("a-typography-text"),j=o("a-collapse-panel"),F=o("a-collapse"),M=o("perfect-scrollbar"),B=o("FileTextOutlined"),J=o("a-input"),Y=o("a-form-item"),V=o("a-select-option"),W=o("a-select"),G=o("SendMail"),H=o("MobileOutlined"),N=o("a-input-group"),te=o("a-form"),Ce=o("SaveOutlined"),le=o("DeliveredProcedureOutlined"),be=o("CheckOutlined"),$e=o("a-tab-pane"),de=o("PhoneOutlined"),ne=o("LeadLogTable"),ye=o("LeadNotesTable"),Pe=o("a-tabs"),bn=o("LogTimeline"),yn=o("SkipLeadModal");return d(),E(R,null,[a(C,{class:"page-content-sub-header breadcrumb-left-border",bodyStyle:{padding:"0px",margin:"0px 16px 0"}},{default:n(()=>[a(v,null,{default:n(()=>[a(g,{span:24},{default:n(()=>[a(_,{onBack:l.saveAndExit,class:"p-0"},{title:n(()=>[p(r(l.leadDetails&&l.leadDetails.campaign&&l.leadDetails.campaign.name?l.referenceNumber!=null&&l.referenceNumber!=""?`${l.leadDetails.campaign.name} (${l.referenceNumber})`:l.leadDetails.campaign.name:""),1)]),extra:n(()=>[a(i,{style:{background:"#faad14",borderColor:"#faad14"},type:"primary",onClick:s[0]||(s[0]=ie=>l.takeLeadAction("previous"))},{default:n(()=>[a(m),p(" "+r(e.$t("campaign.previous_lead")),1)]),_:1}),a(i,{style:{background:"#52c41a",borderColor:"#52c41a"},type:"primary",onClick:s[1]||(s[1]=ie=>l.takeLeadAction("next"))},{default:n(()=>[p(r(e.$t("campaign.next_lead"))+" ",1),a(c)]),_:1})]),_:1},8,["onBack"])]),_:1}),a(g,{span:24},{default:n(()=>[a(k,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(y,null,{default:n(()=>[a(f,{to:{name:"admin.dashboard.index"}},{default:n(()=>[p(r(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(y,null,{default:n(()=>[a(f,{to:{name:"admin.call_manager.index"}},{default:n(()=>[p(r(e.$t("menu.call_manager")),1)]),_:1},8,["to"])]),_:1}),a(y,null,{default:n(()=>[p(r(l.leadDetails&&l.leadDetails.campaign&&l.leadDetails.campaign.name?l.leadDetails.campaign.name:""),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l.leadDetails&&l.leadDetails.xid?(d(),w(v,{key:0,gutter:16,class:"mt-5",style:{margin:"10px"}},{default:n(()=>[a(g,{xs:24,sm:24,md:24,lg:6,xl:6,class:"bg-setting-sidebar"},{default:n(()=>[P("div",hu,[a(C,{bordered:!1,bodyStyle:{paddingBottom:"0px"}},{default:n(()=>[a(v,null,{default:n(()=>[a(g,{span:24,class:"text-center"},{default:n(()=>[a(U,{level:2},{default:n(()=>[a(S),p(" "+r(l.timer.hours.value<10?`0${l.timer.hours.value}`:l.timer.hours)+":"+r(l.timer.minutes.value<10?`0${l.timer.minutes.value}`:l.timer.minutes)+":"+r(l.timer.seconds.value<10?`0${l.timer.seconds.value}`:l.timer.seconds),1)]),_:1})]),_:1})]),_:1}),a(v,{class:"mt-10"},{default:n(()=>[a(g,{span:24},{default:n(()=>[a(D,null,{default:n(()=>[l.leadDetails&&l.leadDetails.xid?(d(),w(O,{key:"lead_follow_up",leadId:l.leadDetails.xid,bookingType:"lead_follow_up",onSuccess:s[2]||(s[2]=ie=>{l.leadFollowUp=ie,l.refreshTimeLine=!0})},{default:n(()=>[a($),p(" "+r(e.$t("menu.lead_follow_up")),1)]),_:1},8,["leadId"])):A("",!0),l.leadDetails&&l.leadDetails.xid?(d(),w(O,{key:"salesman_bookings",leadId:l.leadDetails.xid,bookingType:"salesman_bookings",onSuccess:s[3]||(s[3]=ie=>{l.salesmanBooking=ie,l.refreshTimeLine=!0})},{default:n(()=>[a(T),p(" "+r(e.$t("menu.salesman_bookings")),1)]),_:1},8,["leadId"])):A("",!0)]),_:1})]),_:1})]),_:1}),a(L)]),_:1}),a(M,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:n(()=>[a(F,{activeKey:l.activeLeftPanelKey,"onUpdate:activeKey":s[4]||(s[4]=ie=>l.activeLeftPanelKey=ie),bordered:!1},{default:n(()=>[a(j,{key:"lead_details",style:{background:"white"}},{header:n(()=>[a(U,{level:5},{default:n(()=>[p(r(e.$t("lead.lead_details")),1)]),_:1})]),default:n(()=>[l.newPageLoad?(d(),w(q,{key:0,active:""})):(d(),E(R,{key:1},[a(v,null,{default:n(()=>[a(g,{span:24},{default:n(()=>[a(K,{strong:""},{default:n(()=>[p(r(e.$t("lead.lead_number")),1)]),_:1})]),_:1}),a(g,{span:24,class:"mt-5"},{default:n(()=>[a(K,null,{default:n(()=>[p(r(l.leadNumber)+" / "+r(l.leadDetails.campaign.total_leads),1)]),_:1})]),_:1})]),_:1}),a(v,{class:"mt-5"},{default:n(()=>[a(g,{span:24},{default:n(()=>[a(K,{strong:""},{default:n(()=>[p(r(e.$t("campaign.last_actioner")),1)]),_:1})]),_:1}),a(g,{span:24,class:"mt-5"},{default:n(()=>[a(K,null,{default:n(()=>[p(r(l.leadDetails.campaign.last_actioner&&l.leadDetails.campaign.last_actioner.name?l.leadDetails.campaign.last_actioner.name:"-"),1)]),_:1})]),_:1})]),_:1}),a(v,{class:"mt-5"},{default:n(()=>[a(g,{span:24},{default:n(()=>[a(K,{strong:""},{default:n(()=>[p(r(e.$t("lead_follow_up.follow_up")),1)]),_:1})]),_:1}),a(g,{span:24,class:"mt-5"},{default:n(()=>[l.leadFollowUp&&l.leadFollowUp.user&&l.leadFollowUp.user.name?(d(),w(K,{key:0},{default:n(()=>[p(r(l.leadFollowUp.user.name)+" on "+r(l.formatDateTime(l.leadFollowUp.date_time)),1)]),_:1})):(d(),E("span",bu,"-"))]),_:1})]),_:1}),a(v,{class:"mt-5"},{default:n(()=>[a(g,{span:24},{default:n(()=>[a(K,{strong:""},{default:n(()=>[p(r(e.$t("salesman_booking.salesman_booking")),1)]),_:1})]),_:1}),a(g,{span:24,class:"mt-5"},{default:n(()=>[l.salesmanBooking&&l.salesmanBooking.user&&l.salesmanBooking.user.name?(d(),w(K,{key:0},{default:n(()=>[p(r(l.salesmanBooking.user.name)+" on "+r(l.formatDateTime(l.salesmanBooking.date_time)),1)]),_:1})):(d(),E("span",yu,"-"))]),_:1})]),_:1})],64))]),_:1}),a(j,{key:"campaign_details",style:{background:"white"}},{header:n(()=>[a(U,{level:5},{default:n(()=>[p(r(e.$t("campaign.campaign_details")),1)]),_:1})]),default:n(()=>[(d(!0),E(R,null,X(l.leadDetails.campaign.detail_fields,(ie,wa)=>(d(),w(v,{key:ie.id,gutter:16,class:At({"mt-25":wa>0})},{default:n(()=>[a(g,{span:24},{default:n(()=>[a(K,{strong:""},{default:n(()=>[p(r(ie.field_name),1)]),_:2},1024)]),_:2},1024),a(g,{span:24,class:"mt-5"},{default:n(()=>[a(K,null,{default:n(()=>[p(r(ie.field_value),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1},8,["activeKey"])]),_:1})])]),_:1}),a(g,{xs:24,sm:24,md:24,lg:12,xl:12},{default:n(()=>[a(C,{class:"callmanager-middle-sidebar"},{default:n(()=>[a(Pe,{activeKey:l.activeKey,"onUpdate:activeKey":s[10]||(s[10]=ie=>l.activeKey=ie)},{default:n(()=>[a($e,{key:"lead_details"},{tab:n(()=>[P("span",null,[a(B),p(" "+r(e.$t("lead.lead_details")),1)])]),default:n(()=>[a(M,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:n(()=>[l.newPageLoad?(d(),w(q,{key:0,active:""})):(d(),w(te,{key:1,layout:"vertical",class:"mt-20"},{default:n(()=>[a(v,{gutter:16},{default:n(()=>[a(g,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(Y,{label:e.$t("lead.reference_number"),name:"reference_number",help:l.rules.reference_number?l.rules.reference_number.message:null,validateStatus:l.rules.reference_number?"error":null,class:"required"},{default:n(()=>[a(J,{value:l.referenceNumber,"onUpdate:value":s[5]||(s[5]=ie=>l.referenceNumber=ie),placeholder:e.$t("common.placeholder_default_text",[e.$t("lead.reference_number")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(g,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(Y,{label:e.$t("lead.lead_status"),name:"lead_status",help:l.rules.lead_status?l.rules.lead_status.message:null,validateStatus:l.rules.lead_status?"error":null},{default:n(()=>[a(W,{value:l.leadStatus,"onUpdate:value":s[6]||(s[6]=ie=>l.leadStatus=ie),placeholder:e.$t("common.select_default_text",[e.$t("lead.lead_status")])},{default:n(()=>[a(V,{key:"interested",value:"interested"},{default:n(()=>[p(r(e.$t("lead.interested")),1)]),_:1}),a(V,{key:"not_interested",value:"not_interested"},{default:n(()=>[p(r(e.$t("lead.not_interested")),1)]),_:1}),a(V,{key:"unreachable",value:"unreachable"},{default:n(()=>[p(r(e.$t("lead.unreachable")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(v,{gutter:16},{default:n(()=>[(d(!0),E(R,null,X(l.leadFormData.lead_data,ie=>(d(),w(g,{key:ie.id,xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(Y,{label:ie.field_name,name:ie.field_name,help:l.rules.name?l.rules.name.message:null,validateStatus:l.rules.name?"error":null},{default:n(()=>[a(N,{compact:""},{default:n(()=>[a(J,{value:ie.field_value,"onUpdate:value":wa=>ie.field_value=wa,placeholder:e.$t("common.placeholder_default_text",[ie.field_name]),style:ca({width:l.getLeadDataFieldType(ie.field_name)=="email"||l.getLeadDataFieldType(ie.field_name)=="phone"?"calc(100% - 32px)":"100%"})},null,8,["value","onUpdate:value","placeholder","style"]),l.getLeadDataFieldType(ie.field_name)=="email"?(d(),w(G,{key:0,email:ie.field_value,lead:l.leadDetails,leadFormData:l.leadFormData,onSuccess:s[7]||(s[7]=()=>l.refreshTimeLine=!0)},null,8,["email","lead","leadFormData"])):A("",!0),l.getLeadDataFieldType(ie.field_name)=="phone"?(d(),w(i,{key:1,href:ie.field_value?`tel:${ie.field_value}`:"javascript:void(0)",type:"primary"},{icon:n(()=>[a(H)]),_:2},1032,["href"])):A("",!0)]),_:2},1024)]),_:2},1032,["label","name","help","validateStatus"])]),_:2},1024))),128))]),_:1})]),_:1}))]),_:1}),P("div",vu,[a(v,{gutter:16},{default:n(()=>[a(g,{xs:24,sm:24,md:20,lg:20},{default:n(()=>[a(D,null,{default:n(()=>[a(i,{type:"primary",loading:l.saveLoading,onClick:s[8]||(s[8]=ie=>l.saveLead("save"))},{icon:n(()=>[a(Ce)]),default:n(()=>[p(" "+r(e.$t("common.save")),1)]),_:1},8,["loading"]),a(i,{type:"primary",loading:l.saveExitLoading,onClick:l.saveAndExit},{icon:n(()=>[a(le)]),default:n(()=>[p(" "+r(e.$t("campaign.save_exit")),1)]),_:1},8,["loading","onClick"])]),_:1})]),_:1}),a(g,{xs:24,sm:24,md:4,lg:4},{default:n(()=>[l.autoSaved?(d(),w(i,{key:0,type:"text",style:{background:"transparent",borderColor:"transparent"}},{default:n(()=>[a(K,{type:"secondary"},{default:n(()=>[a(be),p(" Auto Saved ")]),_:1})]),_:1})):A("",!0)]),_:1})]),_:1})])]),_:1}),a($e,{key:"call_logs"},{tab:n(()=>[P("span",null,[a(de),p(" "+r(e.$t("menu.call_logs")),1)])]),default:n(()=>[a(ne,{key:"lead_logs",pageName:"lead_action",logType:"call_log",leadId:l.leadDetails.xid,showTableSearch:!1,showLeadDetails:!1,showAction:!1,scrollStyle:{y:"calc(100vh - 320px)"}},null,8,["leadId","scrollStyle"])]),_:1}),a($e,{key:"lead_notes"},{tab:n(()=>[P("span",null,[a(B),p(" "+r(e.$t("common.notes")),1)])]),default:n(()=>[a(ye,{pageName:"lead_action",leadId:l.leadDetails.xid,scrollStyle:{y:"calc(100vh - 320px)"},onSuccess:s[9]||(s[9]=()=>l.refreshTimeLine=!0),showAddButton:!(l.leadDetails&&l.leadDetails.campaign&&l.leadDetails.campaign.status=="completed")},null,8,["leadId","scrollStyle","showAddButton"])]),_:1})]),_:1},8,["activeKey"])]),_:1})]),_:1}),a(g,{xs:24,sm:24,md:24,lg:6,xl:6,class:"bg-setting-sidebar"},{default:n(()=>[a(C,{bordered:!1,class:"callmanager-right-sidebar",bodyStyle:{padding:"15px"}},{title:n(()=>[a(U,{level:5,type:"success",strong:""},{default:n(()=>[p(r(e.$t("lead.lead_history")),1)]),_:1})]),default:n(()=>[l.newPageLoad?(d(),w(q,{key:0,active:""})):(d(),w(bn,{key:1,leadId:l.leadDetails.xid,refresh:l.refreshTimeLine,onDataFetched:s[11]||(s[11]=()=>l.refreshTimeLine=!1)},null,8,["leadId","refresh"]))]),_:1})]),_:1})]),_:1})):A("",!0),l.leadDetails&&l.leadDetails.xid?(d(),w(yn,{key:1,leadId:l.leadDetails.xid,visible:l.showSkipModal,onOnSkipDelete:l.skipDeleteSuccess,onOnSkip:l.skipSuccess,onClose:s[12]||(s[12]=()=>l.showSkipModal=!1)},null,8,["leadId","visible","onOnSkipDelete","onOnSkip"])):A("",!0)],64)}const wu=z(gu,[["render",ku],["__scopeId","data-v-03697440"]]),Cu=[{path:"/admin/call-manager/:id",component:wu,name:"admin.call_manager.take_action",meta:{requireAuth:!0,menuParent:"call_manager",menuKey:"call_manager"}},{path:"/",component:()=>Fe(()=>import("./Admin-bb3356a6.js"),["assets/Admin-bb3356a6.js","assets/vendor-a91b8582.js","assets/vendor-ad46f743.css","assets/Admin-14aea5fe.css"]),children:[{path:"/admin/call-manager",component:Er,name:"admin.call_manager.index",meta:{requireAuth:!0,menuParent:"call_manager",menuKey:"call_manager"}},{path:"/admin/campaigns",component:yr,name:"admin.campaigns.index",meta:{requireAuth:!0,menuParent:"campaigns",menuKey:"campaigns",permission:"campaigns_view"}}]}],un=()=>{const e="expense-categories",{t:s}=Q(),u={name:"",description:""},l=[{title:s("expense_category.name"),dataIndex:"name"},{title:s("expense_category.description"),dataIndex:"description"},{title:s("common.action"),dataIndex:"action"}],h=[{key:"name",value:s("common.name")}];return{addEditUrl:e,initData:u,columns:l,filterableColumns:h}},Su=x({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ae,LoadingOutlined:De,SaveOutlined:_e},setup(e,{emit:s}){const{addEditRequestAdmin:u,loading:l,rules:h}=se();return{loading:l,rules:h,onClose:()=>{h.value={},s("closed")},onSubmit:()=>{u({url:e.url,data:e.formData,successMessage:e.successMessage,success:i=>{s("addEditSuccess",i.xid)}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function $u(e,s,u,l,h,b){const m=o("a-input"),i=o("a-form-item"),c=o("a-col"),_=o("a-row"),g=o("a-textarea"),f=o("a-form"),y=o("SaveOutlined"),k=o("a-button"),v=o("a-modal");return d(),w(v,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:n(()=>[a(k,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:n(()=>[a(y)]),default:n(()=>[p(" "+r(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),a(k,{key:"back",onClick:e.onClose},{default:n(()=>[p(r(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[a(f,{layout:"vertical"},{default:n(()=>[a(_,{gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("expense_category.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:n(()=>[a(m,{value:e.formData.name,"onUpdate:value":s[0]||(s[0]=C=>e.formData.name=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("expense_category.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(_,{gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("expense_category.description"),name:"description",help:e.rules.description?e.rules.description.message:null,validateStatus:e.rules.description?"error":null},{default:n(()=>[a(g,{value:e.formData.description,"onUpdate:value":s[1]||(s[1]=C=>e.formData.description=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("expense_category.description")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const mn=z(Su,[["render",$u]]),Du={components:{PlusOutlined:ae,EditOutlined:ke,DeleteOutlined:pe,AddEdit:mn,AdminPageHeader:me},setup(){const{addEditUrl:e,initData:s,columns:u,filterableColumns:l}=un(),h=Te(),{permsArray:b}=Z();return ee(()=>{h.tableUrl.value={url:"expense-categories?fields=id,xid,name,description"},h.table.filterableColumns=l,h.fetch({page:1}),h.crudUrl.value=e,h.langKey.value="expense_category",h.initData.value={...s},h.formData.value={...s}}),{columns:u,...h,filterableColumns:l,permsArray:b}}},Au={class:"table-responsive"};function Tu(e,s,u,l,h,b){const m=o("a-page-header"),i=o("router-link"),c=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("PlusOutlined"),y=o("a-button"),k=o("DeleteOutlined"),v=o("a-space"),C=o("a-col"),S=o("a-select-option"),U=o("a-select"),$=o("a-input-search"),O=o("a-input-group"),T=o("a-row"),D=o("admin-page-filters"),L=o("AddEdit"),q=o("EditOutlined"),K=o("a-table"),j=o("admin-page-table-content");return d(),E(R,null,[a(g,null,{header:n(()=>[a(m,{title:e.$t("menu.expense_categories"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(c,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[p(r(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(c,null,{default:n(()=>[p(r(e.$t("menu.expense_manager")),1)]),_:1}),a(c,null,{default:n(()=>[p(r(e.$t("menu.expense_categories")),1)]),_:1})]),_:1})]),_:1}),a(D,null,{default:n(()=>[a(T,{gutter:[16,16]},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:n(()=>[a(v,null,{default:n(()=>[l.permsArray.includes("expense_categories_create")||l.permsArray.includes("admin")?(d(),w(y,{key:0,type:"primary",onClick:e.addItem},{default:n(()=>[a(f),p(" "+r(e.$t("expense_category.add")),1)]),_:1},8,["onClick"])):A("",!0),e.table.selectedRowKeys.length>0&&(l.permsArray.includes("expense_categories_delete")||l.permsArray.includes("admin"))?(d(),w(y,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:n(()=>[a(k)]),default:n(()=>[p(" "+r(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),a(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:n(()=>[a(T,{gutter:[16,16],justify:"end"},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:12,xl:8},{default:n(()=>[a(O,{compact:""},{default:n(()=>[a(U,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=F=>e.table.searchColumn=F),placeholder:e.$t("common.select_default_text",[""])},{default:n(()=>[(d(!0),E(R,null,X(l.filterableColumns,F=>(d(),w(S,{key:F.key},{default:n(()=>[p(r(F.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),a($,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=F=>e.table.searchString=F),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(j,null,{default:n(()=>[a(L,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),a(T,null,{default:n(()=>[a(C,{span:24},{default:n(()=>[P("div",Au,[a(K,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:F=>({disabled:!1,name:F.xid})},columns:l.columns,"row-key":F=>F.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:n(({column:F,record:M})=>[F.dataIndex==="action"?(d(),E(R,{key:0},[l.permsArray.includes("expense_categories_edit")||l.permsArray.includes("admin")?(d(),w(y,{key:0,type:"primary",onClick:B=>e.editItem(M),style:{"margin-left":"4px"}},{icon:n(()=>[a(q)]),_:2},1032,["onClick"])):A("",!0),l.permsArray.includes("expense_categories_delete")||l.permsArray.includes("admin")?(d(),w(y,{key:1,type:"primary",onClick:B=>e.showDeleteConfirm(M.xid),style:{"margin-left":"4px"}},{icon:n(()=>[a(k)]),_:2},1032,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const Eu=z(Du,[["render",Tu]]),Ou=x({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:ae,AddEdit:mn},setup(e,{emit:s}){const{permsArray:u}=Z(),{initData:l,addEditUrl:h}=un(),b=I(!1),m=I("add"),i=I({...l});return{permsArray:u,visible:b,addEditType:m,addEditUrl:h,formData:i,addEditSuccess:()=>{b.value=!1,i.value={...l},s("onAddSuccess")},onClose:()=>{b.value=!1},showAdd:()=>{b.value=!0}}}}),Uu={key:0};function Pu(e,s,u,l,h,b){const m=o("a-menu-item"),i=o("PlusOutlined"),c=o("a-button"),_=o("a-tooltip"),g=o("AddEdit");return e.permsArray.includes("expense_categories_create")||e.permsArray.includes("admin")?(d(),E("div",Uu,[e.customType=="menu"?(d(),w(m,{onClick:e.showAdd,key:"expense_categories"},{icon:n(()=>[oe(e.$slots,"icon")]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick"])):(d(),E(R,{key:1},[e.tooltip?(d(),w(_,{key:0,placement:"topLeft",title:e.$t("expense_category.add"),"arrow-point-at-center":""},{default:n(()=>[a(c,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:n(()=>[a(i)]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(d(),w(c,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:n(()=>[a(i)]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),a(g,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("expense_category.add"),successMessage:e.$t("expense_category.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):A("",!0)}const Iu=z(Ou,[["render",Pu]]);const Mu=x({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ae,LoadingOutlined:De,UserInfo:Xt,ExpenseCategoryAddButton:Iu,StaffAddButton:Qt,UploadFile:Yt},setup(e,{emit:s}){const{addEditRequestAdmin:u,loading:l,rules:h}=se(),b=I({}),m=I({}),{appSetting:i,disabledDate:c,permsArray:_}=Z(),g="expense-categories?limit=10000",f="users?limit=10000";ee(()=>{const S=axiosAdmin.get(g),U=axiosAdmin.get(f);Promise.all([S,U]).then(([$,O])=>{b.value=$.data,m.value=O.data})});const y=()=>{u({url:e.url,data:e.formData,successMessage:e.successMessage,success:S=>{s("addEditSuccess",S.xid)}})},k=()=>{h.value={},s("closed")},v=()=>{axiosAdmin.get(g).then(S=>{b.value=S.data})},C=()=>{axiosAdmin.get(f).then(S=>{m.value=S.data})};return{loading:l,rules:h,onClose:k,onSubmit:y,disabledDate:c,permsArray:_,expenseCategories:b,staffMembers:m,drawerWidth:window.innerWidth<=991?"90%":"45%",appSetting:i,expenseCategoryAdded:v,staffMemberAdded:C}}}),Fu={style:{display:"flex"}},Ru={style:{display:"flex"}};function Lu(e,s,u,l,h,b){const m=o("a-select-option"),i=o("a-select"),c=o("ExpenseCategoryAddButton"),_=o("a-form-item"),g=o("a-col"),f=o("StaffAddButton"),y=o("a-row"),k=o("a-date-picker"),v=o("a-input-number"),C=o("UploadFile"),S=o("a-textarea"),U=o("a-form"),$=o("a-button"),O=o("a-drawer");return d(),w(O,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:n(()=>[a($,{type:"primary",onClick:e.onSubmit,style:{"margin-right":"8px"},loading:e.loading},{default:n(()=>[p(r(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["onClick","loading"]),a($,{onClick:e.onClose},{default:n(()=>[p(r(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[a(U,{layout:"vertical"},{default:n(()=>[a(y,{gutter:16},{default:n(()=>[a(g,{xs:24,sm:24,md:e.permsArray.includes("admin")?12:24,lg:e.permsArray.includes("admin")?12:24},{default:n(()=>[a(_,{label:e.$t("expense.expense_category"),name:"expense_category_id",help:e.rules.expense_category_id?e.rules.expense_category_id.message:null,validateStatus:e.rules.expense_category_id?"error":null,class:"required"},{default:n(()=>[P("span",Fu,[a(i,{value:e.formData.expense_category_id,"onUpdate:value":s[0]||(s[0]=T=>e.formData.expense_category_id=T),placeholder:e.$t("common.select_default_text",[e.$t("expense.expense_category")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:n(()=>[(d(!0),E(R,null,X(e.expenseCategories,T=>(d(),w(m,{key:T.xid,value:T.xid,label:T.name},{default:n(()=>[p(r(T.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder"]),a(c,{onOnAddSuccess:e.expenseCategoryAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1},8,["md","lg"]),e.permsArray.includes("admin")?(d(),w(g,{key:0,xs:24,sm:24,md:e.permsArray.includes("admin")?12:24,lg:e.permsArray.includes("admin")?12:24},{default:n(()=>[a(_,{label:e.$t("expense.created_by_user"),name:"user_id",help:e.rules.user_id?e.rules.user_id.message:null,validateStatus:e.rules.user_id?"error":null},{default:n(()=>[P("span",Ru,[a(i,{value:e.formData.user_id,"onUpdate:value":s[1]||(s[1]=T=>e.formData.user_id=T),placeholder:e.$t("common.select_default_text",[e.$t("expense.user")]),allowClear:!0,"option-label-prop":"label",optionFilterProp:"label","show-search":""},{default:n(()=>[(d(!0),E(R,null,X(e.staffMembers,T=>(d(),w(m,{key:T.xid,value:T.xid,label:T.name},{default:n(()=>[p(r(T.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder"]),a(f,{onOnAddSuccess:e.staffMemberAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1},8,["md","lg"])):A("",!0)]),_:1}),a(y,{gutter:16},{default:n(()=>[a(g,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(_,{label:e.$t("expense.date"),name:"date",help:e.rules.date?e.rules.date.message:null,validateStatus:e.rules.date?"error":null,class:"required"},{default:n(()=>[a(k,{value:e.formData.date,"onUpdate:value":s[2]||(s[2]=T=>e.formData.date=T),format:e.appSetting.date_format,valueFormat:"YYYY-MM-DD","disabled-date":e.disabledDate,style:{width:"100%"}},null,8,["value","format","disabled-date"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(g,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(_,{label:e.$t("expense.amount"),name:"amount",help:e.rules.amount?e.rules.amount.message:null,validateStatus:e.rules.amount?"error":null,class:"required"},{default:n(()=>[a(v,{value:e.formData.amount,"onUpdate:value":s[3]||(s[3]=T=>e.formData.amount=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("expense.amount")]),min:"0",style:{width:"100%"}},{addonBefore:n(()=>[p(r(e.appSetting.currency.symbol),1)]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(y,{gutter:16},{default:n(()=>[a(g,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(_,{label:e.$t("expense.bill"),name:"bill",help:e.rules.bill?e.rules.bill.message:null,validateStatus:e.rules.bill?"error":null},{default:n(()=>[a(C,{acceptFormat:"image/*,.pdf",formData:e.formData,folder:"expenses",uploadField:"bill",onOnFileUploaded:s[4]||(s[4]=T=>{e.formData.bill=T.file,e.formData.bill_url=T.file_url})},null,8,["acceptFormat","formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(y,{gutter:16},{default:n(()=>[a(g,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(_,{label:e.$t("expense.notes"),name:"notes",help:e.rules.notes?e.rules.notes.message:null,validateStatus:e.rules.notes?"error":null},{default:n(()=>[a(S,{value:e.formData.notes,"onUpdate:value":s[5]||(s[5]=T=>e.formData.notes=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("expense.notes")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])}const qu=z(Mu,[["render",Lu]]),Bu=()=>{const{t:e}=Q(),s="expenses",u=I("expenses?fields=id,xid,bill,bill_url,expense_category_id,x_expense_category_id,expenseCategory{id,xid,name},amount,user_id,x_user_id,user{id,xid,name},notes,date"),l=["user_id","expense_category_id"],h=Ie({expenseCategories:[],staffMembers:[]}),b={expense_category_id:void 0,amount:"",bill:void 0,bill_url:void 0,date:void 0,user_id:void 0,notes:""},m=[{title:e("expense.expense_category"),dataIndex:"expense_category_id"},{title:e("expense.amount"),dataIndex:"amount"},{title:e("expense.date"),dataIndex:"date"},{title:e("expense.created_by_user"),dataIndex:"user_id"},{title:e("common.action"),dataIndex:"action"}],i=Ie({expense_category_id:void 0,user_id:void 0});return{url:u,addEditUrl:s,initData:b,columns:m,filters:i,hashableColumns:l,preFetchData:h,getPreFetchData:()=>{const _=axiosAdmin.get("expense-categories?limit=10000"),g=axiosAdmin.get("users?limit=10000");Promise.all([_,g]).then(([f,y])=>{h.expenseCategories=f.data,h.staffMembers=y.data})}}},Ku={components:{PlusOutlined:ae,EditOutlined:ke,DeleteOutlined:pe,AddEdit:qu,AdminPageHeader:me},setup(){const{url:e,addEditUrl:s,initData:u,columns:l,filters:h,preFetchData:b,getPreFetchData:m,hashableColumns:i,filterableColumns:c}=Bu(),_=Te(),{appSetting:g,permsArray:f,formatDate:y,formatAmountCurrency:k}=Z();ee(()=>{m(),_.crudUrl.value=s,_.langKey.value="expense",_.initData.value={...u},_.formData.value={...u},_.hashableColumns.value=[...i],v()});const v=()=>{_.tableUrl.value={url:e,filters:h},_.fetch({page:1})};return{columns:l,appSetting:g,formatDate:y,..._,filterableColumns:c,filters:h,preFetchData:b,reFetchDatatable:v,permsArray:f,formatAmountCurrency:k}}},zu={class:"table-responsive"};function Vu(e,s,u,l,h,b){const m=o("a-page-header"),i=o("router-link"),c=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("PlusOutlined"),y=o("a-button"),k=o("DeleteOutlined"),v=o("a-space"),C=o("a-col"),S=o("a-select-option"),U=o("a-select"),$=o("a-input-search"),O=o("a-input-group"),T=o("a-row"),D=o("admin-page-filters"),L=o("AddEdit"),q=o("EditOutlined"),K=o("a-table"),j=o("admin-page-table-content");return d(),E(R,null,[a(g,null,{header:n(()=>[a(m,{title:e.$t("menu.expenses"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(c,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[p(r(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(c,null,{default:n(()=>[p(r(e.$t("menu.expense_manager")),1)]),_:1}),a(c,null,{default:n(()=>[p(r(e.$t("menu.expenses")),1)]),_:1})]),_:1})]),_:1}),a(D,null,{default:n(()=>[a(T,{gutter:[16,16]},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:n(()=>[a(v,null,{default:n(()=>[l.permsArray.includes("expenses_create")||l.permsArray.includes("admin")?(d(),w(y,{key:0,type:"primary",onClick:e.addItem},{default:n(()=>[a(f),p(" "+r(e.$t("expense.add")),1)]),_:1},8,["onClick"])):A("",!0),e.table.selectedRowKeys.length>0&&(l.permsArray.includes("expenses_delete")||l.permsArray.includes("admin"))?(d(),w(y,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:n(()=>[a(k)]),default:n(()=>[p(" "+r(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),a(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:n(()=>[a(T,{gutter:[16,16],justify:"end"},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:12,xl:8},{default:n(()=>[a(U,{value:l.filters.expense_category_id,"onUpdate:value":s[0]||(s[0]=F=>l.filters.expense_category_id=F),"show-search":"",style:{width:"100%"},placeholder:e.$t("common.select_default_text",[e.$t("expense.expense_category")]),onChange:l.reFetchDatatable,allowClear:!0,optionFilterProp:"label"},{default:n(()=>[(d(!0),E(R,null,X(l.preFetchData.expenseCategories,F=>(d(),w(S,{key:F.xid,value:F.xid,label:F.name},{default:n(()=>[p(r(F.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1}),a(C,{xs:24,sm:24,md:12,lg:12,xl:8},{default:n(()=>[a(U,{value:l.filters.user_id,"onUpdate:value":s[1]||(s[1]=F=>l.filters.user_id=F),"show-search":"",style:{width:"100%"},placeholder:e.$t("common.select_default_text",[e.$t("expense.user")]),onChange:l.reFetchDatatable,allowClear:!0,optionFilterProp:"label"},{default:n(()=>[(d(!0),E(R,null,X(l.preFetchData.staffMembers,F=>(d(),w(S,{key:F.xid,value:F.xid,label:F.name},{default:n(()=>[p(r(F.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1}),a(C,{xs:24,sm:24,md:12,lg:12,xl:8},{default:n(()=>[a(O,{compact:""},{default:n(()=>[a(U,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[2]||(s[2]=F=>e.table.searchColumn=F),placeholder:e.$t("common.select_default_text",[""])},{default:n(()=>[(d(!0),E(R,null,X(l.filterableColumns,F=>(d(),w(S,{key:F.key},{default:n(()=>[p(r(F.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),a($,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[3]||(s[3]=F=>e.table.searchString=F),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(j,null,{default:n(()=>[a(L,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),a(T,null,{default:n(()=>[a(C,{span:24},{default:n(()=>[P("div",zu,[a(K,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:F=>({disabled:!1,name:F.xid})},columns:l.columns,"row-key":F=>F.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:n(({column:F,text:M,record:B})=>[F.dataIndex==="expense_category_id"?(d(),E(R,{key:0},[p(r(B.expense_category.name),1)],64)):A("",!0),F.dataIndex==="user_id"?(d(),E(R,{key:1},[p(r(B.user.name),1)],64)):A("",!0),F.dataIndex==="amount"?(d(),E(R,{key:2},[p(r(l.formatAmountCurrency(M)),1)],64)):A("",!0),F.dataIndex==="date"?(d(),E(R,{key:3},[p(r(l.formatDate(B.date)),1)],64)):A("",!0),F.dataIndex==="action"?(d(),E(R,{key:4},[l.permsArray.includes("expenses_edit")||l.permsArray.includes("admin")?(d(),w(y,{key:0,type:"primary",onClick:J=>e.editItem(B),style:{"margin-left":"4px"}},{icon:n(()=>[a(q)]),_:2},1032,["onClick"])):A("",!0),l.permsArray.includes("expenses_delete")||l.permsArray.includes("admin")?(d(),w(y,{key:1,type:"primary",onClick:J=>e.showDeleteConfirm(B.xid),style:{"margin-left":"4px"}},{icon:n(()=>[a(k)]),_:2},1032,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const Hu=z(Ku,[["render",Vu]]),ju=[{path:"/",component:()=>Fe(()=>import("./Admin-bb3356a6.js"),["assets/Admin-bb3356a6.js","assets/vendor-a91b8582.js","assets/vendor-ad46f743.css","assets/Admin-14aea5fe.css"]),children:[{path:"/admin/expense-categories",component:Eu,name:"admin.expense_categories.index",meta:{requireAuth:!0,menuParent:"expense_manager",menuKey:e=>"expense_categories",permission:"expense_categories_view"}},{path:"/admin/expenses",component:Hu,name:"admin.expenses.index",meta:{requireAuth:!0,menuParent:"expense_manager",menuKey:e=>"expenses",permission:"expenses_view"}}]}],Nu=()=>{const e="products?fields=id,xid,name,price,product_type,tax_rate,tax_label,logo,logo_url",s="products",{t:u}=Q(),l={name:"",price:"",product_type:"product",tax_rate:0,tax_label:"",logo:void 0,logo_url:void 0},h=[{title:u("product.logo"),dataIndex:"logo"},{title:u("product.product_type"),dataIndex:"product_type"},{title:u("product.name"),dataIndex:"name"},{title:u("product.price"),dataIndex:"price"},{title:u("product.tax_label"),dataIndex:"tax_label"},{title:u("product.tax_rate"),dataIndex:"tax_rate"},{title:u("common.action"),dataIndex:"action"}],b=[{key:"name",value:u("common.name")}];return{url:e,addEditUrl:s,initData:l,columns:h,filterableColumns:b}},Wu=x({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ae,LoadingOutlined:De,SaveOutlined:_e,Upload:Ye},setup(e,{emit:s}){const{appSetting:u}=Z(),{addEditRequestAdmin:l,loading:h,rules:b}=se();return{appSetting:u,loading:h,rules:b,onClose:()=>{b.value={},s("closed")},onSubmit:()=>{l({url:e.url,data:e.formData,successMessage:e.successMessage,success:c=>{s("addEditSuccess",c.xid)}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function Gu(e,s,u,l,h,b){const m=o("Upload"),i=o("a-form-item"),c=o("a-col"),_=o("a-select-option"),g=o("a-select"),f=o("a-row"),y=o("a-input"),k=o("a-input-number"),v=o("a-form"),C=o("SaveOutlined"),S=o("a-button"),U=o("a-space"),$=o("a-drawer");return d(),w($,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:n(()=>[a(U,null,{default:n(()=>[a(S,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:n(()=>[a(C)]),default:n(()=>[p(" "+r(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),a(S,{key:"back",onClick:e.onClose},{default:n(()=>[p(r(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),default:n(()=>[a(v,{layout:"vertical"},{default:n(()=>[a(f,{gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:6,lg:6},{default:n(()=>[a(i,{label:e.$t("product.logo"),name:"logo",help:e.rules.logo?e.rules.logo.message:null,validateStatus:e.rules.logo?"error":null},{default:n(()=>[a(m,{formData:e.formData,folder:"product",imageField:"logo",onOnFileUploaded:s[0]||(s[0]=O=>{e.formData.logo=O.file,e.formData.logo_url=O.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(c,{xs:24,sm:24,md:18,lg:18},{default:n(()=>[a(f,{gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("product.product_type"),name:"product_type",help:e.rules.product_type?e.rules.product_type.message:null,validateStatus:e.rules.product_type?"error":null,class:"required"},{default:n(()=>[a(g,{value:e.formData.product_type,"onUpdate:value":s[1]||(s[1]=O=>e.formData.product_type=O),placeholder:e.$t("common.select_default_text",[e.$t("product.product_type")]),allowClear:!0,"show-search":""},{default:n(()=>[a(_,{key:"products",value:"product"},{default:n(()=>[p(r(e.$t("common.product")),1)]),_:1}),a(_,{key:"service",value:"service"},{default:n(()=>[p(r(e.$t("common.service")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(f,{gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(i,{label:e.$t("product.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:n(()=>[a(y,{value:e.formData.name,"onUpdate:value":s[2]||(s[2]=O=>e.formData.name=O),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(c,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(i,{label:e.$t("product.price"),name:"price",help:e.rules.price?e.rules.price.message:null,validateStatus:e.rules.price?"error":null,class:"required"},{default:n(()=>[a(k,{value:e.formData.price,"onUpdate:value":s[3]||(s[3]=O=>e.formData.price=O),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.price")]),min:"0",style:{width:"100%"}},{addonBefore:n(()=>[p(r(e.appSetting.currency.symbol),1)]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1}),a(f,{gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(i,{label:e.$t("product.tax_label"),name:"tax_label",help:e.rules.tax_label?e.rules.tax_label.message:null,validateStatus:e.rules.tax_label?"error":null,class:"required"},{default:n(()=>[a(y,{value:e.formData.tax_label,"onUpdate:value":s[4]||(s[4]=O=>e.formData.tax_label=O),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.tax_label")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(c,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(i,{label:e.$t("product.tax_rate"),name:"tax_rate",help:e.rules.tax_rate?e.rules.tax_rate.message:null,validateStatus:e.rules.tax_rate?"error":null,class:"required"},{default:n(()=>[a(k,{value:e.formData.tax_rate,"onUpdate:value":s[5]||(s[5]=O=>e.formData.tax_rate=O),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.tax_rate")]),min:"0",style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])}const Yu=z(Wu,[["render",Gu]]),Xu={components:{PlusOutlined:ae,EditOutlined:ke,DeleteOutlined:pe,AddEdit:Yu,AdminPageHeader:me},setup(){const{permsArray:e,appSetting:s,formatAmountCurrency:u}=Z(),{url:l,addEditUrl:h,initData:b,columns:m,filterableColumns:i}=Nu(),c=Te();return ee(()=>{c.tableUrl.value={url:l},c.table.filterableColumns=i,c.fetch({page:1}),c.crudUrl.value=h,c.langKey.value="product",c.initData.value={...b},c.formData.value={...b}}),{permsArray:e,appSetting:s,formatAmountCurrency:u,columns:m,...c,filterableColumns:i}}},Ju={class:"table-responsive"};function Qu(e,s,u,l,h,b){const m=o("a-page-header"),i=o("router-link"),c=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("PlusOutlined"),y=o("a-button"),k=o("DeleteOutlined"),v=o("a-space"),C=o("a-col"),S=o("a-select-option"),U=o("a-select"),$=o("a-input-search"),O=o("a-input-group"),T=o("a-row"),D=o("admin-page-filters"),L=o("AddEdit"),q=o("a-image"),K=o("EditOutlined"),j=o("a-table"),F=o("admin-page-table-content");return d(),E(R,null,[a(g,null,{header:n(()=>[a(m,{title:e.$t("menu.products"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(c,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[p(r(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(c,null,{default:n(()=>[p(r(e.$t("menu.products")),1)]),_:1})]),_:1})]),_:1}),a(D,null,{default:n(()=>[a(T,{gutter:[16,16]},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:n(()=>[a(v,null,{default:n(()=>[l.permsArray.includes("products_create")||l.permsArray.includes("admin")?(d(),w(y,{key:0,type:"primary",onClick:e.addItem},{default:n(()=>[a(f),p(" "+r(e.$t("product.add")),1)]),_:1},8,["onClick"])):A("",!0),e.table.selectedRowKeys.length>0&&(l.permsArray.includes("products_delete")||l.permsArray.includes("admin"))?(d(),w(y,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:n(()=>[a(k)]),default:n(()=>[p(" "+r(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),a(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:n(()=>[a(T,{gutter:[16,16],justify:"end"},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:12,xl:8},{default:n(()=>[a(O,{compact:""},{default:n(()=>[a(U,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=M=>e.table.searchColumn=M),placeholder:e.$t("common.select_default_text",[""])},{default:n(()=>[(d(!0),E(R,null,X(l.filterableColumns,M=>(d(),w(S,{key:M.key},{default:n(()=>[p(r(M.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),a($,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=M=>e.table.searchString=M),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(F,null,{default:n(()=>[a(L,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),a(T,null,{default:n(()=>[a(C,{span:24},{default:n(()=>[P("div",Ju,[a(j,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:M=>({disabled:!1,name:M.xid})},columns:l.columns,"row-key":M=>M.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:n(({column:M,record:B})=>[M.dataIndex==="logo"?(d(),w(q,{key:0,width:32,src:B.logo_url},null,8,["src"])):A("",!0),M.dataIndex==="product_type"?(d(),E(R,{key:1},[p(r(B.product_type=="product"?e.$t("common.product"):e.$t("common.service")),1)],64)):A("",!0),M.dataIndex==="price"?(d(),E(R,{key:2},[p(r(l.formatAmountCurrency(B.price)),1)],64)):A("",!0),M.dataIndex==="action"?(d(),E(R,{key:3},[l.permsArray.includes("products_edit")||l.permsArray.includes("admin")?(d(),w(y,{key:0,type:"primary",onClick:J=>e.editItem(B),style:{"margin-left":"4px"}},{icon:n(()=>[a(K)]),_:2},1032,["onClick"])):A("",!0),(l.permsArray.includes("products_delete")||l.permsArray.includes("admin"))&&(!B.children||B.children.length==0)?(d(),w(y,{key:1,type:"primary",onClick:J=>e.showDeleteConfirm(B.xid),style:{"margin-left":"4px"}},{icon:n(()=>[a(k)]),_:2},1032,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const Zu=z(Xu,[["render",Qu]]),xu=[{path:"/",component:()=>Fe(()=>import("./Admin-bb3356a6.js"),["assets/Admin-bb3356a6.js","assets/vendor-a91b8582.js","assets/vendor-ad46f743.css","assets/Admin-14aea5fe.css"]),children:[{path:"/admin/product",component:Zu,name:"admin.products.index",meta:{requireAuth:!0,menuParent:"product",menuKey:e=>"products"}}]}],em=x({props:["xid","status"],emits:["success"],setup(e,{emit:s}){const{addEditRequestAdmin:u,loading:l}=se(),{t:h}=Q();return{changeStatus:m=>{const i={xid:e.xid,status:m?1:0};u({url:"email-templates/update-status",data:i,successMessage:h("email_template.status_update"),success:c=>{s("success")}})},loading:l}}});function am(e,s,u,l,h,b){const m=o("a-switch");return d(),w(m,{checked:e.status==1,size:"small",onClick:e.changeStatus,loading:e.loading},null,8,["checked","onClick","loading"])}const tm=z(em,[["render",am]]),nm={components:{PlusOutlined:ae,EditOutlined:ke,DeleteOutlined:pe,AddEdit:nn,AdminPageHeader:me,UpdateStatus:tm},setup(){const{permsArray:e,appSetting:s}=Z(),{url:u,addEditUrl:l,initData:h,columns:b,filterableColumns:m}=tn(),i=Te();return ee(()=>{i.tableUrl.value={url:u},i.table.filterableColumns=m,i.fetch({page:1}),i.crudUrl.value=l,i.langKey.value="email_template",i.initData.value={...h},i.formData.value={...h}}),{permsArray:e,appSetting:s,columns:b,...i,filterableColumns:m}}},lm={class:"table-responsive"};function om(e,s,u,l,h,b){const m=o("a-page-header"),i=o("router-link"),c=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("PlusOutlined"),y=o("a-button"),k=o("DeleteOutlined"),v=o("a-space"),C=o("a-col"),S=o("a-select-option"),U=o("a-select"),$=o("a-input-search"),O=o("a-input-group"),T=o("a-row"),D=o("admin-page-filters"),L=o("AddEdit"),q=o("UpdateStatus"),K=o("EditOutlined"),j=o("a-table"),F=o("admin-page-table-content");return d(),E(R,null,[a(g,null,{header:n(()=>[a(m,{title:e.$t("menu.email_templates"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(c,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[p(r(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(c,null,{default:n(()=>[p(r(e.$t("menu.email_templates")),1)]),_:1})]),_:1})]),_:1}),a(D,null,{default:n(()=>[a(T,{gutter:[16,16]},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:n(()=>[a(v,null,{default:n(()=>[l.permsArray.includes("email_templates_create")||l.permsArray.includes("admin")?(d(),w(y,{key:0,type:"primary",onClick:e.addItem},{default:n(()=>[a(f),p(" "+r(e.$t("email_template.add")),1)]),_:1},8,["onClick"])):A("",!0),e.table.selectedRowKeys.length>0&&(l.permsArray.includes("email_templates_delete")||l.permsArray.includes("admin"))?(d(),w(y,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:n(()=>[a(k)]),default:n(()=>[p(" "+r(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),a(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:n(()=>[a(T,{gutter:[16,16],justify:"end"},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:12,xl:12},{default:n(()=>[a(O,{compact:""},{default:n(()=>[a(U,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=M=>e.table.searchColumn=M),placeholder:e.$t("common.select_default_text",[""])},{default:n(()=>[(d(!0),E(R,null,X(l.filterableColumns,M=>(d(),w(S,{key:M.key},{default:n(()=>[p(r(M.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),a($,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=M=>e.table.searchString=M),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(F,null,{default:n(()=>[a(L,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),a(T,null,{default:n(()=>[a(C,{span:24},{default:n(()=>[P("div",lm,[a(j,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:M=>({disabled:!1,name:M.xid})},columns:l.columns,"row-key":M=>M.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:n(({column:M,record:B})=>[M.dataIndex==="status"?(d(),w(q,{key:0,status:B.status,xid:B.xid,onSuccess:e.fetch},null,8,["status","xid","onSuccess"])):A("",!0),M.dataIndex==="action"?(d(),E(R,{key:1},[l.permsArray.includes("email_templates_edit")||l.permsArray.includes("admin")?(d(),w(y,{key:0,type:"primary",onClick:J=>e.editItem(B),style:{"margin-left":"4px"}},{icon:n(()=>[a(K)]),_:2},1032,["onClick"])):A("",!0),(l.permsArray.includes("email_templates_delete")||l.permsArray.includes("admin"))&&(!B.children||B.children.length==0)?(d(),w(y,{key:1,type:"primary",onClick:J=>e.showDeleteConfirm(B.xid),style:{"margin-left":"4px"}},{icon:n(()=>[a(k)]),_:2},1032,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const sm=z(nm,[["render",om]]),dm=[{path:"/",component:()=>Fe(()=>import("./Admin-bb3356a6.js"),["assets/Admin-bb3356a6.js","assets/vendor-a91b8582.js","assets/vendor-ad46f743.css","assets/Admin-14aea5fe.css"]),children:[{path:"/admin/email-templates",component:sm,name:"admin.email_templates.index",meta:{requireAuth:!0,menuParent:"messaging",menuKey:"email_templates",permission:"email_templates_view"}}]}],im=x({props:["xid","status"],emits:["success"],setup(e,{emit:s}){const{addEditRequestAdmin:u,loading:l}=se(),{t:h}=Q();return{changeStatus:m=>{const i={xid:e.xid,status:m?1:0};u({url:"forms/update-status",data:i,successMessage:h("form.status_update"),success:c=>{s("success")}})},loading:l}}});function rm(e,s,u,l,h,b){const m=o("a-switch");return d(),w(m,{checked:e.status==1,size:"small",onClick:e.changeStatus,loading:e.loading},null,8,["checked","onClick","loading"])}const um=z(im,[["render",rm]]),mm={components:{PlusOutlined:ae,EditOutlined:ke,DeleteOutlined:pe,AddEdit:en,AdminPageHeader:me,UpdateStatus:um},setup(){const{permsArray:e,appSetting:s}=Z(),{url:u,addEditUrl:l,initData:h,columns:b,filterableColumns:m}=Zt(),i=Te();return ee(()=>{i.tableUrl.value={url:u},i.table.filterableColumns=m,i.fetch({page:1}),i.crudUrl.value=l,i.langKey.value="form",i.initData.value={...h},i.formData.value={...h}}),{permsArray:e,appSetting:s,columns:b,...i,filterableColumns:m}}},cm={class:"table-responsive"},pm={key:0};function _m(e,s,u,l,h,b){const m=o("a-page-header"),i=o("router-link"),c=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("PlusOutlined"),y=o("a-button"),k=o("DeleteOutlined"),v=o("a-space"),C=o("a-col"),S=o("a-select-option"),U=o("a-select"),$=o("a-input-search"),O=o("a-input-group"),T=o("a-row"),D=o("admin-page-filters"),L=o("AddEdit"),q=o("UpdateStatus"),K=o("EditOutlined"),j=o("a-table"),F=o("admin-page-table-content");return d(),E(R,null,[a(g,null,{header:n(()=>[a(m,{title:e.$t("menu.forms"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(c,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[p(r(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(c,null,{default:n(()=>[p(r(e.$t("menu.forms")),1)]),_:1})]),_:1})]),_:1}),a(D,null,{default:n(()=>[a(T,{gutter:[16,16]},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:n(()=>[a(v,null,{default:n(()=>[l.permsArray.includes("forms_create")||l.permsArray.includes("admin")?(d(),w(y,{key:0,type:"primary",onClick:e.addItem},{default:n(()=>[a(f),p(" "+r(e.$t("form.add")),1)]),_:1},8,["onClick"])):A("",!0),e.table.selectedRowKeys.length>0&&(l.permsArray.includes("forms_delete")||l.permsArray.includes("admin"))?(d(),w(y,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:n(()=>[a(k)]),default:n(()=>[p(" "+r(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),a(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:n(()=>[a(T,{gutter:[16,16],justify:"end"},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:12,xl:12},{default:n(()=>[a(O,{compact:""},{default:n(()=>[a(U,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=M=>e.table.searchColumn=M),placeholder:e.$t("common.select_default_text",[""])},{default:n(()=>[(d(!0),E(R,null,X(l.filterableColumns,M=>(d(),w(S,{key:M.key},{default:n(()=>[p(r(M.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),a($,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=M=>e.table.searchString=M),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(F,null,{default:n(()=>[a(L,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),a(T,null,{default:n(()=>[a(C,{span:24},{default:n(()=>[P("div",cm,[a(j,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:M=>({disabled:!1,name:M.xid})},columns:l.columns,"row-key":M=>M.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:n(({column:M,record:B})=>[M.dataIndex==="form_fields"?(d(),E("ul",pm,[(d(!0),E(R,null,X(B.form_fields,J=>(d(),E("li",{key:J.id},r(J.name),1))),128))])):A("",!0),M.dataIndex==="status"?(d(),w(q,{key:1,status:B.status,xid:B.xid,onSuccess:e.fetch},null,8,["status","xid","onSuccess"])):A("",!0),M.dataIndex==="action"?(d(),E(R,{key:2},[l.permsArray.includes("forms_edit")||l.permsArray.includes("admin")?(d(),w(y,{key:0,type:"primary",onClick:J=>e.editItem(B),style:{"margin-left":"4px"}},{icon:n(()=>[a(K)]),_:2},1032,["onClick"])):A("",!0),(l.permsArray.includes("forms_delete")||l.permsArray.includes("admin"))&&(!B.children||B.children.length==0)?(d(),w(y,{key:1,type:"primary",onClick:J=>e.showDeleteConfirm(B.xid),style:{"margin-left":"4px"}},{icon:n(()=>[a(k)]),_:2},1032,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const fm=z(mm,[["render",_m]]),gm=()=>{const e="form-field-names?fields=id,xid,field_name,similar_field_names,visible",s="form-field-names",u=[],{t:l}=Q(),h={field_name:"",similar_field_names:[],visible:1},b=[{title:l("form_field_name.field_name"),dataIndex:"field_name"},{title:l("form_field_name.similar_field_names"),dataIndex:"similar_field_names"},{title:l("form_field_name.visible"),dataIndex:"visible"},{title:l("common.action"),dataIndex:"action"}],m=[{key:"field_name",value:l("form_field_name.field_name")},{key:"similar_field_names",value:l("form_field_name.similar_field_names")},{key:"deletable",value:l("form_field_name.deletable")},{key:"visible",value:l("form_field_name.visible")}];return{url:e,addEditUrl:s,initData:h,columns:b,filterableColumns:m,hashableColumns:u}},hm=x({props:["data","addText"],emits:["onEntry"],components:{PlusOutlined:ae},setup(e,{emit:s}){const u=I(),l=Ie({tags:e.data,inputVisible:!1,inputValue:""}),h=i=>{const c=l.tags.filter(_=>_!==i);l.tags=c,s("onEntry",c)},b=()=>{l.inputVisible=!0,Pt(()=>{u.value.focus()})},m=()=>{const i=l.inputValue;let c=l.tags;i&&c.indexOf(i)===-1&&(c=[...c,i]),Object.assign(l,{tags:c,inputVisible:!1,inputValue:""}),s("onEntry",c)};return we(()=>e.data,(i,c)=>{l.tags=i}),{...Ut(l),handleClose:h,showInput:b,handleInputConfirm:m,inputRef:u}}}),bm={style:{marginBottom:"20px"}};function ym(e,s,u,l,h,b){const m=o("a-tag"),i=o("a-tooltip"),c=o("a-input"),_=o("plus-outlined");return d(),E("div",bm,[(d(!0),E(R,null,X(e.tags,g=>(d(),E(R,{key:g},[g.length>20?(d(),w(i,{key:0,title:g},{default:n(()=>[a(m,{closable:"",onClose:f=>e.handleClose(g),style:{marginBottom:"20px"}},{default:n(()=>[p(r(`${g.slice(0,20)}...`),1)]),_:2},1032,["onClose"])]),_:2},1032,["title"])):(d(),w(m,{key:1,closable:"",onClose:f=>e.handleClose(g),style:{marginBottom:"20px"}},{default:n(()=>[p(r(g),1)]),_:2},1032,["onClose"]))],64))),128)),e.inputVisible?(d(),w(c,{key:0,ref:"inputRef",value:e.inputValue,"onUpdate:value":s[0]||(s[0]=g=>e.inputValue=g),type:"text",size:"small",style:{width:"100px"},onBlur:e.handleInputConfirm,onKeyup:Nn(e.handleInputConfirm,["enter"])},null,8,["value","onBlur","onKeyup"])):(d(),w(m,{key:1,style:{background:"#fff","border-style":"dashed"},onClick:e.showInput},{default:n(()=>[a(_),p(" "+r(e.addText),1)]),_:1},8,["onClick"]))])}const vm=z(hm,[["render",ym]]),km=x({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ae,LoadingOutlined:De,SaveOutlined:_e,DynamicFields:vm},setup(e,{emit:s}){const{addEditRequestAdmin:u,loading:l,rules:h}=se();return{loading:l,rules:h,onClose:()=>{h.value={},s("closed")},onSubmit:()=>{u({url:e.url,data:e.formData,successMessage:e.successMessage,success:i=>{s("addEditSuccess",i.xid)}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function wm(e,s,u,l,h,b){const m=o("a-input"),i=o("a-form-item"),c=o("a-col"),_=o("a-row"),g=o("a-typography-title"),f=o("DynamicFields"),y=o("a-radio-button"),k=o("a-radio-group"),v=o("a-form"),C=o("SaveOutlined"),S=o("a-button"),U=o("a-modal");return d(),w(U,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:n(()=>[a(S,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:n(()=>[a(C)]),default:n(()=>[p(" "+r(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),a(S,{key:"back",onClick:e.onClose},{default:n(()=>[p(r(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[a(v,{layout:"vertical"},{default:n(()=>[a(_,{gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("form_field_name.field_name"),name:"field_name",help:e.rules.field_name?e.rules.field_name.message:null,validateStatus:e.rules.field_name?"error":null,class:"required"},{default:n(()=>[a(m,{value:e.formData.field_name,"onUpdate:value":s[0]||(s[0]=$=>e.formData.field_name=$),placeholder:e.$t("common.placeholder_default_text",[e.$t("form_field_name.field_name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(_,{gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(g,{level:5,style:{marginBottom:"10px"}},{default:n(()=>[p(r(e.$t("form_field_name.similar_field_names")),1)]),_:1}),e.formData.similar_field_names?(d(),w(f,{key:0,data:e.formData.similar_field_names,addText:e.$t("form_field_name.add_field"),onOnEntry:s[1]||(s[1]=$=>e.formData.similar_field_names=$)},null,8,["data","addText"])):A("",!0)]),_:1})]),_:1}),a(_,{gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("form_field_name.visible"),name:"visible",help:e.rules.visible?e.rules.visible.message:null,validatevisible:e.rules.visible?"error":null},{default:n(()=>[a(k,{value:e.formData.visible,"onUpdate:value":s[2]||(s[2]=$=>e.formData.visible=$),"button-style":"solid",size:"small"},{default:n(()=>[a(y,{value:1},{default:n(()=>[p(r(e.$t("common.yes")),1)]),_:1}),a(y,{value:0},{default:n(()=>[p(r(e.$t("common.no")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label","help","validatevisible"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const Cm=z(km,[["render",wm]]),Sm=x({props:["xid","status"],emits:["success"],setup(e,{emit:s}){const{addEditRequestAdmin:u,loading:l}=se(),{t:h}=Q();return{changeStatus:m=>{const i={xid:e.xid,status:m?1:0};u({url:"form-field-names/update-status",data:i,successMessage:h("form_field_name.status_update"),success:c=>{s("success")}})},loading:l}}});function $m(e,s,u,l,h,b){const m=o("a-switch");return d(),w(m,{checked:e.status==1,size:"small",onClick:e.changeStatus,loading:e.loading},null,8,["checked","onClick","loading"])}const Dm=z(Sm,[["render",$m]]),Am={components:{PlusOutlined:ae,EditOutlined:ke,DeleteOutlined:pe,AddEdit:Cm,AdminPageHeader:me,UpdateStatus:Dm},setup(){const{permsArray:e,appSetting:s}=Z(),{url:u,addEditUrl:l,initData:h,columns:b,filterableColumns:m}=gm(),i=Te();return ee(()=>{i.tableUrl.value={url:u},i.table.filterableColumns=m,i.fetch({page:1}),i.crudUrl.value=l,i.langKey.value="form_field_name",i.initData.value={...h},i.formData.value={...h}}),{permsArray:e,appSetting:s,columns:b,...i,filterableColumns:m}}},Tm={class:"table-responsive"},Em={key:0};function Om(e,s,u,l,h,b){const m=o("a-page-header"),i=o("router-link"),c=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("PlusOutlined"),y=o("a-button"),k=o("DeleteOutlined"),v=o("a-space"),C=o("a-col"),S=o("a-select-option"),U=o("a-select"),$=o("a-input-search"),O=o("a-input-group"),T=o("a-row"),D=o("admin-page-filters"),L=o("AddEdit"),q=o("UpdateStatus"),K=o("EditOutlined"),j=o("a-table"),F=o("admin-page-table-content");return d(),E(R,null,[a(g,null,{header:n(()=>[a(m,{title:e.$t("menu.form_field_names"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(c,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[p(r(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(c,null,{default:n(()=>[p(r(e.$t("menu.form_field_names")),1)]),_:1})]),_:1})]),_:1}),a(D,null,{default:n(()=>[a(T,{gutter:[16,16]},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:n(()=>[a(v,null,{default:n(()=>[l.permsArray.includes("form_field_names_create")||l.permsArray.includes("admin")?(d(),w(y,{key:0,type:"primary",onClick:e.addItem},{default:n(()=>[a(f),p(" "+r(e.$t("form_field_name.add")),1)]),_:1},8,["onClick"])):A("",!0),e.table.selectedRowKeys.length>0&&(l.permsArray.includes("form_field_names_delete")||l.permsArray.includes("admin"))?(d(),w(y,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:n(()=>[a(k)]),default:n(()=>[p(" "+r(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),a(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:n(()=>[a(T,{gutter:[16,16],justify:"end"},{default:n(()=>[a(C,{xs:24,sm:24,md:12,lg:12,xl:12},{default:n(()=>[a(O,{compact:""},{default:n(()=>[a(U,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=M=>e.table.searchColumn=M),placeholder:e.$t("common.select_default_text",[""])},{default:n(()=>[(d(!0),E(R,null,X(l.filterableColumns,M=>(d(),w(S,{key:M.key},{default:n(()=>[p(r(M.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),a($,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=M=>e.table.searchString=M),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(F,null,{default:n(()=>[a(L,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),a(T,null,{default:n(()=>[a(C,{span:24},{default:n(()=>[P("div",Tm,[a(j,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:M=>({disabled:!1,name:M.xid})},columns:l.columns,"row-key":M=>M.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:n(({column:M,record:B})=>[M.dataIndex==="similar_field_names"?(d(),E("ul",Em,[(d(!0),E(R,null,X(B.similar_field_names,J=>(d(),E("li",{key:J},r(J),1))),128))])):A("",!0),M.dataIndex==="visible"?(d(),w(q,{key:1,status:B.visible,xid:B.xid,onSuccess:e.fetch},null,8,["status","xid","onSuccess"])):A("",!0),M.dataIndex==="action"?(d(),E(R,{key:2},[l.permsArray.includes("form_field_names_edit")||l.permsArray.includes("admin")?(d(),w(y,{key:0,type:"primary",onClick:J=>e.editItem(B),style:{"margin-left":"4px"}},{icon:n(()=>[a(K)]),_:2},1032,["onClick"])):A("",!0),(l.permsArray.includes("form_field_names_delete")||l.permsArray.includes("admin"))&&(!B.children||B.children.length==0)?(d(),w(y,{key:1,type:"primary",onClick:J=>e.showDeleteConfirm(B.xid),style:{"margin-left":"4px"}},{icon:n(()=>[a(k)]),_:2},1032,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const Um=z(Am,[["render",Om]]),Pm=[{path:"/",component:()=>Fe(()=>import("./Admin-bb3356a6.js"),["assets/Admin-bb3356a6.js","assets/vendor-a91b8582.js","assets/vendor-ad46f743.css","assets/Admin-14aea5fe.css"]),children:[{path:"/admin/forms",component:fm,name:"admin.forms.index",meta:{requireAuth:!0,menuParent:"forms",menuKey:"forms",permission:"forms_view"}},{path:"/admin/form-field-names",component:Um,name:"admin.form_field_names.index",meta:{requireAuth:!0,menuParent:"form_field_names",menuKey:"form_field_names",permission:"form_field_names_view"}}]}],Im=()=>{const{convertStringToKey:e,getCampaignUrl:s,getCampaignStatsUrl:u}=Z(),l="leads?fields=id,xid,reference_number,lead_data,started,campaign_id,x_campaign_id,campaign{id,xid,name,status},time_taken,first_action_by,x_first_action_by,firstActioner{id,xid,name},last_action_by,x_last_action_by,lastActioner{id,xid,name}",h="leads",b=["campaign_id"],{t:m}=Q(),i=I([]),c=I([]),_="form-field-names/all",g=I({}),f=I([]),y=I("self"),k=I("active"),v={reference_number:""},C=I([]),S=[{key:"reference_number",value:m("lead.reference_number")}];return ee(()=>{const U=s(k.value,y.value),$=u(),O=axiosAdmin.get(_),T=axiosAdmin.get(U),D=axiosAdmin.get($),L=axiosAdmin.get("campaigns/user-campaigns");Promise.all([O,T,D,L]).then(([q,K,j,F])=>{i.value=q.data.data,c.value=K.data,g.value=j.data,f.value=F.data.user_campaigns;var M=[{title:m("lead.reference_number"),dataIndex:"reference_number"},{title:m("lead.campaign"),dataIndex:"campaign"}];ce(q.data.data,B=>{M.push({title:B.field_name,dataIndex:e(B.field_name)})}),M.push({title:m("common.action"),dataIndex:"action"}),C.value=M})}),{url:l,addEditUrl:h,initData:v,columns:C,filterableColumns:S,hashableColumns:b,allFormFieldNames:i,convertStringToKey:e,allCampaigns:c,campaignStats:g,userCampaigns:f,activeCampaignType:k,viewType:y}},Mm=x({props:["xid","status"],emits:["success"],setup(e,{emit:s}){const{addEditRequestAdmin:u,loading:l}=se(),{t:h}=Q();return{changeStatus:m=>{const i={xid:e.xid,status:m?1:0};u({url:"leads/update-status",data:i,successMessage:h("lead.status_update"),success:c=>{s("success")}})},loading:l}}});function Fm(e,s,u,l,h,b){const m=o("a-switch");return d(),w(m,{checked:e.status==1,size:"small",onClick:e.changeStatus,loading:e.loading},null,8,["checked","onClick","loading"])}const Rm=z(Mm,[["render",Fm]]);const Lm={components:{PlusOutlined:ae,EditOutlined:ke,DeleteOutlined:pe,SearchOutlined:Ot,LineChartOutlined:Wn,EyeOutlined:Be,PlayCircleOutlined:Me,DownOutlined:Ia,AreaChartOutlined:Gn,HistoryOutlined:It,ExclamationCircleOutlined:ue,StopOutlined:da,CopyrightCircleOutlined:wt,ApartmentOutlined:Mt,MobileOutlined:Ea,ClockCircleOutlined:Oa,AdminPageHeader:me,UpdateStatus:Rm,StateWidget:Vt},setup(){const{permsArray:e,appSetting:s,convertStringToKey:u,formatTimeDuration:l,getCampaignUrl:h,getCampaignStatsUrl:b}=Z(),m=Ve(),i=Oe(),{url:c,addEditUrl:_,initData:g,columns:f,hashableColumns:y,filterableColumns:k,allFormFieldNames:v,allCampaigns:C,campaignStats:S,userCampaigns:U,activeCampaignType:$,viewType:O}=Im(),T=Te(),D=I({campaign_id:void 0}),L=I([]),q=I({lead_field_name:void 0,lead_field_value:"",started:"started",lead_status:void 0,campaign_status:"active"}),K=I(void 0),{t:j}=Q(),F={marginLeft:"0px",marginRight:"0px"};ee(()=>{M(),T.crudUrl.value=_,T.langKey.value="lead",T.initData.value={...g},T.formData.value={...g},T.hashableColumns.value=[...y]});const M=()=>{T.tableUrl.value={url:c,filters:D,extraFilters:q},T.table.filterableColumns=k,T.table.pagination={...T.table.pagination,current:1},T.fetch({page:1})};return{permsArray:e,appSetting:s,columns:f,allFormFieldNames:v,...T,...m,filterableColumns:k,convertStringToKey:u,filters:D,extraFilters:q,setUrlData:M,findFieldValue:(N,te)=>{var Ce="-";return ce(te,le=>{N.includes(le.field_name)&&(Ce=le.field_value)}),Ce},allCampaigns:C,campaignFormFields:L,searchFieldName:K,goAndResumeLead:N=>{ge.confirm({title:j("common.are_you_sure")+"?",icon:a(ue),content:j("lead.are_you_want_to_resume_this_lead"),centered:!0,okText:j("common.yes"),okType:"danger",cancelText:j("common.no"),onOk(){i.push({name:"admin.call_manager.take_action",params:{id:N.xid}})},onCancel(){}})},activeCampaignType:$,widgetBodyStyle:F,campaignChanged:(N,te)=>{L.value=te&&te.campaign&&te.campaign.form&&te.campaign.form.form_fields?te.campaign.form.form_fields:[],q.value={...q.value,lead_field_name:void 0,lead_field_value:"",started:"started",lead_status:void 0},K.value=void 0,M()},searchFieldChanged:(N,te)=>{q.value={...q.value,lead_field_name:te&&te.formField&&te.formField.name?te.formField.name:void 0,lead_field_value:""},M()},campaignTypeChanged:N=>{D.value={...D.value,campaign_id:void 0},q.value={...q.value,lead_field_name:void 0,lead_field_value:"",started:"started",lead_status:void 0};const te=h(q.value.campaign_status,O.value),Ce=b(q.value.campaign_status,D.value.campaign_id),le=axiosAdmin.get(te),be=axiosAdmin.get(Ce);Promise.all([le,be]).then(([$e,de])=>{C.value=$e.data,S.value=de.data,M()})},campaignStats:S,formatTimeDuration:l,isLeadActionValid:N=>e.value.includes("leads_view_all")||e.value.includes("admin")?!0:!!Ke(U.value,{x_campaign_id:N}),viewType:O,viewTypeChanged:()=>{const N=h(q.value.campaign_status,O.value),te=axiosAdmin.get(N);Promise.all([te]).then(([Ce,le])=>{C.value=Ce.data,M()})}}}},qm={class:"left-lead-campaigns"},Bm={key:0,class:"table-responsive"},Km={key:1};function zm(e,s,u,l,h,b){const m=o("a-typography-text"),i=o("a-switch"),c=o("a-space"),_=o("a-page-header"),g=o("router-link"),f=o("a-breadcrumb-item"),y=o("a-breadcrumb"),k=o("AdminPageHeader"),v=o("PlayCircleOutlined"),C=o("a-tab-pane"),S=o("StopOutlined"),U=o("a-tabs"),$=o("a-col"),O=o("a-row"),T=o("a-select-option"),D=o("a-select"),L=o("a-form-item"),q=o("a-form"),K=o("CopyrightCircleOutlined"),j=o("StateWidget"),F=o("LineChartOutlined"),M=o("ApartmentOutlined"),B=o("MobileOutlined"),J=o("ClockCircleOutlined"),Y=o("perfect-scrollbar"),V=o("AreaChartOutlined"),W=o("HistoryOutlined"),G=o("a-input-search"),H=o("a-input"),N=o("a-button"),te=o("a-tooltip"),Ce=o("DeleteOutlined"),le=o("a-table"),be=o("a-card"),$e=o("admin-page-table-content"),de=o("view-lead-details");return d(),E(R,null,[a(k,null,{header:n(()=>[a(_,{title:e.$t("menu.leads"),class:"p-0"},Ze({_:2},[l.permsArray.includes("campaigns_view_all")||l.permsArray.includes("admin")?{name:"extra",fn:n(()=>[a(c,null,{default:n(()=>[a(m,{strong:""},{default:n(()=>[p(r(e.$t("campaign.view_all_campaigns")),1)]),_:1}),a(i,{checked:l.viewType,"onUpdate:checked":s[0]||(s[0]=ne=>l.viewType=ne),onChange:l.viewTypeChanged,unCheckedValue:"self",checkedValue:"all",size:"small"},null,8,["checked","onChange"])]),_:1})]),key:"0"}:void 0]),1032,["title"])]),breadcrumb:n(()=>[a(y,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(f,null,{default:n(()=>[a(g,{to:{name:"admin.dashboard.index"}},{default:n(()=>[p(r(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(f,null,{default:n(()=>[p(r(e.$t("menu.leads_calls")),1)]),_:1}),a(f,null,{default:n(()=>[p(r(e.$t("menu.leads")),1)]),_:1})]),_:1})]),_:1}),a($e,null,{default:n(()=>[a(be,{class:"page-content-container mt-20 mb-20"},{default:n(()=>[a(O,null,{default:n(()=>[a($,{span:24},{default:n(()=>[a(U,{activeKey:l.extraFilters.campaign_status,"onUpdate:activeKey":s[1]||(s[1]=ne=>l.extraFilters.campaign_status=ne),onChange:l.campaignTypeChanged},{default:n(()=>[a(C,{key:"active"},{tab:n(()=>[P("span",null,[a(v),p(" "+r(e.$t("campaign.active_campaign")),1)])]),_:1}),l.permsArray.includes("view_completed_campaigns")||l.permsArray.includes("admin")?(d(),w(C,{key:"completed"},{tab:n(()=>[P("span",null,[a(S),p(" "+r(e.$t("campaign.completed_campaign")),1)])]),_:1})):A("",!0)]),_:1},8,["activeKey","onChange"])]),_:1})]),_:1}),a(O,{gutter:[24,24]},{default:n(()=>[a($,{xs:24,sm:24,md:6,lg:6,xl:6,style:{"border-right":"1px solid #f0f0f0"}},{default:n(()=>[P("div",qm,[a(Y,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:n(()=>[a(O,null,{default:n(()=>[a($,{span:24},{default:n(()=>[a(q,{layout:"vertical"},{default:n(()=>[a(L,{label:e.$t("lead.campaign"),name:"campaign"},{default:n(()=>[a(D,{value:l.filters.campaign_id,"onUpdate:value":s[2]||(s[2]=ne=>l.filters.campaign_id=ne),placeholder:e.$t("common.select_default_text",[e.$t("lead.campaign")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:l.campaignChanged},{default:n(()=>[(d(!0),E(R,null,X(l.allCampaigns,ne=>(d(),w(T,{key:ne.xid,title:ne.name,value:ne.xid,campaign:ne},{default:n(()=>[p(r(ne.name),1)]),_:2},1032,["title","value","campaign"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),l.campaignStats?(d(),w(O,{key:0},{default:n(()=>[a($,{span:24},{default:n(()=>[a(j,{bodyStyle:l.widgetBodyStyle},{image:n(()=>[a(K,{style:{color:"#fff","font-size":"24px"}})]),description:n(()=>[P("h2",null,r(l.campaignStats.total_active_campaign),1),P("p",null,r(e.$t("campaign.active_campaign")),1)]),_:1},8,["bodyStyle"])]),_:1}),a($,{span:24},{default:n(()=>[a(j,{bgColor:"#ffa39e",bodyStyle:l.widgetBodyStyle},{image:n(()=>[a(F,{style:{color:"#fff","font-size":"24px"}})]),description:n(()=>[P("h2",null,r(l.campaignStats.total_completed_campaign),1),P("p",null,r(e.$t("campaign.completed_campaign")),1)]),_:1},8,["bodyStyle"])]),_:1}),l.permsArray.includes("leads_view_all")||l.permsArray.includes("admin")||l.filters.campaign_id!=null?(d(),w($,{key:0,span:24},{default:n(()=>[a(j,{bgColor:"#d46b08",bodyStyle:l.widgetBodyStyle},{image:n(()=>[a(M,{style:{color:"#fff","font-size":"24px"}})]),description:n(()=>[P("h2",null,r(l.campaignStats.total_leads),1),P("p",null,r(e.$t("campaign.total_leads")),1)]),_:1},8,["bodyStyle"])]),_:1})):A("",!0),a($,{span:24},{default:n(()=>[a(j,{bgColor:"#389e0d",bodyStyle:l.widgetBodyStyle},{image:n(()=>[a(B,{style:{color:"#fff","font-size":"24px"}})]),description:n(()=>[P("h2",null,r(l.campaignStats.call_made),1),P("p",null,r(e.$t("campaign.call_made")),1)]),_:1},8,["bodyStyle"])]),_:1}),a($,{span:24},{default:n(()=>[a(j,{bgColor:"#08979c",bodyStyle:l.widgetBodyStyle},{image:n(()=>[a(J,{style:{color:"#fff","font-size":"24px"}})]),description:n(()=>[P("h2",null,r(l.formatTimeDuration(l.campaignStats.total_duration)),1),P("p",null,r(e.$t("campaign.total_duration")),1)]),_:1},8,["bodyStyle"])]),_:1})]),_:1})):A("",!0)]),_:1})])]),_:1}),a($,{xs:24,sm:24,md:18,lg:18,xl:18},{default:n(()=>[a(O,null,{default:n(()=>[a($,{span:24},{default:n(()=>[a(U,{activeKey:l.extraFilters.started,"onUpdate:activeKey":s[3]||(s[3]=ne=>l.extraFilters.started=ne),onChange:l.setUrlData},{default:n(()=>[a(C,{key:"started"},{tab:n(()=>[P("span",null,[a(V),p(" "+r(e.$t("lead.started")),1)])]),_:1}),l.permsArray.includes("leads_view_all")||l.permsArray.includes("admin")?(d(),w(C,{key:"not_started"},{tab:n(()=>[P("span",null,[a(W),p(" "+r(e.$t("lead.not_started")),1)])]),_:1})):A("",!0)]),_:1},8,["activeKey","onChange"])]),_:1})]),_:1}),a(O,{gutter:16},{default:n(()=>[a($,{xs:24,sm:24,md:6,lg:6,xl:6},{default:n(()=>[a(G,{style:{width:"100%"},value:e.table.searchString,"onUpdate:value":s[4]||(s[4]=ne=>e.table.searchString=ne),placeholder:e.$t("common.select_default_text",[e.$t("lead.reference_number")]),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","placeholder","onChange","onSearch","loading"])]),_:1}),l.extraFilters.started=="started"?(d(),w($,{key:0,xs:24,sm:24,md:6,lg:6,xl:6},{default:n(()=>[a(D,{value:l.extraFilters.lead_status,"onUpdate:value":s[5]||(s[5]=ne=>l.extraFilters.lead_status=ne),placeholder:e.$t("common.select_default_text",[e.$t("lead.lead_status")]),allowClear:!0,style:{width:"100%"},onChange:l.setUrlData},{default:n(()=>[a(T,{key:"interested",value:"interested"},{default:n(()=>[p(r(e.$t("lead.interested")),1)]),_:1}),a(T,{key:"not_interested",value:"not_interested"},{default:n(()=>[p(r(e.$t("lead.not_interested")),1)]),_:1}),a(T,{key:"unreachable",value:"unreachable"},{default:n(()=>[p(r(e.$t("lead.unreachable")),1)]),_:1})]),_:1},8,["value","placeholder","onChange"])]),_:1})):A("",!0),l.campaignFormFields.length!=0?(d(),E(R,{key:1},[a($,{xs:24,sm:24,md:6,lg:6,xl:6},{default:n(()=>[a(D,{value:l.searchFieldName,"onUpdate:value":s[6]||(s[6]=ne=>l.searchFieldName=ne),placeholder:e.$t("common.select_default_text",[e.$t("lead.search_by")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:l.searchFieldChanged,disabled:l.campaignFormFields.length==0},{default:n(()=>[(d(!0),E(R,null,X(l.campaignFormFields,ne=>(d(),w(T,{key:ne.id,title:ne.name,value:ne.id,formField:ne},{default:n(()=>[p(r(ne.name),1)]),_:2},1032,["title","value","formField"]))),128))]),_:1},8,["value","placeholder","onChange","disabled"])]),_:1}),a($,{xs:24,sm:24,md:6,lg:6,xl:6},{default:n(()=>[a(H,{value:l.extraFilters.lead_field_value,"onUpdate:value":s[7]||(s[7]=ne=>l.extraFilters.lead_field_value=ne),placeholder:e.$t("common.placeholder_default_text",[e.$t("lead.search_value")]),onKeyup:l.setUrlData,disabled:l.searchFieldName==null},null,8,["value","placeholder","onKeyup","disabled"])]),_:1})],64)):A("",!0)]),_:1}),a(O,{class:"mt-20"},{default:n(()=>[a($,{span:24},{default:n(()=>[l.columns&&l.columns.length>0?(d(),E("div",Bm,[a(le,{columns:l.columns,"row-key":ne=>ne.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange},{bodyCell:n(({column:ne,record:ye})=>[ne.dataIndex==="reference_number"?(d(),w(N,{key:0,type:"link",class:"p-0",onClick:Pe=>e.showViewDrawer(ye)},{default:n(()=>[p(r(ye.reference_number!=""&&ye.reference_number!=null?ye.reference_number:"---"),1)]),_:2},1032,["onClick"])):A("",!0),ne.dataIndex==="campaign"?(d(),E(R,{key:1},[p(r(ye.campaign.name),1)],64)):A("",!0),(d(!0),E(R,null,X(l.allFormFieldNames,Pe=>(d(),E(R,{key:Pe.xid},[ne.dataIndex===l.convertStringToKey(Pe.field_name)?(d(),E(R,{key:0},[p(r(l.findFieldValue(Pe.similar_field_names,ye.lead_data)),1)],64)):A("",!0)],64))),128)),ne.dataIndex==="action"?(d(),E(R,{key:2},[l.isLeadActionValid(ye.campaign.xid)?(d(),w(c,{key:0},{default:n(()=>[ye.started&&ye.campaign&&ye.campaign.status!="completed"?(d(),w(te,{key:0,title:e.$t("lead.go_resume_call")},{default:n(()=>[a(N,{type:"primary",onClick:Pe=>l.goAndResumeLead(ye)},{icon:n(()=>[a(v)]),_:2},1032,["onClick"])]),_:2},1032,["title"])):A("",!0),a(te,{title:e.$t("lead.delete_lead")},{default:n(()=>[(l.permsArray.includes("leads_delete")||l.permsArray.includes("admin"))&&!ye.started?(d(),w(N,{key:0,type:"primary",onClick:Pe=>e.showDeleteConfirm(ye.xid)},{icon:n(()=>[a(Ce)]),_:2},1032,["onClick"])):A("",!0)]),_:2},1032,["title"])]),_:2},1024)):(d(),E("span",Km,"-"))],64)):A("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])])):A("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(de,{visible:e.isViewDrawerVisible,lead:e.viewDrawerData,onClose:e.hideViewDrawer},null,8,["visible","lead","onClose"])],64)}const Vm=z(Lm,[["render",zm]]),Hm={components:{EyeOutlined:Be,PlayCircleOutlined:Me,DownOutlined:Ia,AdminPageHeader:me,CallLogTable:La},setup(){return{}}};function jm(e,s,u,l,h,b){const m=o("a-page-header"),i=o("router-link"),c=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("CallLogTable"),y=o("a-card"),k=o("admin-page-table-content");return d(),E(R,null,[a(g,null,{header:n(()=>[a(m,{title:e.$t("menu.call_logs"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(c,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[p(r(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(c,null,{default:n(()=>[p(r(e.$t("menu.leads_calls")),1)]),_:1}),a(c,null,{default:n(()=>[p(r(e.$t("menu.call_logs")),1)]),_:1})]),_:1})]),_:1}),a(k,null,{default:n(()=>[a(y,{class:"page-content-container mt-20 mb-20"},{default:n(()=>[a(f,{showAction:!1,showCampaignStatus:!0})]),_:1})]),_:1})],64)}const Nm=z(Hm,[["render",jm]]),Wm={components:{EyeOutlined:Be,PlayCircleOutlined:Me,DownOutlined:Ia,AdminPageHeader:me,LeadNotesTable:qa},setup(){return{...Ve()}}};function Gm(e,s,u,l,h,b){const m=o("a-page-header"),i=o("router-link"),c=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("LeadNotesTable"),y=o("a-card"),k=o("admin-page-table-content");return d(),E(R,null,[a(g,null,{header:n(()=>[a(m,{title:e.$t("menu.lead_notes"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(c,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[p(r(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(c,null,{default:n(()=>[p(r(e.$t("menu.leads_calls")),1)]),_:1}),a(c,null,{default:n(()=>[p(r(e.$t("menu.lead_notes")),1)]),_:1})]),_:1})]),_:1}),a(k,null,{default:n(()=>[a(y,{class:"page-content-container mt-20 mb-20"},{default:n(()=>[a(f,{logType:"notes",showFormFields:!0,showCampaignStatus:!0,showTableSearch:!0,showLeadDetails:!0,showAddButton:!1,showActionButton:!1})]),_:1})]),_:1})],64)}const Ym=z(Wm,[["render",Gm]]),Xm=[{path:"/",component:()=>Fe(()=>import("./Admin-bb3356a6.js"),["assets/Admin-bb3356a6.js","assets/vendor-a91b8582.js","assets/vendor-ad46f743.css","assets/Admin-14aea5fe.css"]),children:[{path:"/admin/leads",component:Vm,name:"admin.leads.index",meta:{requireAuth:!0,menuParent:"leads",menuKey:"leads"}},{path:"/admin/call-logs",component:Nm,name:"admin.call_logs.index",meta:{requireAuth:!0,menuParent:"leads",menuKey:"call_logs"}},{path:"/admin/notes",component:Ym,name:"admin.lead_notes.index",meta:{requireAuth:!0,menuParent:"leads",menuKey:"lead_notes"}}]}];const Ba=e=>{const s=e=="admin"?"currencies?fields=id,xid,name,symbol,position,code":"superadmin/currencies?fields=id,xid,name,symbol,position,code",u=e=="admin"?"currencies":"superadmin/currencies",{t:l}=Q(),h={name:"",symbol:"",position:"",code:""},b=[{title:l("currency.name"),dataIndex:"name"},{title:l("currency.symbol"),dataIndex:"symbol"},{title:l("currency.position"),dataIndex:"position"},{title:l("currency.code"),dataIndex:"code"},{title:l("common.action"),dataIndex:"action"}],m=[{key:"name",value:l("common.name")}];return{url:s,addEditUrl:u,initData:h,columns:b,filterableColumns:m}},Jm=x({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],emits:["addEditSuccess"],components:{PlusOutlined:ae,LoadingOutlined:De,SaveOutlined:_e},setup(e,{emit:s}){const{addEditRequestAdmin:u,loading:l,rules:h}=se(),{appSetting:b}=Z(),m=he();return{loading:l,rules:h,onClose:()=>{h.value={},s("closed")},onSubmit:()=>{u({url:e.url,data:e.formData,successMessage:e.successMessage,success:_=>{b.value.currency&&b.value.currency.xid==_.xid&&m.dispatch("auth/updateApp"),s("addEditSuccess",_.xid)}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function Qm(e,s,u,l,h,b){const m=o("a-input"),i=o("a-form-item"),c=o("a-col"),_=o("a-row"),g=o("a-radio"),f=o("a-radio-group"),y=o("a-form"),k=o("SaveOutlined"),v=o("a-button"),C=o("a-modal");return d(),w(C,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:n(()=>[a(v,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:n(()=>[a(k)]),default:n(()=>[p(" "+r(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),a(v,{key:"back",onClick:e.onClose},{default:n(()=>[p(r(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[a(y,{layout:"vertical"},{default:n(()=>[a(_,{gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("currency.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:n(()=>[a(m,{value:e.formData.name,"onUpdate:value":s[0]||(s[0]=S=>e.formData.name=S),placeholder:e.$t("common.placeholder_default_text",[e.$t("currency.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(_,{gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("currency.symbol"),name:"symbol",help:e.rules.symbol?e.rules.symbol.message:null,validateStatus:e.rules.symbol?"error":null,class:"required"},{default:n(()=>[a(m,{value:e.formData.symbol,"onUpdate:value":s[1]||(s[1]=S=>e.formData.symbol=S),placeholder:e.$t("common.placeholder_default_text",[e.$t("currency.symbol")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(_,{gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("currency.position"),name:"position",help:e.rules.position?e.rules.position.message:null,validateStatus:e.rules.position?"error":null},{default:n(()=>[a(f,{value:e.formData.position,"onUpdate:value":s[2]||(s[2]=S=>e.formData.position=S)},{default:n(()=>[a(g,{value:"front"},{default:n(()=>[p(r(e.$t("currency.front"))+" ("+r(e.$t("currency.front_position_example"))+") ",1)]),_:1}),a(g,{value:"behind"},{default:n(()=>[p(r(e.$t("currency.behind"))+" ("+r(e.$t("currency.behind_position_example"))+") ",1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(_,{gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("currency.code"),name:"code",help:e.rules.code?e.rules.code.message:null,validateStatus:e.rules.code?"error":null,class:"required"},{default:n(()=>[a(m,{value:e.formData.code,"onUpdate:value":s[3]||(s[3]=S=>e.formData.code=S),placeholder:e.$t("common.placeholder_default_text",[e.$t("currency.code")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const Ka=z(Jm,[["render",Qm]]),Zm=x({props:{panelType:{type:String,default:"admin"},btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:ae,AddEdit:Ka},setup(e,{emit:s}){const{permsArray:u}=Z(),{initData:l,addEditUrl:h}=Ba(e.panelType),b=I(!1),m=I("add"),i=I({...l});return{permsArray:u,visible:b,addEditType:m,addEditUrl:h,formData:i,addEditSuccess:()=>{b.value=!1,i.value={...l},s("onAddSuccess")},onClose:()=>{b.value=!1},showAdd:()=>{b.value=!0}}}}),xm={key:0};function ec(e,s,u,l,h,b){const m=o("a-menu-item"),i=o("PlusOutlined"),c=o("a-button"),_=o("a-tooltip"),g=o("AddEdit");return e.panelType=="admin"&&(e.permsArray.includes("currencies_create")||e.permsArray.includes("admin"))||e.panelType=="superadmin"?(d(),E("div",xm,[e.customType=="menu"?(d(),w(m,{onClick:e.showAdd,key:"categories"},{icon:n(()=>[oe(e.$slots,"icon")]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick"])):(d(),E(R,{key:1},[e.tooltip?(d(),w(_,{key:0,placement:"topLeft",title:e.$t("currency.add"),"arrow-point-at-center":""},{default:n(()=>[a(c,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:n(()=>[a(i)]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(d(),w(c,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:n(()=>[a(i)]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),a(g,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("currency.add"),successMessage:e.$t("currency.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):A("",!0)}const cn=z(Zm,[["render",ec]]),pn=()=>{const e=fe("langs?fields=id,xid,name,image,image_url,key,enabled"),s=fe("langs"),{t:u}=Q(),l={name:"",key:"",image:void 0,image_url:void 0,enabled:!0},h=[{title:u("langs.name"),dataIndex:"name"},{title:u("langs.key"),dataIndex:"key"},{title:u("langs.enabled"),dataIndex:"enabled"},{title:u("common.action"),dataIndex:"action"}],b=[{key:"name",value:u("langs.name")}];return{url:e,addEditUrl:s,initData:l,columns:h,filterableColumns:b}},ac=x({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:ae,LoadingOutlined:De,SaveOutlined:_e,Upload:Ye},setup(e,{emit:s}){const{addEditRequestAdmin:u,loading:l,rules:h}=se(),b=he();return{loading:l,rules:h,onClose:()=>{h.value={},s("closed")},onSubmit:()=>{u({url:e.url,data:e.formData,successMessage:e.successMessage,success:c=>{s("addEditSuccess",c.xid),b.dispatch("auth/updateAllLangs")}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function tc(e,s,u,l,h,b){const m=o("a-input"),i=o("a-form-item"),c=o("a-col"),_=o("a-row"),g=o("Upload"),f=o("a-form"),y=o("SaveOutlined"),k=o("a-button"),v=o("a-modal");return d(),w(v,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:n(()=>[a(k,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:n(()=>[a(y)]),default:n(()=>[p(" "+r(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),a(k,{key:"back",onClick:e.onClose},{default:n(()=>[p(r(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[a(f,{layout:"vertical"},{default:n(()=>[a(_,{gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("langs.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:n(()=>[a(m,{value:e.formData.name,"onUpdate:value":s[0]||(s[0]=C=>e.formData.name=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("langs.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(_,{gutter:16},{default:n(()=>[a(c,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(i,{label:e.$t("langs.key"),name:"key",help:e.rules.key?e.rules.key.message:null,validateStatus:e.rules.key?"error":null,class:"required"},{default:n(()=>[a(m,{value:e.formData.key,"onUpdate:value":s[1]||(s[1]=C=>e.formData.key=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("langs.key")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(_,null,{default:n(()=>[a(c,{span:24},{default:n(()=>[a(i,{label:e.$t("langs.flag"),name:"image",help:e.rules.image?e.rules.image.message:null,validateStatus:e.rules.image?"error":null},{default:n(()=>[a(g,{formData:e.formData,folder:"langs",onOnFileUploaded:s[2]||(s[2]=C=>{e.formData.image=C.file,e.formData.image_url=C.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const _n=z(ac,[["render",tc]]),nc=x({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:ae,AddEdit:_n},setup(e,{emit:s}){const{permsArray:u}=Z(),{initData:l,addEditUrl:h}=pn(),b=I(!1),m=I("add"),i=I({...l});return{permsArray:u,visible:b,addEditType:m,addEditUrl:h,formData:i,addEditSuccess:()=>{b.value=!1,i.value={...l},s("onAddSuccess")},onClose:()=>{b.value=!1},showAdd:()=>{b.value=!0}}}}),lc={key:0};function oc(e,s,u,l,h,b){const m=o("a-menu-item"),i=o("PlusOutlined"),c=o("a-button"),_=o("a-tooltip"),g=o("AddEdit");return e.permsArray.includes("translations_create")||e.permsArray.includes("admin")?(d(),E("div",lc,[e.customType=="menu"?(d(),w(m,{onClick:e.showAdd,key:"categories"},{icon:n(()=>[oe(e.$slots,"icon")]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick"])):(d(),E(R,{key:1},[e.tooltip?(d(),w(_,{key:0,placement:"topLeft",title:e.$t("langs.add"),"arrow-point-at-center":""},{default:n(()=>[a(c,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:n(()=>[a(i)]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(d(),w(c,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:n(()=>[a(i)]),default:n(()=>[oe(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),a(g,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("langs.add"),successMessage:e.$t("langs.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):A("",!0)}const ka=z(nc,[["render",oc]]);const sc=x({components:{LaptopOutlined:Yn,UserOutlined:Xn,TranslationOutlined:Jn,ShopOutlined:Qn,SolutionOutlined:Zn,ScheduleOutlined:pa,DollarOutlined:xn,AccountBookOutlined:el,AppstoreAddOutlined:al,ApartmentOutlined:Mt,FolderOpenOutlined:tl,MailOutlined:ha,HistoryOutlined:It,FormOutlined:nl,DatabaseOutlined:ll},setup(){const{appSetting:e,user:s,permsArray:u,appModules:l,appType:h}=Z(),b=Ta();he();const m=I([]);return ee(()=>{const i=typeof b.meta.menuKey=="function"?b.meta.menuKey(b):b.meta.menuKey;m.value=[i.replace("-","_")]}),we(b,(i,c)=>{const _=typeof i.meta.menuKey=="function"?i.meta.menuKey(i):i.meta.menuKey;m.value=[_.replace("-","_")]}),{permsArray:u,selectedKeys:m,appType:h}}}),dc={class:"setting-sidebar"};function ic(e,s,u,l,h,b){const m=o("LaptopOutlined"),i=o("a-menu-item"),c=o("UserOutlined"),_=o("TranslationOutlined"),g=o("SolutionOutlined"),f=o("DollarOutlined"),y=o("MailOutlined"),k=o("AppstoreAddOutlined"),v=o("FolderOpenOutlined"),C=o("DatabaseOutlined"),S=o("HistoryOutlined"),U=o("a-menu"),$=o("perfect-scrollbar");return d(),E("div",dc,[a($,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:n(()=>[a(U,{selectedKeys:e.selectedKeys,"onUpdate:selectedKeys":s[11]||(s[11]=O=>e.selectedKeys=O)},{default:n(()=>[e.permsArray.includes("companies_edit")||e.permsArray.includes("admin")?(d(),w(i,{key:"company",onClick:s[0]||(s[0]=O=>e.$router.push({name:"admin.settings.company.index"}))},{icon:n(()=>[a(m)]),default:n(()=>[p(" "+r(e.$t("menu.company")),1)]),_:1})):A("",!0),a(i,{key:"profile",onClick:s[1]||(s[1]=O=>e.$router.push({name:"admin.settings.profile.index"}))},{icon:n(()=>[a(c)]),default:n(()=>[p(" "+r(e.$t("menu.profile")),1)]),_:1}),e.appType=="non-saas"&&(e.permsArray.includes("translations_view")||e.permsArray.includes("admin"))?(d(),w(i,{key:"translations",onClick:s[2]||(s[2]=O=>e.$router.push({name:"admin.settings.translations.index"}))},{icon:n(()=>[a(_)]),default:n(()=>[p(" "+r(e.$t("menu.translations")),1)]),_:1})):A("",!0),e.permsArray.includes("roles_view")||e.permsArray.includes("admin")?(d(),w(i,{key:"roles",onClick:s[3]||(s[3]=O=>e.$router.push({name:"admin.settings.roles.index"}))},{icon:n(()=>[a(g)]),default:n(()=>[p(" "+r(e.$t("menu.roles")),1)]),_:1})):A("",!0),e.permsArray.includes("currencies_view")||e.permsArray.includes("admin")?(d(),w(i,{key:"currencies",onClick:s[4]||(s[4]=O=>e.$router.push({name:"admin.settings.currencies.index"}))},{icon:n(()=>[a(f)]),default:n(()=>[p(" "+r(e.$t("menu.currencies")),1)]),_:1})):A("",!0),e.appType=="saas"&&(e.permsArray.includes("email_edit")||e.permsArray.includes("admin"))?(d(),w(i,{key:"email_settings",onClick:s[5]||(s[5]=O=>e.$router.push({name:"admin.settings.email.index"}))},{icon:n(()=>[a(y)]),default:n(()=>[p(" "+r(e.$t("menu.email_settings")),1)]),_:1})):A("",!0),e.appType=="non-saas"?(d(),E(R,{key:5},[e.permsArray.includes("admin")?(d(),w(i,{key:"modules",onClick:s[6]||(s[6]=O=>e.$router.push({name:"admin.settings.modules.index"}))},{icon:n(()=>[a(k)]),default:n(()=>[p(" "+r(e.$t("menu.modules")),1)]),_:1})):A("",!0),e.permsArray.includes("storage_edit")||e.permsArray.includes("admin")?(d(),w(i,{key:"storage_settings",onClick:s[7]||(s[7]=O=>e.$router.push({name:"admin.settings.storage.index"}))},{icon:n(()=>[a(v)]),default:n(()=>[p(" "+r(e.$t("menu.storage_settings")),1)]),_:1})):A("",!0),e.permsArray.includes("email_edit")||e.permsArray.includes("admin")?(d(),w(i,{key:"email_settings",onClick:s[8]||(s[8]=O=>e.$router.push({name:"admin.settings.email.index"}))},{icon:n(()=>[a(y)]),default:n(()=>[p(" "+r(e.$t("menu.email_settings")),1)]),_:1})):A("",!0),e.permsArray.includes("database_backup")||e.permsArray.includes("admin")?(d(),w(i,{key:"database_backup",onClick:s[9]||(s[9]=O=>e.$router.push({name:"admin.settings.database_backup.index"}))},{icon:n(()=>[a(C)]),default:n(()=>[p(" "+r(e.$t("menu.database_backup")),1)]),_:1})):A("",!0),e.permsArray.includes("update_app")||e.permsArray.includes("admin")?(d(),w(i,{key:"update_app",onClick:s[10]||(s[10]=O=>e.$router.push({name:"admin.settings.update_app.index"}))},{icon:n(()=>[a(S)]),default:n(()=>[p(" "+r(e.$t("menu.update_app")),1)]),_:1})):A("",!0)],64)):A("",!0)]),_:1},8,["selectedKeys"])]),_:1})])}const Ue=z(sc,[["render",ic]]),rc=x({emits:["success"],components:{PlusOutlined:ae,LoadingOutlined:De,SaveOutlined:_e,SettingOutlined:ba},setup(e,{emit:s}){const{appSetting:u,addMenus:l}=Z(),{addEditRequestAdmin:h,loading:b,rules:m}=se(),{t:i}=Q(),c=I(u.value.shortcut_menus),_=I(l.value),g=I(!1),f=he(),y=()=>{const C={position:c.value,shortcut_menus_settings:_.value};h({url:"companies/update-create-menu",data:C,successMessage:i("company.menu_setting_updated"),success:S=>{s("success",c.value),f.dispatch("auth/updateApp"),g.value=!1}})},k=()=>{m.value={},g.value=!0},v=()=>{m.value={},g.value=!1};return we(u,(C,S)=>{c.value=C.shortcut_menus}),{visible:g,loading:b,rules:m,onClose:v,openDrawer:k,onSubmit:y,createMenuPosition:c,createMenus:_,drawerWidth:window.innerWidth<=991?"90%":"35%"}}});function uc(e,s,u,l,h,b){const m=o("SettingOutlined"),i=o("a-button"),c=o("a-select-option"),_=o("a-select"),g=o("a-form-item"),f=o("a-col"),y=o("a-row"),k=o("a-checkbox"),v=o("a-checkbox-group"),C=o("a-form"),S=o("SaveOutlined"),U=o("a-drawer");return d(),E(R,null,[a(i,{type:"primary",onClick:e.openDrawer},{icon:n(()=>[a(m)]),default:n(()=>[p(" "+r(e.$t("company.shortcut_menu_setting")),1)]),_:1},8,["onClick"]),a(U,{title:e.$t("company.shortcut_menu_setting"),width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:n(()=>[a(i,{type:"primary",onClick:e.onSubmit,style:{"margin-right":"8px"},loading:e.loading},{icon:n(()=>[a(S)]),default:n(()=>[p(" "+r(e.$t("common.update")),1)]),_:1},8,["onClick","loading"]),a(i,{onClick:e.onClose},{default:n(()=>[p(r(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[a(C,{layout:"vertical"},{default:n(()=>[a(y,{gutter:16},{default:n(()=>[a(f,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(g,{label:e.$t("company.shortcut_menu_Placement"),name:"shortcut_menus",help:e.rules.shortcut_menus?e.rules.shortcut_menus.message:null,validateStatus:e.rules.shortcut_menus?"error":null,class:"required"},{default:n(()=>[a(_,{value:e.createMenuPosition,"onUpdate:value":s[0]||(s[0]=$=>e.createMenuPosition=$),placeholder:e.$t("common.select_default_text",[e.$t("company.shortcut_menu_Placement")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:n(()=>[a(c,{key:"top_bottom",value:"top_bottom"},{default:n(()=>[p(r(e.$t("company.top_and_bottom")),1)]),_:1}),a(c,{key:"top",value:"top"},{default:n(()=>[p(r(e.$t("company.top_header")),1)]),_:1}),a(c,{key:"bottom",value:"bottom"},{default:n(()=>[p(r(e.$t("company.bottom_corner")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(y,{gutter:16},{default:n(()=>[a(f,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(g,{label:e.$t("company.shortcut_menu_setting"),name:"shortcut_menus",help:e.rules.createMenus?e.rules.shortcut_menus.message:null,validateStatus:e.rules.shortcut_menus?"error":null},{default:n(()=>[a(v,{value:e.createMenus,"onUpdate:value":s[1]||(s[1]=$=>e.createMenus=$),style:{width:"100%"}},{default:n(()=>[a(y,{gutter:[16,10]},{default:n(()=>[a(f,{span:24},{default:n(()=>[a(k,{value:"staff_member"},{default:n(()=>[p(r(e.$t("topbar_add_button.add_staff_member")),1)]),_:1})]),_:1}),a(f,{span:24},{default:n(()=>[a(k,{value:"language"},{default:n(()=>[p(r(e.$t("topbar_add_button.add_language")),1)]),_:1})]),_:1}),a(f,{span:24},{default:n(()=>[a(k,{value:"role"},{default:n(()=>[p(r(e.$t("topbar_add_button.add_role")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])],64)}const fn=z(rc,[["render",uc]]),mc={components:{EyeOutlined:Be,PlusOutlined:ae,EditOutlined:ke,DeleteOutlined:pe,ExclamationCircleOutlined:ue,SaveOutlined:_e,SettingOutlined:ba,ColorPicker:Ft,CurrencyAddButton:cn,Upload:Ye,SettingSidebar:Ue,AdminPageHeader:me,CreateMenuSetting:fn,LanguageAddButton:ka},setup(){const{addEditRequestAdmin:e,loading:s,rules:u}=se(),{permsArray:l,appSetting:h,dayjsObject:b,appType:m}=Z(),{t:i}=Q(),c=he(),_=I({}),g=I([]),f="currencies?limit=10000",y=I([]),k=I([]),v=I([]),C=I([]),S=h.value,U="timezones",$="all-langs",O=I("linear-gradient(0deg, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 1) 100%)"),T=window.config.theme_mode;ee(()=>{const F=axiosAdmin.get(U),M=axiosAdmin.get(f),B=axiosAdmin.get($);Promise.all([F,M,B]).then(([J,Y,V])=>{k.value=J.data.timezones,v.value=J.data.date_formates,C.value=J.data.time_formates,g.value=Y.data,y.value=V.data.langs,D()})});const D=()=>{_.value={name:S.name,short_name:S.short_name,email:S.email,phone:S.phone,address:S.address,left_sidebar_theme:S.left_sidebar_theme,dark_logo:S.dark_logo,dark_logo_url:S.dark_logo_url,light_logo:S.light_logo,light_logo_url:S.light_logo_url,small_dark_logo:S.small_dark_logo,small_light_logo:S.small_light_logo,small_dark_logo_url:S.small_dark_logo_url,small_light_logo_url:S.small_light_logo_url,login_image:S.login_image,login_image_url:S.login_image_url,shortcut_menus:S.shortcut_menus,rtl:S.rtl,currency_id:S.x_currency_id,lang_id:S.x_lang_id,primary_color:S.primary_color,timezone:S.timezone,date_format:S.date_format,time_format:S.time_format,auto_detect_timezone:S.auto_detect_timezone,app_debug:S.app_debug,update_app_notification:S.update_app_notification,_method:"PUT"}};return{appType:m,permsArray:l,formData:_,loading:s,rules:u,onSubmit:()=>{e({url:`companies/${S.xid}`,data:_.value,successMessage:i("company.updated"),success:F=>{c.dispatch("auth/updateApp")}})},gradientColor:O,timezones:k,dateFormats:v,timeFormats:C,dayjsObject:b,appThemeMode:T,addMenuSettingUpdated:F=>{_.value.shortcut_menus=F},currencyAdded:()=>{axiosAdmin.get(f).then(F=>{g.value=F.data})},currencies:g,allLangs:y,languageAdded:()=>{axiosAdmin.get($).then(F=>{y.value=F.data.langs})}}}},cc={style:{display:"flex"}},pc={style:{display:"flex"}};function _c(e,s,u,l,h,b){const m=o("SaveOutlined"),i=o("a-button"),c=o("CreateMenuSetting"),_=o("a-space"),g=o("a-page-header"),f=o("router-link"),y=o("a-breadcrumb-item"),k=o("a-breadcrumb"),v=o("AdminPageHeader"),C=o("SettingSidebar"),S=o("a-col"),U=o("a-input"),$=o("a-form-item"),O=o("a-row"),T=o("a-textarea"),D=o("a-select-option"),L=o("a-select"),q=o("color-picker"),K=o("Upload"),j=o("CurrencyAddButton"),F=o("LanguageAddButton"),M=o("a-switch"),B=o("a-form"),J=o("a-card"),Y=o("admin-page-table-content");return d(),E(R,null,[a(v,null,{header:n(()=>[a(g,{title:e.$t("menu.company"),class:"p-0"},Ze({_:2},[l.permsArray.includes("companies_edit")||l.permsArray.includes("admin")?{name:"extra",fn:n(()=>[a(_,null,{default:n(()=>[a(i,{type:"primary",onClick:l.onSubmit},{icon:n(()=>[a(m)]),default:n(()=>[p(" "+r(e.$t("common.update")),1)]),_:1},8,["onClick"]),a(c,{onSuccess:l.addMenuSettingUpdated},null,8,["onSuccess"])]),_:1})]),key:"0"}:void 0]),1032,["title"])]),breadcrumb:n(()=>[a(k,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(y,null,{default:n(()=>[a(f,{to:{name:"admin.dashboard.index"}},{default:n(()=>[p(r(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(y,null,{default:n(()=>[p(r(e.$t("menu.settings")),1)]),_:1}),a(y,null,{default:n(()=>[p(r(e.$t("menu.company")),1)]),_:1})]),_:1})]),_:1}),a(O,null,{default:n(()=>[a(S,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:n(()=>[a(C)]),_:1}),a(S,{xs:24,sm:24,md:24,lg:20,xl:20},{default:n(()=>[a(Y,null,{default:n(()=>[a(J,{class:"page-content-container mt-20 mb-20"},{default:n(()=>[a(B,{layout:"vertical"},{default:n(()=>[a(O,{gutter:16},{default:n(()=>[a(S,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a($,{label:e.$t("company.name"),name:"name",help:l.rules.name?l.rules.name.message:null,validateStatus:l.rules.name?"error":null,class:"required"},{default:n(()=>[a(U,{value:l.formData.name,"onUpdate:value":s[0]||(s[0]=V=>l.formData.name=V),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(S,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a($,{label:e.$t("company.short_name"),name:"short_name",help:l.rules.short_name?l.rules.short_name.message:null,validateStatus:l.rules.short_name?"error":null,class:"required"},{default:n(()=>[a(U,{value:l.formData.short_name,"onUpdate:value":s[1]||(s[1]=V=>l.formData.short_name=V),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.short_name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(O,{gutter:16},{default:n(()=>[a(S,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a($,{label:e.$t("company.email"),name:"email",help:l.rules.email?l.rules.email.message:null,validateStatus:l.rules.email?"error":null,class:"required"},{default:n(()=>[a(U,{value:l.formData.email,"onUpdate:value":s[2]||(s[2]=V=>l.formData.email=V),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(S,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a($,{label:e.$t("company.phone"),name:"phone",help:l.rules.phone?l.rules.phone.message:null,validateStatus:l.rules.phone?"error":null,class:"required"},{default:n(()=>[a(U,{value:l.formData.phone,"onUpdate:value":s[3]||(s[3]=V=>l.formData.phone=V),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.phone")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(O,{gutter:16},{default:n(()=>[a(S,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a($,{label:e.$t("company.address"),name:"address",help:l.rules.address?l.rules.address.message:null,validateStatus:l.rules.address?"error":null},{default:n(()=>[a(T,{value:l.formData.address,"onUpdate:value":s[4]||(s[4]=V=>l.formData.address=V),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.address")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(O,{gutter:16},{default:n(()=>[a(S,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a($,{label:e.$t("company.left_sidebar_theme"),name:"left_sidebar_theme",help:l.rules.left_sidebar_theme?l.rules.left_sidebar_theme.message:null,validateStatus:l.rules.left_sidebar_theme?"error":null},{default:n(()=>[a(L,{value:l.formData.left_sidebar_theme,"onUpdate:value":s[5]||(s[5]=V=>l.formData.left_sidebar_theme=V),placeholder:e.$t("common.select_default_text",[e.$t("company.left_sidebar_theme")])},{default:n(()=>[a(D,{key:"dark",value:"dark"},{default:n(()=>[p(r(e.$t("company.dark")),1)]),_:1}),l.appThemeMode!="dark"?(d(),w(D,{key:"light",value:"light"},{default:n(()=>[p(r(e.$t("company.light")),1)]),_:1})):A("",!0)]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(S,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a($,{label:e.$t("company.primary_color"),name:"primary_color",help:l.rules.primary_color?l.rules.primary_color.message:null,validateStatus:l.rules.primary_color?"error":null},{default:n(()=>[a(q,{pureColor:l.formData.primary_color,"onUpdate:pureColor":s[6]||(s[6]=V=>l.formData.primary_color=V),format:"hex",useType:"pure",gradientColor:l.gradientColor,"onUpdate:gradientColor":s[7]||(s[7]=V=>l.gradientColor=V)},null,8,["pureColor","gradientColor"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(O,{gutter:16},{default:n(()=>[a(S,{xs:24,sm:24,md:6,lg:6},{default:n(()=>[a($,{label:e.$t("company.dark_logo"),name:"dark_logo",help:l.rules.dark_logo?l.rules.dark_logo.message:null,validateStatus:l.rules.dark_logo?"error":null},{default:n(()=>[a(K,{formData:l.formData,folder:"company",imageField:"dark_logo",onOnFileUploaded:s[8]||(s[8]=V=>{l.formData.dark_logo=V.file,l.formData.dark_logo_url=V.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(S,{xs:24,sm:24,md:6,lg:6},{default:n(()=>[a($,{label:e.$t("company.light_logo"),name:"light_logo",help:l.rules.light_logo?l.rules.light_logo.message:null,validateStatus:l.rules.light_logo?"error":null},{default:n(()=>[a(K,{formData:l.formData,folder:"company",imageField:"light_logo",onOnFileUploaded:s[9]||(s[9]=V=>{l.formData.light_logo=V.file,l.formData.light_logo_url=V.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(S,{xs:24,sm:24,md:6,lg:6},{default:n(()=>[a($,{label:e.$t("company.small_dark_logo"),name:"small_dark_logo",help:l.rules.small_dark_logo?l.rules.small_dark_logo.message:null,validateStatus:l.rules.small_dark_logo?"error":null},{default:n(()=>[a(K,{formData:l.formData,folder:"company",imageField:"small_dark_logo",onOnFileUploaded:s[10]||(s[10]=V=>{l.formData.small_dark_logo=V.file,l.formData.small_dark_logo_url=V.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(S,{xs:24,sm:24,md:6,lg:6},{default:n(()=>[a($,{label:e.$t("company.small_light_logo"),name:"small_light_logo",help:l.rules.small_light_logo?l.rules.small_light_logo.message:null,validateStatus:l.rules.small_light_logo?"error":null},{default:n(()=>[a(K,{formData:l.formData,folder:"company",imageField:"small_light_logo",onOnFileUploaded:s[11]||(s[11]=V=>{l.formData.small_light_logo=V.file,l.formData.small_light_logo_url=V.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(O,{gutter:16},{default:n(()=>[a(S,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a($,{label:e.$t("company.currency"),name:"currency_id",help:l.rules.currency_id?l.rules.currency_id.message:null,validateStatus:l.rules.currency_id?"error":null,class:"required"},{default:n(()=>[P("span",cc,[a(L,{value:l.formData.currency_id,"onUpdate:value":s[12]||(s[12]=V=>l.formData.currency_id=V),placeholder:e.$t("common.select_default_text",[e.$t("company.currency")]),optionFilterProp:"label","show-search":""},{default:n(()=>[(d(!0),E(R,null,X(l.currencies,V=>(d(),w(D,{key:V.xid,value:V.xid},{default:n(()=>[p(r(`${V.name} (${V.symbol})`),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),a(j,{onOnAddSuccess:l.currencyAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(S,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a($,{label:e.$t("company.language"),name:"lang_id",help:l.rules.lang_id?l.rules.lang_id.message:null,validateStatus:l.rules.lang_id?"error":null,class:"required"},{default:n(()=>[P("span",pc,[a(L,{value:l.formData.lang_id,"onUpdate:value":s[13]||(s[13]=V=>l.formData.lang_id=V),placeholder:e.$t("common.select_default_text",[e.$t("company.language")]),optionFilterProp:"label","show-search":""},{default:n(()=>[(d(!0),E(R,null,X(l.allLangs,V=>(d(),w(D,{key:V.xid,value:V.xid},{default:n(()=>[p(r(V.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),a(F,{onOnAddSuccess:l.languageAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(O,{gutter:16},{default:n(()=>[a(S,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a($,{label:e.$t("company.layout"),name:"rtl",help:l.rules.rtl?l.rules.rtl.message:null,validateStatus:l.rules.rtl?"error":null,class:"required"},{default:n(()=>[a(L,{value:l.formData.rtl,"onUpdate:value":s[14]||(s[14]=V=>l.formData.rtl=V),placeholder:e.$t("common.select_default_text",[e.$t("company.layout")]),optionFilterProp:"label","show-search":""},{default:n(()=>[a(D,{key:"rtl",value:1},{default:n(()=>[p(r(e.$t("company.rtl")),1)]),_:1}),a(D,{key:"ltr",value:0},{default:n(()=>[p(r(e.$t("company.ltr")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(S,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a($,{label:e.$t("company.shortcut_menu_Placement"),name:"shortcut_menus",help:l.rules.shortcut_menus?l.rules.shortcut_menus.message:null,validateStatus:l.rules.shortcut_menus?"error":null,class:"required"},{default:n(()=>[a(L,{value:l.formData.shortcut_menus,"onUpdate:value":s[15]||(s[15]=V=>l.formData.shortcut_menus=V),placeholder:e.$t("common.select_default_text",[e.$t("company.shortcut_menu_Placement")]),optionFilterProp:"label","show-search":""},{default:n(()=>[a(D,{key:"top_bottom",value:"top_bottom"},{default:n(()=>[p(r(e.$t("company.top_and_bottom")),1)]),_:1}),a(D,{key:"top",value:"top"},{default:n(()=>[p(r(e.$t("company.top_header")),1)]),_:1}),a(D,{key:"bottom",value:"bottom"},{default:n(()=>[p(r(e.$t("company.bottom_corner")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(O,{gutter:16},{default:n(()=>[a(S,{xs:24,sm:24,md:4,lg:4},{default:n(()=>[a($,{label:e.$t("company.auto_detect_timezone"),name:"auto_detect_timezone",help:l.rules.auto_detect_timezone?l.rules.auto_detect_timezone.message:null,validateStatus:l.rules.auto_detect_timezone?"error":null},{default:n(()=>[a(M,{checked:l.formData.auto_detect_timezone,"onUpdate:checked":s[16]||(s[16]=V=>l.formData.auto_detect_timezone=V),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(S,{xs:24,sm:24,md:8,lg:8},{default:n(()=>[a($,{label:e.$t("company.default_timezone"),name:"timezone",help:l.rules.timezone?l.rules.timezone.message:null,validateStatus:l.rules.timezone?"error":null,class:"required"},{default:n(()=>[a(L,{value:l.formData.timezone,"onUpdate:value":s[17]||(s[17]=V=>l.formData.timezone=V),placeholder:e.$t("common.select_default_text",[e.$t("company.default_timezone")]),optionFilterProp:"value","show-search":""},{default:n(()=>[(d(!0),E(R,null,X(l.timezones,(V,W)=>(d(),w(D,{key:W,value:V},{default:n(()=>[p(r(V),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l.appType=="non-saas"?(d(),w(S,{key:0,xs:24,sm:24,md:4,lg:4},{default:n(()=>[a($,{label:e.$t("company.app_debug"),name:"app_debug",help:l.rules.app_debug?l.rules.app_debug.message:null,validateStatus:l.rules.app_debug?"error":null},{default:n(()=>[a(M,{checked:l.formData.app_debug,"onUpdate:checked":s[18]||(s[18]=V=>l.formData.app_debug=V),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1})):A("",!0),l.appType=="non-saas"?(d(),w(S,{key:1,xs:24,sm:24,md:4,lg:4},{default:n(()=>[a($,{label:e.$t("company.update_app_notification"),name:"update_app_notification",help:l.rules.update_app_notification?l.rules.update_app_notification.message:null,validateStatus:l.rules.update_app_notification?"error":null},{default:n(()=>[a(M,{checked:l.formData.update_app_notification,"onUpdate:checked":s[19]||(s[19]=V=>l.formData.update_app_notification=V),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1})):A("",!0)]),_:1}),a(O,{gutter:16},{default:n(()=>[a(S,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a($,{label:e.$t("company.date_format"),name:"date_format",help:l.rules.date_format?l.rules.date_format.message:null,validateStatus:l.rules.date_format?"error":null,class:"required"},{default:n(()=>[a(L,{value:l.formData.date_format,"onUpdate:value":s[20]||(s[20]=V=>l.formData.date_format=V),placeholder:e.$t("common.select_default_text",[e.$t("company.date_format")]),optionFilterProp:"value","show-search":""},{default:n(()=>[(d(!0),E(R,null,X(l.dateFormats,(V,W)=>(d(),w(D,{key:W,value:V},{default:n(()=>[p(r(`(${W}) => `+l.dayjsObject().format(V)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(S,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a($,{label:e.$t("company.time_format"),name:"time_format",help:l.rules.time_format?l.rules.time_format.message:null,validateStatus:l.rules.time_format?"error":null,class:"required"},{default:n(()=>[a(L,{value:l.formData.time_format,"onUpdate:value":s[21]||(s[21]=V=>l.formData.time_format=V),placeholder:e.$t("common.select_default_text",[e.$t("company.time_format")]),optionFilterProp:"value","show-search":""},{default:n(()=>[(d(!0),E(R,null,X(l.timeFormats,(V,W)=>(d(),w(D,{key:W,value:W},{default:n(()=>[p(r(`(${V}) => `+l.dayjsObject().format(W)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l.appType=="non-saas"?(d(),w(O,{key:0,gutter:16},{default:n(()=>[a(S,{xs:24,sm:24,md:6,lg:6},{default:n(()=>[a($,{label:e.$t("company.login_image"),name:"login_image",help:l.rules.login_image?l.rules.login_image.message:null,validateStatus:l.rules.login_image?"error":null},{default:n(()=>[a(K,{formData:l.formData,folder:"company",imageField:"login_image",onOnFileUploaded:s[22]||(s[22]=V=>{l.formData.login_image=V.file,l.formData.login_image_url=V.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})):A("",!0),a(O,{gutter:16},{default:n(()=>[a(S,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a($,null,{default:n(()=>[a(i,{type:"primary",onClick:l.onSubmit,loading:l.loading},{icon:n(()=>[a(m)]),default:n(()=>[p(" "+r(e.$t("common.update")),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const fc=z(mc,[["render",_c]]),gc={components:{EyeOutlined:Be,PlusOutlined:ae,EditOutlined:ke,DeleteOutlined:pe,ExclamationCircleOutlined:ue,SaveOutlined:_e,Upload:Ye,SettingSidebar:Ue,AdminPageHeader:me},setup(){const{addEditRequestAdmin:e,loading:s,rules:u}=se(),{t:l}=Q(),h=he(),b=I({}),m=I({}),i=h.state.auth.user;return ee(()=>{b.value={name:i.name,email:i.email,password:"",phone:i.phone,profile_image:i.profile_image,profile_image_url:i.profile_image_url}}),{loading:s,rules:u,formData:b,currencies:m,onSubmit:()=>{e({url:"profile",data:b.value,successMessage:l("user.profile_updated"),success:_=>{h.commit("auth/updateUser",_.user)}})}}}},hc={class:"small-text-message"};function bc(e,s,u,l,h,b){const m=o("SaveOutlined"),i=o("a-button"),c=o("a-page-header"),_=o("router-link"),g=o("a-breadcrumb-item"),f=o("a-breadcrumb"),y=o("AdminPageHeader"),k=o("SettingSidebar"),v=o("a-col"),C=o("a-input"),S=o("a-form-item"),U=o("a-row"),$=o("Upload"),O=o("a-textarea"),T=o("a-form"),D=o("a-card"),L=o("admin-page-table-content");return d(),E(R,null,[a(y,null,{header:n(()=>[a(c,{title:e.$t("menu.profile"),class:"p-0"},{extra:n(()=>[a(i,{type:"primary",onClick:l.onSubmit},{icon:n(()=>[a(m)]),default:n(()=>[p(" "+r(e.$t("common.update")),1)]),_:1},8,["onClick"])]),_:1},8,["title"])]),breadcrumb:n(()=>[a(f,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(g,null,{default:n(()=>[a(_,{to:{name:"admin.dashboard.index"}},{default:n(()=>[p(r(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(g,null,{default:n(()=>[p(r(e.$t("menu.settings")),1)]),_:1}),a(g,null,{default:n(()=>[p(r(e.$t("menu.profile")),1)]),_:1})]),_:1})]),_:1}),a(U,null,{default:n(()=>[a(v,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:n(()=>[a(k)]),_:1}),a(v,{xs:24,sm:24,md:24,lg:20,xl:20},{default:n(()=>[a(L,null,{default:n(()=>[a(D,{class:"page-content-container mt-20 mb-20"},{default:n(()=>[a(T,{layout:"vertical"},{default:n(()=>[a(U,{gutter:16},{default:n(()=>[a(v,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(S,{label:e.$t("user.name"),name:"name",help:l.rules.name?l.rules.name.message:null,validateStatus:l.rules.name?"error":null,class:"required"},{default:n(()=>[a(C,{value:l.formData.name,"onUpdate:value":s[0]||(s[0]=q=>l.formData.name=q),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(v,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(S,{label:e.$t("user.email"),name:"email",help:l.rules.email?l.rules.email.message:null,validateStatus:l.rules.email?"error":null,class:"required"},{default:n(()=>[a(C,{value:l.formData.email,placeholder:e.$t("common.placeholder_default_text",[e.$t("user.email")]),disabled:""},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(U,{gutter:16},{default:n(()=>[a(v,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(S,{label:e.$t("user.password"),name:"password",help:l.rules.password?l.rules.password.message:null,validateStatus:l.rules.password?"error":null},{default:n(()=>[a(C,{value:l.formData.password,"onUpdate:value":s[1]||(s[1]=q=>l.formData.password=q),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.password")]),type:"password",autocomplete:"off"},null,8,["value","placeholder"]),P("small",hc,r(e.$t("user.password_blank")),1)]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(U,{gutter:16},{default:n(()=>[a(v,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(S,{label:e.$t("user.phone"),name:"phone",help:l.rules.phone?l.rules.phone.message:null,validateStatus:l.rules.phone?"error":null},{default:n(()=>[a(C,{value:l.formData.phone,"onUpdate:value":s[2]||(s[2]=q=>l.formData.phone=q),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.phone")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(U,{gutter:16},{default:n(()=>[a(v,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(S,{label:e.$t("user.profile_image"),name:"profile_image",help:l.rules.profile_image?l.rules.profile_image.message:null,validateStatus:l.rules.profile_image?"error":null},{default:n(()=>[a($,{formData:l.formData,folder:"user",imageField:"profile_image",onOnFileUploaded:s[3]||(s[3]=q=>{l.formData.profile_image=q.file,l.formData.profile_image_url=q.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(U,{gutter:16},{default:n(()=>[a(v,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(S,{label:e.$t("user.address"),name:"address",help:l.rules.address?l.rules.address.message:null,validateStatus:l.rules.address?"error":null},{default:n(()=>[a(O,{value:l.formData.address,"onUpdate:value":s[4]||(s[4]=q=>l.formData.address=q),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.address")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(U,{gutter:16},{default:n(()=>[a(v,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(S,null,{default:n(()=>[a(i,{type:"primary",onClick:l.onSubmit,loading:l.loading},{icon:n(()=>[a(m)]),default:n(()=>[p(" "+r(e.$t("common.update")),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const yc=z(gc,[["render",bc]]),vc={props:{panelType:{type:String,default:"admin"}},components:{EditOutlined:ke,DeleteOutlined:pe,AddEdit:_n,DownloadOutlined:_a},setup(){const{addEditRequestAdmin:e,loading:s}=se(),{permsArray:u,downloadLangCsvUrl:l}=Z(),{url:h,addEditUrl:b,initData:m,columns:i,filterableColumns:c}=pn(),_=Te(),{t:g}=Q();return ee(()=>{_.tableUrl.value={url:h},_.table.filterableColumns=c,_.fetch({page:1}),_.crudUrl.value=b,_.langKey.value="langs",_.initData.value={...m},_.formData.value={...m}}),{permsArray:u,downloadLangCsvUrl:l,columns:i,..._,filterableColumns:c,changeLangStatus:y=>{e({url:fe(`langs/${y.xid}`),data:{name:y.name,key:y.key,enabled:y.enabled,_method:"PUT"},successMessage:g("langs.status_updated"),success:k=>{}})},loading:s}}},kc={class:"table-responsive"};function wc(e,s,u,l,h,b){const m=o("DeleteOutlined"),i=o("a-button"),c=o("a-space"),_=o("a-col"),g=o("a-select-option"),f=o("a-select"),y=o("a-input-search"),k=o("a-input-group"),v=o("a-row"),C=o("admin-page-filters"),S=o("AddEdit"),U=o("a-avatar"),$=o("a-list-item-meta"),O=o("a-list-item"),T=o("a-switch"),D=o("EditOutlined"),L=o("DownloadOutlined"),q=o("a-typography-link"),K=o("a-table"),j=o("admin-page-table-content");return d(),E(R,null,[a(C,null,{default:n(()=>[a(v,{gutter:[16,16]},{default:n(()=>[a(_,{xs:24,sm:24,md:12,lg:10,xl:10},{default:n(()=>[a(c,null,{default:n(()=>[oe(e.$slots,"actionButtons"),e.table.selectedRowKeys.length>0&&(l.permsArray.includes("translations_edit")||l.permsArray.includes("admin"))?(d(),w(i,{key:0,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:n(()=>[a(m)]),default:n(()=>[p(" "+r(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:3})]),_:3}),a(_,{xs:24,sm:24,md:12,lg:14,xl:14},{default:n(()=>[a(v,{gutter:[16,16],justify:"end"},{default:n(()=>[a(_,{xs:24,sm:24,md:16,lg:12,xl:10},{default:n(()=>[a(k,{compact:""},{default:n(()=>[a(f,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=F=>e.table.searchColumn=F),placeholder:e.$t("common.select_default_text",[""])},{default:n(()=>[(d(!0),E(R,null,X(l.filterableColumns,F=>(d(),w(g,{key:F.key},{default:n(()=>[p(r(F.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),a(y,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=F=>e.table.searchString=F),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:3})]),_:3}),a(j,null,{default:n(()=>[a(S,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),a(v,null,{default:n(()=>[a(_,{span:24},{default:n(()=>[P("div",kc,[a(K,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:F=>({disabled:!((u.panelType=="admin"&&(l.permsArray.includes("translations_delete")||l.permsArray.includes("admin"))||u.panelType=="superadmin")&&F.key!="en"),name:F.xid})},columns:l.columns,"row-key":F=>F.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading||l.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:n(({column:F,record:M})=>[F.dataIndex==="name"?(d(),w(O,{key:0},{default:n(()=>[a($,null,{title:n(()=>[p(r(M.name),1)]),avatar:n(()=>[a(U,{shape:"square",size:"small",src:M.image_url},null,8,["src"])]),_:2},1024)]),_:2},1024)):A("",!0),F.dataIndex==="enabled"?(d(),w(T,{key:1,checked:M.enabled,"onUpdate:checked":B=>M.enabled=B,checkedValue:1,unCheckedValue:0,onChange:B=>l.changeLangStatus(M),size:"small",disabled:u.panelType=="admin"&&!(l.permsArray.includes("translations_edit")||l.permsArray.includes("admin"))||M.key=="en"},null,8,["checked","onUpdate:checked","onChange","disabled"])):A("",!0),F.dataIndex==="action"?(d(),E(R,{key:2},[(u.panelType=="admin"&&(l.permsArray.includes("translations_edit")||l.permsArray.includes("admin"))||u.panelType=="superadmin")&&M.key!="en"?(d(),w(i,{key:0,type:"primary",onClick:B=>e.editItem(M),style:{"margin-left":"4px"}},{icon:n(()=>[a(D)]),_:2},1032,["onClick"])):A("",!0),(u.panelType=="admin"&&(l.permsArray.includes("translations_delete")||l.permsArray.includes("admin"))||u.panelType=="superadmin")&&M.key!="en"?(d(),w(i,{key:1,type:"primary",onClick:B=>e.showDeleteConfirm(M.xid),style:{"margin-left":"4px"}},{icon:n(()=>[a(m)]),_:2},1032,["onClick"])):A("",!0),a(q,{href:`${l.downloadLangCsvUrl}/${M.xid}`,target:"_blank"},{default:n(()=>[a(i,{type:"primary",style:{"margin-left":"4px"}},{icon:n(()=>[a(L)]),_:1})]),_:2},1032,["href"])],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const Cc=z(vc,[["render",wc]]),Sc={components:{PlusOutlined:ae,SettingSidebar:Ue,AdminPageHeader:me,LanguageSettings:Cc,ImportTranslation:va},setup(){const{permsArray:e,appType:s}=Z(),u=I(null),l=window.config.translatioins_sample_file;return{permsArray:e,appType:s,langSettingRef:u,addItem:()=>{u.value.addItem()},sampleFileUrl:l}}};function $c(e,s,u,l,h,b){const m=o("ImportTranslation"),i=o("PlusOutlined"),c=o("a-button"),_=o("a-space"),g=o("a-page-header"),f=o("router-link"),y=o("a-breadcrumb-item"),k=o("a-breadcrumb"),v=o("AdminPageHeader"),C=o("SettingSidebar"),S=o("a-col"),U=o("LanguageSettings"),$=o("a-row");return d(),E(R,null,[a(v,null,{header:n(()=>[a(g,{title:e.$t("menu.languages"),onBack:s[0]||(s[0]=()=>e.$router.push({name:"admin.settings.translations.index"})),class:"p-0"},Ze({_:2},[l.permsArray.includes("translations_create")||l.permsArray.includes("admin")?{name:"extra",fn:n(()=>[a(_,null,{default:n(()=>[l.appType=="non-saas"?(d(),w(m,{key:0,pageTitle:e.$t("translations.import_translations"),sampleFileUrl:l.sampleFileUrl,importUrl:"translations/import"},null,8,["pageTitle","sampleFileUrl"])):A("",!0),a(c,{type:"primary",onClick:l.addItem},{default:n(()=>[a(i),p(" "+r(e.$t("langs.add")),1)]),_:1},8,["onClick"])]),_:1})]),key:"0"}:void 0]),1032,["title"])]),breadcrumb:n(()=>[a(k,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(y,null,{default:n(()=>[a(f,{to:{name:"admin.dashboard.index"}},{default:n(()=>[p(r(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(y,null,{default:n(()=>[p(r(e.$t("menu.settings")),1)]),_:1}),a(y,null,{default:n(()=>[a(f,{to:{name:"admin.settings.translations.index"}},{default:n(()=>[p(r(e.$t("menu.translations")),1)]),_:1},8,["to"])]),_:1}),a(y,null,{default:n(()=>[p(r(e.$t("menu.languages")),1)]),_:1})]),_:1})]),_:1}),a($,null,{default:n(()=>[a(S,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:n(()=>[a(C)]),_:1}),a(S,{xs:24,sm:24,md:24,lg:20,xl:20},{default:n(()=>[a(U,{ref:"langSettingRef"},{actionButtons:n(()=>[l.permsArray.includes("translations_create")||l.permsArray.includes("admin")?(d(),w(_,{key:0},{default:n(()=>[a(c,{type:"primary",onClick:l.addItem},{default:n(()=>[a(i),p(" "+r(e.$t("langs.add")),1)]),_:1},8,["onClick"]),l.appType=="non-saas"?(d(),w(m,{key:0,pageTitle:e.$t("translations.import_translations"),sampleFileUrl:l.sampleFileUrl,importUrl:"translations/import"},null,8,["pageTitle","sampleFileUrl"])):A("",!0)]),_:1})):A("",!0)]),_:1},512)]),_:1})]),_:1})],64)}const Dc=z(Sc,[["render",$c]]);const Ac={components:{PlusOutlined:ae,EditOutlined:ke,DeleteOutlined:pe,AddEdit:Nt,SettingSidebar:Ue,AdminPageHeader:me},setup(){const{permsArray:e}=Z(),{url:s,addEditUrl:u,initData:l,columns:h,filterableColumns:b,preFetchData:m,getPreFetchData:i}=jt(),c=Te();return ee(()=>{i(),c.tableUrl.value={url:s,filters:""},c.table.filterableColumns=b,c.fetch({page:1}),c.crudUrl.value=u,c.langKey.value="role",c.initData.value={...l},c.formData.value={...l}}),{permsArray:e,columns:h,...c,filterableColumns:b,preFetchData:m}}},Tc={class:"table-responsive"};function Ec(e,s,u,l,h,b){const m=o("a-page-header"),i=o("router-link"),c=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("SettingSidebar"),y=o("a-col"),k=o("PlusOutlined"),v=o("a-button"),C=o("DeleteOutlined"),S=o("a-space"),U=o("a-row"),$=o("admin-page-filters"),O=o("AddEdit"),T=o("EditOutlined"),D=o("a-table"),L=o("admin-page-table-content");return d(),E(R,null,[a(g,null,{header:n(()=>[a(m,{title:e.$t("menu.roles"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(c,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[p(r(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(c,null,{default:n(()=>[p(r(e.$t("menu.settings")),1)]),_:1}),a(c,null,{default:n(()=>[p(r(e.$t("menu.roles")),1)]),_:1})]),_:1})]),_:1}),a(U,null,{default:n(()=>[a(y,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:n(()=>[a(f)]),_:1}),a(y,{xs:24,sm:24,md:24,lg:20,xl:20},{default:n(()=>[a($,null,{default:n(()=>[a(U,{gutter:[16,16]},{default:n(()=>[a(y,{xs:24,sm:24,md:12,lg:10,xl:10},{default:n(()=>[a(S,null,{default:n(()=>[l.permsArray.includes("roles_create")||l.permsArray.includes("admin")?(d(),w(v,{key:0,type:"primary",onClick:e.addItem},{default:n(()=>[a(k),p(" "+r(e.$t("role.add")),1)]),_:1},8,["onClick"])):A("",!0),e.table.selectedRowKeys.length>0&&(l.permsArray.includes("roles_delete")||l.permsArray.includes("admin"))?(d(),w(v,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:n(()=>[a(C)]),default:n(()=>[p(" "+r(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),a(L,null,{default:n(()=>[a(O,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),a(U,null,{default:n(()=>[a(y,{span:24},{default:n(()=>[P("div",Tc,[a(D,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:q=>({disabled:!((l.permsArray.includes("roles_delete")||l.permsArray.includes("admin"))&&q.name!="admin"),name:q.xid})},columns:l.columns,"row-key":q=>q.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:n(({column:q,record:K})=>[q.dataIndex==="action"?(d(),E(R,{key:0},[(l.permsArray.includes("roles_edit")||l.permsArray.includes("admin"))&&K.name!="admin"?(d(),w(v,{key:0,type:"primary",onClick:j=>e.editItem(K),style:{"margin-left":"4px"}},{icon:n(()=>[a(T)]),_:2},1032,["onClick"])):A("",!0),(l.permsArray.includes("roles_delete")||l.permsArray.includes("admin"))&&K.name!="admin"?(d(),w(v,{key:1,type:"primary",onClick:j=>e.showDeleteConfirm(K.xid),style:{"margin-left":"4px"}},{icon:n(()=>[a(C)]),_:2},1032,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const Oc=z(Ac,[["render",Ec]]),Uc={props:{panelType:{type:String,default:"admin"}},components:{EditOutlined:ke,DeleteOutlined:pe,AddEdit:Ka},setup(e){const{permsArray:s,appSetting:u}=Z(),{url:l,addEditUrl:h,initData:b,columns:m,filterableColumns:i}=Ba(e.panelType),c=Te();return ee(()=>{c.tableUrl.value={url:l},c.table.filterableColumns=i,c.fetch({page:1}),c.crudUrl.value=h,c.langKey.value="currency",c.initData.value={...b},c.formData.value={...b}}),{permsArray:s,appSetting:u,columns:m,...c,filterableColumns:i}}},Pc={class:"table-responsive"};function Ic(e,s,u,l,h,b){const m=o("DeleteOutlined"),i=o("a-button"),c=o("a-space"),_=o("a-col"),g=o("a-select-option"),f=o("a-select"),y=o("a-input-search"),k=o("a-input-group"),v=o("a-row"),C=o("admin-page-filters"),S=o("AddEdit"),U=o("EditOutlined"),$=o("a-table"),O=o("admin-page-table-content");return d(),E(R,null,[a(C,null,{default:n(()=>[a(v,{gutter:[16,16]},{default:n(()=>[a(_,{xs:24,sm:24,md:12,lg:10,xl:10},{default:n(()=>[a(c,null,{default:n(()=>[oe(e.$slots,"actionButtons"),e.table.selectedRowKeys.length>0&&(l.permsArray.includes("currencies_delete")||l.permsArray.includes("admin"))?(d(),w(i,{key:0,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:n(()=>[a(m)]),default:n(()=>[p(" "+r(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:3})]),_:3}),a(_,{xs:24,sm:24,md:12,lg:14,xl:14},{default:n(()=>[a(v,{gutter:[16,16],justify:"end"},{default:n(()=>[a(_,{xs:24,sm:24,md:16,lg:12,xl:10},{default:n(()=>[a(k,{compact:""},{default:n(()=>[a(f,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=T=>e.table.searchColumn=T),placeholder:e.$t("common.select_default_text",[""])},{default:n(()=>[(d(!0),E(R,null,X(l.filterableColumns,T=>(d(),w(g,{key:T.key},{default:n(()=>[p(r(T.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),a(y,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=T=>e.table.searchString=T),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:3})]),_:3}),a(O,null,{default:n(()=>[a(S,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),a(v,null,{default:n(()=>[a(_,{span:24},{default:n(()=>[P("div",Pc,[a($,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:T=>({disabled:!((u.panelType=="admin"&&(l.permsArray.includes("currencies_delete")||l.permsArray.includes("admin"))||u.panelType=="superadmin")&&l.appSetting.x_currency_id!=T.xid),name:T.xid})},columns:l.columns,"row-key":T=>T.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:n(({column:T,record:D})=>[T.dataIndex==="action"?(d(),E(R,{key:0},[u.panelType=="admin"&&(l.permsArray.includes("currencies_edit")||l.permsArray.includes("admin"))||u.panelType=="superadmin"?(d(),w(i,{key:0,type:"primary",onClick:L=>e.editItem(D),style:{"margin-left":"4px"}},{icon:n(()=>[a(U)]),_:2},1032,["onClick"])):A("",!0),(u.panelType=="admin"&&(l.permsArray.includes("currencies_delete")||l.permsArray.includes("admin"))||u.panelType=="superadmin")&&l.appSetting.x_currency_id!=D.xid?(d(),w(i,{key:1,type:"primary",onClick:L=>e.showDeleteConfirm(D.xid),style:{"margin-left":"4px"}},{icon:n(()=>[a(m)]),_:2},1032,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const Mc=z(Uc,[["render",Ic]]),Fc={components:{PlusOutlined:ae,SettingSidebar:Ue,AdminPageHeader:me,CurrencySettings:Mc},setup(){const{permsArray:e}=Z(),s=I(null);return{permsArray:e,currencySettingRef:s,addItem:()=>{s.value.addItem()}}}};function Rc(e,s,u,l,h,b){const m=o("PlusOutlined"),i=o("a-button"),c=o("a-page-header"),_=o("router-link"),g=o("a-breadcrumb-item"),f=o("a-breadcrumb"),y=o("AdminPageHeader"),k=o("SettingSidebar"),v=o("a-col"),C=o("CurrencySettings"),S=o("a-row");return d(),E(R,null,[a(y,null,{header:n(()=>[a(c,{title:e.$t("menu.currencies"),class:"p-0"},Ze({_:2},[l.permsArray.includes("currencies_create")||l.permsArray.includes("admin")?{name:"extra",fn:n(()=>[a(i,{type:"primary",onClick:l.addItem},{default:n(()=>[a(m),p(" "+r(e.$t("currency.add")),1)]),_:1},8,["onClick"])]),key:"0"}:void 0]),1032,["title"])]),breadcrumb:n(()=>[a(f,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(g,null,{default:n(()=>[a(_,{to:{name:"admin.dashboard.index"}},{default:n(()=>[p(r(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(g,null,{default:n(()=>[p(r(e.$t("menu.settings")),1)]),_:1}),a(g,null,{default:n(()=>[p(r(e.$t("menu.currencies")),1)]),_:1})]),_:1})]),_:1}),a(S,null,{default:n(()=>[a(v,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:n(()=>[a(k)]),_:1}),a(v,{xs:24,sm:24,md:24,lg:20,xl:20},{default:n(()=>[a(C,{ref:"currencySettingRef"},{actionButtons:n(()=>[l.permsArray.includes("currencies_create")||l.permsArray.includes("admin")?(d(),w(i,{key:0,type:"primary",onClick:l.addItem},{default:n(()=>[a(m),p(" "+r(e.$t("currency.add")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1},512)]),_:1})]),_:1})],64)}const Lc=z(Fc,[["render",Rc]]),qc=x({emits:["fetchTranslationsSuccesss"],components:{SyncOutlined:We},setup(e,{emit:s}){const{addEditRequestAdmin:u,loading:l}=se(),{t:h}=Q();return{loading:l,refetchTranslations:()=>{u({url:fe("translations/refetch"),data:{},successMessage:h("translations.fetched_successfully"),success:m=>{s("fetchTranslationsSuccesss")}})}}}});function Bc(e,s,u,l,h,b){const m=o("SyncOutlined"),i=o("a-button");return d(),w(i,{onClick:e.refetchTranslations,loading:e.loading},{icon:n(()=>[a(m)]),default:n(()=>[p(" "+r(e.$t("translations.fetch_new_translations")),1)]),_:1},8,["onClick","loading"])}const Kc=z(qc,[["render",Bc]]);function zc(e={locale:"en",warnHtmlMessage:!1}){const s=ol(e);return Vc(s,e.locale),s}function Vc(e,s){e.mode==="legacy"?e.global.locale=s:e.global.locale.value=s,document.querySelector("html").setAttribute("lang",s)}async function Hc(e,s){const u=await axiosBase.get("lang-trans");gn(u,e,s)}function gn(e,s,u){const l={};return e.data.data.map(h=>{l[h.key]={},h.translations.map(b=>{l[h.key][b.group]==null&&(l[h.key][b.group]={}),l[h.key][b.group][b.key]=b.value})}),s.global.setLocaleMessage(u,l[u]),Pt()}const jc={components:{FetchNewTranslation:Kc,LangAddButton:ka,EditOutlined:ke,CheckOutlined:ia},setup(){const{permsArray:e}=Z(),s=I([]),u=I([]),l=I([]),h=I(void 0),b=I([]),m=he(),i=ve(()=>m.state.auth.lang),c=Ie({data:[]}),_=Ie({}),g=I(0),f=(U,$)=>{_[U[`${$}_id`]]={id:U[`${$}_id`],value:U[$]}},y=U=>{axiosAdmin.post(fe(`translations/${U}`),{value:_[U].value,_method:"PUT"}).then(()=>{C(),delete _[U]})};var k={};const v=()=>{const U=[{title:"Group",key:"group",dataIndex:"group",fixed:"left"}],$=[];s.value.map(L=>{U.push({title:L.name,key:L.key,dataIndex:L.key}),$.push({key:L.key})}),l.value=$,u.value=U;const O=[];s.value.map(L=>{k[L.key]={},L.translations.map(q=>{k[L.key][q.group]==null&&(k[L.key][q.group]={},L.key=="en"&&O.push(q.group)),k[L.key][q.group][q.key]={id:q.xid,value:q.value}})}),h.value===void 0&&(h.value=O[0]);const T=k.en[h.value],D=[];Object.keys(T).forEach(L=>{const q={};U.map(K=>{K.key=="group"?q[K.key]=L:(q[K.key]=k[K.key][h.value][L]&&k[K.key][h.value][L].value?k[K.key][h.value][L].value:"",q[`${K.key}_id`]=k[K.key][h.value][L]&&k[K.key][h.value][L].id?k[K.key][h.value][L].id:"")}),D.push(q)}),b.value=O,c.data=D};ee(()=>{C()});const C=()=>{axiosAdmin.get("lang-trans").then(U=>{s.value=U.data.data,gn(U,i18n,i.value),v()})};return{columns:u,table:c,editableData:_,activeTab:g,langKeys:l,group:h,groupKeys:b,getData:C,edit:f,save:y,permsArray:e,langAdded:()=>{C()}}}},Nc={key:0,class:"editable-cell"},Wc={key:0,class:"editable-cell-input-wrapper"},Gc={key:1,class:"editable-cell-text-wrapper"};function Yc(e,s,u,l,h,b){const m=o("a-col"),i=o("a-select-option"),c=o("a-select"),_=o("FetchNewTranslation"),g=o("a-row"),f=o("admin-page-filters"),y=o("a-input"),k=o("check-outlined"),v=o("edit-outlined"),C=o("a-table"),S=o("admin-page-table-content");return d(),E(R,null,[a(f,null,{default:n(()=>[a(g,{gutter:[16,16]},{default:n(()=>[a(m,{xs:24,sm:24,md:12,lg:10,xl:12},{default:n(()=>[oe(e.$slots,"actionButtons")]),_:3}),a(m,{xs:24,sm:24,md:12,lg:14,xl:12},{default:n(()=>[a(g,{gutter:[16,16],justify:"end"},{default:n(()=>[a(m,{xs:24,sm:24,md:12,lg:12,xl:8},{default:n(()=>[a(c,{value:l.group,"onUpdate:value":s[0]||(s[0]=U=>l.group=U),"show-search":"",placeholder:"Select group...",style:{width:"100%"},onChange:l.getData},{default:n(()=>[(d(!0),E(R,null,X(l.groupKeys,U=>(d(),w(i,{key:U,value:U},{default:n(()=>[p(r(U),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","onChange"])]),_:1}),a(m,{xs:24,sm:24,md:12,lg:12,xl:8},{default:n(()=>[a(_,{onFetchTranslationsSuccesss:l.getData},null,8,["onFetchTranslationsSuccesss"])]),_:1})]),_:1})]),_:1})]),_:3})]),_:3}),a(S,null,{default:n(()=>[a(C,{columns:l.columns,"row-key":U=>U.group,"data-source":l.table.data,pagination:!1,bordered:"",size:"middle"},{bodyCell:n(({column:U,text:$,record:O})=>[(d(!0),E(R,null,X(l.langKeys,T=>(d(),E(R,{key:T},[U.dataIndex===T.key?(d(),E("div",Nc,[l.editableData[O[`${T.key}_id`]]?(d(),E("div",Wc,[a(y,{value:l.editableData[O[`${T.key}_id`]].value,"onUpdate:value":D=>l.editableData[O[`${T.key}_id`]].value=D,onPressEnter:D=>l.save(O[`${T.key}_id`])},null,8,["value","onUpdate:value","onPressEnter"]),a(k,{class:"editable-cell-icon-check",onClick:D=>l.save(O[`${T.key}_id`])},null,8,["onClick"])])):(d(),E("div",Gc,[p(r($||" ")+" ",1),a(v,{class:"editable-cell-icon",onClick:D=>l.edit(O,T.key)},null,8,["onClick"])]))])):A("",!0)],64))),128))]),_:1},8,["columns","row-key","data-source"])]),_:1})],64)}const Xc=z(jc,[["render",Yc]]),Jc={components:{EyeOutlined:Be,SettingSidebar:Ue,AdminPageHeader:me,TranslationsSettings:Xc,LangAddButton:ka,ImportTranslation:va},setup(){const{permsArray:e,appType:s}=Z(),u=I(null),l=window.config.translatioins_sample_file;return{langAdded:()=>{u.value.getData()},permsArray:e,appType:s,transSettingRef:u,sampleFileUrl:l}}};function Qc(e,s,u,l,h,b){const m=o("a-page-header"),i=o("router-link"),c=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("SettingSidebar"),y=o("a-col"),k=o("LangAddButton"),v=o("ImportTranslation"),C=o("EyeOutlined"),S=o("a-button"),U=o("a-space"),$=o("TranslationsSettings"),O=o("a-row");return d(),E(R,null,[a(g,null,{header:n(()=>[a(m,{title:e.$t("menu.translations"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(c,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[p(r(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(c,null,{default:n(()=>[p(r(e.$t("menu.settings")),1)]),_:1}),a(c,null,{default:n(()=>[p(r(e.$t("menu.translations")),1)]),_:1})]),_:1})]),_:1}),a(O,null,{default:n(()=>[a(y,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:n(()=>[a(f)]),_:1}),a(y,{xs:24,sm:24,md:24,lg:20,xl:20},{default:n(()=>[a($,{ref:"transSettingRef"},{actionButtons:n(()=>[a(U,null,{default:n(()=>[l.permsArray.includes("translations_create")||l.permsArray.includes("admin")?(d(),w(k,{key:0,onOnAddSuccess:l.langAdded,btnType:"primary",tooltip:!1},{default:n(()=>[p(r(e.$t("langs.add")),1)]),_:1},8,["onOnAddSuccess"])):A("",!0),l.appType=="non-saas"?(d(),w(v,{key:1,pageTitle:e.$t("translations.import_translations"),sampleFileUrl:l.sampleFileUrl,importUrl:"translations/import",onOnUploadSuccess:l.langAdded},null,8,["pageTitle","sampleFileUrl","onOnUploadSuccess"])):A("",!0),a(S,{type:"primary",onClick:s[0]||(s[0]=T=>e.$router.push({name:"admin.settings.langs.index"}))},{default:n(()=>[a(C),p(" "+r(e.$t("langs.view_all_langs")),1)]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})],64)}const Zc=z(Jc,[["render",Qc]]),xc=x({props:["module"],emits:["updateSuccess"],setup(e,{emit:s}){const u=I(!1),l=I(!1),h=he(),{t:b}=Q();return ee(()=>{!e.module.verified||e.module.other_domain_verified?u.value=!1:u.value=e.module.status}),{checked:u,loading:l,updateStatus:(i,c)=>{axiosAdmin.post(fe("modules/update-status"),{verified_name:e.module.verified_name,checked:i}).then(_=>{Se.success({placement:"bottomRight",message:b("common.success"),description:b("module.module_status_updated")}),h.commit("auth/updateActiveModules",_.data.enabled_modules),window.config.modules=_.data.enabled_modules,s("updateSuccess")})}}}}),ep={key:0},ap=["innerHTML"],tp={key:1};function np(e,s,u,l,h,b){const m=o("a-switch"),i=o("a-tooltip");return e.module.verified&&e.module.installed?(d(),E("span",ep,[a(i,null,Ze({default:n(()=>[a(m,{checked:e.checked,"onUpdate:checked":s[0]||(s[0]=c=>e.checked=c),loading:e.loading,onChange:e.updateStatus,disabled:!e.module.verified||e.module.other_domain_verified},null,8,["checked","loading","onChange","disabled"])]),_:2},[!e.module.verified||e.module.other_domain_verified?{name:"title",fn:n(()=>[P("span",{innerHTML:e.$t("messages.first_verify_module_message")},null,8,ap)]),key:"0"}:void 0]),1024)])):(d(),E("span",tp," - "))}const lp=z(xc,[["render",np]]),op=x({props:["module"],emits:["verifySuccess"],components:{CheckOutlined:ia,InfoCircleOutlined:Ge},setup(e,{emit:s}){const u=I(!1),l=window.location.host,{rules:h,purchaseCode:b,errorMessage:m,successMessage:i,loading:c,verifyPurchase:_,productName:g,version:f}=Fa();return ee(()=>{g.value=e.module.verified_name,f.value=e.module.current_version}),{visible:u,showModal:()=>{u.value=!0},handleCancel:()=>{b.value="",u.value=!1},domain:l,rules:h,purchaseCode:b,loading:c,verify:()=>_({success:C=>{s("verifySuccess"),b.value="",u.value=!1}}),errorMessage:m,successMessage:i}}}),sp={key:0},dp=P("br",null,null,-1),ip=["innerHTML"],rp=["innerHTML"];function up(e,s,u,l,h,b){const m=o("a-tag"),i=o("a-button"),c=o("a-typography-text"),_=o("a-alert"),g=o("a-col"),f=o("a-row"),y=o("InfoCircleOutlined"),k=o("a-typography-link"),v=o("a-typography-paragraph"),C=o("a-form-item"),S=o("a-input"),U=o("a-form"),$=o("CheckOutlined"),O=o("a-modal");return d(),E(R,null,[e.module.other_domain_verified?(d(),E("div",sp,[a(m,{color:"red"},{default:n(()=>[p(r(e.$t("messages.other_domain_linked")),1)]),_:1}),dp,a(i,{type:"link",class:"p-0 mt-10",onClick:e.showModal},{default:n(()=>[p(r(e.$t("module.verify_purchase_code")),1)]),_:1},8,["onClick"])])):e.module.verified?(d(),w(c,{key:1,type:"success",strong:""},{default:n(()=>[p(r(e.$t("module.verified")),1)]),_:1})):e.module.is_free?(d(),w(c,{key:2,type:"success",strong:""},{default:n(()=>[p(" - ")]),_:1})):(d(),w(i,{key:3,type:"link",class:"p-0",onClick:e.showModal},{default:n(()=>[p(r(e.$t("module.verify_purchase_code")),1)]),_:1},8,["onClick"])),a(O,{open:e.visible,"onUpdate:open":s[1]||(s[1]=T=>e.visible=T),title:e.$t("module.verify_purchase_code"),maskClosable:!1,onCancel:e.handleCancel},{footer:n(()=>[a(i,{key:"submit",type:"primary",onClick:e.verify,loading:e.loading},{icon:n(()=>[a($)]),default:n(()=>[p(" "+r(e.$t("common.verify")),1)]),_:1},8,["onClick","loading"]),a(i,{key:"back",onClick:e.handleCancel},{default:n(()=>[p(r(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[e.successMessage!=""?(d(),w(_,{key:0,class:"mb-10",type:"success","show-icon":"",banner:""},{message:n(()=>[P("span",{innerHTML:e.successMessage},null,8,ip)]),_:1})):A("",!0),e.errorMessage!=""?(d(),w(_,{key:1,class:"mb-10",type:"error","show-icon":"",banner:""},{message:n(()=>[P("span",{innerHTML:e.errorMessage},null,8,rp)]),_:1})):A("",!0),e.module.other_domain_verified&&e.errorMessage==""?(d(),w(f,{key:2,class:"mb-10"},{default:n(()=>[a(g,{span:24},{default:n(()=>[a(_,{type:"error","show-icon":""},{message:n(()=>[p(r(e.$t("messages.other_domain_linked_with_purchase_code")),1)]),_:1})]),_:1})]),_:1})):A("",!0),a(f,{class:"mb-10"},{default:n(()=>[a(g,{span:24},{default:n(()=>[a(v,null,{default:n(()=>[P("blockquote",null,[a(k,{href:"https://help.market.envato.com/hc/en-us/articles/202822600-Where-Is-My-Purchase-Code-",target:"_blank"},{default:n(()=>[a(y),p(" "+r(e.$t("messages.click_here_to_find_purchase_code")),1)]),_:1})])]),_:1})]),_:1})]),_:1}),a(U,{layout:"vertical"},{default:n(()=>[a(C,{label:e.$t("common.domain"),name:"domain"},{default:n(()=>[a(c,{strong:""},{default:n(()=>[p(r(e.domain),1)]),_:1})]),_:1},8,["label"]),a(C,{label:e.$t("common.purchase_code"),name:"purchase_code",help:e.rules.purchase_code?e.rules.purchase_code.message:null,validateStatus:e.rules.purchase_code?"error":null,class:"required"},{default:n(()=>[a(S,{value:e.purchaseCode,"onUpdate:value":s[0]||(s[0]=T=>e.purchaseCode=T),placeholder:e.$t("common.placeholder_default_text",[e.$t("common.purchase_code")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1},8,["open","title","onCancel"])],64)}const mp=z(op,[["render",up]]),cp=x({props:["module","downloading","downloadPercentage","extracting"],emits:["install"],components:{DownloadOutlined:_a,ShoppingCartOutlined:ga,ReloadOutlined:Rt,SyncOutlined:We,CheckCircleOutlined:Ma,InfoOutlined:Lt,CheckOutlined:ia},setup(e,{emit:s}){const{t:u}=Q(),l=I(!1),h=I("");return Oe(),{install:()=>{ge.confirm({title:u("common.install"),icon:a(ue),content:u("messages.are_you_sure_install_message"),okText:u("common.yes"),okType:"danger",cancelText:u("common.no"),onOk(){h.value=u("common.installing")+"...",s("install",e.module.verified_name),l.value=!0},onCancel(){}})},update:()=>{ge.confirm({title:u("common.update"),icon:a(ue),content:u("messages.are_you_sure_update_message"),okText:u("common.yes"),okType:"danger",cancelText:u("common.no"),onOk(){h.value=u("common.updating")+"...",s("install",e.module.verified_name),l.value=!0},onCancel(){}})},installUpdateModalVisible:l,closeInstallUpdateModal:()=>{l.value=!1,window.location.reload()}}}});function pp(e,s,u,l,h,b){const m=o("DownloadOutlined"),i=o("a-button"),c=o("ReloadOutlined"),_=o("ShoppingCartOutlined"),g=o("a-typography-text"),f=o("SyncOutlined"),y=o("CheckCircleOutlined"),k=o("a-progress"),v=o("a-col"),C=o("a-row"),S=o("InfoOutlined"),U=o("CheckOutlined"),$=o("a-modal");return d(),E(R,null,[e.module.is_free&&!e.module.installed||e.module.verified&&!e.module.installed?(d(),w(i,{key:0,type:"link",class:"p-0",onClick:e.install},{icon:n(()=>[a(m)]),default:n(()=>[p(" "+r(e.$t("common.install")),1)]),_:1},8,["onClick"])):(e.module.is_free||e.module.verified)&&e.module.installed&&e.module.current_version!=e.module.version?(d(),w(i,{key:1,type:"link",class:"p-0",onClick:e.update},{icon:n(()=>[a(c)]),default:n(()=>[p(" "+r(e.$t("common.update")),1)]),_:1},8,["onClick"])):!e.module.is_free&&!e.module.verified?(d(),w(i,{key:2,type:"link",href:e.module.buy_now_url,class:"p-0",target:"_blank"},{icon:n(()=>[a(_)]),default:n(()=>[p(" "+r(e.$t("common.buy_now")),1)]),_:1},8,["href"])):(d(),w(g,{key:3,type:"success",strong:""},{default:n(()=>[p(" - ")]),_:1})),a($,{open:e.installUpdateModalVisible,"onUpdate:open":s[0]||(s[0]=O=>e.installUpdateModalVisible=O),title:e.$t("common.installing"),maskClosable:!1,closable:!1,footer:null},{default:n(()=>[a(C,{class:"mb-10"},{default:n(()=>[a(v,{span:24},{default:n(()=>[e.downloadPercentage<100?(d(),w(g,{key:0},{default:n(()=>[a(f,{spin:""}),p(" "+r(e.$t("messages.downloading_started_message")),1)]),_:1})):(d(),w(g,{key:1,strong:"",type:"success"},{default:n(()=>[a(y),p(" "+r(e.$t("module.downloading_completed")),1)]),_:1})),e.downloadPercentage<100?(d(),w(k,{key:2,percent:e.downloadPercentage},null,8,["percent"])):A("",!0)]),_:1})]),_:1}),a(C,{class:"mb-10"},{default:n(()=>[a(v,{span:24},{default:n(()=>[e.extracting==""?(d(),w(g,{key:0,type:"secondary"},{default:n(()=>[a(S),p(" "+r(e.$t("module.extract_zip_file")),1)]),_:1})):A("",!0),e.extracting=="started"?(d(),w(g,{key:1},{default:n(()=>[a(f,{spin:""}),p(" "+r(e.$t("messages.file_extracting_message")),1)]),_:1})):A("",!0),e.extracting=="completed"?(d(),w(g,{key:2,strong:"",type:"success"},{default:n(()=>[a(y),p(" "+r(e.$t("module.file_extracted")),1)]),_:1})):A("",!0)]),_:1})]),_:1}),e.extracting=="completed"?(d(),w(C,{key:0,class:"mt-10 mb-10"},{default:n(()=>[a(v,{span:24},{default:n(()=>[a(i,{type:"primary",onClick:e.closeInstallUpdateModal,block:""},{default:n(()=>[a(U),p(" "+r(e.$t("messages.installation_success")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})):A("",!0)]),_:1},8,["open","title"])],64)}const _p=z(cp,[["render",pp]]);const fp=x({components:{ModuleStatus:lp,VerifyModule:mp,ModuleAction:_p,LeftCircleOutlined:qt,RightCircleOutlined:Bt},setup(){const{t:e}=Q();he();const s=window.config.app_env,{allModules:u,dataLoading:l,getModuleData:h,offers:b,settings:m,install:i,downloading:c,downloadPercentage:_,extracting:g}=Fa(),f=[{title:e("module.name"),dataIndex:"name",width:"25%"},{title:e("module.verified"),dataIndex:"verified",width:"15%"},{title:e("module.current_version"),dataIndex:"current_version"},{title:e("module.latest_version"),dataIndex:"version"},{title:e("module.status"),dataIndex:"status"},{title:e("common.action"),dataIndex:"action"}];return ee(()=>{h()}),{modulesTableColumns:f,allModules:u,getModuleData:h,installModule:k=>{i(k)},dataLoading:l,offers:b,settings:m,downloading:c,downloadPercentage:_,extracting:g,appEnv:s}}}),gp={class:"custom-slick-arrow",style:{left:"10px","z-index":"1"}},hp={class:"custom-slick-arrow",style:{right:"10px"}},bp=["src"],yp={key:0,class:"table-responsive"},vp={key:1};function kp(e,s,u,l,h,b){const m=o("left-circle-outlined"),i=o("right-circle-outlined"),c=o("a-typography-link"),_=o("a-carousel"),g=o("a-col"),f=o("a-row"),y=o("a-avatar"),k=o("a-list-item-meta"),v=o("a-list-item"),C=o("a-list"),S=o("VerifyModule"),U=o("ModuleStatus"),$=o("ModuleAction"),O=o("a-table"),T=o("admin-page-table-content");return d(),E(R,null,[e.offers&&e.offers.length>0?(d(),w(f,{key:0},{default:n(()=>[a(g,{span:24},{default:n(()=>[a(_,{arrows:""},{prevArrow:n(()=>[P("div",gp,[a(m)])]),nextArrow:n(()=>[P("div",hp,[a(i)])]),default:n(()=>[(d(!0),E(R,null,X(e.offers,D=>(d(),E("div",{key:D.id},[a(c,{href:D.url,target:"_blank"},{default:n(()=>[P("img",{src:D.image_url,style:ca({width:e.settings.width,height:e.settings.height}),preview:!1},null,12,bp)]),_:2},1032,["href"])]))),128))]),_:1})]),_:1})]),_:1})):A("",!0),a(T,null,{default:n(()=>[a(f,{class:"mt-20 mb-20"},{default:n(()=>[a(g,{span:24},{default:n(()=>[e.allModules?(d(),E("div",yp,[a(O,{columns:e.modulesTableColumns,"row-key":D=>D.verified_name,"data-source":e.allModules,pagination:!1,bordered:"",size:"middle",loading:e.dataLoading},{bodyCell:n(({column:D,record:L})=>[D.dataIndex=="name"?(d(),w(C,{key:0},{default:n(()=>[a(v,null,{default:n(()=>[a(k,{description:L.description},{title:n(()=>[p(r(L.name),1)]),avatar:n(()=>[a(y,{src:L.image_url},null,8,["src"])]),_:2},1032,["description"])]),_:2},1024)]),_:2},1024)):A("",!0),D.dataIndex=="verified"?(d(),w(S,{key:1,module:L,onVerifySuccess:e.getModuleData},null,8,["module","onVerifySuccess"])):A("",!0),D.dataIndex=="status"?(d(),w(U,{key:2,module:L,status:L.status,moduleName:L.verified_name,onUpdateSuccess:e.getModuleData},null,8,["module","status","moduleName","onUpdateSuccess"])):A("",!0),D.dataIndex=="action"?(d(),E(R,{key:3},[e.appEnv=="envato"?(d(),w($,{key:0,module:L,onInstall:e.installModule,downloadPercentage:e.downloadPercentage,downloading:e.downloading,extracting:e.extracting},null,8,["module","onInstall","downloadPercentage","downloading","extracting"])):(d(),E("span",vp,"-"))],64)):A("",!0)]),_:1},8,["columns","row-key","data-source","loading"])])):A("",!0)]),_:1})]),_:1})]),_:1})],64)}const wp=z(fp,[["render",kp]]),Cp=x({components:{LeftCircleOutlined:qt,RightCircleOutlined:Bt,SettingSidebar:Ue,AdminPageHeader:me,ModuleSetting:wp},setup(){return{}}});function Sp(e,s,u,l,h,b){const m=o("a-page-header"),i=o("router-link"),c=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("SettingSidebar"),y=o("a-col"),k=o("ModuleSetting"),v=o("a-row");return d(),E(R,null,[a(g,null,{header:n(()=>[a(m,{title:e.$t("menu.modules"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(c,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[p(r(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(c,null,{default:n(()=>[p(r(e.$t("menu.settings")),1)]),_:1}),a(c,null,{default:n(()=>[p(r(e.$t("menu.modules")),1)]),_:1})]),_:1})]),_:1}),a(v,null,{default:n(()=>[a(y,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:n(()=>[a(f)]),_:1}),a(y,{xs:24,sm:24,md:24,lg:20,xl:20},{default:n(()=>[a(k)]),_:1})]),_:1})],64)}const $p=z(Cp,[["render",Sp]]),Dp={components:{SaveOutlined:_e},setup(){const{addEditRequestAdmin:e,loading:s,rules:u}=se(),{t:l}=Q(),h=I({}),b=I([]);return ee(()=>{axiosAdmin.get(fe("settings/storage")).then(i=>{h.value=i.data.storage,b.value=i.data.regions})}),{loading:s,rules:u,awsRegions:b,formData:h,onSubmit:()=>{e({url:fe("settings/storage/update"),data:h.value,successMessage:l("storage_settings.updated"),success:i=>{}})}}}},Ap={key:0};function Tp(e,s,u,l,h,b){const m=o("a-select-option"),i=o("a-select"),c=o("a-form-item"),_=o("a-col"),g=o("a-row"),f=o("a-input"),y=o("a-input-password"),k=o("SaveOutlined"),v=o("a-button"),C=o("a-form");return d(),w(C,{layout:"vertical"},{default:n(()=>[a(g,{gutter:16},{default:n(()=>[a(_,{span:24},{default:n(()=>[a(c,{label:e.$t("storage_settings.storage"),name:"filesystem",help:l.rules.filesystem?l.rules.filesystem.message:null,validateStatus:l.rules.filesystem?"error":null},{default:n(()=>[a(i,{value:l.formData.filesystem,"onUpdate:value":s[0]||(s[0]=S=>l.formData.filesystem=S),placeholder:e.$t("common.select_default_text",[e.$t("storage_settings.storage")])},{default:n(()=>[a(m,{key:"local",value:"local"},{default:n(()=>[p(r(e.$t("storage_settings.local")),1)]),_:1}),a(m,{key:"aws",value:"aws"},{default:n(()=>[p(r(e.$t("storage_settings.aws")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l.formData.filesystem=="aws"?(d(),E("div",Ap,[a(g,{gutter:16},{default:n(()=>[a(_,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(c,{label:e.$t("storage_settings.aws_key"),name:"key",help:l.rules.key?l.rules.key.message:null,validateStatus:l.rules.key?"error":null,class:"required"},{default:n(()=>[a(f,{value:l.formData.key,"onUpdate:value":s[1]||(s[1]=S=>l.formData.key=S),placeholder:e.$t("common.placeholder_default_text",[e.$t("storage_settings.aws_key")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(_,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(c,{label:e.$t("storage_settings.aws_secret"),name:"secret",help:l.rules.secret?l.rules.secret.message:null,validateStatus:l.rules.secret?"error":null,class:"required"},{default:n(()=>[a(y,{value:l.formData.secret,"onUpdate:value":s[2]||(s[2]=S=>l.formData.secret=S),placeholder:e.$t("common.placeholder_default_text",[e.$t("storage_settings.aws_secret")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(g,{gutter:16},{default:n(()=>[a(_,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(c,{label:e.$t("storage_settings.aws_region"),name:"region",help:l.rules.region?l.rules.region.message:null,validateStatus:l.rules.region?"error":null},{default:n(()=>[a(i,{value:l.formData.region,"onUpdate:value":s[3]||(s[3]=S=>l.formData.region=S),placeholder:e.$t("common.select_default_text",[e.$t("storage_settings.aws_region")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:n(()=>[(d(!0),E(R,null,X(l.awsRegions,(S,U)=>(d(),w(m,{key:U,value:U,label:S},{default:n(()=>[p(r(S),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(_,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(c,{label:e.$t("storage_settings.aws_bucket"),name:"bucket",help:l.rules.bucket?l.rules.bucket.message:null,validateStatus:l.rules.bucket?"error":null,class:"required"},{default:n(()=>[a(f,{value:l.formData.bucket,"onUpdate:value":s[4]||(s[4]=S=>l.formData.bucket=S),placeholder:e.$t("common.placeholder_default_text",[e.$t("storage_settings.aws_bucket")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})])):A("",!0),a(g,{gutter:16},{default:n(()=>[a(_,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(c,null,{default:n(()=>[a(v,{type:"primary",onClick:l.onSubmit,loading:l.loading},{icon:n(()=>[a(k)]),default:n(()=>[p(" "+r(e.$t("common.update")),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1})]),_:1})}const Ep=z(Dp,[["render",Tp]]),Op={components:{SettingSidebar:Ue,AdminPageHeader:me,StorageSettings:Ep,SaveOutlined:_e},setup(){const e=I(null);return{onSubmit:()=>{e.value.onSubmit()},settingRef:e}}};function Up(e,s,u,l,h,b){const m=o("SaveOutlined"),i=o("a-button"),c=o("a-page-header"),_=o("router-link"),g=o("a-breadcrumb-item"),f=o("a-breadcrumb"),y=o("AdminPageHeader"),k=o("SettingSidebar"),v=o("a-col"),C=o("StorageSettings"),S=o("a-card"),U=o("admin-page-table-content"),$=o("a-row");return d(),E(R,null,[a(y,null,{header:n(()=>[a(c,{title:e.$t("menu.storage_settings"),class:"p-0"},{extra:n(()=>[a(i,{type:"primary",onClick:l.onSubmit,loading:!!(l.settingRef&&l.settingRef.loading)},{icon:n(()=>[a(m)]),default:n(()=>[p(" "+r(e.$t("common.update")),1)]),_:1},8,["onClick","loading"])]),_:1},8,["title"])]),breadcrumb:n(()=>[a(f,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(g,null,{default:n(()=>[a(_,{to:{name:"admin.dashboard.index"}},{default:n(()=>[p(r(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(g,null,{default:n(()=>[p(r(e.$t("menu.settings")),1)]),_:1}),a(g,null,{default:n(()=>[p(r(e.$t("menu.storage_settings")),1)]),_:1})]),_:1})]),_:1}),a($,null,{default:n(()=>[a(v,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:n(()=>[a(k)]),_:1}),a(v,{xs:24,sm:24,md:24,lg:20,xl:20},{default:n(()=>[a(U,null,{default:n(()=>[a(S,{class:"page-content-container mt-20 mb-20"},{default:n(()=>[a(C,{ref:"settingRef"},null,512)]),_:1})]),_:1})]),_:1})]),_:1})],64)}const Pp=z(Op,[["render",Up]]),Ip=x({props:["formData","verified"],components:{SendOutlined:Tt},setup(){const{addEditRequestAdmin:e,loading:s,rules:u}=se(),l=I(!1),h=I(""),b=I(""),{t:m}=Q();return{loading:s,rules:u,email:h,visible:l,showModal:()=>{l.value=!0},sendMail:()=>{b.value="",e({url:fe("settings/email/send-test-mail"),data:{email:h.value},success:g=>{b.value="",g.status=="success"?Se.success({placement:"bottomRight",message:m("common.success"),description:m("mail_settings.test_mail_sent_successfully")}):b.value=g.message},error:g=>{b.value=""}})},handleCancel:()=>{l.value=!1,s.value=!1,h.value="",b.value="",u.value={}},errorMessage:b}}});function Mp(e,s,u,l,h,b){const m=o("SendOutlined"),i=o("a-button"),c=o("a-alert"),_=o("a-col"),g=o("a-row"),f=o("a-input"),y=o("a-form-item"),k=o("a-form"),v=o("a-modal");return d(),E(R,null,[e.formData.mail_driver=="mail"||e.formData.mail_driver=="smtp"?(d(),w(i,{key:0,onClick:e.showModal,disabled:!e.verified},{icon:n(()=>[a(m)]),default:n(()=>[p(" "+r(e.$t("mail_settings.send_test_mail")),1)]),_:1},8,["onClick","disabled"])):A("",!0),a(v,{open:e.visible,"onUpdate:open":s[1]||(s[1]=C=>e.visible=C),maskClosable:!1,title:e.$t("mail_settings.send_test_mail"),onCancel:e.handleCancel},{footer:n(()=>[a(i,{key:"submit",type:"primary",loading:e.loading,onClick:e.sendMail},{icon:n(()=>[a(m)]),default:n(()=>[p(" "+r(e.$t("common.send")),1)]),_:1},8,["loading","onClick"]),a(i,{key:"back",onClick:e.handleCancel},{default:n(()=>[p(r(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[a(k,{layout:"vertical"},{default:n(()=>[e.errorMessage!=""?(d(),w(g,{key:0,gutter:16,class:"mb-20"},{default:n(()=>[a(_,{span:24},{default:n(()=>[a(c,{message:e.errorMessage,type:"error","show-icon":""},null,8,["message"])]),_:1})]),_:1})):A("",!0),a(g,{gutter:16},{default:n(()=>[a(_,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(y,{label:e.$t("mail_settings.email"),name:"email",help:e.rules.email?e.rules.email.message:null,validateStatus:e.rules.email?"error":null,class:"required"},{default:n(()=>[a(f,{value:e.email,"onUpdate:value":s[0]||(s[0]=C=>e.email=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("common.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onCancel"])],64)}const Fp=z(Ip,[["render",Mp]]),Rp={components:{InfoCircleOutlined:Ge}};function Lp(e,s,u,l,h,b){const m=o("InfoCircleOutlined"),i=o("a-tooltip");return d(),w(i,null,{title:n(()=>[p(r(e.$t("mail_settings.notificaiton_will_be_sent_to_company")),1)]),default:n(()=>[a(m)]),_:1})}const qp=z(Rp,[["render",Lp]]);const Bp={props:["sendMailSettings"],components:{TooltipCompany:qp},setup(e){const{addEditRequestAdmin:s}=se(),{t:u}=Q(),l=I([]);return ee(()=>{l.value=e.sendMailSettings.credentials}),{settings:l,settingsChanged:b=>{s({url:fe("settings/email/send-mail-settings"),data:{name_key:"company",settings:b},success:m=>{Ae.success(u("mail_settings.send_mail_setting_saved"))}})}}}},Kp={class:"notificaiton-setting-bar"},zp={style:{marginTop:"8px",paddingBottom:"14px"}};function Vp(e,s,u,l,h,b){const m=o("TooltipCompany"),i=o("a-typography-title"),c=o("a-col"),_=o("a-checkbox"),g=o("a-divider"),f=o("a-row"),y=o("a-checkbox-group"),k=o("a-card"),v=o("perfect-scrollbar");return d(),E("div",Kp,[a(v,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:n(()=>[a(k,{class:"page-content-container"},{title:n(()=>[P("div",zp,r(e.$t("mail_settings.send_mail_for")),1)]),default:n(()=>[a(y,{value:l.settings,"onUpdate:value":s[0]||(s[0]=C=>l.settings=C),style:{width:"100%"},onChange:l.settingsChanged},{default:n(()=>[a(f,null,{default:n(()=>[a(c,{span:24,class:"mb-5"},{default:n(()=>[a(i,{level:5},{default:n(()=>[p(r(e.$t("menu.staff_members"))+" ",1),a(m)]),_:1})]),_:1}),a(c,{span:24,class:"mb-5"},{default:n(()=>[a(_,{value:"staff_member_create"},{default:n(()=>[p(r(e.$t("common.on_create")),1)]),_:1})]),_:1}),a(c,{span:24,class:"mb-5"},{default:n(()=>[a(_,{value:"staff_member_update"},{default:n(()=>[p(r(e.$t("common.on_update")),1)]),_:1})]),_:1}),a(c,{span:24,class:"mb-5"},{default:n(()=>[a(_,{value:"staff_member_delete"},{default:n(()=>[p(r(e.$t("common.on_delete")),1)]),_:1})]),_:1}),a(g)]),_:1})]),_:1},8,["value","onChange"])]),_:1})]),_:1})])}const Hp=z(Bp,[["render",Vp]]),jp={components:{SaveOutlined:_e,TestMail:Fp,SendMailSetting:Hp},setup(){const{addEditRequestAdmin:e,loading:s,rules:u}=se(),{appType:l}=Z();se();const{t:h}=Q(),b=I({}),m=I(!1),i=I(""),c=I([]);return ee(()=>{axiosAdmin.get(fe("settings/email")).then(g=>{b.value=g.data.settings,c.value=g.data.sendMailSettings,m.value=g.data.verified,i.value=g.data.verified?h("messages.stmp_success_message"):h("messages.stmp_error_message")})}),{appType:l,formData:b,rules:u,loading:s,onSubmit:()=>{e({url:fe("settings/email/update"),data:b.value,successMessage:h("mail_settings.updated"),success:g=>{m.value=g.verified,i.value=g.verified?h("messages.stmp_success_message"):g.message}})},verified:m,verifiedMessage:i,sendMailSettings:c}}},Np={key:0},Wp={key:0},Gp={key:1};function Yp(e,s,u,l,h,b){const m=o("a-alert"),i=o("a-select-option"),c=o("a-select"),_=o("a-form-item"),g=o("a-col"),f=o("a-row"),y=o("a-input"),k=o("a-input-password"),v=o("SaveOutlined"),C=o("a-button"),S=o("TestMail"),U=o("a-space"),$=o("a-form"),O=o("a-card"),T=o("SendMailSetting");return d(),w(f,null,{default:n(()=>[a(g,{class:"settings-sidebar-content-container mt-20 mb-20",xs:24,sm:24,md:24,lg:l.appType=="saas"?24:18,xl:l.appType=="saas"?24:18},{default:n(()=>[l.formData.mail_driver=="smtp"?(d(),E("div",Np,[l.verified?(d(),w(m,{key:0,description:l.verifiedMessage,type:"success","show-icon":""},null,8,["description"])):(d(),w(m,{key:1,description:l.verifiedMessage,type:"error","show-icon":""},null,8,["description"]))])):A("",!0),a(O,{class:"settings-sidebar-content-container"},{default:n(()=>[a($,{layout:"vertical"},{default:n(()=>[a(f,{gutter:16},{default:n(()=>[a(g,{span:24},{default:n(()=>[a(_,{label:e.$t("mail_settings.mail_driver"),name:"mail_driver",help:l.rules.mail_driver?l.rules.mail_driver.message:null,validateStatus:l.rules.mail_driver?"error":null},{default:n(()=>[a(c,{value:l.formData.mail_driver,"onUpdate:value":s[0]||(s[0]=D=>l.formData.mail_driver=D),placeholder:e.$t("common.select_default_text",[e.$t("mail_settings.mail_driver")])},{default:n(()=>[a(i,{key:"none",value:"none"},{default:n(()=>[p(r(e.$t("mail_settings.none")),1)]),_:1}),a(i,{key:"smtp",value:"smtp"},{default:n(()=>[p(r(e.$t("mail_settings.smtp")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l.formData.mail_driver=="mail"||l.formData.mail_driver=="smtp"?(d(),E("div",Wp,[a(f,{gutter:16},{default:n(()=>[a(g,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(_,{label:e.$t("mail_settings.from_name"),name:"from_name",help:l.rules.from_name?l.rules.from_name.message:null,validateStatus:l.rules.from_name?"error":null,class:"required"},{default:n(()=>[a(y,{value:l.formData.from_name,"onUpdate:value":s[1]||(s[1]=D=>l.formData.from_name=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("mail_settings.from_name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(g,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(_,{label:e.$t("mail_settings.from_email"),name:"from_email",help:l.rules.from_email?l.rules.from_email.message:null,validateStatus:l.rules.from_email?"error":null,class:"required"},{default:n(()=>[a(y,{value:l.formData.from_email,"onUpdate:value":s[2]||(s[2]=D=>l.formData.from_email=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("mail_settings.from_email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})])):A("",!0),l.formData.mail_driver=="smtp"?(d(),E("div",Gp,[a(f,{gutter:16},{default:n(()=>[l.formData.mail_driver=="smtp"?(d(),w(g,{key:0,xs:24,sm:24,md:24,lg:l.formData.mail_driver=="smtp"?12:24},{default:n(()=>[a(_,{label:e.$t("mail_settings.enable_mail_queue"),name:"enable_mail_queue",help:l.rules.enable_mail_queue?l.rules.enable_mail_queue.message:null,validateStatus:l.rules.enable_mail_queue?"error":null,class:"required"},{default:n(()=>[a(c,{value:l.formData.enable_mail_queue,"onUpdate:value":s[3]||(s[3]=D=>l.formData.enable_mail_queue=D),placeholder:e.$t("common.select_default_text",[e.$t("mail_settings.enable_mail_queue")]),allowClear:!0},{default:n(()=>[a(i,{key:"yes",value:"yes"},{default:n(()=>[p(r(e.$t("common.yes")),1)]),_:1}),a(i,{key:"no",value:"no"},{default:n(()=>[p(r(e.$t("common.no")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1},8,["lg"])):A("",!0),l.formData.mail_driver=="smtp"?(d(),w(g,{key:1,xs:24,sm:24,md:24,lg:l.formData.mail_driver=="smtp"?12:24},{default:n(()=>[a(_,{label:e.$t("mail_settings.host"),name:"host",help:l.rules.host?l.rules.host.message:null,validateStatus:l.rules.host?"error":null,class:"required"},{default:n(()=>[a(y,{value:l.formData.host,"onUpdate:value":s[4]||(s[4]=D=>l.formData.host=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("mail_settings.host")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1},8,["lg"])):A("",!0)]),_:1}),a(f,{gutter:16},{default:n(()=>[a(g,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(_,{label:e.$t("mail_settings.port"),name:"port",help:l.rules.port?l.rules.port.message:null,validateStatus:l.rules.port?"error":null,class:"required"},{default:n(()=>[a(y,{value:l.formData.port,"onUpdate:value":s[5]||(s[5]=D=>l.formData.port=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("mail_settings.port")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(g,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(_,{label:e.$t("mail_settings.encryption"),name:"encryption",help:l.rules.encryption?l.rules.encryption.message:null,validateStatus:l.rules.encryption?"error":null},{default:n(()=>[a(c,{value:l.formData.encryption,"onUpdate:value":s[6]||(s[6]=D=>l.formData.encryption=D),placeholder:e.$t("common.select_default_text",[e.$t("mail_settings.encryption")]),allowClear:!0},{default:n(()=>[a(i,{key:"tls",value:"tls"},{default:n(()=>[p(" tls ")]),_:1}),a(i,{key:"ssl",value:"ssl"},{default:n(()=>[p(" ssl ")]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(f,{gutter:16},{default:n(()=>[a(g,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(_,{label:e.$t("mail_settings.username"),name:"username",help:l.rules.username?l.rules.username.message:null,validateStatus:l.rules.username?"error":null,class:"required"},{default:n(()=>[a(y,{value:l.formData.username,"onUpdate:value":s[7]||(s[7]=D=>l.formData.username=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("mail_settings.username")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(g,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(_,{label:e.$t("mail_settings.password"),name:"password",help:l.rules.password?l.rules.password.message:null,validateStatus:l.rules.password?"error":null,class:"required"},{default:n(()=>[a(k,{value:l.formData.password,"onUpdate:value":s[8]||(s[8]=D=>l.formData.password=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("mail_settings.password")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})])):A("",!0),a(f,{gutter:16},{default:n(()=>[a(g,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(_,null,{default:n(()=>[a(U,null,{default:n(()=>[a(C,{type:"primary",onClick:l.onSubmit,loading:l.loading},{icon:n(()=>[a(v)]),default:n(()=>[p(" "+r(e.$t("common.update")),1)]),_:1},8,["onClick","loading"]),a(S,{formData:l.formData,verified:l.verified},null,8,["formData","verified"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["lg","xl"]),l.appType=="non-saas"?(d(),w(g,{key:0,class:"settings-sidebar-content-container mt-20 mb-20",xs:24,sm:24,md:24,lg:6,xl:6},{default:n(()=>[l.sendMailSettings&&l.sendMailSettings.xid?(d(),w(T,{key:0,sendMailSettings:l.sendMailSettings},null,8,["sendMailSettings"])):A("",!0)]),_:1})):A("",!0)]),_:1})}const Xp=z(jp,[["render",Yp]]),Jp={components:{SettingSidebar:Ue,AdminPageHeader:me,EmailSettings:Xp,SaveOutlined:_e},setup(){const e=I(null);return{onSubmit:()=>{e.value.onSubmit()},settingRef:e}}};function Qp(e,s,u,l,h,b){const m=o("SaveOutlined"),i=o("a-button"),c=o("a-page-header"),_=o("router-link"),g=o("a-breadcrumb-item"),f=o("a-breadcrumb"),y=o("AdminPageHeader"),k=o("SettingSidebar"),v=o("a-col"),C=o("EmailSettings"),S=o("admin-page-table-content"),U=o("a-row");return d(),E(R,null,[a(y,null,{header:n(()=>[a(c,{title:e.$t("menu.email_settings"),class:"p-0"},{extra:n(()=>[a(i,{type:"primary",onClick:l.onSubmit,loading:!!(l.settingRef&&l.settingRef.loading)},{icon:n(()=>[a(m)]),default:n(()=>[p(" "+r(e.$t("common.update")),1)]),_:1},8,["onClick","loading"])]),_:1},8,["title"])]),breadcrumb:n(()=>[a(f,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(g,null,{default:n(()=>[a(_,{to:{name:"admin.dashboard.index"}},{default:n(()=>[p(r(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(g,null,{default:n(()=>[p(r(e.$t("menu.settings")),1)]),_:1}),a(g,null,{default:n(()=>[p(r(e.$t("menu.email_settings")),1)]),_:1})]),_:1})]),_:1}),a(U,null,{default:n(()=>[a(v,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:n(()=>[a(k)]),_:1}),a(v,{xs:24,sm:24,md:24,lg:20,xl:20},{default:n(()=>[a(S,null,{default:n(()=>[a(C,{ref:"settingRef"},null,512)]),_:1})]),_:1})]),_:1})],64)}const Zp=z(Jp,[["render",Qp]]),xp=()=>{const e=fe("database-backups"),{t:s}=Q(),u=[{title:s("database_backup.file"),dataIndex:"name"},{title:s("database_backup.file_size"),dataIndex:"size"},{title:s("common.action"),dataIndex:"action"}];return{url:e,columns:u}},e_={components:{PlusOutlined:ae,EditOutlined:ke,DeleteOutlined:pe,ExclamationCircleOutlined:ue},setup(){const{t:e}=Q(),{url:s,columns:u}=xp(),l=I([]);return ee(()=>{axiosAdmin.post(fe("database-backups")).then(m=>{l.value=m.data.data})}),{columns:u,results:l,deleteBackup:m=>{ge.confirm({title:e("database_backup.delete_backup"),icon:a(ue),content:e("database_backup.are_you_sure_delete_backup"),okText:e("common.yes"),okType:"danger",cancelText:e("common.no"),onOk(){axiosAdmin.post(fe("delete-backup"),{file_name:m}).then(i=>{l.value=i.data.data})},onCancel(){}})},backupCreated:m=>{l.value=m.data}}}},a_={class:"table-responsive mt-20"};function t_(e,s,u,l,h,b){const m=o("a-col"),i=o("a-row"),c=o("admin-page-filters"),_=o("a-alert"),g=o("a-typography-link"),f=o("a-button"),y=o("a-space"),k=o("a-table"),v=o("admin-page-table-content");return d(),E(R,null,[a(c,null,{default:n(()=>[a(i,{gutter:[16,16]},{default:n(()=>[a(m,{span:24},{default:n(()=>[oe(e.$slots,"actionButtons")]),_:3})]),_:3})]),_:3}),a(v,null,{default:n(()=>[a(i,{class:"mt-20"},{default:n(()=>[a(m,{span:24},{default:n(()=>[a(_,{type:"warning",showIcon:"",message:e.$t("database_backup.backup_locaion_is")},null,8,["message"]),P("div",a_,[a(k,{columns:l.columns,"row-key":C=>C.id,"data-source":l.results,pagination:!1,bordered:"",size:"middle"},{bodyCell:n(({column:C,record:S})=>[C.dataIndex=="action"?(d(),w(y,{key:0},{default:n(()=>[a(g,{href:S.url,target:"_blank"},{default:n(()=>[p(r(e.$t("common.download")),1)]),_:2},1032,["href"]),a(f,{type:"link",onClick:U=>l.deleteBackup(S.name)},{default:n(()=>[p(r(e.$t("common.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)):A("",!0)]),_:1},8,["columns","row-key","data-source"])])]),_:1})]),_:1})]),_:1})],64)}const n_=z(e_,[["render",t_]]),l_=x({emits:["success"],components:{PlusOutlined:ae,ExclamationCircleOutlined:ue},setup(e,{emit:s}){const{t:u}=Q(),{addEditRequestAdmin:l,loading:h}=se();return{generateBack:()=>{ge.confirm({title:u("database_backup.generate_backup"),icon:a(ue),content:u("database_backup.are_you_sure_generate_backup"),okText:u("common.yes"),okType:"danger",cancelText:u("common.no"),onOk(){l({url:fe("generate-backups"),data:{},successMessage:u("database_backup.backup_generated_successfully"),success:m=>{s("success",m)}})},onCancel(){}})},loading:h}}});function o_(e,s,u,l,h,b){const m=o("PlusOutlined"),i=o("a-button");return d(),w(i,{type:"primary",onClick:e.generateBack,loading:e.loading},{default:n(()=>[a(m),p(" "+r(e.$t("database_backup.generate_backup")),1)]),_:1},8,["onClick","loading"])}const s_=z(l_,[["render",o_]]),d_=x({components:{SettingOutlined:ba},setup(){const e=I(!1);return{visible:e,onClose:()=>{e.value=!1},openDrawer:()=>{e.value=!0},drawerWidth:window.innerWidth<=991?"90%":"35%"}}});function i_(e,s,u,l,h,b){const m=o("SettingOutlined"),i=o("a-button"),c=o("a-alert"),_=o("a-col"),g=o("a-row"),f=o("a-typography-text"),y=o("a-typography-paragraph"),k=o("a-form"),v=o("a-drawer");return d(),E(R,null,[a(i,{type:"primary",onClick:e.openDrawer},{icon:n(()=>[a(m)]),default:n(()=>[p(" "+r(e.$t("database_backup.settings")),1)]),_:1},8,["onClick"]),a(v,{title:e.$t("database_backup.backup_command_setting"),width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:n(()=>[a(i,{onClick:e.onClose},{default:n(()=>[p(r(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[a(k,{layout:"vertical"},{default:n(()=>[a(g,{gutter:16,class:"mb-10"},{default:n(()=>[a(_,{span:24},{default:n(()=>[a(c,{type:"warning",showIcon:"",message:e.$t("database_backup.put_dump_path_command_on_env_file")},null,8,["message"])]),_:1})]),_:1}),a(g,{gutter:16},{default:n(()=>[a(_,{span:24},{default:n(()=>[a(y,null,{default:n(()=>[P("blockquote",null,[a(f,{type:"warning"},{default:n(()=>[p(r(e.$t("database_backup.window_command_path")),1)]),_:1})]),P("blockquote",null,[a(f,{type:"warning"},{default:n(()=>[p(r(e.$t("database_backup.laragon_command_path")),1)]),_:1})]),P("blockquote",null,[a(f,{type:"warning"},{default:n(()=>[p(r(e.$t("database_backup.linux_command_path")),1)]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])],64)}const r_=z(d_,[["render",i_]]),u_={components:{SettingSidebar:Ue,AdminPageHeader:me,DatabaseSettings:n_,GenerateDbBackup:s_,BackupCommandSetting:r_},setup(){const e=I(null);return{backupCreated:u=>{e.value.backupCreated(u)},settingRef:e}}};function m_(e,s,u,l,h,b){const m=o("a-page-header"),i=o("router-link"),c=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("SettingSidebar"),y=o("a-col"),k=o("GenerateDbBackup"),v=o("BackupCommandSetting"),C=o("a-space"),S=o("DatabaseSettings"),U=o("a-row");return d(),E(R,null,[a(g,null,{header:n(()=>[a(m,{title:e.$t("menu.database_backup"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(c,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[p(r(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(c,null,{default:n(()=>[p(r(e.$t("menu.settings")),1)]),_:1}),a(c,null,{default:n(()=>[p(r(e.$t("menu.database_backup")),1)]),_:1})]),_:1})]),_:1}),a(U,null,{default:n(()=>[a(y,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:n(()=>[a(f)]),_:1}),a(y,{xs:24,sm:24,md:24,lg:20,xl:20},{default:n(()=>[a(S,{ref:"settingRef"},{actionButtons:n(()=>[a(C,null,{default:n(()=>[a(k,{onSuccess:l.backupCreated},null,8,["onSuccess"]),a(v)]),_:1})]),_:1},512)]),_:1})]),_:1})],64)}const c_=z(u_,[["render",m_]]),p_=x({components:{SyncOutlined:We},setup(){const e=I([]),s=sl,{t:u}=Q(),l=I("fetching"),h=I([]),b=he(),m=[{title:u("update_app.name"),dataIndex:"name",width:"40%"},{title:u("update_app.value"),dataIndex:"value"}];return ee(()=>{axiosAdmin(fe("update-app")).then(c=>{const _=c.data.app_version;e.value=c.data.app_details,qe.post("https://envato.codeifly.com/product",{verified_name:window.config.product_name,domain:window.location.host}).then(g=>{h.value=g.data,h.value.product.other_domain_verified?ge.confirm({title:u("update_app.verify_failed"),icon:a(ue),content:u("update_app.verified_with_other_domain"),okText:u("update_app.verify_again"),okType:"danger",cancelButtonProps:{disabled:!0},onOk(){b.dispatch("auth/logoutToRootUrl")}}):h.value.product.verified?h.value.product.version!=_?l.value="update_available":l.value="success":ge.confirm({title:u("update_app.verify_failed"),icon:a(ue),content:u("update_app.verify_failed_message"),okText:u("update_app.verify_again"),okType:"danger",cancelButtonProps:{disabled:!0},onOk(){b.dispatch("auth/logoutToRootUrl")}})})})}),{tableColumns:m,appDetails:e,vueVersion:s,productStatus:l,product:h,updateApp:()=>{ge.confirm({title:u("common.install"),icon:a(ue),content:u("messages.are_you_sure_install_message"),okText:u("common.yes"),okType:"danger",cancelText:u("common.no"),onOk(){installUpdateModalTitle.value=u("common.installing")+"...",emit("install",props.module.verified_name),installUpdateModalVisible.value=!0},onCancel(){}})}}}}),__=["innerHTML"],f_={class:"table-responsive mt-10"},g_={key:1},h_={key:0},b_={key:1};function y_(e,s,u,l,h,b){const m=o("SyncOutlined"),i=o("a-alert"),c=o("a-typography-title"),_=o("a-table"),g=o("a-col"),f=o("a-row"),y=o("a-card");return d(),w(y,{class:"page-content-container mt-20 mb-20"},{default:n(()=>[a(f,{class:"mt-20"},{default:n(()=>[a(g,{span:24},{default:n(()=>[e.productStatus=="fetching"?(d(),w(i,{key:0,type:"info",showIcon:"",message:e.$t("messages.fetching_product_details")},{icon:n(()=>[a(m,{spin:""})]),default:n(()=>[P("span",{innerHTML:e.$t("messages.fetching_product_details")},null,8,__)]),_:1},8,["message"])):A("",!0),e.productStatus=="success"?(d(),w(i,{key:1,type:"success",showIcon:"",message:e.$t("messages.product_is_upto_date")},null,8,["message"])):A("",!0),e.productStatus=="update_available"?(d(),w(i,{key:2,type:"warning",showIcon:"",message:e.$t("messages.new_app_version_avaialbe",[e.product.product.version])},null,8,["message"])):A("",!0),P("div",f_,[a(_,{columns:e.tableColumns,"row-key":k=>k.id,"data-source":e.appDetails,pagination:!1,showHeader:!1},{bodyCell:n(({column:k,record:v})=>[k.dataIndex=="name"?(d(),E(R,{key:0},[v.name=="app_details"?(d(),w(c,{key:0,level:5,strong:""},{default:n(()=>[p(r(e.$t("update_app.app_details")),1)]),_:1})):(d(),E("span",g_,r(e.$t(`update_app.${v.name}`)),1))],64)):A("",!0),k.dataIndex=="value"?(d(),E(R,{key:1},[v.name=="vue_version"?(d(),E("span",h_,r(e.vueVersion),1)):(d(),E("span",b_,r(v.value),1))],64)):A("",!0)]),_:1},8,["columns","row-key","data-source"])])]),_:1})]),_:1})]),_:1})}const v_=z(p_,[["render",y_]]),k_=x({props:["productStatus","product"],components:{DownloadOutlined:_a,ShoppingCartOutlined:ga,ReloadOutlined:Rt,SyncOutlined:We,CheckCircleOutlined:Ma,InfoOutlined:Lt,CheckOutlined:ia},setup(e,{emit:s}){const u=window.config.app_env,{t:l}=Q(),h=I(!1),b=I(""),m=I(!1),i=I(""),c=I(0),_=he();var g;const f=()=>{ge.confirm({title:l("common.update"),icon:a(ue),content:a("div",{style:"color:red;"},l("messages.are_you_sure_update_message")),okText:l("common.yes"),okType:"danger",cancelText:l("common.no"),onOk(){b.value=l("common.updating")+"...",y(e.product.name),h.value=!0},onCancel(){}})},y=C=>{m.value=!0,c.value=0,i.value="";const S={verified_name:C,domain:window.location.host};g=window.setInterval(function(){k()},1500),axiosAdmin.post(fe("update-app/update"),S).then(U=>{m.value=!1,c.value=100,i.value="started";const $={...S,file_name:U.data.file_name};axiosAdmin.post(fe("update-app/extract"),$).then(O=>{i.value="completed",qe.post("https://envato.codeifly.com/version-update",{verified_name:O.data.verified_name,version:O.data.version,domain:window.location.host}),_.commit("auth/updateActiveModules",O.data.enabled_modules),window.config.modules=O.data.enabled_modules,window.config.installed_modules=O.data.installed_modules}).catch(O=>{i.value="failed"})}).catch(U=>{m.value=!1,c.value=0,clearInterval(g)})},k=()=>{axiosAdmin(fe("update-app/download-percentage")).then(C=>{c.value=parseInt(C.data.percentage),c.value>=100&&clearInterval(g)})};return{appEnv:u,updateApp:f,installUpdateModalVisible:h,closeInstallUpdateModal:()=>{h.value=!1,_.dispatch("auth/logoutToRootUrl")},downloadPercentage:c,downloading:m,extracting:i}}});function w_(e,s,u,l,h,b){const m=o("SyncOutlined"),i=o("a-button"),c=o("a-typography-text"),_=o("CheckCircleOutlined"),g=o("a-progress"),f=o("a-col"),y=o("a-row"),k=o("InfoOutlined"),v=o("CheckOutlined"),C=o("a-modal");return d(),E(R,null,[e.productStatus=="update_available"&&e.appEnv=="envato"?(d(),w(i,{key:0,type:"primary",onClick:e.updateApp},{default:n(()=>[a(m),p(" "+r(e.$t("update_app.update_app")),1)]),_:1},8,["onClick"])):A("",!0),a(C,{open:e.installUpdateModalVisible,"onUpdate:open":s[0]||(s[0]=S=>e.installUpdateModalVisible=S),title:e.$t("common.installing"),maskClosable:!1,closable:!1,footer:null},{default:n(()=>[a(y,{class:"mb-10"},{default:n(()=>[a(f,{span:24},{default:n(()=>[e.downloadPercentage<100?(d(),w(c,{key:0},{default:n(()=>[a(m,{spin:""}),p(" "+r(e.$t("messages.downloading_started_message")),1)]),_:1})):(d(),w(c,{key:1,strong:"",type:"success"},{default:n(()=>[a(_),p(" "+r(e.$t("module.downloading_completed")),1)]),_:1})),e.downloadPercentage<100?(d(),w(g,{key:2,percent:e.downloadPercentage},null,8,["percent"])):A("",!0)]),_:1})]),_:1}),a(y,{class:"mb-10"},{default:n(()=>[a(f,{span:24},{default:n(()=>[e.extracting==""?(d(),w(c,{key:0,type:"secondary"},{default:n(()=>[a(k),p(" "+r(e.$t("module.extract_zip_file")),1)]),_:1})):A("",!0),e.extracting=="started"?(d(),w(c,{key:1},{default:n(()=>[a(m,{spin:""}),p(" "+r(e.$t("messages.file_extracting_message")),1)]),_:1})):A("",!0),e.extracting=="completed"?(d(),w(c,{key:2,strong:"",type:"success"},{default:n(()=>[a(_),p(" "+r(e.$t("module.file_extracted")),1)]),_:1})):A("",!0)]),_:1})]),_:1}),e.extracting=="completed"?(d(),w(y,{key:0,class:"mt-20 mb-10"},{default:n(()=>[a(f,{span:24},{default:n(()=>[a(i,{type:"primary",onClick:e.closeInstallUpdateModal,block:""},{default:n(()=>[a(v),p(" "+r(e.$t("messages.installation_success")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})):A("",!0)]),_:1},8,["open","title"])],64)}const C_=z(k_,[["render",w_]]),S_={components:{SettingSidebar:Ue,AdminPageHeader:me,UpdateAppSettings:v_,InstallApp:C_},setup(){return{settingRef:I(null)}}};function $_(e,s,u,l,h,b){const m=o("InstallApp"),i=o("a-page-header"),c=o("router-link"),_=o("a-breadcrumb-item"),g=o("a-breadcrumb"),f=o("AdminPageHeader"),y=o("SettingSidebar"),k=o("a-col"),v=o("UpdateAppSettings"),C=o("admin-page-table-content"),S=o("a-row");return d(),E(R,null,[a(f,null,{header:n(()=>[a(i,{title:e.$t("menu.update_app"),class:"p-0"},{extra:n(()=>[l.settingRef?(d(),w(m,{key:0,productStatus:l.settingRef.productStatus,product:l.settingRef.product.product},null,8,["productStatus","product"])):A("",!0)]),_:1},8,["title"])]),breadcrumb:n(()=>[a(g,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(_,null,{default:n(()=>[a(c,{to:{name:"admin.dashboard.index"}},{default:n(()=>[p(r(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(_,null,{default:n(()=>[p(r(e.$t("menu.settings")),1)]),_:1}),a(_,null,{default:n(()=>[p(r(e.$t("menu.update_app")),1)]),_:1})]),_:1})]),_:1}),a(S,null,{default:n(()=>[a(k,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:n(()=>[a(y)]),_:1}),a(k,{xs:24,sm:24,md:24,lg:20,xl:20},{default:n(()=>[a(C,null,{default:n(()=>[a(v,{ref:"settingRef"},null,512)]),_:1})]),_:1})]),_:1})],64)}const D_=z(S_,[["render",$_]]),je=window.config.app_type,ta=je=="non-saas"?"admin":"superadmin",A_=[{path:"translations",component:Zc,name:`${ta}.settings.translations.index`,meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"translations",permission:je=="non-saas"?"translations_view":"superadmin"}},{path:"modules",component:$p,name:`${ta}.settings.modules.index`,meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"modules",permission:je=="non-saas"?"modules_view":"superadmin"}},{path:"storage",component:Pp,name:`${ta}.settings.storage.index`,meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"storage_settings",permission:je=="non-saas"?"storage_edit":"superadmin"}},{path:"email",component:Zp,name:`${ta}.settings.email.index`,meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"email_settings",permission:je=="non-saas"?"email_edit":"superadmin"}},{path:"database-backup",component:c_,name:"admin.settings.database_backup.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"database_backup",permission:je=="non-saas"?"database_backup":"superadmin"}},{path:"update-app",component:D_,name:`${ta}.settings.update_app.index`,meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"update_app",permission:je=="non-saas"?"update_app":"superadmin"}}],T_={components:{InfoCircleOutlined:Ge}};function E_(e,s,u,l,h,b){const m=o("InfoCircleOutlined"),i=o("a-tooltip");return d(),w(i,null,{title:n(()=>[p(r(e.$t("mail_settings.notificaiton_will_be_sent_to_company")),1)]),default:n(()=>[a(m)]),_:1})}const O_=z(T_,[["render",E_]]);const U_={props:["sendMailSettings"],components:{TooltipCompany:O_},setup(e){const{addEditRequestAdmin:s}=se(),{t:u}=Q(),l=I([]);return ee(()=>{l.value=e.sendMailSettings.credentials}),{settings:l,settingsChanged:b=>{s({url:"settings/email/send-mail-settings",data:{name_key:"company",settings:b},success:m=>{Ae.success(u("mail_settings.send_mail_setting_saved"))}})}}}},P_={class:"notificaiton-setting-bar"},I_={style:{marginTop:"8px",paddingBottom:"14px"}};function M_(e,s,u,l,h,b){const m=o("TooltipCompany"),i=o("a-typography-title"),c=o("a-col"),_=o("a-checkbox"),g=o("a-divider"),f=o("a-row"),y=o("a-checkbox-group"),k=o("a-card"),v=o("perfect-scrollbar");return d(),E("div",P_,[a(v,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:n(()=>[a(k,{class:"page-content-container"},{title:n(()=>[P("div",I_,r(e.$t("mail_settings.send_mail_for")),1)]),default:n(()=>[a(y,{value:l.settings,"onUpdate:value":s[0]||(s[0]=C=>l.settings=C),style:{width:"100%"},onChange:l.settingsChanged},{default:n(()=>[a(f,null,{default:n(()=>[a(c,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:n(()=>[a(i,{level:5},{default:n(()=>[p(r(e.$t("menu.staff_members"))+" ",1),a(m)]),_:1})]),_:1}),a(c,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:n(()=>[a(_,{value:"staff_member_create"},{default:n(()=>[p(r(e.$t("common.on_create")),1)]),_:1})]),_:1}),a(c,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:n(()=>[a(_,{value:"staff_member_update"},{default:n(()=>[p(r(e.$t("common.on_update")),1)]),_:1})]),_:1}),a(c,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:n(()=>[a(_,{value:"staff_member_delete"},{default:n(()=>[p(r(e.$t("common.on_delete")),1)]),_:1})]),_:1}),a(g)]),_:1})]),_:1},8,["value","onChange"])]),_:1})]),_:1})])}const F_=z(U_,[["render",M_]]),R_={components:{SaveOutlined:_e,SettingSidebar:Ue,AdminPageHeader:me,SendMailSetting:F_},setup(){const e=I([]);return ee(()=>{axiosAdmin.get("settings/email").then(s=>{e.value=s.data.sendMailSettings})}),{sendMailSettings:e}}};function L_(e,s,u,l,h,b){const m=o("a-page-header"),i=o("router-link"),c=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("SettingSidebar"),y=o("a-col"),k=o("SendMailSetting"),v=o("a-row");return d(),E(R,null,[a(g,null,{header:n(()=>[a(m,{title:e.$t("menu.email_settings"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(c,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[p(r(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(c,null,{default:n(()=>[p(r(e.$t("menu.settings")),1)]),_:1}),a(c,null,{default:n(()=>[p(r(e.$t("menu.email_settings")),1)]),_:1})]),_:1})]),_:1}),a(v,null,{default:n(()=>[a(y,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:n(()=>[a(f)]),_:1}),a(y,{xs:24,sm:24,md:24,lg:20,xl:20},{default:n(()=>[a(v,null,{default:n(()=>[a(y,{xs:24,sm:24,md:24,lg:24,xl:24},{default:n(()=>[l.sendMailSettings&&l.sendMailSettings.xid?(d(),w(k,{key:0,sendMailSettings:l.sendMailSettings},null,8,["sendMailSettings"])):A("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64)}const q_=z(R_,[["render",L_]]),B_=window.config.app_type,K_=B_=="saas"?[{path:"email",component:q_,name:"admin.settings.email.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"email_settings",permission:"email_edit"}}]:[...A_],z_=[{path:"/admin/settings/",component:()=>Fe(()=>import("./Admin-bb3356a6.js"),["assets/Admin-bb3356a6.js","assets/vendor-a91b8582.js","assets/vendor-ad46f743.css","assets/Admin-14aea5fe.css"]),children:[{path:"company",component:fc,name:"admin.settings.company.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"company",permission:"companies_edit"}},{path:"profile",component:yc,name:"admin.settings.profile.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"profile"}},{path:"langs",component:Dc,name:"admin.settings.langs.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"translations",permission:"translations_view"}},{path:"roles",component:Oc,name:"admin.settings.roles.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"roles",permission:"roles_view"}},{path:"currencies",component:Lc,name:"admin.settings.currencies.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"currencies",permission:"currencies_view"}},...K_]}],V_=()=>{const s="lead-follow-ups?fields=id,xid,reference_number,lead_data,started,campaign_id,x_campaign_id,campaign{id,xid,name,status},time_taken,first_action_by,x_first_action_by,firstActioner{id,xid,name},last_action_by,x_last_action_by,lastActioner{id,xid,name},lead_follow_up_id,x_lead_follow_up_id,leadFollowUp{id,xid,log_type,time_taken,date_time,lead_id,x_lead_id,user_id,x_user_id},leadFollowUp:user{id,xid,name,profile_image,profile_image_url}",u=["lead_id","campaign_id","user_id"],{t:l}=Q(),h=[{title:l("lead.reference_number"),dataIndex:"reference_number"},{title:l("lead.campaign"),dataIndex:"campaign"},{title:l("lead_follow_up.follow_up_time"),dataIndex:"date_time"},{title:l("lead_follow_up.follow_up_by"),dataIndex:"actioner"},{title:l("common.action"),dataIndex:"action"}];return{url:s,columns:h,filterableColumns:[],hashableColumns:u}},H_={components:{DoubleRightOutlined:sa,DeleteOutlined:pe,AdminPageHeader:me,DateRangePicker:ua,DeleteBooking:Ra},setup(){const{permsArray:e,getCampaignUrl:s,user:u,formatDateTime:l}=Z(),{url:h,columns:b,hashableColumns:m}=V_(),{t:i}=Q(),c=he(),_=Oe(),{addEditRequestAdmin:g,loading:f,rules:y}=se(),k=ya(),v=I({campaign_id:void 0,dates:[],user_id:void 0}),C=I([]),S=I([]),U=Ve();ee(()=>{const D=s(),L=axiosAdmin.get(D),q=axiosAdmin.get("all-users?log_type=lead_follow_up");Promise.all([L,q]).then(([K,j])=>{C.value=K.data,S.value=j.data.users,v.value={...v.value,user_id:u.value.xid},e.value.includes("leads_view_all")||e.value.includes("admin"),k.hashable.value=[...m],$()})});const $=()=>{k.tableUrl.value={url:h,extraFilters:v},k.hashable.value=[...m],k.table.pagination={...k.table.pagination,current:1},k.fetch({page:1})};return{...k,...U,url:h,columns:b,formatDateTime:l,hashableColumns:m,allCampaigns:C,allUsers:S,permsArray:e,extraFilters:v,user:u,startFollowUp:D=>{ge.confirm({title:i("common.start")+"?",icon:a(ue),content:i("lead_follow_up.start_follow_up_message"),centered:!0,okText:i("common.yes"),okType:"danger",cancelText:i("common.no"),onOk(){g({url:"lead-follow-ups/take-action",data:{x_lead_id:D.xid,booking_type:"lead_follow_up"},success:L=>{L&&L.lead_id&&_.push({name:"admin.call_manager.take_action",params:{id:L.lead_id}})}})},onCancel(){}})},setUrlData:$,showSelectedDeleteConfirm:()=>{ge.confirm({title:i("common.delete")+"?",icon:a(ue),content:i("lead_follow_up.selected_delete_message"),centered:!0,okText:i("common.yes"),okType:"danger",cancelText:i("common.no"),onOk(){const D=[];ce(k.table.selectedRowKeys,L=>{D.push(axiosAdmin.post("lead-follow-ups/delete",{x_lead_id:L,booking_type:"lead_follow_up"}))}),Promise.all(D).then(L=>{c.dispatch("auth/updateVisibleSubscriptionModules"),k.fetch({page:k.currentPage.value}),Se.success({message:i("common.success"),description:i("lead_follow_up.deleted"),placement:"bottomRight"})})},onCancel(){}})}}}},j_={class:"table-responsive"};function N_(e,s,u,l,h,b){const m=o("a-page-header"),i=o("router-link"),c=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("DeleteOutlined"),y=o("a-button"),k=o("a-col"),v=o("a-select-option"),C=o("a-select"),S=o("DateRangePicker"),U=o("a-row"),$=o("admin-page-filters"),O=o("DoubleRightOutlined"),T=o("a-tooltip"),D=o("DeleteBooking"),L=o("a-space"),q=o("a-table"),K=o("admin-page-table-content"),j=o("view-lead-details");return d(),E(R,null,[a(g,null,{header:n(()=>[a(m,{title:e.$t("menu.lead_follow_up"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(c,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[p(r(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(c,null,{default:n(()=>[p(r(e.$t("menu.bookings")),1)]),_:1}),a(c,null,{default:n(()=>[p(r(e.$t("menu.lead_follow_up")),1)]),_:1})]),_:1})]),_:1}),a($,null,{default:n(()=>[a(U,{gutter:[16,16]},{default:n(()=>[a(k,{xs:24,sm:24,md:12,lg:10,xl:10},{default:n(()=>[e.table.selectedRowKeys.length>0&&(l.permsArray.includes("leads_view_all")||l.permsArray.includes("admin"))?(d(),w(y,{key:0,type:"primary",onClick:l.showSelectedDeleteConfirm,danger:""},{icon:n(()=>[a(f)]),default:n(()=>[p(" "+r(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1}),a(k,{xs:24,sm:24,md:12,lg:14,xl:14},{default:n(()=>[a(U,{gutter:[16,16],justify:"end"},{default:n(()=>[a(k,{xs:24,sm:24,md:12,lg:8,xl:6},{default:n(()=>[a(C,{value:l.extraFilters.campaign_id,"onUpdate:value":s[0]||(s[0]=F=>l.extraFilters.campaign_id=F),placeholder:e.$t("common.select_default_text",[e.$t("lead.campaign")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:l.setUrlData},{default:n(()=>[(d(!0),E(R,null,X(l.allCampaigns,F=>(d(),w(v,{key:F.xid,title:F.name,value:F.xid},{default:n(()=>[p(r(F.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1}),l.permsArray.includes("leads_view_all")||l.permsArray.includes("admin")?(d(),w(k,{key:0,xs:24,sm:24,md:12,lg:8,xl:6},{default:n(()=>[a(C,{value:l.extraFilters.user_id,"onUpdate:value":s[1]||(s[1]=F=>l.extraFilters.user_id=F),placeholder:e.$t("common.select_default_text",[e.$t("user.user")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:l.setUrlData},{default:n(()=>[(d(!0),E(R,null,X(l.allUsers,F=>(d(),w(v,{key:F.xid,title:F.name,value:F.xid},{default:n(()=>[p(r(F.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1})):A("",!0),a(k,{xs:24,sm:24,md:8,lg:8,xl:6},{default:n(()=>[a(S,{onDateTimeChanged:s[2]||(s[2]=F=>{l.extraFilters.dates=F,l.setUrlData()})})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(K,null,{default:n(()=>[a(U,null,{default:n(()=>[a(k,{span:24},{default:n(()=>[P("div",j_,[a(q,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:F=>({disabled:!1,name:F.xid})},columns:l.columns,"row-key":F=>F.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:n(({column:F,record:M})=>[F.dataIndex==="reference_number"?(d(),w(y,{key:0,type:"link",class:"p-0",onClick:B=>e.showViewDrawer(M)},{default:n(()=>[p(r(M.reference_number!=""&&M.reference_number!=null?M.reference_number:"---"),1)]),_:2},1032,["onClick"])):A("",!0),F.dataIndex==="date_time"?(d(),E(R,{key:1},[p(r(l.formatDateTime(M.lead_follow_up.date_time)),1)],64)):A("",!0),F.dataIndex==="campaign"?(d(),E(R,{key:2},[p(r(M.campaign&&M.campaign.name?M.campaign.name:"-"),1)],64)):A("",!0),F.dataIndex==="actioner"?(d(),E(R,{key:3},[p(r(M.lead_follow_up&&M.lead_follow_up.user&&M.lead_follow_up.user.name?M.lead_follow_up.user.name:"-"),1)],64)):A("",!0),F.dataIndex==="action"?(d(),w(L,{key:4},{default:n(()=>[M.lead_follow_up.x_user_id==l.user.xid?(d(),w(T,{key:0,title:e.$t("lead_follow_up.start_follow_up")},{default:n(()=>[a(y,{type:"primary",onClick:B=>l.startFollowUp(M)},{icon:n(()=>[a(O)]),_:2},1032,["onClick"])]),_:2},1032,["title"])):A("",!0),l.permsArray.includes("leads_view_all")||l.permsArray.includes("admin")?(d(),w(D,{key:1,bookingType:"lead_follow_up",onSuccess:l.setUrlData,xLeadId:M.xid,showDeleteText:!1},null,8,["onSuccess","xLeadId"])):A("",!0)]),_:2},1024)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1}),a(j,{visible:e.isViewDrawerVisible,lead:e.viewDrawerData,onClose:e.hideViewDrawer},null,8,["visible","lead","onClose"])],64)}const W_=z(H_,[["render",N_]]),G_=()=>{const s="salesman-bookings?fields=id,xid,reference_number,lead_data,started,campaign_id,x_campaign_id,campaign{id,xid,name,status},time_taken,first_action_by,x_first_action_by,firstActioner{id,xid,name},last_action_by,x_last_action_by,lastActioner{id,xid,name},salesman_booking_id,x_salesman_booking_id,salesmanBooking{id,xid,log_type,time_taken,date_time,lead_id,x_lead_id,user_id,x_user_id,created_by_id,x_created_by_id},salesmanBooking:user{id,xid,name,profile_image,profile_image_url}",u=["lead_id","campaign_id","user_id"],{t:l}=Q(),h=[{title:l("lead.reference_number"),dataIndex:"reference_number"},{title:l("lead.campaign"),dataIndex:"campaign"},{title:l("lead.booking_time"),dataIndex:"date_time"},{title:l("salesman.salesman"),dataIndex:"actioner"},{title:l("common.action"),dataIndex:"action"}];return{url:s,columns:h,filterableColumns:[],hashableColumns:u}},Y_={components:{PlayCircleOutlined:Me,InfoCircleOutlined:Ge,DeleteOutlined:pe,PlusOutlined:ae,AdminPageHeader:me,DateRangePicker:ua,DeleteBooking:Ra},setup(){const{permsArray:e,getCampaignUrl:s,user:u,formatDateTime:l}=Z(),{url:h,columns:b,hashableColumns:m}=G_(),{t:i}=Q(),c=he(),_=Oe();se();const g=ya(),f=I({campaign_id:void 0,dates:[],user_id:void 0}),y=I([]),k=I([]),v=Ve();ee(()=>{const $=s(),O=axiosAdmin.get($),T=axiosAdmin.get("all-users?log_type=salesman_bookings");Promise.all([O,T]).then(([D,L])=>{y.value=D.data,k.value=L.data.users,e.value.includes("leads_view_all")||e.value.includes("admin"),g.hashable.value=[...m],C()})});const C=()=>{g.tableUrl.value={url:h,extraFilters:f},g.hashable.value=[...m],g.table.pagination={...g.table.pagination,current:1},g.fetch({page:1})};return{...g,...v,url:h,columns:b,formatDateTime:l,hashableColumns:m,allCampaigns:y,allUsers:k,permsArray:e,extraFilters:f,user:u,setUrlData:C,goAndResumeLead:$=>{ge.confirm({title:i("common.are_you_sure")+"?",icon:a(ue),content:i("lead.are_you_want_to_resume_this_lead"),centered:!0,okText:i("common.yes"),okType:"danger",cancelText:i("common.no"),onOk(){_.push({name:"admin.call_manager.take_action",params:{id:$.xid}})},onCancel(){}})},showSelectedDeleteConfirm:()=>{ge.confirm({title:i("common.delete")+"?",icon:a(ue),content:i("salesman_booking.selected_delete_message"),centered:!0,okText:i("common.yes"),okType:"danger",cancelText:i("common.no"),onOk(){const $=[];ce(g.table.selectedRowKeys,O=>{$.push(axiosAdmin.post("salesman-bookings",{x_lead_id:O,booking_type:"salesman_bookings"}))}),Promise.all($).then(O=>{c.dispatch("auth/updateVisibleSubscriptionModules"),g.fetch({page:g.currentPage.value}),Se.success({message:i("common.success"),description:i("salesman_booking.deleted"),placement:"bottomRight"})})},onCancel(){}})}}}},X_={class:"table-responsive"},J_={key:1};function Q_(e,s,u,l,h,b){const m=o("a-page-header"),i=o("router-link"),c=o("a-breadcrumb-item"),_=o("a-breadcrumb"),g=o("AdminPageHeader"),f=o("DeleteOutlined"),y=o("a-button"),k=o("a-space"),v=o("a-col"),C=o("a-select-option"),S=o("a-select"),U=o("DateRangePicker"),$=o("a-row"),O=o("admin-page-filters"),T=o("PlayCircleOutlined"),D=o("a-tooltip"),L=o("DeleteBooking"),q=o("InfoCircleOutlined"),K=o("a-table"),j=o("admin-page-table-content"),F=o("view-lead-details");return d(),E(R,null,[a(g,null,{header:n(()=>[a(m,{title:e.$t("menu.salesman_bookings"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(c,null,{default:n(()=>[a(i,{to:{name:"admin.dashboard.index"}},{default:n(()=>[p(r(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(c,null,{default:n(()=>[p(r(e.$t("menu.bookings")),1)]),_:1}),a(c,null,{default:n(()=>[p(r(e.$t("menu.salesman_bookings")),1)]),_:1})]),_:1})]),_:1}),a(O,null,{default:n(()=>[a($,{gutter:[16,16]},{default:n(()=>[a(v,{xs:24,sm:24,md:12,lg:10,xl:10},{default:n(()=>[a(k,null,{default:n(()=>[e.table.selectedRowKeys.length>0&&(l.permsArray.includes("salesman_bookings_delete")||l.permsArray.includes("admin"))?(d(),w(y,{key:0,type:"primary",onClick:l.showSelectedDeleteConfirm,danger:""},{icon:n(()=>[a(f)]),default:n(()=>[p(" "+r(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),a(v,{xs:24,sm:24,md:12,lg:14,xl:14},{default:n(()=>[a($,{gutter:[16,16],justify:"end"},{default:n(()=>[a(v,{xs:24,sm:24,md:12,lg:8,xl:6},{default:n(()=>[a(S,{value:l.extraFilters.campaign_id,"onUpdate:value":s[0]||(s[0]=M=>l.extraFilters.campaign_id=M),placeholder:e.$t("common.select_default_text",[e.$t("lead.campaign")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:l.setUrlData},{default:n(()=>[(d(!0),E(R,null,X(l.allCampaigns,M=>(d(),w(C,{key:M.xid,title:M.name,value:M.xid},{default:n(()=>[p(r(M.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1}),a(v,{xs:24,sm:24,md:12,lg:8,xl:6},{default:n(()=>[a(S,{value:l.extraFilters.user_id,"onUpdate:value":s[1]||(s[1]=M=>l.extraFilters.user_id=M),placeholder:e.$t("common.select_default_text",[e.$t("salesman.salesman")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:l.setUrlData},{default:n(()=>[(d(!0),E(R,null,X(l.allUsers,M=>(d(),w(C,{key:M.xid,title:M.name,value:M.xid},{default:n(()=>[p(r(M.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1}),a(v,{xs:24,sm:24,md:8,lg:8,xl:6},{default:n(()=>[a(U,{onDateTimeChanged:s[2]||(s[2]=M=>{l.extraFilters.dates=M,l.setUrlData()})})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(j,null,{default:n(()=>[a($,{class:"mt-20"},{default:n(()=>[a(v,{span:24},{default:n(()=>[P("div",X_,[a(K,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:M=>({disabled:!1,name:M.xid})},columns:l.columns,"row-key":M=>M.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:n(({column:M,record:B})=>[M.dataIndex==="reference_number"?(d(),w(y,{key:0,type:"link",class:"p-0",onClick:J=>e.showViewDrawer(B)},{default:n(()=>[p(r(B.reference_number!=""&&B.reference_number!=null?B.reference_number:"---"),1)]),_:2},1032,["onClick"])):A("",!0),M.dataIndex==="date_time"?(d(),E(R,{key:1},[p(r(l.formatDateTime(B.salesman_booking.date_time)),1)],64)):A("",!0),M.dataIndex==="campaign"?(d(),E(R,{key:2},[p(r(B.campaign&&B.campaign.name?B.campaign.name:"-"),1)],64)):A("",!0),M.dataIndex==="actioner"?(d(),E(R,{key:3},[p(r(B.salesman_booking&&B.salesman_booking.user&&B.salesman_booking.user.name?B.salesman_booking.user.name:"-"),1)],64)):A("",!0),M.dataIndex==="action"?(d(),E(R,{key:4},[B.x_last_action_by==l.user.xid?(d(),w(k,{key:0},{default:n(()=>[a(D,{title:e.$t("lead.go_resume_call")},{default:n(()=>[a(y,{type:"primary",onClick:J=>l.goAndResumeLead(B)},{icon:n(()=>[a(T)]),_:2},1032,["onClick"])]),_:2},1032,["title"]),a(L,{bookingType:"salesman_bookings",onSuccess:l.setUrlData,xLeadId:B.xid,showDeleteText:!1},null,8,["onSuccess","xLeadId"])]),_:2},1024)):(d(),E("span",J_,[a(D,null,{title:n(()=>[p(r(e.$t("salesman_booking.you_are_not_last_actioner")),1)]),default:n(()=>[a(q)]),_:1})]))],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1}),a(F,{visible:e.isViewDrawerVisible,lead:e.viewDrawerData,onClose:e.hideViewDrawer},null,8,["visible","lead","onClose"])],64)}const Z_=z(Y_,[["render",Q_]]),x_=[{path:"/",component:()=>Fe(()=>import("./Admin-bb3356a6.js"),["assets/Admin-bb3356a6.js","assets/vendor-a91b8582.js","assets/vendor-ad46f743.css","assets/Admin-14aea5fe.css"]),children:[{path:"/admin/bookings/lead-follow-up",component:W_,name:"admin.bookings.lead_follow_up.index",meta:{requireAuth:!0,menuParent:"lead_follow_up",menuKey:"lead_follow_up"}},{path:"/admin/bookings/salesman-bookings",component:Z_,name:"admin.bookings.salesman_bookings.index",meta:{requireAuth:!0,menuParent:"salesmans",menuKey:"salesman_bookings"}}]}],ef={props:{showFilter:{default:!0},panelType:{type:String,default:"admin"}},emits:["addOrEditSuccess"],components:{PlusOutlined:ae,EditOutlined:ke,DeleteOutlined:pe,AddEdit:Ka},setup(e,{emit:s}){const{permsArray:u,appSetting:l}=Z(),{url:h,addEditUrl:b,initData:m,columns:i,filterableColumns:c}=Ba(e.panelType),_=Te();return ee(()=>{_.tableUrl.value={url:h},_.table.filterableColumns=c,_.fetch({page:1}),_.crudUrl.value=b,_.langKey.value="currency",_.initData.value={...m},_.formData.value={...m}}),{appSetting:l,permsArray:u,columns:i,..._,filterableColumns:c,addOrEditSuccess:f=>{_.addEditSuccess(f),s("addOrEditSuccess",{action_type:_.addEditType.value,xid:f})}}}},af={class:"table-responsive"};function tf(e,s,u,l,h,b){const m=o("AddEdit"),i=o("a-select-option"),c=o("a-select"),_=o("a-input-search"),g=o("a-input-group"),f=o("a-col"),y=o("a-row"),k=o("EditOutlined"),v=o("a-button"),C=o("DeleteOutlined"),S=o("a-table");return d(),E("div",null,[a(m,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:l.addOrEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),u.showFilter?(d(),w(y,{key:0,gutter:[15,15],class:"mb-20"},{default:n(()=>[a(f,{xs:24,sm:24,md:12,lg:8,xl:8},{default:n(()=>[a(g,{compact:""},{default:n(()=>[a(c,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":s[0]||(s[0]=U=>e.table.searchColumn=U),placeholder:e.$t("common.select_default_text",[""])},{default:n(()=>[(d(!0),E(R,null,X(l.filterableColumns,U=>(d(),w(i,{key:U.key},{default:n(()=>[p(r(U.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),a(_,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":s[1]||(s[1]=U=>e.table.searchString=U),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})):A("",!0),a(y,{class:"mt-20"},{default:n(()=>[a(f,{span:24},{default:n(()=>[P("div",af,[a(S,{columns:l.columns,"row-key":U=>U.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange},{bodyCell:n(({column:U,record:$})=>[U.dataIndex==="action"?(d(),E(R,{key:0},[u.panelType=="admin"&&(l.permsArray.includes("currencies_edit")||l.permsArray.includes("admin"))||u.panelType=="superadmin"?(d(),w(v,{key:0,type:"primary",onClick:O=>e.editItem($),style:{"margin-left":"4px"}},{icon:n(()=>[a(k)]),_:2},1032,["onClick"])):A("",!0),(u.panelType=="admin"&&(l.permsArray.includes("currencies_delete")||l.permsArray.includes("admin"))||u.panelType=="superadmin")&&l.appSetting.x_currency_id!=$.xid?(d(),w(v,{key:1,type:"primary",onClick:O=>e.showDeleteConfirm($.xid),style:{"margin-left":"4px"}},{icon:n(()=>[a(C)]),_:2},1032,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})])}const nf=z(ef,[["render",tf]]),lf={props:{showSubmitButton:{default:!0}},emits:["updateSuccess"],components:{EyeOutlined:Be,PlusOutlined:ae,EditOutlined:ke,DeleteOutlined:pe,ExclamationCircleOutlined:ue,SaveOutlined:_e,SettingOutlined:ba,ColorPicker:Ft,Upload:Ye,CurrencyAddButton:cn,CreateMenuSetting:fn,FormItemHeading:xt,LanguageAddButton:ka},setup(e,{emit:s}){const{addEditRequestAdmin:u,loading:l,rules:h}=se(),{permsArray:b,appSetting:m,dayjsObject:i,appType:c}=Z(),{t:_}=Q(),g=he(),f=I({}),y=I([]),k=I([]),v=I([]),C=I([]),S=m.value,U="currencies?limit=10000",$="timezones",O=I("linear-gradient(0deg, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 1) 100%)"),T=window.config.theme_mode,D=I([]),L="all-langs";ee(()=>{const B=axiosAdmin.get(U),J=axiosAdmin.get($),Y=axiosAdmin.get(L);Promise.all([B,J,Y]).then(([V,W,G])=>{y.value=V.data,k.value=W.data.timezones,v.value=W.data.date_formates,C.value=W.data.time_formates,D.value=G.data.langs,q()})});const q=()=>{f.value={name:S.name,short_name:S.short_name,email:S.email,phone:S.phone,address:S.address,left_sidebar_theme:S.left_sidebar_theme,dark_logo:S.dark_logo,dark_logo_url:S.dark_logo_url,light_logo:S.light_logo,light_logo_url:S.light_logo_url,small_dark_logo:S.small_dark_logo,small_light_logo:S.small_light_logo,small_dark_logo_url:S.small_dark_logo_url,small_light_logo_url:S.small_light_logo_url,login_image:S.login_image,login_image_url:S.login_image_url,shortcut_menus:S.shortcut_menus,rtl:S.rtl,currency_id:S.x_currency_id,lang_id:S.x_lang_id,primary_color:S.primary_color,timezone:S.timezone,date_format:S.date_format,time_format:S.time_format,auto_detect_timezone:S.auto_detect_timezone,app_debug:S.app_debug,update_app_notification:S.update_app_notification,_method:"PUT"}};return{appType:c,permsArray:b,formData:f,loading:l,rules:h,currencies:y,onSubmit:()=>{u({url:`companies/${S.xid}`,data:f.value,successMessage:_("company.updated"),success:B=>{g.dispatch("auth/updateApp"),s("updateSuccess")}})},currencyAdded:()=>{axiosAdmin.get(U).then(B=>{y.value=B.data})},gradientColor:O,timezones:k,dateFormats:v,timeFormats:C,dayjsObject:i,appThemeMode:T,addMenuSettingUpdated:B=>{f.value.shortcut_menus=B},allLangs:D,languageAdded:()=>{axiosAdmin.get(L).then(B=>{D.value=B.data.langs})}}}},of={class:"mt-40"},sf={style:{display:"flex"}},df={style:{display:"flex"}},rf={class:"mt-30"},uf={class:"mt-30"};function mf(e,s,u,l,h,b){const m=o("FormItemHeading"),i=o("a-input"),c=o("a-form-item"),_=o("a-col"),g=o("a-row"),f=o("a-select-option"),y=o("a-select"),k=o("CurrencyAddButton"),v=o("LanguageAddButton"),C=o("a-switch"),S=o("color-picker"),U=o("Upload"),$=o("SaveOutlined"),O=o("a-button"),T=o("a-form");return d(),w(T,{layout:"vertical"},{default:n(()=>[P("div",of,[a(m,null,{default:n(()=>[p(r(e.$t("setup_company.basic_settings")),1)]),_:1})]),a(g,{gutter:16},{default:n(()=>[a(_,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(c,{label:e.$t("company.name"),name:"name",help:l.rules.name?l.rules.name.message:null,validateStatus:l.rules.name?"error":null,class:"required"},{default:n(()=>[a(i,{value:l.formData.name,"onUpdate:value":s[0]||(s[0]=D=>l.formData.name=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(_,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(c,{label:e.$t("company.short_name"),name:"short_name",help:l.rules.short_name?l.rules.short_name.message:null,validateStatus:l.rules.short_name?"error":null,class:"required"},{default:n(()=>[a(i,{value:l.formData.short_name,"onUpdate:value":s[1]||(s[1]=D=>l.formData.short_name=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.short_name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(g,{gutter:16},{default:n(()=>[a(_,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(c,{label:e.$t("company.email"),name:"email",help:l.rules.email?l.rules.email.message:null,validateStatus:l.rules.email?"error":null,class:"required"},{default:n(()=>[a(i,{value:l.formData.email,"onUpdate:value":s[2]||(s[2]=D=>l.formData.email=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(_,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(c,{label:e.$t("company.phone"),name:"phone",help:l.rules.phone?l.rules.phone.message:null,validateStatus:l.rules.phone?"error":null,class:"required"},{default:n(()=>[a(i,{value:l.formData.phone,"onUpdate:value":s[3]||(s[3]=D=>l.formData.phone=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.phone")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(g,{gutter:16},{default:n(()=>[a(_,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(c,{label:e.$t("company.date_format"),name:"date_format",help:l.rules.date_format?l.rules.date_format.message:null,validateStatus:l.rules.date_format?"error":null,class:"required"},{default:n(()=>[a(y,{value:l.formData.date_format,"onUpdate:value":s[4]||(s[4]=D=>l.formData.date_format=D),placeholder:e.$t("common.select_default_text",[e.$t("company.date_format")]),allowClear:!0,optionFilterProp:"value","show-search":""},{default:n(()=>[(d(!0),E(R,null,X(l.dateFormats,(D,L)=>(d(),w(f,{key:L,value:D},{default:n(()=>[p(r(`(${L}) => `+l.dayjsObject().format(D)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(_,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(c,{label:e.$t("company.time_format"),name:"time_format",help:l.rules.time_format?l.rules.time_format.message:null,validateStatus:l.rules.time_format?"error":null,class:"required"},{default:n(()=>[a(y,{value:l.formData.time_format,"onUpdate:value":s[5]||(s[5]=D=>l.formData.time_format=D),placeholder:e.$t("common.select_default_text",[e.$t("company.time_format")]),allowClear:!0,optionFilterProp:"value","show-search":""},{default:n(()=>[(d(!0),E(R,null,X(l.timeFormats,(D,L)=>(d(),w(f,{key:L,value:L},{default:n(()=>[p(r(`(${D}) => `+l.dayjsObject().format(L)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(g,{gutter:16},{default:n(()=>[a(_,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(c,{label:e.$t("company.currency"),name:"currency_id",help:l.rules.currency_id?l.rules.currency_id.message:null,validateStatus:l.rules.currency_id?"error":null,class:"required"},{default:n(()=>[P("span",sf,[a(y,{value:l.formData.currency_id,"onUpdate:value":s[6]||(s[6]=D=>l.formData.currency_id=D),placeholder:e.$t("common.select_default_text",[e.$t("company.currency")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:n(()=>[(d(!0),E(R,null,X(l.currencies,D=>(d(),w(f,{key:D.xid,value:D.xid},{default:n(()=>[p(r(`${D.name} (${D.symbol})`),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),a(k,{onOnAddSuccess:l.currencyAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(_,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(c,{label:e.$t("company.language"),name:"lang_id",help:l.rules.lang_id?l.rules.lang_id.message:null,validateStatus:l.rules.lang_id?"error":null,class:"required"},{default:n(()=>[P("span",df,[a(y,{value:l.formData.lang_id,"onUpdate:value":s[7]||(s[7]=D=>l.formData.lang_id=D),placeholder:e.$t("common.select_default_text",[e.$t("company.language")]),optionFilterProp:"label","show-search":""},{default:n(()=>[(d(!0),E(R,null,X(l.allLangs,D=>(d(),w(f,{key:D.xid,value:D.xid},{default:n(()=>[p(r(D.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),a(v,{onOnAddSuccess:l.languageAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(g,{gutter:16},{default:n(()=>[a(_,{xs:24,sm:24,md:4,lg:4},{default:n(()=>[a(c,{label:e.$t("company.auto_detect_timezone"),name:"auto_detect_timezone",help:l.rules.auto_detect_timezone?l.rules.auto_detect_timezone.message:null,validateStatus:l.rules.auto_detect_timezone?"error":null},{default:n(()=>[a(C,{checked:l.formData.auto_detect_timezone,"onUpdate:checked":s[8]||(s[8]=D=>l.formData.auto_detect_timezone=D),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(_,{xs:24,sm:24,md:8,lg:8},{default:n(()=>[a(c,{label:e.$t("company.default_timezone"),name:"timezone",help:l.rules.timezone?l.rules.timezone.message:null,validateStatus:l.rules.timezone?"error":null,class:"required"},{default:n(()=>[a(y,{value:l.formData.timezone,"onUpdate:value":s[9]||(s[9]=D=>l.formData.timezone=D),placeholder:e.$t("common.select_default_text",[e.$t("company.default_timezone")]),allowClear:!0,optionFilterProp:"value","show-search":""},{default:n(()=>[(d(!0),E(R,null,X(l.timezones,(D,L)=>(d(),w(f,{key:L,value:D},{default:n(()=>[p(r(D),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l.appType=="non-saas"?(d(),w(_,{key:0,xs:24,sm:24,md:4,lg:4},{default:n(()=>[a(c,{label:e.$t("company.app_debug"),name:"app_debug",help:l.rules.app_debug?l.rules.app_debug.message:null,validateStatus:l.rules.app_debug?"error":null},{default:n(()=>[a(C,{checked:l.formData.app_debug,"onUpdate:checked":s[10]||(s[10]=D=>l.formData.app_debug=D),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1})):A("",!0),l.appType=="non-saas"?(d(),w(_,{key:1,xs:24,sm:24,md:4,lg:4},{default:n(()=>[a(c,{label:e.$t("company.update_app_notification"),name:"update_app_notification",help:l.rules.update_app_notification?l.rules.update_app_notification.message:null,validateStatus:l.rules.update_app_notification?"error":null},{default:n(()=>[a(C,{checked:l.formData.update_app_notification,"onUpdate:checked":s[11]||(s[11]=D=>l.formData.update_app_notification=D),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1})):A("",!0)]),_:1}),P("div",rf,[a(m,null,{default:n(()=>[p(r(e.$t("setup_company.theme_settings")),1)]),_:1})]),a(g,{gutter:16},{default:n(()=>[a(_,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(c,{label:e.$t("company.left_sidebar_theme"),name:"left_sidebar_theme",help:l.rules.left_sidebar_theme?l.rules.left_sidebar_theme.message:null,validateStatus:l.rules.left_sidebar_theme?"error":null},{default:n(()=>[a(y,{value:l.formData.left_sidebar_theme,"onUpdate:value":s[12]||(s[12]=D=>l.formData.left_sidebar_theme=D),placeholder:e.$t("common.select_default_text",[e.$t("company.left_sidebar_theme")])},{default:n(()=>[a(f,{key:"dark",value:"dark"},{default:n(()=>[p(r(e.$t("company.dark")),1)]),_:1}),l.appThemeMode!="dark"?(d(),w(f,{key:"light",value:"light"},{default:n(()=>[p(r(e.$t("company.light")),1)]),_:1})):A("",!0)]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(_,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(c,{label:e.$t("company.primary_color"),name:"primary_color",help:l.rules.primary_color?l.rules.primary_color.message:null,validateStatus:l.rules.primary_color?"error":null},{default:n(()=>[a(S,{pureColor:l.formData.primary_color,"onUpdate:pureColor":s[13]||(s[13]=D=>l.formData.primary_color=D),format:"hex",useType:"pure",gradientColor:l.gradientColor,"onUpdate:gradientColor":s[14]||(s[14]=D=>l.gradientColor=D)},null,8,["pureColor","gradientColor"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(g,{gutter:16},{default:n(()=>[a(_,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(c,{label:e.$t("company.layout"),name:"rtl",help:l.rules.rtl?l.rules.rtl.message:null,validateStatus:l.rules.rtl?"error":null,class:"required"},{default:n(()=>[a(y,{value:l.formData.rtl,"onUpdate:value":s[15]||(s[15]=D=>l.formData.rtl=D),placeholder:e.$t("common.select_default_text",[e.$t("company.layout")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:n(()=>[a(f,{key:"rtl",value:1},{default:n(()=>[p(r(e.$t("company.rtl")),1)]),_:1}),a(f,{key:"ltr",value:0},{default:n(()=>[p(r(e.$t("company.ltr")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(_,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(c,{label:e.$t("company.shortcut_menu_Placement"),name:"shortcut_menus",help:l.rules.shortcut_menus?l.rules.shortcut_menus.message:null,validateStatus:l.rules.shortcut_menus?"error":null,class:"required"},{default:n(()=>[a(y,{value:l.formData.shortcut_menus,"onUpdate:value":s[16]||(s[16]=D=>l.formData.shortcut_menus=D),placeholder:e.$t("common.select_default_text",[e.$t("company.shortcut_menu_Placement")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:n(()=>[a(f,{key:"top_bottom",value:"top_bottom"},{default:n(()=>[p(r(e.$t("company.top_and_bottom")),1)]),_:1}),a(f,{key:"top",value:"top"},{default:n(()=>[p(r(e.$t("company.top_header")),1)]),_:1}),a(f,{key:"bottom",value:"bottom"},{default:n(()=>[p(r(e.$t("company.bottom_corner")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),P("div",uf,[a(m,null,{default:n(()=>[p(r(e.$t("setup_company.logo_settings")),1)]),_:1})]),a(g,{gutter:16},{default:n(()=>[a(_,{xs:24,sm:24,md:6,lg:6},{default:n(()=>[a(c,{label:e.$t("company.dark_logo"),name:"dark_logo",help:l.rules.dark_logo?l.rules.dark_logo.message:null,validateStatus:l.rules.dark_logo?"error":null},{default:n(()=>[a(U,{formData:l.formData,folder:"company",imageField:"dark_logo",onOnFileUploaded:s[17]||(s[17]=D=>{l.formData.dark_logo=D.file,l.formData.dark_logo_url=D.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(_,{xs:24,sm:24,md:6,lg:6},{default:n(()=>[a(c,{label:e.$t("company.light_logo"),name:"light_logo",help:l.rules.light_logo?l.rules.light_logo.message:null,validateStatus:l.rules.light_logo?"error":null},{default:n(()=>[a(U,{formData:l.formData,folder:"company",imageField:"light_logo",onOnFileUploaded:s[18]||(s[18]=D=>{l.formData.light_logo=D.file,l.formData.light_logo_url=D.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(_,{xs:24,sm:24,md:6,lg:6},{default:n(()=>[a(c,{label:e.$t("company.small_dark_logo"),name:"small_dark_logo",help:l.rules.small_dark_logo?l.rules.small_dark_logo.message:null,validateStatus:l.rules.small_dark_logo?"error":null},{default:n(()=>[a(U,{formData:l.formData,folder:"company",imageField:"small_dark_logo",onOnFileUploaded:s[19]||(s[19]=D=>{l.formData.small_dark_logo=D.file,l.formData.small_dark_logo_url=D.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),a(_,{xs:24,sm:24,md:6,lg:6},{default:n(()=>[a(c,{label:e.$t("company.small_light_logo"),name:"small_light_logo",help:l.rules.small_light_logo?l.rules.small_light_logo.message:null,validateStatus:l.rules.small_light_logo?"error":null},{default:n(()=>[a(U,{formData:l.formData,folder:"company",imageField:"small_light_logo",onOnFileUploaded:s[20]||(s[20]=D=>{l.formData.small_light_logo=D.file,l.formData.small_light_logo_url=D.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l.appType=="non-saas"?(d(),w(g,{key:0,gutter:16},{default:n(()=>[a(_,{xs:24,sm:24,md:6,lg:6},{default:n(()=>[a(c,{label:e.$t("company.login_image"),name:"login_image",help:l.rules.login_image?l.rules.login_image.message:null,validateStatus:l.rules.login_image?"error":null},{default:n(()=>[a(U,{formData:l.formData,folder:"company",imageField:"login_image",onOnFileUploaded:s[21]||(s[21]=D=>{l.formData.login_image=D.file,l.formData.login_image_url=D.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})):A("",!0),u.showSubmitButton?(d(),w(g,{key:1,gutter:16},{default:n(()=>[a(_,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(c,null,{default:n(()=>[a(O,{type:"primary",onClick:l.onSubmit,loading:l.loading},{icon:n(()=>[a($)]),default:n(()=>[p(" "+r(e.$t("common.update")),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1})):A("",!0)]),_:1})}const cf=z(lf,[["render",mf]]),pf=x({components:{PlusOutlined:ae,EditOutlined:ke,DeleteOutlined:pe,DoubleRightOutlined:sa,DoubleLeftOutlined:Dt,SaveOutlined:_e,SyncOutlined:We,CheckCircleOutlined:Ma,HomeOutlined:dl,InfoCircleOutlined:Ge,CurrencyTable:nf,EditSetupSetting:cf},setup(){Z();const e=Oe(),s=he(),u=I(null),l=I(null),h=I(null),b=I([]),m=I(0),i=I(0),c=Ie({currencyStepStatus:"wait",companySettingStepStatus:"wait"}),_=I(!1),g=I(!1);ee(()=>{f()});const f=()=>{axiosAdmin.get("app").then(D=>{b.value=D.data,c.currencyStepStatus=b.value.total_currencies>0?"finish":"wait",c.companySettingStepStatus=y()==!1?"finish":"wait",b.value.total_currencies==0?(m.value=0,i.value=0,c.currencyStepStatus="error"):y()?(m.value=1,i.value=1,c.companySettingStepStatus="error"):(m.value=1,i.value=1,g.value=!0,_.value=!0)})},y=()=>b.value.app.x_currency_id==null,k=()=>{l.value.addItem()},v=D=>{f()},C=()=>{h.value.onSubmit()},S=()=>{_.value=!0,axiosAdmin.post("/user").then(function(D){s.commit("auth/updateUser",D.data.user),g.value=!0}).catch(function(D){})},U=()=>{_.value=!1,e.push({name:"admin.dashboard.index"})},$=()=>{m.value=m.value==0?0:m.value-1},O=()=>{m.value=m.value>=1?1:m.value+1},T=()=>{s.dispatch("auth/logout")};return{appDetails:b,currentStep:m,correctStep:i,...Ut(c),warhouseTableRef:u,currencyTableRef:l,addCurrency:k,currencyAddSuccess:v,companySettingRef:h,submitCompanySetting:C,companySettingUpdated:S,showFinalModal:_,setupCompleted:g,goToDashboard:U,goBack:$,goNext:O,logout:T}}}),_f=["src"],ff={style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"left",zIndex:1,marginBottom:"10px"}},gf={key:0,style:{color:"#7676e3"}},hf={key:1,style:{color:"#7676e3"}};function bf(e,s,u,l,h,b){const m=o("a-col"),i=o("a-button"),c=o("a-row"),_=o("a-layout-header"),g=o("a-alert"),f=o("a-step"),y=o("a-steps"),k=o("a-divider"),v=o("PlusOutlined"),C=o("CurrencyTable"),S=o("EditSetupSetting"),U=o("DoubleLeftOutlined"),$=o("DoubleRightOutlined"),O=o("SaveOutlined"),T=o("a-space"),D=o("a-card"),L=o("CheckCircleOutlined"),q=o("InfoCircleOutlined"),K=o("HomeOutlined"),j=o("SyncOutlined"),F=o("a-result"),M=o("a-modal"),B=o("a-layout-content"),J=o("a-layout");return d(),w(J,{class:"layout"},{default:n(()=>[a(_,null,{default:n(()=>[a(c,null,{default:n(()=>[a(m,{span:4},{default:n(()=>[e.appDetails&&e.appDetails.app?(d(),E("img",{key:0,style:{height:"32px"},src:e.appDetails.app.left_sidebar_theme=="dark"?e.appDetails.app.dark_logo_url:e.appDetails.app.light_logo_url},null,8,_f)):A("",!0)]),_:1}),a(m,{span:20,style:{textAlign:"right"}},{default:n(()=>[a(i,{type:"link",onClick:e.logout,class:"p-0",style:{color:"white"}},{default:n(()=>[p(r(e.$t("menu.logout")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),a(B,{style:{padding:"0 50px"}},{default:n(()=>[a(D,{class:"setup-page-content-container",bodyStyle:{padding:"0px"},style:{height:"100vh",marginTop:"20px",background:"white"}},{default:n(()=>[a(c,null,{default:n(()=>[a(m,{span:21,offset:1},{default:n(()=>[a(g,{message:e.$t("setup_company.setup_not_completed"),description:e.$t("setup_company.setup_not_completed_description"),type:"error","show-icon":"",style:{marginTop:"40px"}},null,8,["message","description"])]),_:1})]),_:1}),a(c,{style:{marginTop:"80px",background:"white"}},{default:n(()=>[a(m,{span:21,offset:1},{default:n(()=>[a(y,{current:e.currentStep},{default:n(()=>[a(f,{status:e.currencyStepStatus},{title:n(()=>[p(r(e.$t("setup_company.currency")),1)]),description:n(()=>[P("span",null,r(e.$t("setup_company.add_first_currency")),1)]),_:1},8,["status"]),a(f,{status:e.companySettingStepStatus},{title:n(()=>[p(r(e.$t("setup_company.company_settings")),1)]),description:n(()=>[P("span",null,r(e.$t("setup_company.set_company_basic_settings")),1)]),_:1},8,["status"])]),_:1},8,["current"]),a(k),e.appDetails&&e.appDetails.app&&e.appDetails.app.name?(d(),E(R,{key:0},[e.currentStep==0?(d(),E(R,{key:0},[a(i,{type:"primary",onClick:e.addCurrency},{default:n(()=>[a(v),p(" "+r(e.$t("currency.add")),1)]),_:1},8,["onClick"]),a(C,{class:"mb-40",ref:"currencyTableRef",showFilter:!1,onAddOrEditSuccess:e.currencyAddSuccess},null,8,["onAddOrEditSuccess"])],64)):A("",!0),e.currentStep==1?(d(),w(S,{key:1,class:"mb-40",ref:"companySettingRef",showSubmitButton:!1,onUpdateSuccess:e.companySettingUpdated},null,8,["onUpdateSuccess"])):A("",!0)],64)):A("",!0)]),_:1})]),_:1}),a(c,{class:"mt-10"},{default:n(()=>[a(m,{span:20,offset:1},{default:n(()=>[P("div",ff,[a(T,null,{default:n(()=>[e.currentStep>=0&&e.currentStep!=0?(d(),w(i,{key:0,type:"primary",style:{backgroundColor:"#faad14",border:"#faad14"},onClick:e.goBack},{default:n(()=>[a(U),p(" "+r(e.$t("setup_company.previous_step")),1)]),_:1},8,["onClick"])):A("",!0),e.currentStep<1?(d(),w(i,{key:1,type:"primary",onClick:e.goNext,disabled:e.currentStep>=e.correctStep},{default:n(()=>[p(r(e.$t("setup_company.next_step"))+" ",1),a($)]),_:1},8,["onClick","disabled"])):A("",!0),e.currentStep==1&&e.companySettingRef?(d(),w(i,{key:2,type:"primary",style:{backgroundColor:"#52c41a",border:"#52c41a"},onClick:e.submitCompanySetting,loading:e.companySettingRef.loading},{default:n(()=>[a(O),p(" "+r(e.$t("setup_company.save_finish_setup")),1)]),_:1},8,["onClick","loading"])):A("",!0)]),_:1})])]),_:1})]),_:1})]),_:1}),a(M,{open:e.showFinalModal,"onUpdate:open":s[0]||(s[0]=Y=>e.showFinalModal=Y),maskClosable:!1,closable:!1,footer:null,centered:""},{default:n(()=>[a(F,null,{title:n(()=>[e.setupCompleted?(d(),E("span",gf,r(e.$t("setup_company.setup_complete_message")),1)):(d(),E("span",hf,r(e.$t("setup_company.setup_running_message")),1))]),icon:n(()=>[e.setupCompleted?(d(),w(L,{key:0})):(d(),w(q,{key:1}))]),extra:n(()=>[e.setupCompleted?(d(),w(i,{key:0,type:"primary",style:{backgroundColor:"#52c41a",border:"#52c41a"},onClick:e.goToDashboard},{default:n(()=>[a(K),p(" "+r(e.$t("setup_company.go_to_dashboard")),1)]),_:1},8,["onClick"])):(d(),w(j,{key:1,style:{fontSize:"38px",color:"#5254cf"},spin:""}))]),_:1})]),_:1},8,["open"])]),_:1})]),_:1})}const yf=z(pf,[["render",bf]]),pt=[{path:"/admin/setup",component:yf,name:"admin.setup_app.index",meta:{requireAuth:!0,menuParent:"",menuKey:"setup_company"}}],za=window.config.app_type,hn=window.config.modules,vf=()=>{var e=re.state.auth.appSetting;return e.x_currency_id!=null},kf=()=>{var e=re.state.auth.appSetting;return!(e.x_currency_id==null||e.white_label_completed==!1)},Je=il({history:rl(),routes:[{path:"",redirect:"/admin/login"},...So,...ss,...Ui,...z_,...Cu,...dm,...Pm,...Xm,...x_,...ju,...xu],scrollBehavior:()=>({left:0,top:0})}),_t=za=="saas"?"superadmin":"";if(za=="saas"){const e=Da(Object.assign({}),`../../${_t}/router/index.js`),s=Da(Object.assign({}),`../../${_t}/router/admin/index.js`);Promise.all([e,s]).then(([u,l])=>{u.default.forEach(h=>Je.addRoute(h)),l.default.forEach(h=>Je.addRoute(h)),pt.forEach(h=>Je.addRoute(h))})}else pt.forEach(e=>Je.addRoute(e));function ma(){var e=["Error","Error!","error","front/logout","3726fBkwPg","Don't try to null it... otherwise it may cause error on your server.","front/isLoggedIn","superadmin.setup_app.index","name","16UdzoTV","beforeEach","non-saas","charAt","98892TmXabr","front.homepage","2991940NwEOsn","host","modules","commit","permission","post","superadmin","state","getters","admin","3170fbcWrv","push","auth/logout","check","auth/updateActiveModules","appModule","url","auth/updateAppChecking","bottomRight","1KRzCTa","is_main_product_valid","module","1120136xZeABk","verify.main",".settings.modules.index","app_type","auth","2406348cnLgms","setup_app","then","798610CrmFAn","verified_name","6026548jVzBWK","dispatch","is_superadmin","requireAuth","requireUnauth","catch","Modules Not Verified","value","21OEOJJd","Saas","forEach","meta","admin.dashboard.index","config","envato","saas","location","auth/isLoggedIn","admin.login","multiple_registration","superadmin.dashboard.index","user","split","stock",".com/","admin.setup_app.index","length","codeifly","https://"];return ma=function(){return e},ma()}var ze=oa;(function(e,s){for(var u=oa,l=e();[];)try{var h=parseInt(u(391))/1*(parseInt(u(402))/2)+parseInt(u(370))/3*(parseInt(u(366))/4)+parseInt(u(382))/5*(-parseInt(u(361))/6)+parseInt(u(412))/7*(-parseInt(u(394))/8)+-parseInt(u(399))/9+parseInt(u(372))/10+parseInt(u(404))/11;if(h===s)break;l.push(l.shift())}catch{l.push(l.shift())}})(ma,297086);function oa(e,s){var u=ma();return oa=function(l,h){l=l-349;var b=u[l];return b},oa(e,s)}const ft=(e,s,u)=>{var l=oa,h=window[l(417)].app_type=="non-saas"?l(381):l(378);const b=e[l(365)][l(350)](".");if(b[l(354)]>0&&b[0]==l(378))e[l(415)][l(407)]&&re[l(380)][l(421)]&&re.state.auth[l(349)]&&!re[l(379)][l(398)][l(349)].is_superadmin?(re[l(405)](l(384)),u({name:l(422)})):e[l(415)].requireAuth&&kf()==![]&&b[1]!=l(400)?u({name:l(364)}):e[l(415)][l(407)]&&!re[l(380)][l(421)]?u({name:"admin.login"}):e.meta[l(408)]&&re.getters[l(421)]?u({name:l(424)}):u();else if(b[l(354)]>0&&b[0]==l(381)&&re[l(379)][l(398)]&&re[l(379)][l(398)][l(349)]&&re[l(379)][l(398)][l(349)][l(406)])u({name:l(424)});else if(b[l(354)]>0&&b[0]==l(381))if(e.meta[l(407)]&&!re[l(380)]["auth/isLoggedIn"])re[l(405)](l(384)),u({name:l(422)});else if(e[l(415)][l(407)]&&vf()==![]&&b[1]!=l(400))u({name:l(353)});else if(e[l(415)].requireUnauth&&re.getters[l(421)])u({name:l(416)});else if(e[l(365)]==h+l(396))re.commit(l(389),![]),u();else{var m=e[l(415)].permission;b[1]==l(351)&&(m=Et(e[l(415)][l(376)](e),"-","_")),!e[l(415)][l(376)]||zt(m,re[l(379)][l(398)][l(349)])?u():u({name:l(416)})}else b[l(354)]>0&&b[0]=="front"&&e.meta[l(407)]&&!re[l(380)][l(363)]?(re[l(405)](l(360)),u({name:l(371)})):u()};var He=["e","L","a","r","d","P","o"],la=""+He[1]+He[0]+He[2]+He[4]+He[5]+He[3]+He[6];window.config[ze(397)]=="saas"&&(la+=ze(413));var Qe=[{verified_name:la,value:![]}];hn[ze(414)](e=>{var s=ze;Qe[s(383)]({verified_name:e,value:![]})});const wf=()=>Ke(Qe,["value",![]]),Cf=(e,s,u)=>{var l=ze;return e[l(354)]!=5||s[l(354)]!=8||u.length!=6?![]:e[l(369)](3)!="c"||e[l(369)](4)!="k"||e[l(369)](0)!="c"||e[l(369)](1)!="h"||e[l(369)](2)!="e"?![]:s[l(369)](2)!="d"||s[l(369)](3)!="e"||s[l(369)](4)!="i"||s[l(369)](0)!="c"||s[l(369)](1)!="o"||s.charAt(5)!="f"||s.charAt(6)!="l"||s[l(369)](7)!="y"?![]:u.charAt(2)!="v"||u[l(369)](3)!="a"||u.charAt(0)!="e"||u.charAt(1)!="n"||u[l(369)](4)!="t"||u[l(369)](5)!="o"?![]:!![]},gt=e=>{var s=ze;return e.charAt(19)!="i"||e.charAt(13)!="o"||e[s(369)](9)!="n"||e.charAt(16)!="o"||e[s(369)](22)!="y"||e[s(369)](11)!="a"||e[s(369)](18)!="e"||e[s(369)](21)!="l"||e[s(369)](10)!="v"||e.charAt(20)!="f"||e[s(369)](12)!="t"||e[s(369)](17)!="d"||e.charAt(8)!="e"||e[s(369)](15)!="c"||e[s(369)](26)!="m"||e.charAt(24)!="c"||e.charAt(25)!="o"?![]:!![]};Je[ze(367)]((e,s,u)=>{var l=ze,h=l(418),b=l(355),m=l(385),i={modules:window.config[l(374)]};if(e[l(415)]&&e[l(415)][l(387)]&&(i[l(393)]=e.meta[l(387)],!Ee(hn,e[l(415)].appModule)&&u({name:"admin.login"})),!Cf(m,b,h))Modal.error({title:l(358),content:"Don't try to null it... otherwise it may cause error on your server."});else{var c=window[l(417)][l(397)]==l(368)?l(381):l(378);if(wf()!==void 0&&e[l(365)]&&e.name!="verify.main"&&e[l(365)]!=c+l(396)){var _=l(356)+h+"."+b+l(352)+m;qe({method:l(377),url:_,data:{verified_name:la,...i,domain:window[l(420)][l(373)]},timeout:4e3})[l(401)](g=>{var f=l;if(!gt(g.config[f(388)]))Modal.error({title:f(358),content:f(362)});else{re[f(375)](f(389),![]);const y=g.data;if(y.main_product_registered&&(Qe[f(414)](k=>{var v=f;k[v(403)]==la&&(k[v(411)]=!![])}),Qe[f(414)](k=>{var v=f;if(Ee(y.modules_not_registered,k[v(403)])||Ee(y.multiple_registration_modules,k.verified_name)){if(k[v(403)]!=la){var C=[...window[v(417)][v(374)]],S=ht(C,function(U){return U!=k.verified_name});re[v(375)](v(386),S),window.config[v(374)]=S}k[v(411)]=![]}else k[v(411)]=!![]})),y[f(392)])if(!y.main_product_registered||y[f(423)])u({name:f(395)});else if(e[f(415)]&&e[f(415)][f(387)]&&Ke(Qe,{verified_name:e[f(415)][f(387)],value:![]})!==void 0){Se[f(359)]({placement:f(390),message:f(357),description:f(410)});const k=za==f(419)?"superadmin":f(381);u({name:k+".settings.modules.index"})}else ft(e,s,u)}})[l(409)](g=>{var f=l;gt(g.toJSON().config[f(388)])?(Qe[f(414)](y=>{var k=f;y[k(411)]=!![]}),re.commit(f(389),![]),u()):Modal.error({title:f(358),content:"Don't try to null it... otherwise it may cause error on your server."})})}else ft(e,s,u)}});const na=Je;const Sf=x({props:{visible:{default:!1},title:{default:""},lead:{default:{}}},emits:["close"],components:{UnorderedListOutlined:ul,PhoneOutlined:Pa,FileTextOutlined:fa,LeadLogTable:La,LeadNotesTable:qa},setup(e,{emit:s}){const{formatTimeDuration:u}=Z(),{t:l}=Q(),h=I(l("lead.lead_details")),b=I("lead_data");return{drawerTitle:h,formatTimeDuration:u,activeTabKey:b,onClose:()=>{b.value="lead_data",s("close")},drawerWidth:window.innerWidth<=991?"90%":"60%"}}});function $f(e,s,u,l,h,b){const m=o("a-descriptions-item"),i=o("a-descriptions"),c=o("UnorderedListOutlined"),_=o("a-tab-pane"),g=o("PhoneOutlined"),f=o("LeadLogTable"),y=o("FileTextOutlined"),k=o("LeadNotesTable"),v=o("a-tabs"),C=o("a-drawer");return d(),w(C,{title:e.drawerTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},maskClosable:!1,onClose:e.onClose,destroyOnClose:!0},{default:n(()=>[a(i,{title:e.$t("common.basic_details")},{default:n(()=>[a(m,{label:e.$t("lead.reference_number")},{default:n(()=>[p(r(e.lead&&e.lead.reference_number?e.lead.reference_number:"-"),1)]),_:1},8,["label"]),a(m,{label:e.$t("lead.campaign")},{default:n(()=>[p(r(e.lead&&e.lead.campaign?e.lead.campaign.name:"-"),1)]),_:1},8,["label"]),a(m,{label:e.$t("campaign.first_actioner")},{default:n(()=>[p(r(e.lead&&e.lead.first_actioner&&e.lead.first_actioner.name?e.lead.first_actioner.name:"-"),1)]),_:1},8,["label"]),a(m,{label:e.$t("campaign.last_actioner")},{default:n(()=>[p(r(e.lead&&e.lead.last_actioner&&e.lead.last_actioner.name?e.lead.last_actioner.name:"-"),1)]),_:1},8,["label"]),a(m,{label:e.$t("lead.call_duration")},{default:n(()=>[p(r(e.lead&&e.lead.time_taken?e.formatTimeDuration(e.lead.time_taken):"-"),1)]),_:1},8,["label"])]),_:1},8,["title"]),a(v,{activeKey:e.activeTabKey,"onUpdate:activeKey":s[0]||(s[0]=S=>e.activeTabKey=S),class:"mt-20"},{default:n(()=>[a(_,{key:"lead_data"},{tab:n(()=>[P("span",null,[a(c),p(" "+r(e.$t("lead.lead_data")),1)])]),default:n(()=>[e.lead&&e.lead.lead_data&&e.lead.lead_data.length>0?(d(),w(i,{key:0,class:"mt-10"},{default:n(()=>[(d(!0),E(R,null,X(e.lead.lead_data,S=>(d(),w(m,{key:S.id},{label:n(()=>[p(r(S.field_name),1)]),default:n(()=>[p(" "+r(S.field_value?S.field_value:"-"),1)]),_:2},1024))),128))]),_:1})):A("",!0)]),_:1}),a(_,{key:"call_logs"},{tab:n(()=>[P("span",null,[a(g),p(" "+r(e.$t("menu.call_logs")),1)])]),default:n(()=>[a(f,{leadId:e.lead.x_lead_id,showLeadDetails:!1,showTableSearch:!1,showAction:!1},null,8,["leadId"])]),_:1}),a(_,{key:"notes"},{tab:n(()=>[P("span",null,[a(y),p(" "+r(e.$t("menu.lead_notes")),1)])]),default:n(()=>[a(k,{leadId:e.lead.xid,showAddButton:!!(e.lead&&e.lead.campaign&&e.lead.campaign.status!="completed")},null,8,["leadId","showAddButton"])]),_:1})]),_:1},8,["activeKey"])]),_:1},8,["title","width","open","onClose"])}const Df=z(Sf,[["render",$f]]),Af=x({setup(){return{}}}),Tf={style:{padding:"10px 16px",background:"white"},class:"mb-20"};function Ef(e,s,u,l,h,b){return d(),E("div",Tf,[oe(e.$slots,"default")])}const Of=z(Af,[["render",Ef]]),Uf=x({setup(){return{}}}),Pf={class:"dashboard-page-content-container"};function If(e,s,u,l,h,b){return d(),E("div",Pf,[oe(e.$slots,"default")])}const Mf=z(Uf,[["render",If]]);async function Ff(){re.getters["auth/isLoggedIn"]&&re.dispatch("auth/updateUser"),re.dispatch("auth/updateGlobalSetting"),re.dispatch("auth/updateApp"),re.dispatch("auth/updateAllLangs"),re.commit("auth/updateActiveModules",window.config.modules),re.dispatch("auth/updateVisibleSubscriptionModules");const e=ml(xl),s=zc({legacy:!1,globalInjection:!0,locale:re.state.auth.lang,warnHtmlMessage:!1});await Hc(s,re.state.auth.lang),e.use(s),e.use(cl),e.use(pl),e.use(re),e.use(_l),e.component("ViewLeadDetails",Df);const u=window.config.installed_modules,l=[];u.forEach(h=>{const b=h.verified_name,m=Da(Object.assign({}),`../../Modules/${b}/Resources/assets/js/${b}.js`);l.push(m)}),Promise.all(l).then(h=>{h.forEach(b=>{e.use(b.default,{routes:na,store:re})}),na.addRoute({path:"/:catchAll(.*)",redirect:"/"}),e.use(na)}),e.component("admin-page-filters",Of),e.component("admin-page-table-content",Mf),window.i18n=s,na.isReady().then(()=>{e.mount("#app")})}Ff();export{cn as C,ka as L,Wt as R,Qt as S,z as _,Xl as a,Z as c,Hc as l};
